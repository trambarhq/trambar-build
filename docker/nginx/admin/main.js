webpackJsonp([6],[,,,,function(e,t,r){"use strict";function n(e){this.languageCode=e.getLanguageCode(),this.lang=this.languageCode.substr(0,2),this.directory=e.getDirectory(),this.translate=function(t){return t instanceof Object?e.pick(t):e.translate.apply(e,arguments)},this.pick=function(t,r){return e.pick(t,r)},this.name=function(t,r,n){var i=e.pick(t,n),s=new String(i||"");return s.gender=r,s},this.change=function(t){return e.change(t)}}e.exports=n},,function(e,t,r){"use strict";function n(e){this.mode=e.getMode(),this.modes=e.getModes(),this.details=e.getDetails(),this.change=function(t){return e.change(t)},this.isAboveMode=function(e){var t=_.indexOf(this.modes,e);return _.indexOf(this.modes,this.mode)>=t},this.isBelowMode=function(e){return!this.isAboveMode(e)},this.getImageUrl=function(t,r){return e.getImageUrl(t,r)},this.getImageFile=function(t){return e.getImageFile(t)},this.getVideoUrl=function(t,r){return e.getVideoUrl(t,r)},this.getAudioUrl=function(t,r){return e.getAudioUrl(t,r)},this.getUrl=function(t,r){return e.getUrl(t,r)}}e.exports=n},,,,function(e,t,r){"use strict";function n(e,t){t||(t={}),this.context=t;var r=this;this.find=function(r){return r=i(t,r),e.find(r)},this.findOne=function(e){return e=s.extend({expected:1},e),r.find(e).then(function(e){return e[0]||null})},this.save=function(r,n){return r=i(t,r),e.save(r,n)},this.saveOne=function(e,t){return r.save(e,[t]).then(function(e){return e.length>0?e[0]:null})},this.remove=function(r,n){return r=i(t,r),e.remove(r,n)},this.removeOne=function(e,t){return r.remove(e,[t]).then(function(e){return e.length>0?e[0]:null})},this.use=function(){var r={};s.assign(r,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return s.each(a,function(e){s.assign(r,e)}),new n(e,r)},this.start=function(r){return r=i(t,r),e.start(r)},this.beginAuthorization=function(r){return e.beginAuthorization(t,r)},this.checkAuthorizationStatus=function(){return e.checkAuthorizationStatus(t)},this.hasAuthorization=function(){return e.hasAuthorization(t)},this.addAuthorization=function(r){e.addAuthorization(t,r)},this.submitPassword=function(r,n){return e.submitPassword(t,r,n)},this.endAuthorization=function(){return e.endAuthorization(t)},this.getOAuthUrl=function(r,n){return e.getOAuthUrl(t,r,n)}}function i(e,t){return s.assign({},e,t)}var s=r(1);r(13),r(68);e.exports=n},function(e,t,r){"use strict";function n(e){this.url=e.getUrl(),this.path=s.replace(this.url,/[?#].*/,""),this.component=e.getComponent(),this.parameters=e.getParameters(),this.query=e.getQuery(),this.hash=e.getHash();var t=[],r=this;this.change=function(t,n){if("string"!=typeof t)throw new Error("Invalid argument");return r.ask(t,!0).then(function(r){return!!r&&e.change(t,n)})},this.find=function(t,r){return e.find(t,r)},this.push=function(t,r){var n=e.find(t,r);return this.change(n,!1)},this.replace=function(t,r){var n=e.find(t,r);return this.change(n,!0)},this.loosen=function(){e.loosen()},this.ask=function(e,r){return r?a.reduce(t,function(t,r){try{if(!t)return!1;var n=r(e,!0);return a.resolve(n)}catch(e){return console.error(e),!0}},!0).then(function(e){return e}):s.reduce(t,function(e,t){try{if(!e)return!1;var r=t(!1);if("boolean"!=typeof r)throw new Error("Callback passed to keep() should return a boolean when interactive (2nd argument) is true");return r}catch(e){return console.error(e),!0}},!0)},this.keep=function(e){t.push(e)},this.free=function(e){s.pull(t,e)}}function i(e){var t=o[e];if(!t){var r=[],n=e.replace(/(:\w+)/g,function(e){return r.push(e),"([^\\/]+)"});t=o[e]=new RegExp("^"+n),t.names=r}return t}var s=("function"==typeof Symbol&&Symbol.iterator,r(1)),a=r(13);e.exports=n,n.match=function(e,t,r){for(var n=0;n<t.length;n++){var a=i(t[n]),o=a.exec(e);if(o){var l={};return s.each(a.names,function(e,t){l[e.substr(1)]=o[t+1]}),r&&(l=r(l)),l&&(l.match=o[0]),l}}},n.prototype.toString=function(){return this.url};var o={}},,,,,function(e,t,r){"use strict";function n(e){if(!this)return new n(e);var t=this,r={};_.forIn(e,function(e,n){var i=function(e){if(!(arguments.length>0))return t[n];t[n]=e};r[n]=i}),this.setters=r,_.forIn(e,function(e,r){t[r]=null})}e.exports=n},,function(e,t,r){"use strict";function n(e){return e=i.clone(e),e.className?e.className="push-button "+e.className:e.className="push-button",s.createElement("button",e,e.children)}var i=r(1),s=r(0);e.exports=n,r(544),n.defaultProps={className:"submit"}},,,,,function(e,t,r){"use strict";var n=(r(1),r(0)),i=n.PropTypes,s=r(16),a=r(11),o=r(4),l=r(6),c=r(33),u=r(27);e.exports=n.createClass({displayName:"DataLossWarning",mixins:[c],propTypes:{route:i.instanceOf(a).isRequired,locale:i.instanceOf(o).isRequired,theme:i.instanceOf(l).isRequired,changes:i.bool},getInitialState:function(){return this.components=s({confirmation:u}),{}},componentWillReceiveProps:function(e){this.props.changes!==e.changes&&(e.changes?e.route.keep(this.confirmRouteChange):e.route.free(this.confirmRouteChange))},render:function(){var e=this.components.setters,t={ref:e.confirmation,locale:this.props.locale,theme:this.props.theme};return n.createElement(u,t)},confirmRouteChange:function(){var e=this.props.locale.translate,t=e("confirmation-data-loss");return this.components.confirmation.ask(t)}})},function(e,t,r){"use strict";function n(e,t){void 0===t&&(t=null);var r=i(e);return function(){return null!=arguments[0]?r.apply(null,arguments):t}}var i=r(396);e.exports=n},,,function(e,t,r){"use strict";var n=(r(1),r(13)),i=r(0),s=i.PropTypes,a=r(4),o=r(6),l=r(33),c=r(226);e.exports=i.createClass({displayName:"ActionConfirmation",mixins:[l],propTypes:{locale:s.instanceOf(a).isRequired,theme:s.instanceOf(o).isRequired},getInitialState:function(){return{showing:!1,rendering:!1,message:null,resolve:null,promise:null}},render:function(){if(!this.state.rendering)return null;var e=(this.props.locale.translate,{show:this.state.showing,dangerous:!0,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleConfirm,onCancel:this.handleCancel});return i.createElement(c,e,this.state.message)},ask:function(e,t){if("boolean"==typeof t){if(this.state.promise){var r=this.state.promise;return t?this.handleConfirm():this.handleCancel(),r}return n.resolve(t)}if(!this.state.promise){var i,r=new n(function(e){i=e});return this.setState({showing:!0,rendering:!0,message:e,resolve:i,promise:r}),r}this.setState({message:e})},askSeries:function(e,t){var r=this;return n.reduce(e,function(e,n,i){return!!e&&r.ask(n,t?t[i]:void 0)},!0)},handleConfirm:function(e){var t=this.state.resolve;this.setState({showing:!1,rendering:!1,resolve:null,promise:null},function(){t&&t(!0)})},handleCancel:function(e){var t=this,r=this.state.resolve;this.setState({showing:!1,resolve:null,promise:null},function(){r&&r(!1),setTimeout(function(){t.state.showing||t.setState({rendering:!1})})})}})},,,function(e,t,r){"use strict";function n(e,t){if(/https?:/.test(e)){e=s.trim(e.replace(/\?.*/,""));var r=s.filter(e.split("/"));return r[r.length-1]}return e}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=r(1),a=r(0),o=a.PropTypes,l=r(17),c=r(24),u=r(16),d=r(151),p=r(249),h=r(10),m=r(11),f=r(4),g=r(6),v=r(44),b=r(48),y=r(88),C=r(18),E=r(31),k=r(54),w=r(42),x=(r(55),r(56)),S=r(108),R=r(69),O=r(107),N=r(85),j=r(27),T=r(23);r(528),e.exports=l.createClass({displayName:"UserSummaryPage",propTypes:{database:o.instanceOf(h).isRequired,route:o.instanceOf(m).isRequired,locale:o.instanceOf(f).isRequired,theme:o.instanceOf(g).isRequired,payloads:o.instanceOf(v).isRequired},statics:{parseUrl:function(e,t,r){return m.match(e,["/users/:user/","/projects/:project/members/:user/?"],function(e){return"new"!==e.user&&(e.user=s.strictParseInt(e.user)),e.project&&(e.project=s.strictParseInt(e.project)),e.edit=!!t.edit,e})},getUrl:function(e){var t,r;return t=e.project?"/projects/"+e.project+"/members/"+e.user+"/":"/users/"+e.user+"/",e.edit&&(r={edit:1}),{path:t,query:r,hash:void 0}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),i=this.props.route!==t.route?100:1e3,s={system:null,user:null,roles:null,project:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads};return e.show(a.createElement(P,s),i),n.start().then(function(e){var t={};return n.findOne({table:"system",criteria:t})}).then(function(e){s.system=e}).then(function(){if("new"!==r.user){var e={id:r.user};return n.findOne({table:"user",criteria:e,required:!0})}}).then(function(t){return s.user=t,e.show(a.createElement(P,s))}).then(function(){var e={};return n.find({table:"role",criteria:e})}).then(function(t){return s.roles=t,e.show(a.createElement(P,s))}).then(function(){if(r.project){var e={id:r.project};return n.findOne({table:"project",criteria:e,required:!0})}}).then(function(t){return s.project=t,e.show(a.createElement(P,s))}).then(function(){if(s.project&&s.user)return b.loadUserStatistics(n,s.project,[s.user]).then(function(e){return e[s.user.id]})}).then(function(e){return s.statistics=e,a.createElement(P,s)})}});var P=e.exports.Sync=a.createClass({displayName:"UserSummaryPage.Sync",propTypes:{system:o.object,user:o.object,roles:o.arrayOf(o.object),project:o.object,statistics:o.object,database:o.instanceOf(h).isRequired,route:o.instanceOf(m).isRequired,locale:o.instanceOf(f).isRequired,theme:o.instanceOf(g).isRequired,payloads:o.instanceOf(v).isRequired},getInitialState:function(){return this.components=u({confirmation:j}),{newUser:null,hasChanges:!1,showingSocialLinks:!1,saving:!1,adding:!1,problems:{}}},getUser:function(e){return!this.isEditing()||e&&"current"!==e?this.props.user||I:this.state.newUser||this.props.user||I},getUserProperty:function(e,t){var r=this.getUser(t);return s.get(r,e)},setUserProperty:function(e,t){var r=this.getUser("current"),n=s.decoupleSet(r,e,t);if("details.name"===e){var i=y.fromPersonalName(r.details.name),a=y.fromPersonalName(n.details.name);r.username&&r.username!==i||(n.username=a)}s.size(n.username)>128&&(n.username=n.username.substr(0,128));var o=!0;s.isEqual(n,this.props.user)&&(n=null,o=!1),this.setState({newUser:n,hasChanges:o})},findProblems:function(){var e={},t=this.getUser();return t.username||(e.username="validation-required"),t.type||(e.type="validation-required"),e},isCreating:function(e){return"new"===this.props.route.parameters.user},isEditing:function(e){return e=e||this.props,this.isCreating()||e.route.query.edit},isProjectMember:function(e){return e=e||this.props,!!e.route.parameters.project},setEditability:function(t,r){var n=this.props.route;if(!this.isCreating()||t||r){var i=s.clone(n.parameters);return i.edit=t,r&&(i.user=r.id),n.replace(e.exports,i)}return this.returnToList()},returnToList:function(){var e=this.props.route;if(e.parameters.project){var t={project:e.parameters.project};return e.push(r(80),t)}return e.push(r(84))},startNew:function(){var t=this.props.route,r=s.clone(t.parameters);return r.user="new",t.replace(e.exports,r)},getInputLanguages:function(){return s.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newUser:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.isProjectMember(),n=this.getUser(),i=t(n.details.name);return a.createElement("div",{className:"user-summary-page"},this.renderButtons(),a.createElement("h2",null,e(r?"user-summary-member-$name":"user-summary-$name",i)),this.renderForm(),this.renderSocialLinksToggle(),this.renderSocialLinksForm(),this.renderInstructions(),this.renderChart(),a.createElement(j,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),a.createElement(T,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate,t=this.isProjectMember();if(this.isEditing())return a.createElement("div",{className:"buttons"},a.createElement(C,{onClick:this.handleCancelClick},e("user-summary-cancel"))," ",a.createElement(C,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e(t?"user-summary-member-save":"user-summary-save")));var r,n=this.props.user,i=!n||!n.deleted&&!n.disabled;return r=i?this.state.adding?"add":"return":"reactivate",a.createElement("div",{className:"buttons"},a.createElement(E,{preselected:r},a.createElement("option",{name:"return",onClick:this.handleReturnClick},e(t?"user-summary-member-return":"user-summary-return")),a.createElement("option",{name:"add",onClick:this.handleAddClick},e("user-summary-add")),a.createElement("option",{name:"disable",disabled:!i,separator:!0,onClick:this.handleDisableClick},e("user-summary-disable")),a.createElement("option",{name:"delete",disabled:!i,onClick:this.handleDeleteClick},e("user-summary-delete")),a.createElement("option",{name:"reactivate",hidden:i,onClick:this.handleReactivateClick},e("user-summary-reactivate")))," ",a.createElement(C,{className:"emphasis",onClick:this.handleEditClick},e(t?"user-summary-member-edit":"user-summary-edit")))},renderForm:function(){return a.createElement("div",{className:"form"},this.renderNameInput(),this.renderUsernameInput(),this.renderEmailInput(),this.renderPhoneInput(),this.renderProfileImageSelector(),this.renderTypeSelector(),this.renderRoleSelector(),this.renderVisiblityOptions())},renderNameInput:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=t(this.getUserProperty("details.name")),n={id:"name",value:r,locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing()};return a.createElement(w,n,e("user-summary-name"))},renderUsernameInput:function(){var e=this.props.locale.translate,t={id:"username",value:this.getUserProperty("username"),locale:this.props.locale,onChange:this.handleUsernameChange,readOnly:!this.isEditing()},r=this.state.problems;return a.createElement(w,t,e("user-summary-username"),a.createElement(N,null,e(r.username)))},renderEmailInput:function(){var e=this.props.locale.translate,t={id:"email",value:this.getUserProperty("details.email"),locale:this.props.locale,onChange:this.handleEmailChange,readOnly:!this.isEditing()},r=this.state.problems;return a.createElement(w,t,e("user-summary-email"),a.createElement(N,null,e(r.email)))},renderPhoneInput:function(){var e=this.props.locale.translate,t={id:"phone",value:this.getUserProperty("details.phone"),locale:this.props.locale,onChange:this.handlePhoneChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-phone"))},renderProfileImageSelector:function(){var e=this.props.locale.translate,t={purpose:"profile-image",desiredWidth:500,desiredHeight:500,resources:this.getUserProperty("details.resources"),database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleProfileImageChange,readOnly:!this.isEditing()};return a.createElement(S,t,e("user-summary-profile-image"))},renderTypeSelector:function(){var e=this.props.locale.translate,t=this.getUserProperty("type","current"),r=this.getUserProperty("type","original"),n=s.map(d,function(n){return{name:n,selected:t===n,previous:r===n,children:e("user-summary-type-"+n)}}),o={onOptionClick:this.handleTypeOptionClick,readOnly:!this.isEditing()},l=this.state.problems;return a.createElement(x,o,a.createElement("label",null,e("user-summary-type"),a.createElement(N,null,e(l.type))),s.map(n,function(e,t){return a.createElement("option",i({key:t},e))}))},renderRoleSelector:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.getUserProperty("role_ids","current")||[],n=this.getUserProperty("role_ids","original")||[],o=!!this.getUserProperty("id"),l=_(this.props.roles,this.props.locale),c=s.concat({name:"none",selected:s.isEmpty(r),previous:o?s.isEmpty(n):void 0,children:e("user-summary-role-none")},s.map(l,function(e){return{name:String(e.id),selected:s.includes(r,e.id),previous:s.includes(n,e.id),children:t(e.details.title)||t.name}})),u={onOptionClick:this.handleRoleOptionClick,readOnly:!this.isEditing()};return a.createElement(x,u,a.createElement("label",null,e("user-summary-roles")),s.map(c,function(e,t){return a.createElement("option",i({key:t},e))}))},renderVisiblityOptions:function(){var e=this.props.locale.translate,t=this.getUserProperty("hidden","current")||!1,r=this.getUserProperty("hidden","original")||!1,n=!!this.getUserProperty("id"),o=[{name:"show",selected:!1===t,previous:n?!1===r:void 0,children:e("user-summary-visibility-shown")},{name:"hidden",selected:!0===t,previous:!0===t,children:e("user-summary-visibility-hidden")}],l={onOptionClick:this.handleVisibilityOptionClick,readOnly:!this.isEditing()};return a.createElement(x,l,a.createElement("label",null,e("user-summary-visibility")),s.map(o,function(e,t){return a.createElement("option",i({key:t},e))}))},renderSocialLinksToggle:function(){var e=this.props.locale.translate,t=this.state.showingSocialLinks?"angle-double-up":"angle-double-down";return a.createElement("h2",{className:"social-toggle",onClick:this.handleSocialLinksToggleClick},e("user-summary-social-links")," ",a.createElement("i",{className:"fa fa-"+t}))},renderSocialLinksForm:function(){this.props.locale.translate,this.getUser(),this.isEditing();return a.createElement("div",{className:"form social"},a.createElement(R,{open:this.state.showingSocialLinks},this.renderSkypeNameInput(),this.renderSlackTeamInput(),this.renderSlackIdInput(),this.renderIChatInput(),this.renderTwitterInput(),this.renderGithubUrlInput(),this.renderGitlabUrlInput(),this.renderLinkedInUrlInput(),this.renderStackoverflowUrlInput()))},renderSkypeNameInput:function(){var e=this.props.locale.translate,t={id:"skype",value:this.getUserProperty("details.skype_username"),locale:this.props.locale,onChange:this.handleSkypeUsernameChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-skype"))},renderSlackTeamInput:function(){var e=this.props.locale.translate,t={id:"slack-team",value:this.getUserProperty("details.slack_team_id"),locale:this.props.locale,onChange:this.handleSlackTeamIDChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-slack-team"))},renderSlackIdInput:function(){var e=this.props.locale.translate,t={id:"slack-user",value:this.getUserProperty("details.slack_user_id"),locale:this.props.locale,onChange:this.handleSlackUserIDChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-slack"))},renderIChatInput:function(){var e=this.props.locale.translate,t={id:"ichat",value:this.getUserProperty("details.ichat_username"),locale:this.props.locale,onChange:this.handleIchatUsernameChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-ichat"))},renderTwitterInput:function(){var e=this.props.locale.translate,t={id:"twitter",value:this.getUserProperty("details.twitter_username"),locale:this.props.locale,onChange:this.handleTwitterUsernameChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-twitter"))},renderGithubUrlInput:function(){var e=this.props.locale.translate,t={id:"github",value:this.getUserProperty("details.github_url"),locale:this.props.locale,onChange:this.handleGitHubUrlChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-github"))},renderGitlabUrlInput:function(){var e=this.props.locale.translate,t={id:"github",value:this.getUserProperty("details.gitlab_url"),locale:this.props.locale,onChange:this.handleGitlabUrlChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-gitlab"))},renderLinkedInUrlInput:function(){var e=this.props.locale.translate,t={id:"linkedin",value:this.getUserProperty("details.linkedin_url"),locale:this.props.locale,onChange:this.handleLinkedinUrlChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-linkedin"))},renderStackoverflowUrlInput:function(){var e=this.props.locale.translate,t={id:"stackoverflow",value:this.getUserProperty("details.stackoverflow_url"),locale:this.props.locale,onChange:this.handleStackoverflowUrlChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("user-summary-stackoverflow"))},renderInstructions:function(){var e={topic:"user",hidden:!this.isEditing(),locale:this.props.locale};return a.createElement("div",{className:"instructions"},a.createElement(k,e))},renderChart:function(){if(!this.isProjectMember())return null;if(this.isCreating())return null;var e=this.props.locale.translate,t={statistics:this.props.statistics,locale:this.props.locale,theme:this.props.theme};return a.createElement("div",{className:"statistics"},a.createElement(O,t,e("user-summary-statistics")))},changeFlags:function(e){var t=this.props.database.use({schema:"global",by:this}),r=s.assign({},this.props.user,e);return t.saveOne({table:"user"},r)},handleDisableClick:function(e){var t=this,r=this.props.locale.translate,n=r("user-summary-confirm-disable");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({disabled:!0}).then(function(){return t.returnToList()})})},handleDeleteClick:function(e){var t=this,r=this.props.locale.translate,n=r("user-summary-confirm-delete");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(){return t.returnToList()})})},handleReactivateClick:function(e){var t=this,r=this.props.locale.translate,n=r("user-summary-confirm-reactivate");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({disabled:!1,deleted:!1})})},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var r=this.findProblems();if(s.some(r))return void this.setState({problems:r});var n=this.getUser();this.setState({saving:!0,adding:!n.id,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t}),r=t.props.payloads;return r.prepare("global",n).then(function(){return e.start().then(function(i){return e.saveOne({table:"user"},n).then(function(n){return r.reattach("global",n),r.dispatch("global",n).then(function(){return t.setState({hasChanges:!1,saving:!1},function(){return t.setEditability(!1,n)}),null}).then(function(){if(t.props.project){var r=t.props.project.user_ids;if(!s.includes(r,n.id)){var i=s.union(r,[n.id]),a={id:t.props.project.id,user_ids:i};return e.saveOne({table:"project"},a)}}})})})}).catch(function(e){var r={};409===e.statusCode?r.username="validation-duplicate-user-name":(r.general=e.message,console.error(e)),t.setState({problems:r,saving:!1})})})}},handleNameChange:function(e){this.setUserProperty("details.name",e.target.value)},handleUsernameChange:function(e){var t=s.toLower(e.target.value).replace(/\W+/g,"");this.setUserProperty("username",t)},handleEmailChange:function(e){this.setUserProperty("details.email",e.target.value)},handlePhoneChange:function(e){this.setUserProperty("details.phone",e.target.value)},handleProfileImageChange:function(e){this.setUserProperty("details.resources",e.target.value)},handleTypeOptionClick:function(e){this.setUserProperty("type",e.name)},handleRoleOptionClick:function(e){var t=this.getUser(),r=s.slice(t.role_ids);if("none"===e.name)r=[];else{var n=parseInt(e.name);s.includes(r,n)?s.pull(r,n):r.push(n)}this.setUserProperty("role_ids",r)},handleVisibilityOptionClick:function(e){var t="hidden"===e.name;this.setUserProperty("hidden",t)},handleSocialLinksToggleClick:function(e){this.setState({showingSocialLinks:!this.state.showingSocialLinks})},handleSkypeUsernameChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.skype_username",t)},handleSlackUserIDChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.slack_user_id",t)},handleSlackTeamIDChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.slack_team_id",t)},handleIchatUsernameChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.ichat_username",t)},handleTwitterUsernameChange:function(e){var t=n(e.target.value);this.setUserProperty("details.twitter_username",t)},handleLinkedinUrlChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.linkedin_url",t)},handleGitHubUrlChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.github_url",t)},handleGitlabUrlChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.gitlab_url",t)},handleStackoverflowUrlChange:function(e){var t=s.trim(e.target.value);this.setUserProperty("details.stackoverflow_url",t)}}),I={details:{},settings:p.default},_=c(function(e,t){var r=t.pick,n=function(e){return r(e.details.title)||e.name};return s.sortBy(e,n)});c(function(e,t){if(t.role_ids){var r=s.keyBy(e,"id");return s.filter(s.map(t.role_ids,function(e){return r[e]}))}})},function(e,t,r){"use strict";function n(e,t){for(var r=e;r!==document.body.parentNode;r=r.parentNode)if(r===t)return!0;return!1}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=r(0),a=s.PropTypes,o=r(40);r(536),e.exports=s.createClass({displayName:"ComboButton",propType:{preselected:a.string,alert:a.bool},getDefaultProps:function(){return{preselected:void 0,alert:!1}},getInitialState:function(){return{open:!1,selected:this.props.preselected}},componentWillReceiveProps:function(e){this.props.preselected!==e.preselected&&this.setState({selected:e.preselected})},render:function(){return s.createElement("div",{className:"combo-button"},this.renderMainButton(),this.renderSideButton(),this.renderMenu())},renderMainButton:function(){var e=this,t=s.Children.toArray(this.props.children),r=_.find(t,function(t){return t.props.name===e.state.selected});r||(r=_.first(t));var n=_.omit(r.props,"separator");return n.className=n.className?"main "+n.className:"main",this.props.alert&&(n.className+=" alert"),n.onClick||(n.onClick=this.handleSideButtonClick),s.createElement("button",n,r.props.children)},renderSideButton:function(){return s.createElement("button",{className:"side",onClick:this.handleSideButtonClick},s.createElement("i",{className:"fa fa-angle-down"}))},renderMenu:function(){if(!this.state.open)return null;var e=s.Children.toArray(this.props.children);return s.createElement("div",{className:"container"},s.createElement("div",{className:"menu"},_.map(e,this.renderOption)))},renderOption:function(e,t){if(!e.props.name||e.props.hidden)return null;var r={"data-name":e.props.name,className:"option",onClick:this.handleItemClick},n=_.omit(e.props,"name","separator","disabled");return e.props.disabled&&(r.className+=" disabled",r.onClick=null,n.onClick=null),e.props.separator&&(r.className+=" separator"),s.createElement("div",i({key:t},r),s.createElement("div",n,e.props.children))},componentDidUpdate:function(e,t){var r=document.getElementById("app-container");!t.open&&this.state.open?r.addEventListener("mousedown",this.handleBodyMouseDown):t.open&&!this.state.open&&r.removeEventListener("mousedown",this.handleBodyMouseDown)},handleSideButtonClick:function(e){this.setState({open:!this.state.open})},handleItemClick:function(e){var t=e.currentTarget.getAttribute("data-name");this.setState({selected:t,open:!1})},handleBodyMouseDown:function(e){var t=o.findDOMNode(this);n(e.target,t)||this.setState({open:!1})}})},,function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var r in t){var n=e[r];if(t[r]!==n)return!1}return!0}e.exports={shouldComponentUpdate:function(e,t){return!n(this.props,e)||!n(this.state,t)}}},,,,,,,,function(e,t,r){"use strict";(function(t){function n(e,t){return e=a.Children.toArray(e),_.find(e,{type:t})}function i(e){return a.createElement("th",e,e.children,a.createElement("i",{className:"fa fa-chevron-down arrow down"}),a.createElement("i",{className:"fa fa-chevron-up arrow up"}))}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(0),o=a.PropTypes,l=r(69);r(547),e.exports=a.createClass({displayName:"SortableTable",propTypes:{sortColumns:o.arrayOf(o.string).isRequired,sortDirections:o.arrayOf(o.oneOf(["asc","desc"])),expanded:o.bool,expandable:o.bool,selectable:o.bool,onSort:o.func},getInitialState:function(){return{action:null}},componentWillReceiveProps:function(e){this.props.expanded!==e.expanded&&(e.expanded?this.setState({action:"expanding"}):this.setState({action:"collapsing"}))},render:function(){var e=n(this.props.children,"thead"),t=n(this.props.children,"tbody");e&&(e=this.highlightHeading(e)),t&&null!=this.props.expanded&&(t=this.wrapUnselectedRows(t));var r=_.omit(this.props,["sortColumns","sortDirections","expandable","selectable","expanded","onSort"]);return r.onClick=this.handleClick,r.className="sortable-table",this.props.expandable&&(r.className+=" expandable",this.props.expanded?r.className+=" expanded":r.className+=" collapsed"),this.props.selectable&&(r.className+=" selectable"),this.props.className&&(r.className+=" "+this.props.className),a.createElement("table",s({ref:"table"},r),e,t)},highlightHeading:function(e){var t=_.get(this.props.sortColumns,0),r=_.get(this.props.sortDirections,0,"asc"),i=n(e.props.children,"tr"),s=a.Children.toArray(i.props.children);return s=_.map(s,function(e){if(e.props.id===t){var n=e.props.className||"";n&&(n+=" "),n+=r,e=a.cloneElement(e,{className:n})}return e}),i=a.cloneElement(i,{},s),e=a.cloneElement(e,{},[i])},wrapUnselectedRows:function(e){var t=this,r=(this.state.cellHeights,e.props.children);return r=_.map(r,function(e,r){if(!e)return null;if(/\bfixed\b/.test(e.props.className))return e;var n,i=a.Children.toArray(e.props.children),s=e.props.className;return n="expanding"!==t.state.action&&("collapsing"===t.state.action||t.props.expanded),s?s+=" ":s="",s+=n?"expanded":"collapsed",i=_.map(i,function(e,t){var r=a.createElement(l,{open:n},e.props.children);return a.cloneElement(e,{},r)}),a.cloneElement(e,{className:s},i)}),e=a.cloneElement(e,{},r)},componentDidUpdate:function(e,r){var n=this;this.state.action&&t(function(){n.setState({action:null})})},handleClick:function(e){for(var t=(e.target,e.target);t&&"TABLE"!==t.tagName;t=t.parentNode)if("TH"===t.tagName){var r=t.id;if(!r)return;var n=_.slice(this.props.sortColumns),i=_.slice(this.props.sortDirections),s=_.indexOf(n,r);-1!==s&&(n.splice(s,1),i.splice(s,1));var a="asc";0===s&&"asc"===this.props.sortDirections[0]&&(a="desc"),n.unshift(r),i.unshift(a),this.props.onSort&&this.props.onSort({type:"sort",target:this,columns:n,directions:i})}}}),e.exports.TH=i}).call(t,r(142).setImmediate)},function(e,t,r){"use strict";function n(e){var t=["text-field"],r="input",n=_.omit(e,"children","locale");if("textarea"===e.type&&(r=o,n=_.omit(n,"type")),e.readOnly){t.push("readonly");var s=e.locale.translate;n.placeholder=s("text-field-placeholder-none"),n.spellCheck=!1}return n.value=n.value||"",n.value&&!1===n.spellCheck&&(n.value+="\ufeff"),i.createElement("div",{className:t.join(" ")},i.createElement("label",{htmlFor:e.id},e.children),i.createElement(r,n))}var i=r(0),s=i.PropTypes,a=r(4),o=r(152);r(550),e.exports=n,n.defaultProps={type:"text"},n.propTypes={locale:s.instanceOf(a).isRequired}},function(e,t,r){"use strict";function n(e){var t=s.Children.toArray(e.children),r=i.find(t,{type:"window"});return!!(r&&s.Children.count(r.props.children)>0)}var i=r(1),s=r(0),a=s.PropTypes,o=r(16);r(551),e.exports=s.createClass({displayName:"Tooltip",propTypes:{upward:a.bool,leftward:a.bool,disabled:a.bool,ignoreClicks:a.bool},getInitialState:function(){return this.components=o({container:HTMLElement}),{open:!1,live:n(this.props)}},componentWillReceiveProps:function(e){var t=n(e);if(this.state.live!==t||this.props.disabled!==e.disabled){var r=this.state.open&&t&&!e.disabled;this.setState({live:t,open:r})}},render:function(){var e=this.components.setters,t="tooltip";return this.state.live&&!this.props.disabled&&(t+=" live"),this.props.upward&&(t+=" upward"),this.props.leftward&&(t+=" leftward"),this.props.className&&(t+=" "+this.props.className),s.createElement("div",{ref:e.container,className:t},this.renderLabel(),this.renderWindow())},renderLabel:function(){var e=this.findElement("inline");return s.createElement("span",{className:"label",onClick:this.handleLabelClick},e.props.children)},renderWindow:function(){if(!this.state.open)return null;var e=this.findElement("window");return s.createElement("div",{className:"window-container",onClick:this.handleWindowClick},s.createElement("div",{className:"window"},e.props.children))},componentDidUpdate:function(e,t){t.open!==this.state.open&&(this.state.open?document.addEventListener("mousedown",this.handleMouseDown):document.removeEventListener("mousedown",this.handleMouseDown))},componentWillUnmount:function(){this.state.open&&document.removeEventListener("mousedown",this.handleMouseDown)},findElement:function(e){var t=s.Children.toArray(this.props.children);return i.find(t,{type:e})},handleLabelClick:function(e){this.state.live&&!this.props.disabled&&this.setState({open:!this.state.open})},handleMouseDown:function(e){for(var t=!1,r=this.components.container,n=e.target;n;n=n.parentNode)if(n===r){t=!0;break}t||this.setState({open:!1})},handleWindowClick:function(e){this.props.ignoreClicks||this.setState({open:!1})}})},function(e,t,r){"use strict";function n(e){this.uploading=e.getUploadProgress(),this.queue=function(t,r){return e.queue(t,r)},this.find=function(t,r){return e.find(t,r)},this.send=function(t,r){return e.send(t,r)},this.stream=function(t){return e.stream(t)},this.reattach=function(e,t){var r=this,n=_.get(t,"details.resources",[]);_.each(n,function(t){var n=_.pick(t,"payload_id","url","poster_url"),i=r.find(e,n);i&&_.forIn(i,function(e,r){e instanceof Blob&&(t[r]=e)})})},this.prepare=function(e,t,r){var n=this,s=_.get(t,"details.resources",[]);return i.each(s,function(t){if(!t.payload_id){var i=_.get(r,t.type);return n.queue(e,t,i).then(function(e){e&&(t.payload_id=e)})}})},this.dispatch=function(e,t){var r=this,n=_.get(t,"details.resources",[]),s=_.filter(_.map(n,"payload_id"));return i.each(s,function(t){return r.send(e,t),null})},this.inquire=function(e,t){var r=this,n=_.get(t,"details.resources",[]),i=[];if(_.each(n,function(t){if(t.payload_id){var n=r.find(e,{payload_id:t.payload_id});n&&i.push(n)}}),_.isEmpty(i))return null;var s=_.sum(_.map(i,"total")),a=_.sum(_.map(i,"transferred")),o=Math.round(a/s*100)||0,l="uploading";if(100===o){var c=_.filter(i,function(e){return/transcode/.test(e.action)});if(_.isEmpty(c))return null;var u=_.sum(_.map(c,"total")),d=_.sum(_.map(c,function(e){var t=e.total/u;return e.backendProgress*t}));o=Math.round(d),l="transcoding"}return{action:l,progress:o}}}var i=r(13);e.exports=n},,,,function(e,t,r){"use strict";function n(e,t){return d.mapSeries(t,function(t){if(t.deleted)return null;var r=t.name,n={type:"story-date-range",filters:{}};return e.findOne({schema:r,table:"statistics",criteria:n,minimum:0}).then(function(t){if(a(t)){var n=o(t),i={type:"daily-activities",filters:n};return e.find({schema:r,table:"statistics",criteria:i,minimum:0}).then(function(e){return m(e,t)})}})}).then(function(e){var r=u.map(t,"id");return u.zipObject(r,e)})}function i(e,t,r){if(!t)return d.resolve(null);var n=t.name,i=u.filter(r,function(e){return!e.deleted}),s={type:"story-date-range",filters:u.map(i,function(e){return{user_ids:[e.id]}})};return e.find({schema:n,table:"statistics",criteria:s}).then(function(t){t=u.filter(t,a);var r=u.map(t,function(e){return u.map(o(e),function(t){return t.user_ids=e.filters.user_ids,t})}),i=u.flatten(r);if(u.isEmpty(i))return{};var s={type:"daily-activities",filters:i};return e.find({schema:n,table:"statistics",criteria:s}).then(function(e){return u.transform(t,function(t,r){var n=r.filters.user_ids[0],i=u.filter(e,function(e){return e.filters.user_ids[0]===n});t[n]=m(i,r)},{})})})}function s(e,t,r){if(!t)return d.resolve(null);var n=t.name,i=u.filter(r,function(e){return!e.deleted}),s={type:"story-date-range",filters:u.map(i,function(e){return{external_object:u.find(e.external,{type:e.type})}})};return e.find({schema:n,table:"statistics",criteria:s}).then(function(t){t=u.filter(t,a);var i=u.map(t,function(e){return u.map(o(e),function(t){return t.external_object=e.filters.external_object,t})}),s=u.flatten(i);if(u.isEmpty(s))return{};var l={type:"daily-activities",filters:s};return e.find({schema:n,table:"statistics",criteria:l}).then(function(e){return u.transform(t,function(t,n){var i=n.filters.external_object,s=u.filter(e,function(e){return u.isEqual(e.filters.external_object,i)});t[u.find(r,function(e){return u.some(e.external,i)}).id]=m(s,n)},{})})})}function a(e){return e&&!!e.details.start_time&&!!e.details.end_time}function o(e){for(var t=p(e.details.start_time).startOf("month"),r=p(e.details.end_time).endOf("month"),n=t.utcOffset(),i=[],s=t.clone();s<r;s.add(1,"month")){var a=s.toISOString(),o=s.clone().endOf("month").toISOString(),l="["+a+","+o+"]";i.push(l)}return u.map(i,function(e){return{time_range:e,tz_offset:n}})}function l(e,t){var r={total:0};return u.each(e,function(e){u.each(e.details,function(e,n){t&&n.substr(0,7)!==t||u.each(e,function(e,t){r.total+=e,r[t]?r[t]+=e:r[t]=e})})}),r}function c(e){var t={};return u.each(e,function(e){u.assign(t,e.details)}),t}var u=r(1),d=r(13),p=r(22),h=r(24);t.loadProjectStatistics=n,t.loadUserStatistics=i,t.loadRepoStatistics=s;var m=h(function(e,t,r){var n=p().subtract(1,"month").format("YYYY-MM"),i=p().format("YYYY-MM"),s=c(e),a=l(e,n),o=l(e,i),u=l(e),d=t.details.start_time,h=t.details.end_time;if(0===a.total){d.substr(0,7)<=n||(a.total=void 0)}return{range:{start:d,end:h},last_month:a,this_month:o,to_date:u,daily:s}})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(0),a=s.PropTypes,o=r(17),l=r(16),c=r(246),u=r(10),d=r(11),p=r(4),h=r(6),m=r(44),f=r(48),g=r(88),v=r(18),b=r(31),y=r(54),C=r(42),E=r(55),k=r(56),w=r(108),x=r(107),S=r(85),R=r(27),O=r(23);r(517),e.exports=o.createClass({displayName:"ProjectSummaryPage",propTypes:{database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired,payloads:a.instanceOf(m).isRequired},statics:{parseUrl:function(e,t,r){return d.match(e,["/projects/:project/?"],function(e){return"new"!==e.project&&(e.project=i.strictParseInt(e.project)),e.edit=!!t.edit,e})},getUrl:function(e){var t,r="/projects/"+e.project+"/";return e.edit&&(t={edit:1}),{path:r,query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),i=this.props.route!==t.route?100:1e3,a={system:null,project:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads};return e.show(s.createElement(N,a),i),n.start().then(function(e){var t={};return n.findOne({table:"system",criteria:t})}).then(function(e){a.system=e}).then(function(){if("new"!==r.project){var e={id:r.project};return n.findOne({table:"project",criteria:e,required:!0})}}).then(function(t){return a.project=t,e.show(s.createElement(N,a))}).then(function(){if(a.project)return f.loadProjectStatistics(n,[a.project]).then(function(e){return e[a.project.id]})}).then(function(e){return a.statistics=e,s.createElement(N,a)})}});var N=e.exports.Sync=s.createClass({displayName:"ProjectSummaryPage.Sync",propTypes:{system:a.object,project:a.object,statistics:a.object,database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired,payloads:a.instanceOf(m).isRequired},getInitialState:function(){return this.components=l({confirmation:R}),{newProject:null,saving:!1,adding:!1,problems:{}}},getProject:function(e){return!this.isEditing()||e&&"current"!==e?this.props.project||j:this.state.newProject||this.props.project||j},getProjectProperty:function(e,t){var r=this.getProject(t);return i.get(r,e)},setProjectProperty:function(e,t){var r=this.getProject("current"),n=i.decoupleSet(r,e,t);if("details.title"===e){var s=g.fromTitle(r.details.title),a=g.fromTitle(n.details.title);r.name&&r.name!==s||(n.name=a)}i.size(n.name)>128&&(n.name=n.name.substr(0,128));var o=!0;i.isEqual(n,this.props.project)&&(n=null,o=!1),this.setState({newProject:n,hasChanges:o})},findProblems:function(){var e={},t=this.getProject(),r=i.toLower(i.trim(t.name)),n=["global","admin"];return r?i.includes(n,r)&&(e.name="validation-illegal-project-name"):e.name="validation-required",e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.project},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.parameters.edit},setEditability:function(t,r){if(!this.isCreating()||t||r){var n=this.props.route,s=i.clone(n.parameters);return s.edit=t,r&&(s.project=r.id),n.replace(e.exports,s)}this.returnToList()},returnToList:function(){return this.props.route.push(r(67))},startNew:function(){var t=this.props.route,r=i.clone(t.parameters);return r.project="new",t.replace(e.exports,r)},getInputLanguages:function(){return i.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newProject:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.getProject(),n=t(r.details.title)||r.name;return s.createElement("div",{className:"project-summary-page"},this.renderButtons(),s.createElement("h2",null,e("project-summary-$title",n)),this.renderForm(),this.renderInstructions(),this.renderChart(),s.createElement(R,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),s.createElement(O,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return s.createElement("div",{key:"edit",className:"buttons"},s.createElement(v,{onClick:this.handleCancelClick},e("project-summary-cancel"))," ",s.createElement(v,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("project-summary-save")));var t,r=this.props.project,n=!r||!r.deleted&&!r.archived;return t=n?this.state.adding?"add":"return":"restore",s.createElement("div",{key:"view",className:"buttons"},s.createElement(b,{preselected:t},s.createElement("option",{name:"return",onClick:this.handleReturnClick},e("project-summary-return")),s.createElement("option",{name:"add",onClick:this.handleAddClick},e("project-summary-add")),s.createElement("option",{name:"archive",disabled:!n,separator:!0,onClick:this.handleArchiveClick},e("project-summary-archive")),s.createElement("option",{name:"delete",disabled:!n,onClick:this.handleDeleteClick},e("project-summary-delete")),s.createElement("option",{name:"restore",hidden:n,onClick:this.handleRestoreClick},e("project-summary-restore")))," ",s.createElement(v,{className:"emphasis",onClick:this.handleEditClick},e("project-summary-edit")))},renderForm:function(){return s.createElement("div",{className:"form"},this.renderTitleInput(),this.renderNameInput(),this.renderDescriptionInput(),this.renderEmblemSelector(),this.renderMembershipOptions(),this.renderAccessControlOptions())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getProjectProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return s.createElement(E,t,e("project-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getProjectProperty("name"),locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing()},r=this.state.problems;return s.createElement(C,t,e("project-summary-name"),s.createElement(S,null,e(r.name)))},renderDescriptionInput:function(){var e=this.props.locale.translate,t={id:"description",value:this.getProjectProperty("details.description"),availableLanguageCodes:this.getInputLanguages(),type:"textarea",locale:this.props.locale,onChange:this.handleDescriptionChange,readOnly:!this.isEditing()};return s.createElement(E,t,e("project-summary-description"))},renderEmblemSelector:function(){var e=this.props.locale.translate,t={purpose:"project-emblem",desiredWidth:500,desiredHeight:500,resources:this.getProjectProperty("details.resources"),database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleEmblemChange,readOnly:!this.isEditing()};return s.createElement(w,t,e("project-summary-emblem"))},renderMembershipOptions:function(){var e=this.props.locale.translate,t=this.getProjectProperty("settings.membership","current")||{},r=this.getProjectProperty("settings.membership","original")||{},a=!!this.getProjectProperty("id"),o=[{name:"manual",selected:!i.some(t),previous:a?!i.some(r):void 0,children:e("project-summary-new-members-manual")},{name:"allow_user_request",selected:t.allow_user_request,previous:r.allow_user_request,children:e("project-summary-new-members-join-user")},{name:"approve_user_request",selected:t.approve_user_request,previous:r.approve_user_request,hidden:!t.allow_user_request,children:e("project-summary-new-members-auto-accept-user")},{name:"allow_guest_request",selected:t.allow_guest_request,previous:r.allow_guest_request,children:e("project-summary-new-members-join-guest")},{name:"approve_guest_request",selected:t.approve_guest_request,previous:r.approve_guest_request,hidden:!t.allow_guest_request,children:e("project-summary-new-members-auto-accept-guest")}],l={onOptionClick:this.handleMembershipOptionClick,readOnly:!this.isEditing()};return s.createElement(k,l,s.createElement("label",null,e("project-summary-new-members")),i.map(o,function(e,t){return s.createElement("option",n({key:t},e))}))},renderAccessControlOptions:function(){var e=this.props.locale.translate,t=this.getProjectProperty("settings.access_control","current")||{},r=this.getProjectProperty("settings.access_control","original")||{},a=!!this.getProjectProperty("id"),o=[{name:"members_only",selected:!i.some(t),previous:a?!i.some(r):void 0,children:e("project-summary-access-control-member-only")},{name:"grant_view_access",selected:t.grant_view_access,previous:r.grant_view_access,children:e("project-summary-access-control-non-member-view")},{name:"grant_comment_access",selected:t.grant_comment_access,previous:r.grant_comment_access,hidden:!t.grant_view_access,children:e("project-summary-access-control-non-member-comment")}],l={onOptionClick:this.handleAccessControlOptionClick,readOnly:!this.isEditing()};return s.createElement(k,l,s.createElement("label",null,e("project-summary-access-control")),i.map(o,function(e,t){return s.createElement("option",n({key:t},e))}))},renderInstructions:function(){var e={topic:"project",hidden:!this.isEditing(),locale:this.props.locale};return s.createElement("div",{className:"instructions"},s.createElement(y,e))},renderChart:function(){if(this.isCreating())return null;var e=this.props.locale.translate,t={statistics:this.props.statistics,locale:this.props.locale,theme:this.props.theme};return s.createElement("div",{className:"statistics"},s.createElement(x,t,e("project-summary-statistics")))},changeFlags:function(e){var t=this.props.database.use({schema:"global",by:this}),r=i.assign({},this.props.project,e);return t.saveOne({table:"project"},r)},handleArchiveClick:function(e){var t=this,r=this.props.locale.translate,n=r("project-summary-confirm-archive");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({archived:!0}).then(function(e){return t.returnToList()})})},handleDeleteClick:function(e){var t=this,r=this.props.locale.translate,n=r("project-summary-confirm-delete");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(e){return t.returnToList()})})},handleRestoreClick:function(e){var t=this,r=this.props.locale.translate,n=r("project-summary-confirm-restore");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({archived:!1,deleted:!1})})},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var r=this.findProblems();if(i.some(r))return void this.setState({problems:r});var n=i.omit(this.getProject(),"user_ids","repo_ids");this.setState({saving:!0,adding:!n.id,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t}),r=t.props.payloads;return r.prepare("global",n).then(function(){return e.start().then(function(i){return e.saveOne({table:"project"},n).then(function(e){return r.reattach("global",e),r.dispatch("global",e).then(function(){return t.setState({hasChanges:!1,saving:!1},function(){t.setEditability(!1,e)}),null})})})}).catch(function(e){var r={};409===e.statusCode?r.name="validation-duplicate-project-name":(r.general=e.message,console.error(e)),t.setState({problems:r,saving:!1})})})}},handleTitleChange:function(e){this.setProjectProperty("details.title",e.target.value)},handleNameChange:function(e){var t=i.toLower(e.target.value).replace(/\W+/g,"");this.setProjectProperty("name",t)},handleDescriptionChange:function(e){this.setProjectProperty("details.description",e.target.value)},handleEmblemChange:function(e){this.setProjectProperty("details.resources",e.target.value)},handleMembershipOptionClick:function(e){var t=i.clone(this.getProjectProperty("settings.membership"))||{};switch(e.name){case"manual":t={};break;case"allow_user_request":t.allow_user_request?(delete t.allow_user_request,delete t.approve_user_request):t.allow_user_request=!0;break;case"approve_user_request":t.approve_user_request?delete t.approve_user_request:t.approve_user_request=!0;break;case"allow_guest_request":t.allow_guest_request?(delete t.allow_guest_request,delete t.approve_guest_request):t.allow_guest_request=!0;break;case"approve_guest_request":t.approve_guest_request?delete t.approve_guest_request:t.approve_guest_request=!0}this.setProjectProperty("settings.membership",t)},handleAccessControlOptionClick:function(e){var t=i.clone(this.getProjectProperty("settings.access_control"))||{};switch(e.name){case"members_only":t={};break;case"grant_view_access":t.grant_view_access?delete t.grant_view_access:t.grant_view_access=!0;break;case"grant_comment_access":t.grant_comment_access?delete t.grant_comment_access:t.grant_comment_access=!0}this.setProjectProperty("settings.access_control",t)}}),j={details:{},settings:c.default}},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=r(17),o=r(16),l=r(10),c=r(11),u=r(4),d=r(6),p=r(88),h=r(18),m=r(31),f=r(54),g=r(42),v=r(55),b=(r(56),r(85)),y=r(27),C=r(23);r(521),e.exports=a.createClass({displayName:"RoleSummaryPage",propTypes:{database:s.instanceOf(l).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(u).isRequired,theme:s.instanceOf(d).isRequired},statics:{parseUrl:function(e,t,r){return c.match(e,["/roles/:role/?"],function(e){return"new"!==e.role&&(e.role=n.strictParseInt(e.role)),e.edit=!!t.edit,e})},getUrl:function(e){var t,r="/roles/"+e.role+"/";return e.edit&&(t={edit:1}),{path:r,query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),s=this.props.route!==t.route?100:1e3,a={system:null,role:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(E,a),s),n.start().then(function(e){var t={};return n.findOne({table:"system",criteria:t})}).then(function(e){a.system=e}).then(function(){if("new"!==r.role){var e={id:r.role};return n.findOne({table:"role",criteria:e})}}).then(function(e){return a.role=e,i.createElement(E,a)})}});var E=e.exports.Sync=i.createClass({displayName:"RoleSummaryPage.Sync",propTypes:{system:s.object,role:s.object,database:s.instanceOf(l).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(u).isRequired,theme:s.instanceOf(d).isRequired},getInitialState:function(){return this.components=o({confirmation:y}),{newRole:null,hasChanges:!1,saving:!1,adding:!1,problems:{}}},getRole:function(e){return!this.isEditing()||e&&"current"!==e?this.props.role||k:this.state.newRole||this.props.role||k},getRoleProperty:function(e,t){var r=this.getRole(t);return n.get(r,e)},setRoleProperty:function(e,t){var r=this.getRole("current"),i=n.decoupleSet(r,e,t);if("details.title"===e){var s=p.fromTitle(r.details.title),a=p.fromTitle(i.details.title);r.name&&r.name!==s||(i.name=a)}n.size(i.name)>128&&(i.name=i.name.substr(0,128));var o=!0;n.isEqual(i,this.props.role)&&(i=null,o=!1),this.setState({newRole:i,hasChanges:o})},findProblems:function(){var e={};return this.getRole().name||(e.name="validation-required"),e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.role},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.parameters.edit},setEditability:function(t,r){if(!this.isCreating()||t||r){var i=this.props.route,s=n.clone(i.parameters);return s.edit=t,r&&(s.role=r.id),i.replace(e.exports,s)}return this.returnToList()},returnToList:function(){return this.props.route.push(r(83))},startNew:function(){var t=this.props.route,r=n.clone(t.parameters);return r.role="new",t.replace(e.exports,r)},getInputLanguages:function(){return n.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)?this.setState({newRole:null,hasChanges:!1}):this.setState({problems:{}})},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.getRole(),s=t(n.get(r,"details.title"))||r.name;return i.createElement("div",{className:"role-summary-page"},this.renderButtons(),i.createElement("h2",null,e("role-summary-$title",s)),this.renderForm(),this.renderInstructions(),i.createElement(y,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),i.createElement(C,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return i.createElement("div",{className:"buttons"},i.createElement(h,{onClick:this.handleCancelClick},e("role-summary-cancel"))," ",i.createElement(h,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("role-summary-save")));var t,r=this.props.role,n=!r||!r.deleted&&!r.disabled;return t=n?this.state.adding?"add":"return":"reactivate",i.createElement("div",{className:"buttons"},i.createElement(m,{preselected:t},i.createElement("option",{name:"return",onClick:this.handleReturnClick},e("role-summary-return")),i.createElement("option",{name:"add",onClick:this.handleAddClick},e("role-summary-add")),i.createElement("option",{name:"archive",disabled:!n,separator:!0,onClick:this.handleDisableClick},e("role-summary-disable")),i.createElement("option",{name:"delete",disabled:!n,onClick:this.handleDeleteClick},e("role-summary-delete")),i.createElement("option",{name:"reactivate",hidden:n,onClick:this.handleReactivateClick},e("role-summary-reactivate")))," ",i.createElement(h,{className:"emphasis",onClick:this.handleEditClick},e("role-summary-edit")))},renderForm:function(){return i.createElement("div",{className:"form"},this.renderTitleInput(),this.renderNameInput(),this.renderDescriptionInput())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getRoleProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return i.createElement(v,t,e("role-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getRoleProperty("name"),locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing()},r=this.state.problems;return i.createElement(g,t,e("role-summary-name"),i.createElement(b,null,e(r.name)))},renderDescriptionInput:function(){var e=this.props.locale.translate,t={id:"description",value:this.getRoleProperty("details.description"),availableLanguageCodes:this.getInputLanguages(),type:"textarea",locale:this.props.locale,onChange:this.handleDescriptionChange,readOnly:!this.isEditing()};return i.createElement(v,t,e("role-summary-description"))},renderInstructions:function(){var e={topic:"role",hidden:!this.isEditing(),locale:this.props.locale};return i.createElement("div",{className:"instructions"},i.createElement(f,e))},changeFlags:function(e){var t=this.props.database.use({schema:"global",by:this}),r=n.assign({},this.props.role,e);return t.saveOne({table:"role"},r)},handleDisableClick:function(e){var t=this,r=this.props.locale.translate,n=r("role-summary-confirm-disable");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({disabled:!0}).then(function(){return t.returnToList()})})},handleDeleteClick:function(e){var t=this,r=this.props.locale.translate,n=r("role-summary-confirm-delete");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(){return t.returnToList()})})},handleReactivateClick:function(e){var t=this,r=this.props.locale.translate,n=r("role-summary-confirm-reactivate");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({disabled:!1,deleted:!1})})},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var r=this.findProblems();if(n.some(r))return void this.setState({problems:r});var i=this.getRole();this.setState({saving:!0,adding:!i.id,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t});return e.start().then(function(r){return e.saveOne({table:"role"},i).then(function(e){return t.setState({hasChanges:!1,saving:!1},function(){return t.setEditability(!1,e)}),null})}).catch(function(e){var r={};409===e.statusCode?r.name="validation-duplicate-role-name":(r.general=e.message,console.error(e)),t.setState({problems:r,saving:!1})})})}},handleTitleChange:function(e){this.setRoleProperty("details.title",e.target.value)},handleNameChange:function(e){var t=n.toLower(e.target.value).replace(/\W+/g,"");this.setRoleProperty("name",t)},handleDescriptionChange:function(e){this.setRoleProperty("details.description",e.target.value)}}),k={details:{}}},function(e,t,r){"use strict";function n(e){switch(e){case"facebook":return"facebook-official";default:return e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=r(1),a=r(0),o=a.PropTypes,l=r(40),c=r(17),u=r(24),d=r(16),p=r(250),h=r(247),m=r(10),f=r(11),g=r(4),v=r(6),b=r(88),y=r(18),C=r(31),E=r(54),k=r(42),w=r(55),x=r(56),S=r(69),R=r(238),O=r(85),N=r(27),j=r(23);r(523),e.exports=c.createClass({displayName:"ServerSummaryPage",propTypes:{database:o.instanceOf(m).isRequired,route:o.instanceOf(f).isRequired,locale:o.instanceOf(g).isRequired,theme:o.instanceOf(v).isRequired},statics:{parseUrl:function(e,t,r){return f.match(e,["/servers/:server/?"],function(e){return"new"!==e.server&&(e.server=s.strictParseInt(e.server)),e.edit=!!t.edit,e.task=parseInt(s.replace(r,/\D+/g,"")),e})},getUrl:function(e){var t,r,n="/servers/"+e.server+"/";return e.edit&&(t={edit:1}),e.task&&(r="T"+e.task),{path:n,query:t,hash:r}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),i=this.props.route!==t.route?100:1e3,s={system:null,server:null,roles:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(a.createElement(T,s),i),n.start().then(function(e){var t={};return n.findOne({table:"system",criteria:t})}).then(function(e){s.system=e}).then(function(){if("new"!==r.server){var e={id:r.server};return n.findOne({table:"server",criteria:e,required:!0})}}).then(function(t){return s.server=t,e.show(a.createElement(T,s),250)}).then(function(){var e={};return n.find({table:"role",criteria:e})}).then(function(e){return s.roles=e,a.createElement(T,s)})}});var T=e.exports.Sync=a.createClass({displayName:"ServerSummaryPage.Sync",propTypes:{system:o.object,server:o.object,roles:o.arrayOf(o.object),database:o.instanceOf(m).isRequired,route:o.instanceOf(f).isRequired,locale:o.instanceOf(g).isRequired,theme:o.instanceOf(v).isRequired},getInitialState:function(){return this.components=d({confirmation:N}),{newServer:null,hasChanges:!1,saving:!1,adding:!1,credentialsChanged:!1,problems:{}}},getServer:function(e){return!this.isEditing()||e&&"current"!==e?this.props.server||P:this.state.newServer||this.props.server||P},getServerProperty:function(e,t){var r=this.getServer(t);return s.get(r,e)},setServerProperty:function(e,t){var r=this.getServer(),n=s.decoupleSet(r,e,t);if("type"===e){var i=this.props.locale.translate,a=this.props.locale.pick,o=i("server-type-"+r.type),l=i("server-type-"+n.type),c=a(r.details.title);if(!c||c===o){var u=this.props.locale.lang;n=s.decoupleSet(n,"details.title."+u,l)}}if("details.title"===e||"type"===e){var d=b.fromTitle(r.details.title),p=b.fromTitle(n.details.title);r.name&&r.name!==d||(n.name=p)}"settings.user.type"===e&&(t||(n=s.decoupleSet(n,"settings.user.role_ids",void 0))),s.size(n.name)>128&&(n.name=n.name.substr(0,128));var h=!0;s.isEqual(n,this.props.server)&&(n=null,h=!1),this.setState({newServer:n,hasChanges:h})},findProblems:function(){var e={},t=this.getServer();t.name||(e.name="validation-required"),t.type||(e.type="validation-required");var r=t.settings.oauth;return r&&(r.client_id&&!r.client_secret&&(e.client_secret="validation-required"),!r.client_id&&r.client_secret&&(e.client_id="validation-required"),!r.client_id&&!r.client_secret||r.base_url||"gitlab"===t.type&&(e.base_url="validation-required")),e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.server},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.query.edit},setEditability:function(t,r){if(!this.isCreating()||t||r){var n=this.props.route,i=s.clone(n.parameters);return i.edit=t,r&&(i.server=r.id),n.replace(e.exports,i)}return this.returnToList()},returnToList:function(){return this.props.route.push(r(103))},startNew:function(){var t=this.props.route,r=s.clone(t.parameters);return r.server="new",t.replace(e.exports,r)},getInputLanguages:function(){return s.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)?this.setState({newServer:null,hasChanges:!1}):this.setState({problems:{}})},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.getServer(),n=t(s.get(r,"details.title"));return!n&&r.type&&(n=e("server-type-"+r.type)),a.createElement("div",{className:"server-summary-page"},this.renderButtons(),a.createElement("h2",null,e("server-summary-member-$name",n)),this.renderForm(),this.renderInstructions(),this.renderTaskList(),a.createElement(N,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),a.createElement(j,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return a.createElement("div",{key:"edit",className:"buttons"},a.createElement(y,{onClick:this.handleCancelClick},e("server-summary-cancel"))," ",a.createElement(y,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("server-summary-save")));var t,r,n=this.getServer(),i=!n.deleted&&!n.disabled,o=s.includes(p.integrated,n.type),l=!!s.get(n,"settings.api.access_token"),c=!(!s.get(n,"settings.oauth.client_id")||!s.get(n,"settings.oauth.client_secret")),u=this.state.credentialsChanged;return i?o&&!l?(t="acquire",r=!0):t=c&&u?"test":this.state.adding?"add":"return":t="reactivate",a.createElement("div",{key:"view",className:"buttons"},a.createElement(C,{preselected:t,alert:r},a.createElement("option",{name:"return",onClick:this.handleReturnClick},e("server-summary-return")),a.createElement("option",{name:"add",onClick:this.handleAddClick},e("server-summary-add")),a.createElement("option",{name:"acquire",disabled:!i||!o,separator:!0,onClick:this.handleAcquireClick},e("server-summary-acquire")),a.createElement("option",{name:"test",disabled:!i||!c,onClick:this.handleTestClick},e("server-summary-test-oauth")),a.createElement("option",{name:"disable",disabled:!i,separator:!0,onClick:this.handleDisableClick},e("server-summary-disable")),a.createElement("option",{name:"delete",disabled:!i,onClick:this.handleDeleteClick},e("server-summary-delete")),a.createElement("option",{name:"reactivate",hidden:i,onClick:this.handleReactivateClick},e("server-summary-reactivate")))," ",a.createElement(y,{className:"emphasis",onClick:this.handleEditClick},e("server-summary-edit")))},renderForm:function(){return a.createElement("div",{className:"form"},this.renderTypeSelector(),this.renderTitleInput(),this.renderNameInput(),this.renderUserOptions(),this.renderRoleSelector(),this.renderOAuthUrlInput(),this.renderOAuthClientIdInput(),this.renderOAuthClientSecretInput(),this.renderAPIStatus())},renderTypeSelector:function(){var e=this.props.locale.translate,t=this.getServerProperty("type","current"),r=this.getServerProperty("type","original"),o=s.map(p,function(i){var s=n(i);return{name:i,selected:t===i,previous:r===i,children:[a.createElement("i",{className:"fa fa-"+s+" fa-fw",key:0})," ",e("server-type-"+i)]}}),l={onOptionClick:this.handleTypeOptionClick,readOnly:!this.isEditing()},c=this.state.problems;return a.createElement(x,l,a.createElement("label",null,e("server-summary-type"),a.createElement(O,null,e(c.type))),s.map(o,function(e,t){return a.createElement("option",i({key:t},e))}))},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getServerProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return a.createElement(w,t,e("server-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getServerProperty("name"),locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing()},r=this.state.problems;return a.createElement(k,t,e("server-summary-name"),a.createElement(O,null,e(r.name)))},renderUserOptions:function(){switch(this.getServerProperty("type")){case"gitlab":return this.renderGitlabUserOptions();default:return this.renderOAuthUserOptions()}},renderGitlabUserOptions:function(){var e=this.props.locale.translate,t=this.getServerProperty("settings.user","current")||{},r=this.getServerProperty("settings.user","original")||{},n=!!this.getServerProperty("id"),o=[{name:"import-admin-disabled",selected:!s.get(t,"mapping.admin"),previous:n?!s.get(r,"mapping.admin"):void 0,children:e("server-summary-user-import-gitlab-admin-disabled")},{name:"import-admin-as-admin",selected:"admin"===s.get(t,"mapping.admin"),previous:"admin"===s.get(r,"mapping.admin"),children:a.createElement("span",null,e("server-summary-gitlab-admin")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-admin"))},{name:"import-admin-as-moderator",selected:"moderator"===s.get(t,"mapping.admin"),previous:"moderator"===s.get(r,"mapping.admin"),children:a.createElement("span",null,e("server-summary-gitlab-admin")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-moderator"))},{name:"import-admin-as-regular-user",selected:"regular"===s.get(t,"mapping.admin"),previous:"regular"===s.get(r,"mapping.admin"),children:a.createElement("span",null,e("server-summary-gitlab-admin")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))},{name:"import-user-disabled",selected:!s.get(t,"mapping.user"),previous:n?!s.get(r,"mapping.user"):void 0,children:e("server-summary-user-import-gitlab-user-disabled")},{name:"import-user-as-moderator",selected:"moderator"===s.get(t,"mapping.user"),previous:"moderator"===s.get(r,"mapping.user"),children:a.createElement("span",null,e("server-summary-gitlab-regular-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-moderator"))},{name:"import-user-as-regular-user",selected:"regular"===s.get(t,"mapping.user"),previous:"regular"===s.get(r,"mapping.user"),children:a.createElement("span",null,e("server-summary-gitlab-regular-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))},{name:"import-user-as-guest",selected:"guest"===s.get(t,"mapping.user"),previous:"guest"===s.get(r,"mapping.user"),children:a.createElement("span",null,e("server-summary-gitlab-regular-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-guest"))},{name:"import-external-user-disabled",selected:!s.get(t,"mapping.external_user"),previous:n?!s.get(r,"mapping.external_user"):void 0,children:e("server-summary-user-import-gitlab-external-user-disabled")},{name:"import-external-user-as-regular-user",selected:"regular"===s.get(t,"mapping.external_user"),previous:"regular"===s.get(r,"mapping.external_user"),children:a.createElement("span",null,e("server-summary-gitlab-external-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))},{name:"import-external-user-as-guest",selected:"guest"===s.get(t,"mapping.external_user"),previous:"guest"===s.get(r,"mapping.external_user"),children:a.createElement("span",null,e("server-summary-gitlab-external-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-guest"))}],l={onOptionClick:this.handleGitlabUserOptionClick,readOnly:!this.isEditing()};return a.createElement(x,l,a.createElement("label",null,e("server-summary-new-users")),s.map(o,function(e,t){return a.createElement("option",i({key:t},e))}))},renderOAuthUserOptions:function(){var e=this.props.locale.translate,t=this.getServerProperty("settings.user","current")||{},r=this.getServerProperty("settings.user","original")||{},n=!!this.getServerProperty("id"),o=[{name:"import-disabled",selected:!t.type,previous:n?!r.type:void 0,children:e("server-summary-user-import-disabled")},{name:"import-user-as-guest",selected:"guest"===t.type,previous:"guest"===r.type,children:a.createElement("span",null,e("server-summary-new-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-guest"))},{name:"import-user-as-regular-user",selected:"regular"===t.type,previous:"regular"===r.type,children:a.createElement("span",null,e("server-summary-new-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))}],l={onOptionClick:this.handleOAuthUserOptionClick,readOnly:!this.isEditing()};return a.createElement(x,l,a.createElement("label",null,e("server-summary-new-users")),s.map(o,function(e,t){return a.createElement("option",i({key:t},e))}))},renderRoleSelector:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.getServerProperty("settings.user.role_ids","current")||[],n=this.getServerProperty("settings.user.role_ids","original")||[],o=!!this.getServerProperty("id"),l=I(this.props.roles,this.props.locale),c=s.concat({name:"none",selected:s.isEmpty(r),previous:o?s.isEmpty(n):void 0,children:e("server-summary-role-none")},s.map(l,function(i){var o=t(i.details.title)||t.name;return{name:String(i.id),selected:s.includes(r,i.id),previous:s.includes(n,i.id),children:a.createElement("span",null,e("server-summary-new-user")," ",a.createElement("i",{className:"fa fa-arrow-right"})," ",o)}})),u={onOptionClick:this.handleRoleOptionClick,readOnly:!this.isEditing()};return a.createElement(x,u,a.createElement("label",null,e("server-summary-roles")),s.map(c,function(e,t){return a.createElement("option",i({key:t},e))}))},renderOAuthUrlInput:function(){var e=this.props.locale.translate,t=this.getServerProperty("type"),r={id:"oauth_token",value:this.getServerProperty("settings.oauth.base_url"),locale:this.props.locale,onChange:this.handleOAuthUrlChange,readOnly:!this.isEditing()},n=this.state.problems;return a.createElement(S,{open:"gitlab"===t},a.createElement(k,r,e("server-summary-oauth-url"),a.createElement(O,null,e(n.base_url))))},renderOAuthClientIdInput:function(){var e=this.props.locale.translate,t={id:"oauth_id",value:this.getServerProperty("settings.oauth.client_id"),locale:this.props.locale,onChange:this.handleOAuthIdChange,readOnly:!this.isEditing()},r=this.state.problems;return a.createElement(k,t,e("server-summary-oauth-id"),a.createElement(O,null,e(r.client_id)))},renderOAuthClientSecretInput:function(){var e=this.props.locale.translate,t={id:"oauth_secret",value:this.getServerProperty("settings.oauth.client_secret"),locale:this.props.locale,onChange:this.handleOAuthSecretChange,readOnly:!this.isEditing()},r=this.state.problems;return a.createElement(k,t,e("server-summary-oauth-secret"),a.createElement(O,null,e(r.client_secret)))},renderAPIStatus:function(){var e,t=this.props.locale.translate,r=this.getServerProperty("type");if(s.includes(p.integrated,r)){e=t(this.getServerProperty("settings.api.access_token")?"server-summary-api-access-acquired":"server-summary-api-access-pending")}else e=t("server-summary-api-access-not-applicable");var n={id:"access",value:e,locale:this.props.locale,readOnly:!0};return a.createElement(k,n,t("server-summary-api-access"))},renderInstructions:function(){var e={topic:"server",hidden:!this.isEditing(),locale:this.props.locale};return a.createElement("div",{className:"instructions"},a.createElement(E,e))},renderTaskList:function(){var e=this.props.locale.translate,t=this.props.route.parameters,r={server:this.props.server,selectedTaskId:t.task,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.handleTaskSelectionClear};return a.createElement("div",{className:"task-history"},a.createElement("h2",null,e("server-summary-activities")),a.createElement(R,r))},componentDidMount:function(){if(this.props.route.parameters.task){var e=l.findDOMNode(this);setTimeout(function(){e.scrollIntoView(!1)},500)}},changeFlags:function(e){var t=this.props.database.use({schema:"global",by:this}),r=s.assign({},this.props.server,e);return t.saveOne({table:"server"},r)},handleDisableClick:function(e){var t=this,r=this.props.locale.translate,n=r("server-summary-confirm-disable");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({disabled:!0}).then(function(){return t.returnToList()})})},handleDeleteClick:function(e){var t=this,r=this.props.locale.translate,n=r("server-summary-confirm-delete");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(){return t.returnToList()})})},handleReactivateClick:function(e){var t=this,r=this.props.locale.translate,n=r("server-summary-confirm-reactivate");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeFlags({disabled:!1,deleted:!1})})},openOAuthPopup:function(e){var t=this.props.database.use({by:this}),r=this.getServer(),n=t.getOAuthUrl(r,e),i={width:800,height:600,left:window.screenLeft+Math.round((window.outerWidth-800)/2),top:window.screenTop+Math.round((window.outerHeight-600)/2),toolbar:"no",menubar:"no",status:"no"},a=s.map(i,function(e,t){return t+"="+e});window.open(n,"api-access-oauth",a.join(","))},handleAcquireClick:function(e){this.openOAuthPopup("activation")},handleTestClick:function(e){this.openOAuthPopup("test")},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var r=this.findProblems();if(s.some(r))return void this.setState({problems:r});var n=this.getServer(),i=this.getServerProperty("settings.oauth","original"),a=this.getServerProperty("settings.oauth","current"),o=!s.isEqual(i,a);this.setState({saving:!0,adding:!n.id,credentialsChanged:o,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t});return e.start().then(function(r){return e.saveOne({table:"server"},n).then(function(e){return t.setState({hasChanges:!1,saving:!1},function(){return t.setEditability(!1,e)}),null})}).catch(function(e){var r={};409===e.statusCode?r.name="validation-duplicate-server-name":(r.general=e.message,console.error(e)),t.setState({problems:r,saving:!1})})})}},handleTitleChange:function(e){this.setServerProperty("details.title",e.target.value)},handleNameChange:function(e){var t=s.toLower(e.target.value).replace(/\W+/g,"");this.setServerProperty("name",t)},handleTypeOptionClick:function(e){this.setServerProperty("type",e.name)},handleApiTokenChange:function(e){this.setServerProperty("settings.api.token",e.target.value)},handleOAuthUrlChange:function(e){this.setServerProperty("settings.oauth.base_url",e.target.value)},handleOAuthIdChange:function(e){this.setServerProperty("settings.oauth.client_id",e.target.value)},handleOAuthSecretChange:function(e){this.setServerProperty("settings.oauth.client_secret",e.target.value)},handleGitlabUserOptionClick:function(e){var t=this.getServerProperty("settings.user.mapping")||{};switch(e.name){case"import-admin-disabled":t.admin=void 0;break;case"import-admin-as-regular-user":t.admin="regular"!==t.admin?"regular":void 0;break;case"import-admin-as-moderator":t.admin="moderator"!==t.admin?"moderator":void 0;break;case"import-admin-as-admin":t.admin="admin"!==t.admin?"admin":void 0;break;case"import-user-disabled":t.user=void 0;break;case"import-user-as-guest":t.user="guest"!==t.user?"guest":void 0;break;case"import-user-as-regular-user":t.user="regular"!==t.user?"regular":void 0;break;case"import-user-as-moderator":t.user="moderator"!==t.user?"moderator":void 0;break;case"import-external-user-disabled":t.external_user=void 0;break;case"import-external-user-as-guest":t.external_user="guest"!==t.external_user?"guest":void 0;break;case"import-external-user-as-regular-user":t.external_user="regular"!==t.external_user?"regular":void 0}this.setServerProperty("settings.user.mapping",t)},handleOAuthUserOptionClick:function(e){var t=this.getServerProperty("settings.user.type");switch(e.name){case"import-disabled":t=void 0;break;case"import-user-as-guest":t="guest"!==t?"guest":void 0;break;case"import-user-as-regular-user":t="regular"!==t?"regular":void 0}this.setServerProperty("settings.user.type",t)},handleRoleOptionClick:function(e){var t=this.getServer(),r=s.slice(s.get(t,"settings.user.role_ids",[]));if("none"===e.name)r=[];else{var n=parseInt(e.name);s.includes(r,n)?s.pull(r,n):r.push(n)}this.setServerProperty("settings.user.role_ids",r)},handleTaskSelectionClear:function(){this.props.route.loosen()}}),P={details:{},settings:h.default},I=u(function(e,t){var r=t.pick,n=function(e){return r(e.details.title)||e.name};return s.sortBy(e,n)})},function(e,t,r){"use strict";var n=r(0),i=n.PropTypes,s=r(22),a=r(4),o=(r(33),r(43));e.exports=n.createClass({displayName:"ModifiedTimeTooltip",propTypes:{time:i.string,disabled:i.bool,locale:i.instanceOf(a).isRequired},componentWillMount:function(){this.updateLabels()},componentWillReceiveProps:function(e){this.updateLabels(e)},updateLabels:function(e){e=e||this.props;var t;e.time&&(t=s(e.time),t.locale(e.locale.languageCode));var r={relativeTime:t?t.fromNow():null,absoluteTime:t?t.format("lll"):null};_.isEqual(r,this.state)||this.setState(r)},render:function(){return n.createElement(o,{disabled:this.props.disabled},n.createElement("inline",null,this.state.relativeTime),n.createElement("window",null,this.state.absoluteTime))},componentDidMount:function(){l.push(this)},componentWillUnmount:function(){_.pull(l,this)}});var l=[];setInterval(function(){_.each(l,function(e){e.updateLabels()})},3e4)},function(e,t,r){"use strict";function n(e){var t,r=e.locale.translate,n="action-badge";switch(e.type){case"add":case"approve":case"restore":case"reactivate":n+=" add",t="plus";break;case"remove":case"archive":case"disable":n+=" remove",t="times"}var s=r("action-badge-"+e.type);return i.createElement("div",{className:n},i.createElement("i",{className:"fa fa-"+t})," ",s)}var i=r(0),s=i.PropTypes,a=r(4);e.exports=n,r(534),n.propTypes={type:s.string.isRequired,locale:s.instanceOf(a).isRequired}},function(e,t,r){"use strict";var n=r(0),i=n.PropTypes,s=r(380),a=r(4),o=r(33),l=r(69);r(539),e.exports=n.createClass({displayName:"InstructionBlock",mixins:[o],propTypes:{topic:i.string.isRequired,hidden:i.bool,locale:i.instanceOf(a).isRequired},getDefaultProps:function(){return{hidden:!1}},getText:function(e,t){try{return r(576)("./"+e+"."+t+".md")}catch(t){return r(575)("./"+e+".en.md")}},render:function(){var e=this.getText(this.props.topic,this.props.locale.lang),t=s.parse(e),r=["instruction-block"];return this.props.hidden&&r.push("hidden"),n.createElement("div",{className:r.join(" ")},n.createElement(l,{open:!this.props.hidden},n.createElement("div",{className:"contents"},t)))}})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(0),a=s.PropTypes,o=r(4),l=r(152);r(540),e.exports=s.createClass({displayName:"MultilingualTextField",propTypes:{type:a.string,value:a.oneOfType([a.object,a.string]),availableLanguageCodes:a.arrayOf(a.string),locale:a.instanceOf(o).isRequired,onChange:a.func},getDefaultProps:function(){return{type:"text",value:{},availableLanguageCodes:[]}},getInitialState:function(){var e,t=i.keys(this.props.value),r=this.props.availableLanguageCodes,n=this.props.locale.lang;return e=i.includes(t,n)?n:i.isEmpty(t)?i.includes(r,n)?n:i.isEmpty(r)?n:r[0]:t[0],{selectedLanguageCode:e,hoverLanguageCode:null,expandedByMouseOver:!1,expandedByTouch:!1,arrowPosition:0}},getLanguages:function(){var e=i.keys(this.props.value),t=this.props.availableLanguageCodes,r=i.union(t,e);0===r.length&&r.push(this.props.locale.lang);var n=i.keyBy(this.props.locale.directory,"code");return i.filter(i.map(r,function(e){return n[e]}))},componentWillReceiveProps:function(e){if(this.props.locale!==e.locale){var t=e.locale.lang,r=this.props.availableLanguageCodes;i.includes(r,t)&&this.setState({selectedLanguageCode:t})}},render:function(){var e=["multilingual-text-field"],t="input",r=i.omit(this.props,"children","availableLanguageCodes","locale");if("textarea"===this.props.type&&(t=l,r=i.omit(r,"type")),this.props.readOnly){e.push("readonly"),this.state.expandedByMouseOver||this.state.expandedByTouch||e.push("collapsed");var n=this.props.locale.translate;r.placeholder=n("text-field-placeholder-none"),r.spellCheck=!1}return this.getLanguages().length>1&&e.push("multiple-languages"),this.props.value instanceof Object?r.value=this.props.value[this.state.selectedLanguageCode]||"":"string"==typeof this.props.value?r.value=this.props.value:r.value="",r.value&&!1===r.spellCheck&&(r.value+="\ufeff"),r.lang=this.state.selectedLangaugeCode,r.onChange=this.handleTextChange,s.createElement("div",{className:e.join(" ")},s.createElement("label",{htmlFor:this.props.id},this.props.children),s.createElement(t,r),this.renderTabs())},renderTabs:function(){var e=this.getLanguages();return e.length<=1?null:s.createElement("div",{className:"tabs"},i.map(e,this.renderTab),this.renderPopup())},renderTab:function(e,t){var r={className:"tab",lang:e.code,onClick:this.handleLanguageClick,onMouseOver:this.handleLanguageMouseOver,onMouseOut:this.handleLanguageMouseOut};return e.code===this.state.selectedLanguageCode&&(r.className+=" selected",r.onClick=r.onMouseOver=r.onMouseOut=null),s.createElement("div",n({key:t},r),e.name)},renderPopup:function(){if(!this.state.hoverLanguageCode||this.props.readOnly)return null;var e=this.props.value[this.state.hoverLanguageCode];return i.trim(e)?s.createElement("div",{className:"bubble"},s.createElement("div",{className:"arrow",style:{left:this.state.arrowPosition}}),s.createElement("div",{className:"box"},e)):null},handleTextChange:function(e){var t=this,r=e.target.value,n=this.state.selectedLanguageCode;if(r)this.props.value instanceof Object?this.value=i.clone(this.props.value):"string"==typeof this.props.value?this.value=i.transform(this.props.availableLanguageCodes,function(e,r){e[r]=t.props.value},{}):this.value={},this.value[n]=r;else if(this.value=i.omit(this.props.value,n),!i.includes(this.props.availableLanguageCodes,n)){var s=i.first(this.getLanguages());s&&this.setState({selectedLanguageCode:s.code})}this.props.onChange&&this.props.onChange({type:"change",target:this})},handleLanguageClick:function(e){var t=e.currentTarget.lang;this.setState({selectedLanguageCode:t,hoverLanguageCode:null})},handleLanguageMouseOver:function(e){var t=e.currentTarget,r=t.parentNode,n=r.getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.left+i.width/2-n.left,a=t.lang;this.setState({hoverLanguageCode:a,arrowPosition:s})},handleLanguageMouseOut:function(e){e.currentTarget.lang===this.state.hoverLanguageCode&&this.setState({hoverLanguageCode:null})}})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),s=i.PropTypes,a=r(41);r(542),e.exports=i.createClass({displayName:"OptionList",propTypes:{readOnly:s.bool,onOptionClick:s.func},render:function(){var e=i.Children.toArray(this.props.children),t=_.filter(e,{type:"option"}),r=_.find(e,{type:"label"}),n=["option-list"];this.props.readOnly&&n.push("readonly");var s={expandable:!0,selectable:!this.props.readOnly,expanded:!this.props.readOnly,sortColumns:[]};return i.createElement("div",{className:n.join(" ")},i.createElement("label",null,r?r.props.children:null),i.createElement("div",{className:"container"},i.createElement(a,s,i.createElement("tbody",null,_.map(t,this.renderRow)))))},renderRow:function(e,t){if(e.props.hidden)return null;var r=["option"];e.props.selected&&(r.push("fixed"),this.props.readOnly||r.push("selected"));var s;this.props.readOnly||(e.props.selected&&!e.props.previous?s=i.createElement("i",{className:"fa fa-check-circle-o badge add"}):!e.props.selected&&e.props.previous&&(s=i.createElement("i",{className:"fa fa-times-circle-o badge remove"})));var a={className:r.join(" "),"data-name":e.props.name,onClick:this.handleClick};return this.props.readOnly&&(a.onClick=void 0),i.createElement("tr",n({key:t},a),i.createElement("td",null,e.props.children,s))},handleClick:function(e){var t=e.currentTarget.getAttribute("data-name");this.props.onOptionClick&&this.props.onOptionClick({type:"optionclick",target:this,name:t})}})},,,,,,,,,,,function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=(r(13),r(22)),a=r(0),o=a.PropTypes,l=r(17),c=r(24),u=r(16),d=r(10),p=r(11),h=r(4),m=r(6),f=r(48),g=r(18),v=r(31),b=r(41),y=b.TH,C=r(106),E=r(233),k=r(105),w=r(52),x=r(53),S=r(27),R=r(23);r(516),e.exports=l.createClass({displayName:"ProjectListPage",propTypes:{database:o.instanceOf(d).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(m).isRequired},statics:{parseUrl:function(e,t,r){return p.match(e,["/projects/?"],function(e){return e.edit=!!t.edit,e})},getUrl:function(e){var t;return e&&e.edit&&(t={edit:1}),{path:"/projects/",query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.database.use({schema:"global",by:this}),n=this.props.route!==t.route?100:1e3,s={projects:null,repos:null,users:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(a.createElement(O,s),n),r.start().then(function(e){var t={};return r.find({table:"project",criteria:t})}).then(function(t){return s.projects=t,e.show(a.createElement(O,s))}).then(function(){var e={id:i.flatten(i.map(s.projects,"repo_ids"))};return r.find({table:"repo",criteria:e})}).then(function(t){return s.repos=t,e.show(a.createElement(O,s))}).then(function(){var e={id:i.flatten(i.map(s.projects,"user_ids"))};return r.find({table:"user",criteria:e})}).then(function(t){return s.users=t,e.show(a.createElement(O,s))}).then(function(){return f.loadProjectStatistics(r,s.projects)}).then(function(e){return s.statistics=e,a.createElement(O,s)})}});var O=e.exports.Sync=a.createClass({displayName:"ProjectListPage.Sync",propTypes:{projects:o.arrayOf(o.object),repos:o.arrayOf(o.object),users:o.arrayOf(o.object),statistics:o.objectOf(o.object),database:o.instanceOf(d).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(m).isRequired},getInitialState:function(){return this.components=u({confirmation:S}),{sortColumns:["name"],sortDirections:["asc"],restoringProjectIds:[],archivingProjectIds:[],hasChanges:!1,renderingFullList:this.isEditing()}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,n=i.clone(r.parameters);return n.edit=t,this.props.route.replace(e.exports,n)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringProjectIds:[],archivingProjectIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1})},500))},render:function(){var e=this.props.locale.translate;return a.createElement("div",{className:"project-list-page"},this.renderButtons(),a.createElement("h2",null,e("project-list-title")),this.renderTable(),a.createElement(S,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),a.createElement(R,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return a.createElement("div",{className:"buttons"},a.createElement(g,{onClick:this.handleCancelClick},e("project-list-cancel"))," ",a.createElement(g,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("project-list-save")));return a.createElement("div",{className:"buttons"},a.createElement(v,{preselected:void 0},a.createElement("option",{name:"add",className:"separated",onClick:this.handleAddClick},e("project-list-add")))," ",a.createElement(g,{className:"emphasis",onClick:this.handleEditClick},e("project-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing(),e.onClick=this.handleRowClick),a.createElement(b,e,a.createElement("thead",null,this.renderHeadings()),a.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return a.createElement("tr",null,this.renderTitleColumn(),this.renderUsersColumn(),this.renderRepositoriesColumn(),this.renderDateRangeColumn(),this.renderLastMonthColumn(),this.renderThisMonthColumn(),this.renderToDateColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.projects;return this.state.renderingFullList||(e=j(e)),e=N(e,this.props.users,this.props.repos,this.props.statistics,this.props.locale,this.state.sortColumns,this.state.sortDirections),i.map(e,this.renderRow)},renderRow:function(e){var t,r,s=this.props.locale.translate,o=[];e.deleted?(o.push("deleted"),r=s("project-list-status-deleted")):e.archived&&(o.push("disabled"),r=s("project-list-status-archived")),this.state.renderingFullList&&(e.deleted||e.archived?i.includes(this.state.restoringProjectIds,e.id)&&o.push("selected"):(o.push("fixed"),i.includes(this.state.disablingProjectIds,e.id)||o.push("selected")),t=this.handleRowClick);var l={className:o.join(" "),"data-project-id":e.id,title:r,onClick:t};return a.createElement("tr",n({key:e.id},l),this.renderTitleColumn(e),this.renderUsersColumn(e),this.renderRepositoriesColumn(e),this.renderDateRangeColumn(e),this.renderLastMonthColumn(e),this.renderThisMonthColumn(e),this.renderToDateColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var n,s,o=this.props.locale.pick,l=o(e.details.title);if(this.state.renderingFullList){var c,u;e.deleted||e.archived?(c=!1,u=i.includes(this.state.restoringProjectIds,e.id)):(c=!0,u=!i.includes(this.state.archivingProjectIds,e.id)),c!==u&&(s=u?a.createElement(x,{type:"restore",locale:this.props.locale}):a.createElement(x,{type:"archive",locale:this.props.locale}))}else{var d=this.props.route,p={project:e.id};n=d.find(r(49),p)}var h=t("project-list-$title-with-$name",l,e.name);return a.createElement("td",null,a.createElement("a",{href:n},h),s)}return a.createElement(y,{id:"title"},t("table-heading-name"))},renderUsersColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var r={users:P(this.props.users,e),project:e,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(C,r))}return a.createElement(y,{id:"users"},t("table-heading-users"))},renderRepositoriesColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var r={repos:T(this.props.repos,e),project:e,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(E,r))}return a.createElement(y,{id:"repos"},t("table-heading-repositories"))},renderDateRangeColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){if(e.deleted)return a.createElement("td",null,t("project-list-deleted"));var r,n,o=i.get(this.props.statistics,[e.id,"range"]);return o&&(r=s(o.start).format("ll"),n=s(o.end).format("ll")),a.createElement("td",null,t("date-range-$start-$end",r,n))}return a.createElement(y,{id:"range"},t("table-heading-date-range"))},renderLastMonthColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"last_month"]),locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(k,r))}return a.createElement(y,{id:"last_month"},t("table-heading-last-month"))},renderThisMonthColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"this_month"]),locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(k,r))}return a.createElement(y,{id:"this_month"},t("table-heading-this-month"))},renderToDateColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"to_date"]),locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(k,r))}return a.createElement(y,{id:"to_date"},t("table-heading-to-date"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={time:e.mtime,locale:this.props.locale};return a.createElement("td",null,a.createElement(w,r))}return a.createElement(y,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){return this.props.route.push(r(49),{project:"new"})},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.locale.translate,n=this.state.archivingProjectIds,s=this.state.restoringProjectIds,a=[r("project-list-confirm-archive-$count",n.length),r("project-list-confirm-restore-$count",s.length)],o=[i.isEmpty(n)||void 0,i.isEmpty(s)||void 0];return this.components.confirmation.askSeries(a,o).then(function(e){if(e){var r=t.props.database.use({schema:"global",by:t});return r.start().then(function(e){var a=[];return i.each(t.props.projects,function(e){var t={};if(i.includes(n,e.id))t.archived=!0;else{if(!i.includes(s,e.id))return;t.archived=t.deleted=!1}var r=i.assign({},e,t);a.push(r)}),r.save({table:"project"},a).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-project-id")),r=i.find(this.props.projects,{id:t}),n=i.slice(this.state.restoringProjectIds),s=i.slice(this.state.archivingProjectIds);r.deleted||r.archived?i.includes(n,r.id)?i.pull(n,r.id):n.push(r.id):i.includes(s,r.id)?i.pull(s,r.id):s.push(r.id);var a=!i.isEmpty(n)||!i.isEmpty(s);this.setState({restoringProjectIds:n,archivingProjectIds:s,hasChanges:a})}}),N=c(function(e,t,r,n,s,a,o){var l=this;return a=i.map(a,function(e){switch(e){case"title":return function(e){return s.pick(e.details.title)};case"users":return function(e){return i.size(P(t,e))};case"repos":return function(e){return i.size(P(r,e))};case"range":return function(e){return i.get(l.props.statistics,[e.id,"range","start"],"")};case"last_month":return function(e){return i.get(l.props.statistics,[e.id,"last_month","total"],0)};case"this_month":return function(e){return i.get(l.props.statistics,[e.id,"this_month","total"],0)};case"to_date":return function(e){return i.get(l.props.statistics,[e.id,"to_date","total"],0)};default:return e}}),i.orderBy(e,a,o)}),j=c(function(e){return i.filter(e,function(e){return!e.deleted&&!e.archived})}),T=c(function(e,t){var r=i.keyBy(e,"id");return i.filter(i.map(t.repo_ids,function(e){return r[e]}))}),P=c(function(e,t){var r=i.keyBy(e,"id");return i.filter(i.map(t.user_ids,function(e){return r[e]}))})},function(e,t,r){"use strict";function n(e,t){e||(e=500);var r=i[e];this.statusCode=e,this.name=r,this.message=r;for(var n in t)this[n]=t[n]}e.exports=n;var i={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"};n.prototype=Object.create(Error.prototype)},function(e,t,r){"use strict";function n(e){var t=e.offsetHeight,r=e.getElementsByClassName("collapsible-container");return _.each(r,function(e){if(t-=e.offsetHeight,parseInt(e.style.height)>0){var r=e.children[0];t+=r.offsetHeight}}),t}var i=r(0),s=(i.PropTypes,r(16));r(554),e.exports=i.createClass({displayName:"CollapsibleContainer",propTypes:{open:i.PropTypes.bool},getInitialState:function(){return this.components=s({container:HTMLDivElement,contents:HTMLDivElement}),{contentHeight:void 0,collapsing:!1,expanding:!1}},componentWillReceiveProps:function(e){this.props.open!==e.open&&(e.open?this.setState({collapsing:!1,expanding:!0}):this.setState({collapsing:!0,expanding:!1}))},render:function(){var e=this.components.setters,t={};this.props.open?t.height=this.state.contentHeight:t.height=0;var r="collapsible-container";return this.state.expanding?r+=" expanding":this.state.collapsing&&(r+=" collapsing"),i.createElement("div",{ref:e.container,className:r,style:t},i.createElement("div",{ref:e.contents,className:"collapsible-contents"},this.props.children))},componentDidMount:function(){this.props.open&&this.componentDidUpdate()},componentDidUpdate:function(e,t){var r=n(this.components.contents);this.state.contentHeight!==r&&this.setState({contentHeight:r})}})},,,,,,,,,,,function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(22),a=r(0),o=a.PropTypes,l=r(17),c=r(24),u=r(10),d=r(11),p=r(4),h=r(6),m=r(48),f=r(18),g=r(31),v=r(41),b=v.TH,y=r(86),C=r(105),E=r(147),k=r(53),w=r(52),x=r(23);r(515),e.exports=l.createClass({displayName:"MemberListPage",propTypes:{database:o.instanceOf(u).isRequired,route:o.instanceOf(d).isRequired,locale:o.instanceOf(p).isRequired,theme:o.instanceOf(h).isRequired},statics:{parseUrl:function(e,t,r){return d.match(e,["/projects/:project/members/?"],function(e){return e.project=i.strictParseInt(e.project),e.edit=!!t.edit,e})},getUrl:function(e){var t,r="/projects/"+e.project+"/members/";return e.edit&&(t={edit:1}),{path:r,query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),s=this.props.route!==t.route?100:1e3,o={project:null,users:null,roles:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(a.createElement(S,o),s),n.start().then(function(e){var t={id:r.project};return n.findOne({table:"project",criteria:t,required:!0})}).then(function(e){o.project=e}).then(function(){var e={deleted:!1};return n.find({table:"user",criteria:e})}).then(function(t){return o.users=t,e.show(a.createElement(S,o))}).then(function(){var e={id:i.uniq(i.flatten(i.map(o.users,"role_ids")))};return n.find({table:"role",criteria:e})}).then(function(t){return o.roles=t,e.show(a.createElement(S,o))}).then(function(){var e=O(o.users,o.project);return m.loadUserStatistics(n,o.project,e)}).then(function(e){return o.statistics=e,a.createElement(S,o)})}});var S=e.exports.Sync=a.createClass({displayName:"MemberListPage.Sync",propTypes:{project:o.object,users:o.arrayOf(o.object),roles:o.arrayOf(o.object),statistics:o.objectOf(o.object),database:o.instanceOf(u).isRequired,route:o.instanceOf(d).isRequired,locale:o.instanceOf(p).isRequired,theme:o.instanceOf(h).isRequired},getInitialState:function(){return{sortColumns:["name"],sortDirections:["asc"],removingUserIds:[],addingUserIds:[],hasChanges:!1,renderingFullList:this.isEditing()}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,n=i.clone(r.parameters);return n.edit=t,this.props.route.replace(e.exports,n)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,removingUserIds:[],addingUserIds:[],changes:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1})},500))},render:function(){var e=this.props.locale.translate;return a.createElement("div",{className:"member-list-page"},this.renderButtons(),a.createElement("h2",null,e("member-list-title")),this.renderTable(),a.createElement(x,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return a.createElement("div",{key:"edit",className:"buttons"},a.createElement(f,{onClick:this.handleCancelClick},e("member-list-cancel"))," ",a.createElement(f,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("member-list-save")));var t=i.get(this.props.project,"user_ids"),r=i.some(this.props.users,function(e){return!i.includes(t,e.id)}),n=r?"approve":void 0;return a.createElement("div",{key:"view",className:"buttons"},a.createElement(g,{preselected:n},a.createElement("option",{name:"approve",disabled:!r,onClick:this.handleApproveClick},e("member-list-approve-all")),a.createElement("option",{name:"reject",disabled:!r,onClick:this.handleRejectClick},e("member-list-reject-all")),a.createElement("option",{name:"add",separator:!0,onClick:this.handleAddClick},e("member-list-add")))," ",a.createElement(f,{className:"emphasis",onClick:this.handleEditClick},e("member-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing()),a.createElement(v,e,a.createElement("thead",null,this.renderHeadings()),a.createElement("tbody",{ref:"tbody"},this.renderRows()))},renderHeadings:function(){return a.createElement("tr",null,this.renderNameColumn(),this.renderTypeColumn(),this.renderRolesColumn(),this.renderDateRangeColumn(),this.renderLastMonthColumn(),this.renderThisMonthColumn(),this.renderToDateColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e;e=this.state.renderingFullList?this.props.users:O(this.props.users,this.props.project);var e=R(e,this.props.roles,this.props.statistics,this.props.locale,this.state.sortColumns,this.state.sortDirections);return i.map(e,this.renderRow)},renderRow:function(e){var t,r,s=this.props.locale.translate,o=[],l=i.includes(this.props.project.user_ids,e.id),c=i.includes(e.requested_project_ids,this.props.project.id);l||(c?(o.push("pending"),t=s("member-list-status-pending")):(o.push("disabled"),t=s("member-list-status-non-member"))),this.state.renderingFullList&&((l||c)&&o.push("fixed"),l?i.includes(this.state.removingUserIds,e.id)||o.push("selected"):i.includes(this.state.addingUserIds,e.id)&&o.push("selected"),r=this.handleRowClick);var u={className:o.join(" "),"data-user-id":e.id,onClick:r,title:t};return a.createElement("tr",n({key:e.id},u),this.renderNameColumn(e),this.renderTypeColumn(e),this.renderRolesColumn(e),this.renderDateRangeColumn(e),this.renderLastMonthColumn(e),this.renderThisMonthColumn(e),this.renderToDateColumn(e),this.renderModifiedTimeColumn(e))},renderNameColumn:function(e){var t=this.props.locale.translate,n=this.props.locale.pick;if(e){var s,o,l=n(e.details.name),c=e.username;if(this.state.renderingFullList){var u,d=i.get(this.props.project,"user_ids",[]),p=i.includes(d,e.id);u=p?!i.includes(this.state.removingUserIds,e.id):i.includes(this.state.addingUserIds,e.id),p!==u&&(o=u?a.createElement(k,{type:"add",locale:this.props.locale}):a.createElement(k,{type:"remove",locale:this.props.locale}))}else s=this.props.route.find(r(30),{user:e.id,project:this.props.project.id});var h=a.createElement(y,{user:e,theme:this.props.theme}),m=t("user-list-$name-with-$username",l,c);return a.createElement("td",null,a.createElement("a",{href:s},h," ",m),o)}return a.createElement(b,{id:"name"},t("table-heading-name"))},renderTypeColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;return e?a.createElement("td",null,t("user-list-type-"+e.type)):a.createElement(b,{id:"type"},t("table-heading-type"))},renderRolesColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={roles:N(this.props.roles,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return a.createElement("td",null,a.createElement(E,r))}return a.createElement(b,{id:"roles"},t("table-heading-roles"))},renderEmailColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var r,n=e.details.email;return!this.state.renderingFullList&&n&&(r="mailto:"+n),a.createElement("td",null,a.createElement("a",{href:r},n))}return a.createElement(b,{id:"email"},t("table-heading-email"))},renderDateRangeColumn:function(e,t){if(this.props.theme.isBelowMode("wide"))return null;var r=this.props.locale.translate;if(e){var n,o,l=i.get(this.props.statistics,[e.id,"range"]);return l&&(n=s(l.start).format("ll"),o=s(l.end).format("ll")),a.createElement("td",null,r("date-range-$start-$end",n,o))}return a.createElement(b,{id:"range"},r("table-heading-date-range"))},renderLastMonthColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"last_month"]),locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return a.createElement("td",null,a.createElement(C,r))}return a.createElement(b,{id:"last_month"},t("table-heading-last-month"))},renderThisMonthColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"this_month"]),locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return a.createElement("td",null,a.createElement(C,r))}return a.createElement(b,{id:"this_month"},t("table-heading-this-month"))},renderToDateColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"to_date"]),locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return a.createElement("td",null,a.createElement(C,r))}return a.createElement(b,{id:"to_date"},t("table-heading-to-date"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={time:e.mtime,disabled:this.state.renderingFullList,locale:this.props.locale};return a.createElement("td",null,a.createElement(w,r))}return a.createElement(b,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleEditClick:function(e){this.setEditability(!0)},handleAddClick:function(e){var t=this.props.route,n=i.clone(t.parameters);return n.user="new",t.push(r(30),n)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.database.use({schema:"global",by:this});return r.start().then(function(e){var n=t.state.removingUserIds,s=t.state.addingUserIds,a=t.props.project.user_ids,o=i.union(i.difference(a,n),s),l={id:t.props.project.id,user_ids:o};return r.saveOne({table:"project"},l).then(function(e){return t.setState({hasChanges:!1},function(){return t.setEditability(!1)}),null})})},handleApproveClick:function(e){var t=this,r=this.props.database.use({schema:"global",by:this});return r.start().then(function(e){var n=t.props.project.id,s=i.filter(t.props.users,function(e){if(i.includes(e.requested_project_ids,n))return!0}),a=i.map(s,"id"),o=t.props.project.user_ids,l=i.union(o,a),c={id:t.props.project.id,user_ids:l};return r.saveOne({table:"project"},c)})},handleRejectClick:function(e){var t=this,r=this.props.database.use({schema:"global",by:this});return r.start().then(function(e){var n=t.props.project.id,s=i.filter(t.props.users,function(e){if(i.includes(e.requested_project_ids,n))return!0}),a=i.map(s,function(e){return{id:e.id,requested_project_ids:i.without(e.requested_project_ids,n)}});return r.save({table:"user"},a)})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-user-id")),r=this.props.project.user_ids,n=i.slice(this.state.addingUserIds),s=i.slice(this.state.removingUserIds);i.includes(r,t)?i.includes(s,t)?i.pull(s,t):s.push(t):i.includes(n,t)?i.pull(n,t):n.push(t);var a=!i.isEmpty(n)||!i.isEmpty(s);this.setState({addingUserIds:n,removingUserIds:s,hasChanges:a})}}),R=c(function(e,t,r,n,s,a){var o=n.pick;return s=i.map(s,function(e){switch(e){case"name":return function(e){return o(e.details.name)};case"range":return function(e){return i.get(r,[e.id,"range","start"],"")};case"last_month":return function(e){return i.get(r,[e.id,"last_month","total"],0)};case"this_month":return function(e){return i.get(r,[e.id,"this_month","total"],0)};case"to_date":return function(e){return i.get(r,[e.id,"to_date","total"],0)};default:return e}}),i.orderBy(e,s,a)}),O=c(function(e,t){if(t){var r=i.keyBy(e,"id"),n=i.filter(i.map(t.user_ids,function(e){return r[e]})),s=i.filter(e,function(e){return i.includes(e.requested_project_ids,t.id)});return i.union(n,s)}return[]}),N=c(function(e,t){var r=i.keyBy(e,"id");return i.filter(i.map(t.role_ids,function(e){return r[e]}))})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(22),a=r(0),o=a.PropTypes,l=r(17),c=r(24),u=r(16),d=r(10),p=r(11),h=r(4),m=r(6),f=r(48),g=r(18),v=r(41),b=v.TH,y=r(105),C=r(52),E=r(53),k=r(27),w=r(23);r(518),e.exports=l.createClass({displayName:"RepoListPage",propTypes:{database:o.instanceOf(d).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(m).isRequired},statics:{parseUrl:function(e,t,r){return p.match(e,["/projects/:project/repos/?"],function(e){return e.project=parseInt(e.project),e.edit=!!t.edit,e})},getUrl:function(e){var t,r="/projects/"+e.project+"/repos/";return e.edit&&(t={edit:1}),{path:r,query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),s=this.props.route!==t.route?100:1e3,o={project:null,repos:null,servers:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(a.createElement(x,o),s),n.start().then(function(e){var t={id:r.project};return n.findOne({table:"project",criteria:t,required:!0})}).then(function(e){o.project=e}).then(function(){var e={};return n.find({table:"repo",criteria:e})}).then(function(t){return o.repos=t,e.show(a.createElement(x,o))}).then(function(){var e={id:i.map(o.repos,"server_id")};return n.find({table:"server",criteria:e})}).then(function(t){return o.servers=t,e.show(a.createElement(x,o))}).then(function(){var e=O(o.repos,o.project);return f.loadRepoStatistics(n,o.project,e)}).then(function(e){return o.statistics=e,a.createElement(x,o)})}});var x=e.exports.Sync=a.createClass({displayName:"RepoListPage.Sync",propTypes:{repos:o.arrayOf(o.object),project:o.object,servers:o.arrayOf(o.object),statistics:o.objectOf(o.object),database:o.instanceOf(d).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(m).isRequired},getInitialState:function(){return this.components=u({confirmation:k}),{sortColumns:["name"],sortDirections:["asc"],selectedRepoIds:[],hasChanges:!1,renderingFullList:this.isEditing()}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,n=i.clone(r.parameters);return n.edit=t,this.props.route.replace(e.exports,n)},componentWillReceiveProps:function(e){var t=this;if(this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,selectedRepoIds:i.get(e.project,"repo_ids",[]),hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1})},500)),this.props.project!==e.project&&e.project){var r=this.state.selectedRepoIds,n=i.get(this.props.project,"repo_ids",[]),s=i.get(e.project,"repo_ids",[]);r===n?r=s:i.isEqual(n,s)||(r=i.union(r,s)),this.setState({selectedRepoIds:r})}},render:function(){var e=this.props.locale.translate;return a.createElement("div",{className:"repo-list-page"},this.renderButtons(),a.createElement("h2",null,e("repo-list-title")),this.renderTable(),a.createElement(k,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),a.createElement(w,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;return this.isEditing()?a.createElement("div",{className:"buttons"},a.createElement(g,{onClick:this.handleCancelClick},e("repo-list-cancel"))," ",a.createElement(g,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("repo-list-save"))):a.createElement("div",{className:"buttons"},a.createElement(g,{className:"emphasis",onClick:this.handleEditClick},e("repo-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing()),a.createElement(v,e,a.createElement("thead",null,this.renderHeadings()),a.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return a.createElement("tr",null,this.renderTitleColumn(),this.renderServerColumn(),this.renderIssueTrackerColumn(),this.renderDateRangeColumn(),this.renderLastMonthColumn(),this.renderThisMonthColumn(),this.renderToDateColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.repos;return this.state.renderingFullList||(e=O(e,this.props.project)),e=S(e,this.props.servers,this.props.statistics,this.props.locale,this.state.sortColumns,this.state.sortDirections),i.map(e,this.renderRow)},renderRow:function(e,t){var r={};if(this.state.renderingFullList){var s=i.get(this.props.project,"repo_ids",[]);i.includes(s,e.id)&&(r.className="fixed"),i.includes(this.state.selectedRepoIds,e.id)&&(r.className+=" selected"),r.onClick=this.handleRowClick,r["data-repo-id"]=e.id}return a.createElement("tr",n({key:e.id},r),this.renderTitleColumn(e),this.renderServerColumn(e),this.renderIssueTrackerColumn(e),this.renderDateRangeColumn(e),this.renderLastMonthColumn(e),this.renderThisMonthColumn(e),this.renderToDateColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var n,s,o=this.props.locale.pick,l=o(e.details.title)||e.name;if(this.state.renderingFullList){var c=i.get(this.props.project,"repo_ids",[]),u=i.includes(c,e.id),d=i.includes(this.state.selectedRepoIds,e.id);u!==d&&(s=d?a.createElement(E,{type:"add",locale:this.props.locale}):a.createElement(E,{type:"remove",locale:this.props.locale}))}else{var p=this.props.route,h=i.clone(p.parameters);h.repo=e.id,n=p.find(r(82),h)}return a.createElement("td",null,a.createElement("a",{href:n},l),s)}return a.createElement(b,{id:"title"},t("table-heading-title"))},renderServerColumn:function(e){var t=this.props.locale.translate;if(e){var n,i=this.props.locale.pick,s=R(this.props.servers,e);if(s){var o=i(s.details.title)||t("server-type-"+s.type),l=this.props.route,c={server:s.id},u=l.find(r(51),c);n=a.createElement("a",{href:u},a.createElement("i",{className:"fa fa-"+s.type+" fa-fw"})," ",o)}return a.createElement("td",null,n)}return a.createElement(b,{id:"server"},t("table-heading-server"))},renderIssueTrackerColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var r=(this.props.locale.pick,!!e.details.issues_enabled);return a.createElement("td",null,t("repo-list-issue-tracker-enabled-"+r))}return a.createElement(b,{id:"issue_tracker"},t("table-heading-issue-tracker"))},renderDateRangeColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var r,n,o=i.get(this.props.statistics,[e.id,"range"]);return o&&(r=s(o.start).format("ll"),n=s(o.end).format("ll")),a.createElement("td",null,t("date-range-$start-$end",r,n))}return a.createElement(b,{id:"range"},t("table-heading-date-range"))},renderLastMonthColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"last_month"]),locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(y,r))}return a.createElement(b,{id:"last_month"},t("table-heading-last-month"))},renderThisMonthColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"this_month"]),locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(y,r))}return a.createElement(b,{id:"this_month"},t("table-heading-this-month"))},renderToDateColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={statistics:i.get(this.props.statistics,[e.id,"to_date"]),locale:this.props.locale,theme:this.props.theme};return a.createElement("td",null,a.createElement(y,r))}return a.createElement(b,{id:"to_date"},t("table-heading-to-date"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={time:e.mtime,locale:this.props.locale};return a.createElement("td",null,a.createElement(C,r))}return a.createElement(b,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.locale.translate,n=i.get(this.props.project,"repo_ids",[]),s=i.difference(n,this.state.selectedRepoIds),a=r("repo-list-confirm-remove-$count",s.length);return this.components.confirmation.ask(a,i.isEmpty(s)||void 0).then(function(e){if(e){var r=t.props.database.use({schema:"global",by:t});return r.start().then(function(e){var n={id:t.props.project.id,repo_ids:t.state.selectedRepoIds};return r.saveOne({table:"project"},n).then(function(e){t.setState({hasChanges:!1},function(){t.setEditability(!1)})})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-repo-id")),r=this.props.project.repo_ids,n=i.slice(this.state.selectedRepoIds),s=!0;i.includes(n,t)?i.pull(n,t):n.push(t),n.length===r.length&&0===i.difference(n,r).length&&(n=r,s=!1),this.setState({selectedRepoIds:n,hasChanges:s})}}),S=c(function(e,t,r,n,s,a){var o=n.translate,l=n.pick;return s=i.map(s,function(e){switch(e){case"title":return function(e){return l(e.details.title)||e.name};case"server":return function(e){var r=R(t,e);return r?l(r.details.title)||o("server-type-"+r.type):""};case"issue_tracker":return"details.issues_enabled";case"range":return function(e){return i.get(r,[e.id,"range","start"],"")};case"last_month":return function(e){return i.get(r,[e.id,"last_month","total"],0)};case"this_month":return function(e){return i.get(r,[e.id,"this_month","total"],0)};case"to_date":return function(e){return i.get(r,[e.id,"to_date","total"],0)};default:return e}}),i.orderBy(e,s,a)}),R=c(function(e,t){return t?i.find(e,{id:t.server_id}):null}),O=c(function(e,t){if(t){var r=i.keyBy(e,"id");return i.filter(i.map(t.repo_ids,function(e){return r[e]}))}return[]})},function(e,t,r){"use strict";var n=(Object.assign,r(1)),i=r(0),s=i.PropTypes,a=r(17),o=r(16),l=r(10),c=r(11),u=r(4),d=r(6),p=r(48),h=r(18),m=r(31),f=r(54),g=r(42),v=r(55),b=(r(56),r(107)),y=r(27),C=r(23);r(519),e.exports=a.createClass({displayName:"RepoSummaryPage",propTypes:{database:s.instanceOf(l).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(u).isRequired,theme:s.instanceOf(d).isRequired},statics:{parseUrl:function(e,t,r){return c.match(e,["/projects/:project/repos/:repo/?"],function(e){return e.project=n.strictParseInt(e.project),e.repo=n.strictParseInt(e.repo),e.edit=!!t.edit,e})},getUrl:function(e){var t,r="/projects/"+e.project+"/repos/"+e.repo+"/";return e.edit&&(t={edit:1}),{path:r,query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),s=this.props.route!==t.route?100:1e3,a={system:null,project:null,repo:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(E,a),s),n.start().then(function(e){var t={};return n.findOne({table:"system",criteria:t})}).then(function(e){a.system=e}).then(function(){if(r.repo){var e={id:r.repo};return n.findOne({table:"repo",criteria:e,required:!0})}}).then(function(t){return a.repo=t,e.show(i.createElement(E,a))}).then(function(){var e={id:r.project};return n.findOne({table:"project",criteria:e,required:!0})}).then(function(t){return a.project=t,e.show(i.createElement(E,a))}).then(function(){return p.loadRepoStatistics(n,a.project,[a.repo]).then(function(e){return e[a.repo.id]})}).then(function(e){return a.statistics=e,i.createElement(E,a)})}});var E=e.exports.Sync=i.createClass({displayName:"RepoSummaryPage.Sync",propTypes:{system:s.object,repo:s.object,project:s.object,database:s.instanceOf(l).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(u).isRequired,theme:s.instanceOf(d).isRequired},getInitialState:function(){return this.components=o({confirmation:y}),{newRepo:null}},getRepo:function(e){return!this.isEditing()||e&&"current"!==e?this.props.repo||k:this.state.newRepo||this.props.repo||k},getRepoProperty:function(e,t){var r=this.getRepo(t);return n.get(r,e)},setRepoProperty:function(e,t){var r=this.getRepo(),i=n.decoupleSet(r,e,t),s=!0;n.isEqual(i,this.props.repo)&&(i=null,s=!1),this.setState({newRepo:i,hasChanges:s})},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,i=n.clone(r.parameters);return i.edit=t,r.replace(e.exports,i)},returnToList:function(){var e=this.props.route,t={project:e.parameters.project};return e.push(r(81),t)},getInputLanguages:function(){return n.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&this.isEditing(e)&&this.setState({newRepo:null,hasChanges:!1})},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.getRepo(),s=t(n.get(r,"details.title"))||r.name;return i.createElement("div",{className:"repo-summary-page"},this.renderButtons(),i.createElement("h2",null,e("repo-summary-$title",s)),this.renderForm(),this.renderInstructions(),this.renderChart(),i.createElement(y,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),i.createElement(C,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return i.createElement("div",{key:"edit",className:"buttons"},i.createElement(h,{onClick:this.handleCancelClick},e("repo-summary-cancel"))," ",i.createElement(h,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("repo-summary-save")));var t=this.props.route.parameters.repo,r=this.props.project,s=!r||n.includes(r.repo_ids,t),a=s?void 0:"restore";return i.createElement("div",{key:"view",className:"buttons"},i.createElement(m,{preselected:a},i.createElement("option",{name:"return",onClick:this.handleReturnClick},e("repo-summary-return")),i.createElement("option",{name:"remove",disabled:!s,onClick:this.handleRemoveClick},e("repo-summary-remove")),i.createElement("option",{name:"restore",hidden:s,onClick:this.handleRestoreClick},e("repo-summary-restore")))," ",i.createElement(h,{className:"emphasis",onClick:this.handleEditClick},e("repo-summary-edit")))},renderForm:function(){return i.createElement("div",{className:"form"},this.renderTitleInput(),this.renderNameInput(),this.renderIssueTrackingStatus())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getRepoProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return i.createElement(v,t,e("repo-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getRepoProperty("name"),locale:this.props.locale,readOnly:!0};return i.createElement(g,t,e("repo-summary-gitlab-name"))},renderIssueTrackingStatus:function(){var e,t=this.props.locale.translate;e=t(this.getRepoProperty("details.issues_enabled")?"repo-summary-issue-tracker-enabled":"repo-summary-issue-tracker-disabled");var r={id:"issue-tracker",value:e,locale:this.props.locale,readOnly:!0};return i.createElement(g,r,t("repo-summary-issue-tracker"))},renderInstructions:function(){var e={topic:"repo",hidden:!this.isEditing(),locale:this.props.locale};return i.createElement("div",{className:"instructions"},i.createElement(f,e))},renderChart:function(){var e=this.props.locale.translate,t={statistics:this.props.statistics,locale:this.props.locale,theme:this.props.theme};return i.createElement("div",{className:"statistics"},i.createElement(b,t,e("repo-summary-statistics")))},changeInclusion:function(e){var t=this.props.database.use({schema:"global",by:this}),r=this.props.repo,i=this.props.project.repo_ids;i=e?n.union(i,[r.id]):n.difference(i,[r.id]);var s=n.assign({},this.props.project,{repo_ids:i});return t.saveOne({table:"project"},s)},handleRemoveClick:function(e){var t=this,r=this.props.locale.translate,n=r("repo-summary-confirm-remove");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeInclusion(!1).then(function(e){return t.returnToList()})})},handleRestoreClick:function(e){var t=this,r=this.props.locale.translate,n=r("repo-summary-confirm-restore");return this.components.confirmation.ask(n).then(function(e){if(e)return t.changeInclusion(!0)})},handleReturnClick:function(e){return this.returnToList()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.database.use({schema:"global",by:this}),n=this.getRepo();return r.start().then(function(e){return r.saveOne({table:"repo"},n).then(function(e){t.setState({hasChanges:!1},function(){t.setEditability(!1)})})})},handleTitleChange:function(e){this.setRepoProperty("details.title",e.target.value)}}),k={details:{}}},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(0),a=s.PropTypes,o=r(17),l=r(24),c=r(16),u=r(10),d=r(11),p=r(4),h=r(6),m=r(18),f=r(31),g=r(41),v=g.TH,b=r(106),y=r(52),C=r(53),E=r(27),k=r(23);r(520),e.exports=o.createClass({displayName:"RolesPage",propTypes:{database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired},statics:{parseUrl:function(e,t,r){return d.match(e,["/roles/?"],function(e){return e.edit=!!t.edit,e})},getUrl:function(e){var t;return e.edit&&(t={edit:1}),{path:"/roles/",query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.database.use({schema:"global",by:this}),n=this.props.route!==t.route?100:1e3,a={roles:null,users:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(s.createElement(w,a),n),r.start().then(function(e){var t={};return r.find({table:"role",criteria:t})}).then(function(t){return a.roles=t,e.show(s.createElement(w,a))}).then(function(){var e={role_ids:i.flatten(i.map(a.roles,"id"))};return r.find({table:"user",criteria:e})}).then(function(e){return a.users=e,s.createElement(w,a)})}});var w=e.exports.Sync=s.createClass({displayName:"RoleListPage.Sync",propTypes:{roles:a.arrayOf(a.object),users:a.arrayOf(a.object),database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired},getInitialState:function(){return this.components=c({confirmation:E}),{sortColumns:["name"],sortDirections:["asc"],restoringRoleIds:[],disablingRoleIds:[],hasChanges:!1,renderingFullList:this.isEditing()}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,n=i.clone(r.parameters);return n.edit=t,this.props.route.replace(e.exports,n)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringRoleIds:[],disablingRoleIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1})},500))},render:function(){var e=this.props.locale.translate;return s.createElement("div",{className:"role-list-page"},this.renderButtons(),s.createElement("h2",null,e("role-list-title")),this.renderTable(),s.createElement(E,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),s.createElement(k,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return s.createElement("div",{className:"buttons"},s.createElement(m,{onClick:this.handleCancelClick},e("role-list-cancel"))," ",s.createElement(m,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("role-list-save")));return s.createElement("div",{className:"buttons"},s.createElement(f,{preselected:"add"},s.createElement("option",{name:"add",onClick:this.handleAddClick},e("role-list-add")))," ",s.createElement(m,{className:"emphasis",onClick:this.handleEditClick},e("role-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing(),e.onClick=this.handleRowClick),s.createElement(g,e,s.createElement("thead",null,this.renderHeadings()),s.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return s.createElement("tr",null,this.renderTitleColumn(),this.renderUsersColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.roles;return this.state.renderingFullList||(e=x(e)),e=S(e,this.props.users,this.props.locale,this.state.sortColumns,this.state.sortDirections),i.map(e,this.renderRow)},renderRow:function(e){var t,r,a=this.props.locale.translate,o=[];e.deleted?(o.push("deleted"),r=a("role-list-status-deleted")):e.disabled&&(o.push("disabled"),r=a("role-list-status-disabled")),this.state.renderingFullList&&(e.deleted||e.disabled?i.includes(this.state.restoringRoleIds,e.id)&&o.push("selected"):(o.push("fixed"),i.includes(this.state.disablingRoleIds,e.id)||o.push("selected")),t=this.handleRowClick);var l={className:o.join(" "),"data-role-id":e.id,title:r,onClick:t};return s.createElement("tr",n({key:e.id},l),this.renderTitleColumn(e),this.renderUsersColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var n,a,o=this.props.locale.pick,l=o(e.details.title)||"-";if(this.state.renderingFullList){var c,u;e.deleted||e.disabled?(c=!1,u=i.includes(this.state.restoringRoleIds,e.id)):(c=!0,u=!i.includes(this.state.disablingRoleIds,e.id)),c!==u&&(a=u?s.createElement(C,{type:"reactivate",locale:this.props.locale}):s.createElement(C,{type:"disable",locale:this.props.locale}))}else{var d=this.props.route,p={role:e.id};n=d.find(r(50),p)}return s.createElement("td",null,s.createElement("a",{href:n},l)," ",a)}return s.createElement(v,{id:"title"},t("table-heading-title"))},renderUsersColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var r={users:R(this.props.users,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme};return s.createElement("td",null,s.createElement(b,r))}return s.createElement(v,{id:"users"},t("table-heading-users"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={time:e.mtime,locale:this.props.locale};return s.createElement("td",null,s.createElement(y,r))}return s.createElement(v,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){var t=this.props.route,n={role:"new"};return t.push(r(50),n)},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.locale.translate,n=this.state.disablingRoleIds,s=this.state.restoringRoleIds,a=[r("role-list-confirm-disable-$count",n.length),r("role-list-confirm-reactivate-$count",s.length)],o=[i.isEmpty(n)||void 0,i.isEmpty(s)||void 0];return this.components.confirmation.askSeries(a,o).then(function(e){if(e){var r=t.props.database.use({schema:"global",by:t});return r.start().then(function(e){var a=[];return i.each(t.props.roles,function(e){var t={};if(i.includes(n,e.id))t.disabled=!0;else{if(!i.includes(s,e.id))return;t.disabled=t.deleted=!1}var r=i.assign({},e,t);a.push(r)}),r.save({table:"role"},a).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-role-id")),r=i.find(this.props.roles,{id:t}),n=i.slice(this.state.restoringRoleIds),s=i.slice(this.state.disablingRoleIds);r.deleted||r.disabled?i.includes(n,r.id)?i.pull(n,r.id):n.push(r.id):i.includes(s,r.id)?i.pull(s,r.id):s.push(r.id);var a=!i.isEmpty(n)||!i.isEmpty(s);this.setState({restoringRoleIds:n,disablingRoleIds:s,hasChanges:a})}}),x=l(function(e){return i.filter(e,function(e){return!e.deleted&&!e.disabled})}),S=l(function(e,t,r,n,s){return n=i.map(n,function(e){switch(e){case"title":return function(e){return r.pick(e.details.title)};default:return e}}),i.orderBy(e,n,s)}),R=l(function(e,t){return i.filter(e,function(e){return i.includes(e.role_ids,t.id)})})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=(r(22),r(0)),a=s.PropTypes,o=r(17),l=r(24),c=r(16),u=r(151),d=r(10),p=r(11),h=r(4),m=r(6),f=r(18),g=r(31),v=r(41),b=v.TH,y=r(86),C=r(232),E=r(147),k=r(52),w=r(53),x=r(27),S=r(23);r(527),e.exports=o.createClass({displayName:"UserListPage",propTypes:{database:a.instanceOf(d).isRequired,route:a.instanceOf(p).isRequired,locale:a.instanceOf(h).isRequired,theme:a.instanceOf(m).isRequired},statics:{parseUrl:function(e,t,r){return p.match(e,["/users/?"],function(e){return e.edit=!!t.edit,e})},getUrl:function(e){var t;return e&&e.edit&&(t={edit:1}),{path:"/users/",query:t,hash:void 0}}},renderAsync:function(e,t){var r=(this.props.route.parameters,this.props.database.use({schema:"global",by:this})),n=this.props.route!==t.route?100:1e3,a={users:null,projects:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(s.createElement(R,a),n),r.start().then(function(e){var t={};return r.find({table:"user",criteria:t})}).then(function(t){return a.users=t,e.show(s.createElement(R,a))}).then(function(){var e={user_ids:i.map(a.users,"id")};return r.find({table:"project",criteria:e})}).then(function(e){a.projects=e}).then(function(){var e={id:i.flatten(i.map(a.users,"role_ids"))};return r.find({table:"role",criteria:e})}).then(function(e){return a.roles=e,s.createElement(R,a)})}});var R=e.exports.Sync=s.createClass({displayName:"UserListPage.Sync",propTypes:{users:a.arrayOf(a.object),projects:a.arrayOf(a.object),roles:a.arrayOf(a.object),database:a.instanceOf(d).isRequired,route:a.instanceOf(p).isRequired,locale:a.instanceOf(h).isRequired,theme:a.instanceOf(m).isRequired},getInitialState:function(){return this.components=c({confirmation:x}),{sortColumns:["name"],sortDirections:["asc"],restoringUserIds:[],disablingUserIds:[],hasChanges:!1,renderingFullList:this.isEditing()}},setEditability:function(t){var r=this.props.route,n={edit:t};return r.replace(e.exports,n)},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringUserIds:[],disablingUserIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1})},500))},render:function(){var e=this.props.locale.translate;return s.createElement("div",{className:"user-list-page"},this.renderButtons(),s.createElement("h2",null,e("user-list-title")),this.renderTable(),s.createElement(x,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),s.createElement(S,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;return this.isEditing()?s.createElement("div",{className:"buttons"},s.createElement(f,{onClick:this.handleCancelClick},e("user-list-cancel"))," ",s.createElement(f,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("user-list-save"))):s.createElement("div",{className:"buttons"},s.createElement(g,null,s.createElement("option",{name:"add",separator:!0,onClick:this.handleAddClick},e("user-list-add")))," ",s.createElement(f,{className:"emphasis",onClick:this.handleEditClick},e("user-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expanded=this.isEditing(),e.expandable=!0,e.selectable=!0),s.createElement(v,e,s.createElement("thead",null,this.renderHeadings()),s.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return s.createElement("tr",null,this.renderNameColumn(),this.renderTypeColumn(),this.renderRolesColumn(),this.renderProjectsColumn(),this.renderEmailColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.users;return this.state.renderingFullList||(e=N(e)),e=O(e,this.props.roles,this.props.projects,this.props.locale,this.state.sortColumns,this.state.sortDirections),i.map(e,this.renderRow)},renderRow:function(e){var t,r,a=this.props.locale.translate,o=[];e.deleted?(o.push("deleted"),r=a("user-list-status-deleted")):e.disabled&&(o.push("disabled"),r=a("user-list-status-disabled")),this.state.renderingFullList&&(e.deleted||e.disabled?i.includes(this.state.restoringUserIds,e.id)&&o.push("selected"):(o.push("fixed"),i.includes(this.state.disablingUserIds,e.id)||o.push("selected")),t=this.handleRowClick);var l={className:o.join(" "),"data-user-id":e.id,title:r,onClick:t};return s.createElement("tr",n({key:e.id},l),this.renderNameColumn(e),this.renderTypeColumn(e),this.renderRolesColumn(e),this.renderProjectsColumn(e),this.renderEmailColumn(e),this.renderModifiedTimeColumn(e))},renderNameColumn:function(e){var t=this.props.locale.translate,n=this.props.locale.pick;if(e){var a,o,l=n(e.details.name),c=e.username;if(this.state.renderingFullList){var u,d;e.deleted||e.disabled?(u=!1,d=i.includes(this.state.restoringUserIds,e.id)):(u=!0,d=!i.includes(this.state.disablingUserIds,e.id)),u!==d&&(o=d?s.createElement(w,{type:"reactivate",locale:this.props.locale}):s.createElement(w,{type:"disable",locale:this.props.locale}))}else{var p=this.props.route,h={user:e.id};a=p.find(r(30),h)}var m=s.createElement(y,{user:e,theme:this.props.theme}),f=t("user-list-$name-with-$username",l,c);return s.createElement("td",null,s.createElement("a",{href:a},m," ",f),o)}return s.createElement(b,{id:"name"},t("table-heading-name"))},renderTypeColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;return e?s.createElement("td",null,t("user-list-type-"+e.type)):s.createElement(b,{id:"type"},t("table-heading-type"))},renderProjectsColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var r={projects:j(this.props.projects,e),omit:1,route:this.props.route,locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return s.createElement("td",null,s.createElement(C,r))}return s.createElement(b,{id:"projects"},t("table-heading-projects"))},renderRolesColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={roles:T(this.props.roles,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return s.createElement("td",null,s.createElement(E,r))}return s.createElement(b,{id:"roles"},t("table-heading-roles"))},renderEmailColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var r="-",n=e.details.email;if(n){var i;this.state.renderingFullList||(i="mailto:"+n),r=s.createElement("a",{href:i},n)}return s.createElement("td",{className:"email"},r)}return s.createElement(b,{id:"email"},t("table-heading-email"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={time:e.mtime,disabled:this.state.renderingFullList,locale:this.props.locale};return s.createElement("td",null,s.createElement(k,r))}return s.createElement(b,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){var t=this.props.route,n={user:"new"};return t.push(r(30),n)},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.locale.translate,n=this.state.disablingUserIds,s=this.state.restoringUserIds,a=[r("user-list-confirm-disable-$count",n.length),r("user-list-confirm-reactivate-$count",s.length)],o=[i.isEmpty(n)||void 0,i.isEmpty(s)||void 0];return this.components.confirmation.askSeries(a,o).then(function(e){if(e){var r=t.props.database.use({schema:"global",by:t});return r.start().then(function(e){var a=[];return i.each(t.props.users,function(e){var t={};if(i.includes(n,e.id))t.disabled=!0;else{if(!i.includes(s,e.id))return;t.disabled=t.deleted=!1}var r=i.assign({},e,t);a.push(r)}),r.save({table:"user"},a).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-user-id")),r=i.find(this.props.users,{id:t}),n=i.slice(this.state.restoringUserIds),s=i.slice(this.state.disablingUserIds);r.deleted||r.disabled?i.includes(n,r.id)?i.pull(n,r.id):n.push(r.id):i.includes(s,r.id)?i.pull(s,r.id):s.push(r.id);var a=!i.isEmpty(n)||!i.isEmpty(s);this.setState({restoringUserIds:n,disablingUserIds:s,hasChanges:a})}}),O=l(function(e,t,r,n,s,a){var o=n.pick;return s=i.map(s,function(e){switch(e){case"name":return function(e){return o(e.details.name)};case"type":return function(e){return i.indexOf(u,e.type)};case"roles":return function(e){var r=i.first(T(t,e));return r?o(r.details.title)||r.name:""};case"projects":return function(e){var t=i.first(j(r,e));return t?o(t.details.title)||t.name:""};case"email":return"details.email";default:return e}}),i.orderBy(e,s,a)}),N=l(function(e){return i.filter(e,function(e){return!0!==e.disabled&&!0!==e.deleted})}),j=l(function(e,t){return i.filter(e,function(e){return i.includes(e.user_ids,t.id)})}),T=l(function(e,t){var r=i.keyBy(e,"id");return i.filter(i.map(t.role_ids,function(e){return r[e]}))})},function(e,t,r){"use strict";function n(e){return e.children?i.createElement("div",{className:"input-error"},i.createElement("i",{className:"fa fa-exclamation-circle"})," ",e.children):null}var i=r(0);i.PropTypes,r(4);e.exports=n,r(538)},function(e,t,r){"use strict";function n(e){var t,n=["profile-image",e.size];if(e.user){var s=_.get(e.user,"details.resources"),a=_.find(s,{type:"image"});if(a){var l=o[e.size];t=e.theme.getImageUrl(a,{width:l,height:l})}}if(t)return i.createElement("img",{className:n.join(" "),src:t});var c=r(216);return i.createElement(c,{className:n.join(" ")})}var i=r(0),s=i.PropTypes,a=r(6);e.exports=n,r(543),n.propTypes={user:s.object,size:s.oneOf(["small","large"]),theme:s.instanceOf(a)},n.defaultProps={size:"small"};var o={small:24,large:96}},function(e,t,r){"use strict";function n(e,t){if(!(t instanceof Blob))return t}var i=r(1),s=r(13),a=r(68);t.fetch=function(e,t,r,o){var l=new XMLHttpRequest,c=new s(function(s,c){var u=i.get(o,"username",null),d=i.get(o,"password",null),p=i.get(o,"contentType",null);if("GET"===(e=i.toUpper(e))&&!i.isEmpty(r)){var h=[];i.forIn(r,function(e,t){t=encodeURIComponent(t),void 0!==(e=encodeURIComponent(e))&&h.push(t+"="+e)}),-1===i.indexOf(t,"?")?t+="?":t+="&",t+=i.join(h,"&"),r=null}"json"===p&&(p="application/json"),"application/json"===p&&i.isObject(r)&&(r=JSON.stringify(r,n)),l.timeout=i.get(o,"timeout"),l.withCredentials=i.get(o,"crossSite",!1),l.responseType=i.get(o,"responseType",""),l.open(e,t,!0,u,d),p&&l.setRequestHeader("Content-Type",p),l.onload=function(e){if(l.status>=400){var t=new a(l.status,l.response);c(t)}else{var r=l.response;s(r)}},l.ontimeout=function(e){c(new Error("Request timed out"))},l.onerror=function(e){c(new Error(e.message))},l.onabort=function(e){c(new Error("Transfer aborted: "+t))};var m=i.get(o,"onDownloadProgress"),f=i.get(o,"onUploadProgress");l.onprogress=function(e){m&&m(e)},l.upload.onprogress=function(e){f&&f(e)},l.send(r)});return c.cancel=function(){l.abort()},c}},function(e,t,r){"use strict";function n(e){"string"==typeof e&&(e={en:e});var t,r="";for(var t in e)if(r=String(e[t]),r=s(r),r=r.replace(/\s+/g,"-"),r=r.replace(/[^0-9a-z\-]/g,""),/^\-+$/.test(r)&&(r=""),r)break;return r.length>32&&(r=r.substr(0,32)),r}function i(e){"string"==typeof e&&(e={en:e});var t,r="";for(var t in e){for(var n=String(e[t]).split(/\s+/).filter(Boolean),i=s(n[n.length-1]),a="",o=0;o<n.length-1;o++)a+=s(n[o]).charAt(0);if(r=a+i,r=r.replace(/[^a-z]/g,""))break}return r}function s(e){return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}t.fromTitle=n,t.fromPersonalName=i},,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){switch(e){case"facebook":return"facebook-official";default:return e}}function i(e){var t=e.settings.oauth;return!!(t&&t.client_id&&t.client_secret)}function s(e){var t=e.settings.api;return!(!t||!t.access_token)}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(1),l=(r(22),r(0)),c=l.PropTypes,u=r(17),d=r(24),p=r(16),h=r(10),m=r(11),f=r(4),g=r(6),v=r(18),b=r(31),y=r(41),C=y.TH,E=r(106),k=r(52),w=r(53),x=r(27),S=r(23);r(522),e.exports=u.createClass({displayName:"ServerListPage",propTypes:{database:c.instanceOf(h).isRequired,route:c.instanceOf(m).isRequired,locale:c.instanceOf(f).isRequired,theme:c.instanceOf(g).isRequired},statics:{parseUrl:function(e,t,r){return m.match(e,["/servers/?"],function(e){return e.edit=!!t.edit,e})},getUrl:function(e){var t;return e.edit&&(t={edit:1}),{path:"/servers/",query:t,hash:void 0}}},renderAsync:function(e,t){var r=this.props.database.use({schema:"global",by:this}),n=this.props.route!==t.route?100:1e3,i={servers:null,users:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(l.createElement(R,i),n),r.start().then(function(e){var t={};return r.find({table:"server",criteria:t})}).then(function(t){return i.servers=t,e.show(l.createElement(R,i))}).then(function(){var e={deleted:!1};return r.find({table:"user",criteria:e})}).then(function(e){return i.users=e,l.createElement(R,i)})}});var R=e.exports.Sync=l.createClass({displayName:"ServerListPage.Sync",propTypes:{servers:c.arrayOf(c.object),users:c.arrayOf(c.object),database:c.instanceOf(h).isRequired,route:c.instanceOf(m).isRequired,locale:c.instanceOf(f).isRequired,theme:c.instanceOf(g).isRequired},getInitialState:function(){return this.components=p({confirmation:x}),{sortColumns:["name"],sortDirections:["asc"],restoringServerIds:[],disablingServerIds:[],hasChanges:!1,renderingFullList:this.isEditing()}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,n=o.clone(r.parameters);return n.edit=t,this.props.route.replace(e.exports,n)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringServerIds:[],disablingServerIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1})},500))},render:function(){var e=this.props.locale.translate;return l.createElement("div",{className:"server-list-page"},this.renderButtons(),l.createElement("h2",null,e("server-list-title")),this.renderTable(),l.createElement(x,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),l.createElement(S,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return l.createElement("div",{className:"buttons"},l.createElement(v,{onClick:this.handleCancelClick},e("server-list-cancel"))," ",l.createElement(v,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("server-list-save")));return l.createElement("div",{className:"buttons"},l.createElement(b,{preselected:"add"},l.createElement("option",{name:"add",onClick:this.handleAddClick},e("server-list-add")))," ",l.createElement(v,{name:"edit",className:"emphasis",onClick:this.handleEditClick},e("server-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing(),e.onClick=this.handleRowClick),l.createElement(y,e,l.createElement("thead",null,this.renderHeadings()),l.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return l.createElement("tr",null,this.renderTitleColumn(),this.renderTypeColumn(),this.renderOAuthColumn(),this.renderAPIColumn(),this.renderUsersColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.servers;return this.state.renderingFullList||(e=O(e)),e=N(e,this.props.users,this.props.locale,this.state.sortColumns,this.state.sortDirections),o.map(e,this.renderRow)},renderRow:function(e){var t,r,n=this.props.locale.translate,i=[];e.deleted?(i.push("deleted"),r=n("server-list-status-deleted")):e.disabled&&(i.push("disabled"),r=n("server-list-status-disabled")),this.state.renderingFullList&&(e.deleted||e.disabled?o.includes(this.state.restoringServerIds,e.id)&&i.push("selected"):(i.push("fixed"),o.includes(this.state.disablingServerIds,e.id)||i.push("selected")),t=this.handleRowClick);var s={className:i.join(" "),"data-server-id":e.id,title:r,onClick:t};return l.createElement("tr",a({key:e.id},s),this.renderTitleColumn(e),this.renderTypeColumn(e),this.renderOAuthColumn(e),this.renderAPIColumn(e),this.renderUsersColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var i,s,a=this.props.locale.pick,c=a(e.details.title)||t("server-type-"+e.type);if(this.state.renderingFullList){var u,d;e.deleted||e.disabled?(u=!1,d=o.includes(this.state.restoringServerIds,e.id)):(u=!0,d=!o.includes(this.state.disablingServerIds,e.id)),u!==d&&(s=d?l.createElement(w,{type:"reactivate",locale:this.props.locale}):l.createElement(w,{type:"disable",locale:this.props.locale}))}else{var p=this.props.route,h={server:e.id};i=p.find(r(51),h)}var m=n(e.type),f=l.createElement("i",{className:"fa fa-"+m+" fa-fw"});return l.createElement("td",null,l.createElement("a",{href:i},f," ",c),s)}return l.createElement(C,{id:"title"},t("table-heading-title"))},renderTypeColumn:function(e){var t=this.props.locale.translate;return e?l.createElement("td",null,t("server-type-"+e.type)):l.createElement(C,{id:"type"},t("table-heading-type"))},renderOAuthColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var r=i(e);return l.createElement("td",null,t("server-list-oauth-"+r))}return l.createElement(C,{id:"oauth"},t("table-heading-oauth"))},renderAPIColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var r=s(e);return l.createElement("td",null,t("server-list-api-access-"+r))}return l.createElement(C,{id:"api"},t("table-heading-api-access"))},renderUsersColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={users:j(this.props.users,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme};return l.createElement("td",null,l.createElement(E,r))}return l.createElement(C,{id:"users"},t("table-heading-users"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var r={time:e.mtime,locale:this.props.locale};return l.createElement("td",null,l.createElement(k,r))}return l.createElement(C,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){return this.props.route.push(r(51),{server:"new"})},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,r=this.props.locale.translate,n=this.state.disablingServerIds,i=this.state.restoringServerIds,s=[r("server-list-confirm-disable-$count",n.length),r("server-list-confirm-reactivate-$count",i.length)],a=[o.isEmpty(n)||void 0,o.isEmpty(i)||void 0];return this.components.confirmation.askSeries(s,a).then(function(e){if(e){var r=t.props.database.use({schema:"global",by:t});return r.start().then(function(e){var s=[];return o.each(t.props.servers,function(e){var t={};if(o.includes(n,e.id))t.disabled=!0;else{if(!o.includes(i,e.id))return;t.disabled=t.deleted=!1}var r=o.assign({},e,t);s.push(r)}),r.save({table:"server"},s).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-server-id")),r=o.find(this.props.servers,{id:t}),n=o.slice(this.state.restoringServerIds),i=o.slice(this.state.disablingServerIds);r.deleted||r.disabled?o.includes(n,r.id)?o.pull(n,r.id):n.push(r.id):o.includes(i,r.id)?o.pull(i,r.id):i.push(r.id);var s=!o.isEmpty(n)||!o.isEmpty(i);this.setState({restoringServerIds:n,disablingServerIds:i,hasChanges:s})}}),O=d(function(e){return o.filter(e,function(e){return!e.deleted&&!e.disabled})}),N=d(function(e,t,r,n,i){var s=r.translate,a=r.pick;return n=o.map(n,function(e){switch(e){case"title":return function(e){return a(e.details.title)||s("server-type-"+e.type)};case"type":return function(e){return s("server-type-"+e.type)};case"users":return function(e){return o.size(j(t,e))};default:return e}}),o.orderBy(e,n,i)}),j=d(function(e,t){return o.filter(e,function(e){return o.some(e.external,function(e){if(e.server_id===t.id)return!0})})})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(0),a=s.PropTypes,o=r(17),l=r(248),c=r(10),u=r(11),d=r(4),p=r(6),h=r(44),m=r(18),f=r(54),g=r(42),v=r(55),b=r(56),y=r(108),C=r(23);r(524),e.exports=o.createClass({displayName:"SettingsPage",propTypes:{database:a.instanceOf(c).isRequired,route:a.instanceOf(u).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(p).isRequired,payloads:a.instanceOf(h).isRequired},statics:{parseUrl:function(e,t,r){return u.match(e,["/settings/?"],function(e){return e.edit=!!t.edit,e})},getUrl:function(e){var t;return e&&e.edit&&(t={edit:1}),{path:"/settings/",query:t,hash:void 0}}},renderAsync:function(e,t){var r=(this.props.route.parameters,this.props.database.use({schema:"global",by:this})),n=this.props.route!==t.route?100:1e3,i={system:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads};return e.show(s.createElement(k,i),n),r.start().then(function(e){var t={deleted:!1};return r.findOne({table:"system",criteria:t})}).then(function(e){return i.system=e,s.createElement(k,i)})}});var E,k=e.exports.Sync=s.createClass({displayName:"SettingsPage.Sync",propTypes:{system:a.object,database:a.instanceOf(c).isRequired,route:a.instanceOf(u).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(p).isRequired,payloads:a.instanceOf(h).isRequired},getInitialState:function(){return{newSystem:null,saving:!1}},getSystem:function(e){return!this.isEditing()||e&&"current"!==e?this.props.system||S:this.state.newSystem||this.props.system||x},getSystemProperty:function(e,t){var r=this.getSystem(t);return i.get(r,e)},setSystemProperty:function(e,t){var r=this.getSystem("current"),n=i.decoupleSet(r,e,t),s=!0;i.isEqual(n,this.props.system)&&(n=null,s=!1),this.setState({newSystem:n,hasChanges:s})},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var r=this.props.route,n=i.clone(r.parameters);return n.edit=t,r.replace(e.exports,n)},getInputLanguages:function(){var e=this.getSystem();return i.get(e,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&this.isEditing(e)&&this.setState({newSystem:null,hasChanges:!1})},render:function(){var e=this.props.locale.translate;return s.createElement("div",{className:"settings-page"},this.renderButtons(),s.createElement("h2",null,e("settings-title")),this.renderForm(),this.renderInstructions())},renderButtons:function(){var e=this.props.locale.translate;return this.isEditing()?s.createElement("div",{key:"edit",className:"buttons"},s.createElement(m,{onClick:this.handleCancelClick},e("settings-cancel"))," ",s.createElement(m,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("settings-save")),s.createElement(C,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route})):s.createElement("div",{key:"view",className:"buttons"},s.createElement(m,{className:"emphasis",onClick:this.handleEditClick},e("settings-edit")))},renderForm:function(){return s.createElement("div",{className:"form"},this.renderTitleInput(),this.renderDescriptionInput(),this.renderSiteAddressInput(),this.renderPushRelayInput(),this.renderBackgroundSelector(),this.renderInputLanguageSelector())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getSystemProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return s.createElement(v,t,e("settings-site-title"))},renderDescriptionInput:function(){var e=this.props.locale.translate,t={id:"description",value:this.getSystemProperty("details.description"),availableLanguageCodes:this.getInputLanguages(),type:"textarea",locale:this.props.locale,onChange:this.handleDescriptionChange,readOnly:!this.isEditing()};return s.createElement(v,t,e("settings-site-description"))},renderSiteAddressInput:function(){var e=this.props.locale.translate,t={id:"address",value:this.getSystemProperty("settings.address"),locale:this.props.locale,placeholder:"https://",onChange:this.handleAddressChange,readOnly:!this.isEditing()};return s.createElement(g,t,e("settings-site-address"))},renderPushRelayInput:function(){var e=this.props.locale.translate,t={id:"relay",value:this.getSystemProperty("settings.push_relay"),locale:this.props.locale,placeholder:"https://",onChange:this.handlePushRelayChange,readOnly:!this.isEditing()};return s.createElement(g,t,e("settings-push-relay"))},renderBackgroundSelector:function(){var e=this.props.locale.translate,t={purpose:"background",resources:this.getSystemProperty("details.resources"),database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleBackgroundImageChange,readOnly:!this.isEditing()};return s.createElement(y,t,e("settings-background-image"))},renderInputLanguageSelector:function(){var e=this.props.locale.translate,t=this.props.locale.directory,r=this.getSystemProperty("settings.input_languages","current")||[],a=this.getSystemProperty("settings.input_languages","original")||[],o=i.map(t,function(e){var t,n=i.indexOf(r,e.code);return-1!==n&&(t=s.createElement("span",{className:"pos"},n+1)),{name:e.code,selected:i.includes(r,e.code),previous:i.includes(a,e.code),children:s.createElement("span",null,e.name," ",t)}}),l={onOptionClick:this.handleLanguageOptionClick,readOnly:!this.isEditing()};return s.createElement(b,l,s.createElement("label",null,e("settings-input-languages")),i.map(o,function(e,t){return s.createElement("option",n({key:t},e))}))},renderInstructions:function(){var e={topic:"settings",hidden:!this.isEditing(),locale:this.props.locale};return s.createElement("div",{className:"instructions"},s.createElement(f,e))},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;this.state.saving||this.setState({saving:!0},function(){var e=t.props.database.use({schema:"global",by:t}),r=t.getSystem(),n=t.props.payloads;return n.prepare("global",r).then(function(){return e.start().then(function(i){return e.saveOne({table:"system"},r).then(function(e){return n.reattach("global",e),n.dispatch("global",e).then(function(){return t.setState({hasChanges:!1,saving:!1},function(){t.setEditability(!1)}),null})})})}).catch(function(e){console.error(e),t.setState({saving:!1})})})},handleTitleChange:function(e){this.setSystemProperty("details.title",e.target.value)},handleAddressChange:function(e){this.setSystemProperty("settings.address",e.target.value)},handlePushRelayChange:function(e){this.setSystemProperty("settings.push_relay",e.target.value)},handleDescriptionChange:function(e){this.setSystemProperty("details.description",e.target.value)},handleBackgroundImageChange:function(e){this.setSystemProperty("details.resources",e.target.value)},handleLanguageOptionClick:function(e){var t=this.getSystem(),r=i.slice(t.settings.input_languages),n=e.name;i.includes(r,n)?i.pull(r,n):r.push(n),this.setSystemProperty("settings.input_languages",r)}}),w=(new Date).getTimezoneOffset()/60;E=-5<=w&&w<=0?"https://eu-west-1.push.trambar.io":"https://us-east-1.push.trambar.io";var x={details:{},settings:{address:window.location.protocol+"//"+window.location.host,push_relay:E}},S={details:{},settings:l.default}},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=r(4),o=r(6),l=r(150),c=r(33),u=r(43);r(529),e.exports=i.createClass({displayName:"ActivityTooltip",mixins:[c],propTypes:{statistics:s.object,locale:s.instanceOf(a),theme:s.instanceOf(o)},render:function(){var e=this;if(null==this.props.statistics)return null;var t=this.props.locale.translate,r=t("activity-tooltip-$count",this.props.statistics.total);void 0===this.props.statistics.total&&(r="-");var s=[];return n.each(l,function(r,n){var a=e.props.statistics[r];if(a){var o=l.icons[r];s.push(i.createElement("div",{className:"item",key:n},i.createElement(o,{className:"icon"})," ",t("activity-tooltip-$count-"+r,a)))}}),i.createElement(u,{className:"activity",disabled:this.props.disabled},i.createElement("inline",null,r),i.createElement("window",null,s))}})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=r(11),o=r(4),l=r(6),c=r(33),u=r(43),d=r(86);r(533),e.exports=i.createClass({displayName:"UserTooltip",mixins:[c],propTypes:{users:s.arrayOf(s.object),project:s.object,route:s.instanceOf(a).isRequired,locale:s.instanceOf(o).isRequired,theme:s.instanceOf(l).isRequired,disabled:s.bool},render:function(){var e=this;if(null==this.props.users)return null;var t,s=this.props.locale.translate,a=this.props.route,o=s("user-tooltip-$count",this.props.users.length),l=this.props.users;l.length>10&&(l=n.slice(l,0,10),t=i.createElement("div",{className:"ellipsis"},i.createElement("i",{className:"fa fa-ellipsis-v"})));var c,p=n.map(l,function(t,n){var s;return s=e.props.project?a.find(r(30),{project:e.props.project.id,user:t.id}):a.find(r(30),{user:t.id}),i.createElement("div",{className:"item",key:n},i.createElement("a",{href:s},i.createElement(d,{user:t,theme:e.props.theme})," ",t.details.name))});return c=this.props.project?a.find(r(80),{project:this.props.project.id}):a.find(r(84)),i.createElement(u,{className:"user",disabled:0===p.length},i.createElement("inline",null,o),i.createElement("window",null,p,t,i.createElement("div",{className:"bottom"},i.createElement("a",{href:c},s("tooltip-more")))))}})},function(e,t,r){"use strict";function n(e){return parseInt(e.substr(8))}function i(e){return o.createElement("div",{className:"item"},o.createElement("svg",{className:"ct-chart-bar",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{className:"ct-series ct-series-"+e.series},o.createElement("line",{className:"ct-bar",x1:0,y1:5,x2:10,y2:5}))),o.createElement("span",{className:"label"},e.label))}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(1),o=(r(398),r(0)),l=o.PropTypes,c=r(259),u=r(22),d=r(257),p=r(24),h=r(4),m=r(6),f=r(150);r(535),e.exports=o.createClass({displayName:"ActivityChart",propTypes:{statistics:l.object,locale:l.instanceOf(h),theme:l.instanceOf(m)},render:function(){return o.createElement("div",{className:"activity-chart"},o.createElement("h2",null,this.props.children),this.renderLegend(),this.renderChart())},renderChart:function(){if(!this.props.statistics)return o.createElement("div",{className:"scroll-container"},o.createElement("div",{className:"contents no-data"}));var e=u(d.today),t=u(this.props.statistics.range.start),r=u(this.props.statistics.range.end),i=e.clone().endOf("month"),s=t.clone().startOf("month"),a=r.clone().endOf("month");i.diff(a,"month")<=1?a=i:a.add(1,"month");var l=g(s,e),p=v(this.props.statistics.daily,l),h=b(p,!0),m=g(s,a),f={type:"bar",data:{labels:m,series:p},options:{fullWidth:!0,height:200,chartPadding:{left:-25,right:30},stackBars:!0,high:h,low:0,axisX:{labelInterpolationFnc:function(e){var t=n(e);return 1===t?e:t>10&&e==d.today?"Today":""}}},onDraw:this.handleDraw},y=Math.round(.75*m.length)+"em";return o.createElement("div",{className:"scroll-container"},o.createElement("div",{className:"contents",style:{width:y}},o.createElement(c,f)))},renderLegend:function(){if(!this.props.statistics)return null;var e=this.props.locale.translate,t=this.props.statistics.to_date,r={};a.each(f,function(e,n){t[e]>0&&(r[e]=n)});var n=a.map(r,function(t,r){var n={series:String.fromCharCode("a".charCodeAt(0)+t),label:e("activity-chart-legend-"+r)};return o.createElement(i,s({key:t},n))});return a.isEmpty(n)&&(n=""),o.createElement("div",{className:"legend"},n)},handleDraw:function(e){if("label"===e.type&&"y"===e.axis.units.pos&&e.element.attr({x:e.axis.chartRect.width()+20}),"grid"===e.type&&"x"===e.axis.units.pos){var t=e.axis.ticks[e.index];1===n(t)?e.element.addClass("month-start"):t===d.today&&e.element.addClass("today")}}});var g=p(function(e,t){for(var r=[],n=e.clone();n<=t;n.add(1,"day"))r.push(n.format("YYYY-MM-DD"));return r}),v=(p(function(e,t){for(var r=[],n=e.clone();n<=t;n.add(1,"month")){r.push(n.format("ll"));for(var i=n.daysInMonth(),s=1;s<i;s++)r.push(null)}return r}),p(function(e,t){return a.map(f,function(r){var n=!0,i=a.map(t,function(t){var i=a.get(e,[t,r],0);return i&&(n=!1),i});return n?[]:i})})),b=p(function(e,t){var r=0;if(t){var n=[];a.each(e,function(e){a.each(e,function(e,t){n[t]=n[t]?n[t]+e:e})}),a.isEmpty(n)||(r=a.max(n))}else a.each(e,function(e){var t=a.max(e);t>r&&(r=t)});return r<=20?20:r<=50?50:100*Math.ceil(r/100)})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=r(149),o=r(110),l=r(10),c=r(4),u=r(6),d=r(44),p=r(228),h=r(227);r(537),e.exports=i.createClass({displayName:"ImageSelector",propTypes:{purpose:s.string,desiredWidth:s.number,desiredHeight:s.number,resources:s.arrayOf(s.object),readOnly:s.bool,database:s.instanceOf(l).isRequired,locale:s.instanceOf(c).isRequired,theme:s.instanceOf(u).isRequired,payloads:s.instanceOf(d).isRequired,onChange:s.func},getDefaultProps:function(){return{resources:[],readOnly:!1}},getInitialState:function(){return{showingCroppingDialogBox:!1,renderingCroppingDialogBox:!1,showingAlbumDialogBox:!1,renderingAlbumDialogBox:!1}},getImage:function(){return n.find(this.props.resources,{type:"image"})},setImage:function(e){if(this.props.desiredWidth&&this.props.desiredHeight&&!e.clip){var t=this.props.desiredWidth/this.props.desiredHeight,r=e.width,i=Math.round(r/t),s=0,a=Math.round((e.height-i)/2);a<0&&(i=e.height,r=Math.round(i*t),s=Math.round((e.width-r)/2),a=0),e=n.clone(e),e.clip={left:s,top:a,width:r,height:i}}var o=n.slice(this.props.resources),l=n.findIndex(o,{type:"image"});-1!==l?e?o[l]=e:o.splice(l,1):o.push(e),this.props.onChange&&(this.value=o,this.props.onChange({type:"change",target:this}))},render:function(){var e=["image-selector"];return this.props.readOnly&&e.push("readonly"),i.createElement("div",{className:e.join(" ")},i.createElement("label",null,this.props.children),i.createElement("div",{className:"contents"},this.renderImage(),this.renderOptions()),this.renderDialogBox())},renderImage:function(){var e=160,t=this.getImage();if(!t)return this.props.desiredWidth&&this.props.desiredHeight&&(e=Math.round(120*this.props.desiredWidth/this.props.desiredHeight)),i.createElement("div",{className:"image"},i.createElement("div",{className:"placeholder",style:{width:e,height:120}},i.createElement("i",{className:"fa fa-photo"})));var r=t.width,n=t.height;t.clip&&(r=t.clip.width,n=t.clip.height),e=Math.round(120*r/n);var s=t.clip;if(this.props.desiredWidth&&this.props.desiredHeight||(s=null),t.url){var a=this.props.theme.getImageUrl(t,{width:e,height:120,clip:s}),l=this.props.theme.getImageUrl(t,{clip:s}),c={href:l,target:"_blank","data-width":r,"data-height":n,onClick:this.handleImageClick};return i.createElement("div",{className:"image"},i.createElement("a",c,i.createElement("img",{src:a,style:{width:e,height:120}})))}if(t.file){var a=URL.createObjectURL(t.file);return i.createElement("div",{className:"image"},i.createElement(o,{url:a,clippingRect:s,style:{width:e,height:120}}))}},renderOptions:function(){return i.createElement("div",{className:"options"},this.renderChooseOption(),this.renderUploadOption(),this.renderResizeOption())},renderResizeOption:function(){if(!this.props.desiredWidth||!this.props.desiredHeight)return null;var e=this.props.locale.translate,t={className:"option"};return this.props.readOnly||(t.onClick=this.handleCropClick),this.getImage()||(t.className+=" disabled"),i.createElement("div",t,i.createElement("i",{className:"fa fa-crop"})," ",e("image-selector-crop-image"))},renderChooseOption:function(){if(!this.props.purpose)return null;var e=this.props.locale.translate,t={className:"option"};return this.props.readOnly||(t.onClick=this.handleChooseClick),i.createElement("div",t,i.createElement("i",{className:"fa fa-th"})," ",e("image-selector-choose-from-album"))},renderUploadOption:function(){var e={type:"file",value:"",accept:"image/*",disabled:this.props.readOnly,onChange:this.handleUploadChange},t=this.props.locale.translate;return i.createElement("label",{className:"option"},i.createElement("i",{className:"fa fa-upload"})," ",t("image-selector-upload-file"),i.createElement("input",e))},renderDialogBox:function(){var e=this.getImage();if(this.state.renderingAlbumDialogBox){var t={show:this.state.showingAlbumDialogBox,purpose:this.props.purpose,image:e,database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onSelect:this.handleImageSelect,onCancel:this.handleDialogCancel};return i.createElement(h,t)}if(this.state.renderingCroppingDialogBox){var t={show:this.state.showingCroppingDialogBox,image:e,desiredWidth:this.props.desiredWidth,desiredHeight:this.props.desiredHeight,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleImageSectionSelect,onCancel:this.handleDialogCancel};return i.createElement(p,t)}return null},handleChooseClick:function(e){this.setState({showingAlbumDialogBox:!0,renderingAlbumDialogBox:!0})},handleCropClick:function(e){this.setState({showingCroppingDialogBox:!0,renderingCroppingDialogBox:!0})},handleImageSelect:function(e){var t=n.clone(e.image);t.type="image",this.setImage(t),this.handleDialogCancel()},handleImageSectionSelect:function(e){var t=n.clone(this.getImage());t.clip=e.clippingRect,this.setImage(t),this.handleDialogCancel()},handleUploadChange:function(e){var t=this,r=e.target.files[0];if(r){var i=URL.createObjectURL(r);return a.loadImage(i).then(function(e){var i={format:n.last(n.split(r.type,"/")),width:e.naturalWidth,height:e.naturalHeight,type:"image",file:r};return t.setImage(i)}).finally(function(){URL.revokeObjectURL(i)})}},handleDialogCancel:function(e){var t=this;this.state.showingAlbumDialogBox&&(this.setState({showingAlbumDialogBox:!1}),setTimeout(function(){t.state.showingAlbumDialogBox||t.setState({renderingAlbumDialogBox:!1})},500)),this.state.showingCroppingDialogBox&&(this.setState({showingCroppingDialogBox:!1}),setTimeout(function(){t.state.showingCroppingDialogBox||t.setState({renderingCroppingDialogBox:!1})},500))},handleImageClick:function(e){var t=e.currentTarget.href,r=parseInt(e.currentTarget.getAttribute("data-width")),n=parseInt(e.currentTarget.getAttribute("data-height")),i=["left="+(screen.width-r)/3,"top="+(screen.height-n)/3,"width="+Math.min(screen.width-100,r),"height="+Math.min(screen.height-100,n)];window.open(t,"_blank",i.join(",")),e.preventDefault()}})},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(1);t.match=function(e,t,r){var s=!0;for(var a in r){var o=r[a];if(t.hasOwnProperty(a)){var l=t[a];if(o instanceof Array){if(l instanceof Array){if(0===i.intersection(o,l).length){s=!1;break}}else if(!i.includes(o,l)){s=!1;break}}else if(l!==o){if("object"===(void 0===l?"undefined":n(l))&&"object"===(void 0===o?"undefined":n(o))){if(!i.isEqual(l,o))return!1}else s=!1;break}}else if("time_range"===a){if(o){var c=o.substr(1,o.length-2).split(","),u=c[0],d=c[1];u<=t.ptime&&t.ptime<d||(s=!1)}}else"exclude"===a&&i.includes(o,t.id)&&(s=!1)}return s}},function(e,t,r){"use strict";function n(e){return new d(function(t,r){var n=document.createElement("IMG");n.src=e,n.onload=function(e){t(n)},n.onerror=function(t){r(new Error("Unable to load "+e))}})}function i(e){var t={responseType:"arraybuffer"};return m.fetch("GET",e,null,t).then(function(e){return new Uint8Array(e)})}function s(e){var t=c(e,6),r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=r*s-n*i;return[s/l,-n/l,-i/l,r/l,(i*o-s*a)/l,-(r*o-n*a)/l]}function a(e,t){var r=c(e,6),n=r[0],i=r[1],s=r[2],a=r[3],o=r[4],l=r[5],u=c(t,2),d=u[0],p=u[1];return[n*d+s*p+o,i*d+a*p+l]}function o(e,t){var r=[t.left,t.top],n=[t.left+t.width,t.top+t.height];return r=a(e,r),n=a(e,n),{width:Math.abs(n[0]-r[0]),height:Math.abs(n[1]-r[1]),left:Math.min(n[0],r[0]),top:Math.min(n[1],r[1])}}function l(e){/^blob:/.test(e)&&(URL.revokeObjectURL(e),console.log("Revoking: "+e))}var c=function(){function e(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=r(13),p=r(0),h=p.PropTypes,m=r(87),f=r(245),g=r(16);e.exports=p.createClass({displayName:"ImageView",propTypes:{url:h.string,clippingRect:h.object,revokeBlobUrl:h.bool,onLoad:h.func},getDefaultProps:function(){return{revokeBlobUrl:!0}},getInitialState:function(){return this.components=g({canvas:HTMLCanvasElement}),{}},componentWillMount:function(){this.load(this.props.url)},componentWillReceiveProps:function(e){this.props.url!==e.url&&(this.props.revokeBlobUrl&&l(this.props.url),this.load(e.url)),this.clippingRect!==e.clippingRect&&this.image&&this.drawImage(e.clippingRect)},render:function(){var e=this.components.setters,t=_.omit(this.props,"onLoad","url","clippingRect","revokeBlobUrl");return p.createElement("canvas",u({ref:e.canvas},t))},componentDidMount:function(){this.image&&this.redrawNeeded&&this.drawImage(this.props.clippingRect)},componentWillUnmount:function(){this.props.revokeBlobUrl&&l(this.props.url)},triggerLoadEvent:function(){this.props.onLoad&&this.props.onLoad({type:"load",target:this})},load:function(e){var t=this;return e?d.join(n(e),i(e),function(e,r){var n=f.getOrientation(r)||1;t.image=e,t.orientation=n,n<5?(t.naturalWidth=e.naturalWidth,t.naturalHeight=e.naturalHeight):(t.naturalWidth=e.naturalHeight,t.naturalHeight=e.naturalWidth);var i=t.props.clippingRect;i||(i={left:0,top:0,width:t.naturalWidth,height:t.naturalHeight}),t.drawImage(i),t.triggerLoadEvent()}):(this.clearCanvas(),d.resolve())},drawImage:function(e){var t=this.image;if(t){var r=this.components.canvas;if(!r)return void(this.redrawNeeded=!0);var n,i=this.orientation,a=t.naturalWidth,l=t.naturalHeight;switch(i){case 1:n=[1,0,0,1,0,0];break;case 2:n=[-1,0,0,1,a,0];break;case 3:n=[-1,0,0,-1,a,l];break;case 4:n=[1,0,0,-1,0,l];break;case 5:n=[0,1,1,0,0,0];break;case 6:n=[0,1,-1,0,l,0];break;case 7:n=[0,-1,-1,0,l,a];break;case 8:n=[0,-1,1,0,0,a]}e||(e={left:0,top:0,width:i<5?a:l,height:i<5?l:a}),this.width=e.width,this.height=e.height;var c=s(n),u=o(c,e),d=o(c,{left:0,top:0,width:e.width,height:e.height});r.width=d.width,r.height=d.height;var p=r.getContext("2d");p.transform.apply(p,n),p.drawImage(t,u.left,u.top,u.width,u.height,d.left,d.top,d.width,d.height)}},clearCanvas:function(){var e=this.components.canvas;e&&(e.width=0,e.height=0),this.width=0,this.height=0,this.orientation=void 0}})},function(e,t,r){"use strict";function n(e){var t=["overlay",e.show?"show":"hide"];return e.className&&t.push(e.className),i.createElement("div",{className:t.join(" "),onClick:e.onClick},i.createElement("div",{className:"background"}),i.createElement("div",{className:"foreground"},e.children))}var i=r(0),s=i.PropTypes,a=r(40);r(555),e.exports=i.createClass({displayName:"exports",display:"OverlayProxy",propTypes:{className:s.string,show:s.bool,onBackgroundClick:s.func},getDefaultProps:function(){return{show:!1}},render:function(){return null},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(e){e.show!==this.props.show?this.props.show?this.show():this.hide():e.children!==this.props.children&&this.props.show&&this.redraw()},componentWillUnmount:function(){this.hide()},show:function(){var e=this;this.containerNode?this.containerRemovalTimeout&&(clearTimeout(this.containerRemovalTimeout),this.containerRemovalTimeout=0):(this.containerNode=document.createElement("DIV"),document.body.appendChild(this.containerNode),document.body.addEventListener("keydown",this.handleKeyDown));var t={show:!1,onClick:this.handleClick,children:this.props.children};a.render(i.createElement(n,t),this.containerNode),this.shown=!1,setTimeout(function(){var t={show:!0,onClick:e.handleClick,children:e.props.children};a.render(i.createElement(n,t),e.containerNode),e.shown=!0},10)},redraw:function(){var e={show:this.shown,onClick:this.handleClick,children:this.props.children};a.render(i.createElement(n,e),this.containerNode)},hide:function(){var e=this;if(this.containerNode){this.containerRemovalTimeout||(this.containerRemovalTimeout=setTimeout(function(){a.unmountComponentAtNode(e.containerNode),document.body.removeChild(e.containerNode),document.body.removeEventListener("keydown",e.handleKeyDown),e.containerNode=null,e.containerRemovalTimeout=0},1e3));var t={show:!1,children:this.props.children};a.render(i.createElement(n,t),this.containerNode),this.shown=!1}},handleClick:function(e){var t=e.target.className;"foreground"!==t&&"background"!==t||this.props.onBackgroundClick&&this.props.onBackgroundClick(e)},handleKeyDown:function(e){27===e.keyCode&&this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(0),i=n.PropTypes,s=r(68),a=r(10),o=r(11),l=r(4),c=r(6);r(514),e.exports=n.createClass({displayName:"ErrorPage",propTypes:{database:i.instanceOf(a).isRequired,route:i.instanceOf(o).isRequired,locale:i.instanceOf(l).isRequired,theme:i.instanceOf(c).isRequired},statics:{parseUrl:function(e,t,r){return o.match(e,["/error/:code"],function(e){return e.code=parseInt(e.code),e})},getUrl:function(e){var t=e.code;t=e.error?e.error.statusCode:e.code||400;var r="/error/"+t;return{path:r,query:void 0,hash:void 0}},getOptions:function(e){return{}}},render:function(){var e=this.props.route.parameters,t=new s(e.code),i=r(557);return n.createElement("div",{className:"error-page"},n.createElement("div",null,n.createElement("div",{className:"graphic"},n.createElement(i,null)),n.createElement("div",{className:"text"},n.createElement("h1",{className:"title"},t.statusCode," ",t.message),n.createElement("p",null,"The page you're trying to reach doesn't exist. But then again, who does?"))))}})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=(r(11),r(4)),o=r(6),l=r(33),c=r(43);r(532),e.exports=i.createClass({displayName:"RoleTooltip",mixins:[l],propTypes:{roles:s.arrayOf(s.object),disabled:s.bool,route:s.object.isRequired,locale:s.instanceOf(a).isRequired,theme:s.instanceOf(o).isRequired},render:function(){if(null==this.props.roles)return null;var e=this.props.locale.translate,t=this.props.locale.pick,s=this.props.route,a=this.props.roles,o="-";if(a.length>0){var l,u=a[0];this.props.disabled||(l=s.find(r(50),{role:u.id}));var d=t(u.details.title)||u.name,o=i.createElement("a",{href:l,key:0},d);a=n.slice(a,1)}var p;if(a.length>0){var h,m=e("role-tooltip-$count-others",a.length);a.length>10&&(a=n.slice(a,0,10),h=i.createElement("div",{className:"ellipsis"},i.createElement("i",{className:"fa fa-ellipsis-v"})));var f=n.map(a,function(e,n){var a=s.find(r(50),{role:e.id}),o=t(e.details.title)||e.name;return i.createElement("div",{className:"item",key:n},i.createElement("a",{href:a},o))}),g=s.find(r(83));p=e("tooltip-$first-and-$tooltip",o,i.createElement(c,{className:"role",disabled:this.props.disabled||0===f.length,key:1},i.createElement("inline",null,m),i.createElement("window",null,f,h,i.createElement("div",{className:"bottom"},i.createElement("a",{href:g},e("tooltip-more"))))))}else p=o;return i.createElement("span",null,p)}})},function(e,t,r){"use strict";e.exports=(new Date).toISOString()},function(e,t,r){"use strict";function n(e){return new a(function(t,r){var n=document.createElement("IMG");n.src=e,n.onload=function(e){t(n)},n.onerror=function(t){r(new Error("Unable to load "+e))}})}function i(e){return new a(function(t,r){var n=document.createElement("VIDEO");n.src=e,n.preload=!0,n.onloadeddata=function(e){t(n)},n.onerror=function(t){r(new Error("Unable to load "+e))}})}function s(e){return new a(function(t,r){var n=document.createElement("AUDIO");n.src=e,n.preload=!0,n.onloadeddata=function(e){t(n)},n.onerror=function(t){r(new Error("Unable to load "+e))}})}var a=r(13);t.loadImage=n,t.loadVideo=i,t.loadAudio=s},function(e,t,r){"use strict";(function(n){e.exports=t=["push","merge","branch","issue","milestone","merge-request","wiki","member","repo","story","survey","task-list"],t.editable=["story","task-list","survey"],t.trackable=["story","task-list"],t.git=["push","merge","branch","issue","milestone","merge-request","wiki","member","repo"],"[object process]"===Object.prototype.toString.call(void 0!==n?n:0)||(t.icons={push:r(568),merge:r(560),branch:r(559),issue:r(215),"issue.opened":r(215),"issue.closed":r(562),"issue.reopened":r(563),milestone:r(566),"merge-request":r(561),wiki:r(558),member:r(216),repo:r(569),story:r(567),survey:r(565),"task-list":r(564)})}).call(t,r(57))},function(e,t,r){"use strict";e.exports=["guest","regular","moderator","admin"]},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),s=(i.PropTypes,r(16));r(553),e.exports=i.createClass({displayName:"AutosizeTextArea",getInitialState:function(){return this.components=s({actual:HTMLTextAreaElement,shadow:HTMLTextAreaElement}),{requiredHeight:void 0}},render:function(){var e=this.components.setters,t=_.extend({height:this.state.requiredHeight},this.props.style),r=_.omit(this.props,"style");return i.createElement("div",{className:"autosize-text-area"},i.createElement("textarea",{ref:e.shadow,style:t,className:"shadow",value:r.value,readOnly:!0}),i.createElement("textarea",n({ref:e.actual,style:t},r)))},componentDidMount:function(){window.removeEventListener("resize",this.handleDocumentResize),this.updateSize()},componentDidUpdate:function(e,t){e.value!==this.props.value&&this.updateSize()},componentWillUnmount:function(){window.removeEventListener("resize",this.handleDocumentResize)},focus:function(){var e=this.components.actual;e&&e.focus()},updateSize:function(){var e=this.components.shadow,t=this.components.actual;if(e&&t){var r=e.offsetHeight,n=e.scrollHeight,i=e.clientHeight,s=t.offsetHeight,a=n+(r-i);if(this.state.height!==a){if(s>a&&s>this.state.requiredHeight)return;this.setState({requiredHeight:a})}}},handleResize:function(e){console.log("resize")},handleDocumentResize:function(e){this.updateSize()}})},,,,,,,,,,,,,,,,,,function(e,t){e.exports="Instruction for project summary page.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio.\nPraesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at\nnibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec\ntellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget\nnulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra,\nper inceptos himenaeos.\n"},function(e,t){e.exports="Instruction for repo summary page.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio.\nPraesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at\nnibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec\ntellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget\nnulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra,\nper inceptos himenaeos.\n"},function(e,t){e.exports="Instruction for role summary page.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio.\nPraesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at\nnibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec\ntellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget\nnulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra,\nper inceptos himenaeos.\n"},function(e,t){e.exports="Instruction for server summary page.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio.\nPraesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at\nnibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec\ntellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget\nnulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra,\nper inceptos himenaeos.\n"},function(e,t){e.exports="Instruction for settings page.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio.\nPraesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at\nnibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec\ntellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget\nnulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra,\nper inceptos himenaeos.\n"},function(e,t){e.exports="Instruction for user summary page.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio.\nPraesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at\nnibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec\ntellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget\nnulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra,\nper inceptos himenaeos.\n"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=r(1),a=r(13),o=r(0),l=(o.PropTypes,r(16)),c=(r(68),r(251)),u=r(241),d=r(10),p=r(252),h=r(11),m=r(255),f=r(44),g=r(242),v=r(4),b=r(253),y=r(6),C=r(67),E=r(49),k=r(80),w=r(83),x=r(50),S=r(81),R=r(82),O=r(103),N=r(51),j=r(104),T=r(231),P=r(84),I=r(30),_=r(230),q=r(146),L=r(235),A=r(237),U=r(261),D=r(239),M=r(240);D.isAvailable()?n=D:M.isAvailable()&&(n=M);var B=r(256),z=[C,E,k,w,x,S,R,O,N,j,T,P,I,q];r(201),r(258),r(510),r(371),e.exports=o.createClass({displayName:"Application",getInitialState:function(){return this.components=l({remoteDataSource:u,routeManager:p,localeManager:g,themeManager:b,payloadManager:m,cache:n,notifier:B}),{database:null,payloads:null,route:null,locale:null,theme:null,canAccessServer:!1,subscriptionId:null,connectionId:null,showingUploadProgress:!1}},isReady:function(){return!!(this.state.database&&this.state.payloads&&this.state.route&&this.state.locale&&this.state.theme)},render:function(){return o.createElement("div",{onClick:this.handleClick},this.renderUserInterface(),this.renderConfiguration())},renderUserInterface:function(){if(!this.isReady())return null;var e={database:this.state.database,route:this.state.route,locale:this.state.locale,theme:this.state.theme,disabled:!this.state.canAccessServer};return o.createElement("div",{className:"application"},o.createElement(L,e),o.createElement("section",{className:"page-view-port"},o.createElement("div",{className:"scroll-box"},this.renderCurrentPage()),this.renderTaskAlert(),this.renderUploadProgress()))},renderCurrentPage:function(){var e=this.state.route.component,t={database:this.state.database,route:this.state.route,payloads:this.state.payloads,locale:this.state.locale,theme:this.state.theme};return this.state.canAccessServer||e!==q&&(e=_),o.createElement(e,t)},renderTaskAlert:function(){var e={database:this.state.database,route:this.state.route,payloads:this.state.payloads,locale:this.state.locale,theme:this.state.theme};return o.createElement(A,e)},renderConfiguration:function(){var e=this.components.setters,t=this.state.route,s=t?t.parameters.address:null,a={ref:e.remoteDataSource,basePath:"/admin",retrievalFlags:{include_ctime:!0,include_mtime:!0},discoveryFlags:{include_deleted:!0},onChange:this.handleDatabaseChange,onAuthorization:this.handleAuthorization,onExpiration:this.handleExpiration,onStupefaction:this.handleStupefaction},l={ref:e.payloadManager,database:this.state.database,route:this.state.route,onChange:this.handlePayloadsChange},c={ref:e.routeManager,pages:z,database:this.state.database,rewrite:this.rewriteUrl,onChange:this.handleRouteChange,onRedirectionRequest:this.handleRedirectionRequest},d={ref:e.localeManager,database:this.state.database,directory:r(243),onChange:this.handleLocaleChange,onModuleRequest:this.handleLanguageModuleRequest},h={ref:e.themeManager,database:this.state.database,modes:{"ultra-narrow":0,narrow:700,standard:1e3,wide:1400,"ultra-wide":1700},serverAddress:s,onChange:this.handleThemeChange},f={ref:e.cache,databaseName:"trambar-admin"},v={ref:e.notifier,serverAddress:s,locale:this.state.locale,onNotify:this.handleChangeNotification,onConnect:this.handleConnection,onDisconnect:this.handleDisconnection};return o.createElement("div",null,o.createElement(n,f),o.createElement(B,v),o.createElement(u,i({},a,{cache:this.components.cache})),o.createElement(m,l),o.createElement(p,c),o.createElement(g,d),o.createElement(b,h))},renderUploadProgress:function(){if(!this.state.showingUploadProgress)return null;var e={payloads:this.state.payloads,locale:this.state.locale};return o.createElement(U,e)},componentDidMount:function(){window.addEventListener("beforeunload",this.handleBeforeUnload)},componentDidUpdate:function(e,t){var r=this;this.state.subscriptionId?this.state.locale!==t.locale&&this.updateSubscription():this.state.canAccessServer&&this.state.connectionId&&this.createSubscription(),!this.splashScreenHidden&&this.isReady()&&(this.splashScreenHidden=!0,setTimeout(function(){r.hideSplashScreen()},100))},componentWillUnmount:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},createSubscription:function(){var e=this;if(!this.creatingSubscription){this.creatingSubscription=!0;var t=this.state.database.use({schema:"global",by:this});t.start().then(function(r){var n={user_id:r,address:"websocket",token:e.state.connectionId,schema:"*",area:"admin",locale:e.state.locale.languageCode,details:{user_agent:navigator.userAgent}};return t.saveOne({table:"subscription"},n).then(function(t){e.setState({subscriptionId:t.id})})}).finally(function(){e.creatingSubscription=!1})}},updateSubscription:function(){var e=this;if(!this.updatingSubscription){this.updatingSubscription=!0;var t=this.state.database.use({schema:"global",by:this});t.start().then(function(r){var n={id:e.state.subscriptionId,locale:e.state.locale.languageCode};return t.saveOne({table:"subscription"},n).then(function(t){e.setState({subscriptionId:t.id})})}).finally(function(){e.updatingSubscription=!1})}},loadCredentialsFromCache:function(e){var t=this.state.database.use({schema:"local",by:this}),r={address:e};return t.findOne({table:"user_credentials",criteria:r})},saveCredentialsToCache:function(e,t){var r=this.state.database.use({schema:"local",by:this}),n=s.extend({key:e},t);return r.saveOne({table:"user_credentials"},n)},removeCredentialsFromCache:function(e){var t=this.state.database.use({schema:"local",by:this}),r={key:e};return t.removeOne({table:"user_credentials"},r)},rewriteUrl:function(e,t,r){"parse"===r?c.extract(e,t):(this.state.route&&(t=s.defaults(t,this.state.route.parameters)),c.insert(e,t))},handleDatabaseChange:function(e){var t;this.state.route&&(t={address:this.state.route.parameters.address,schema:this.state.route.parameters.schema});var r=new d(e.target,t);this.setState({database:r})},handleAuthorization:function(e){this.saveCredentialsToCache(e.address,e.credentials);var t=this.state.route.parameters.address;e.address===t&&this.setState({canAccessServer:!0})},handleExpiration:function(e){this.removeCredentialsFromCache(e.address);var t=this.state.route.parameters.address;e.address===t&&this.setState({canAccessServer:!1})},handleStupefaction:function(e){this.state.route.replace(r(146),{code:404})},handlePayloadsChange:function(e){var t=new f(e.target),r=this.state.showingUploadProgress;t.uploading||(r=!1),this.setState({payloads:t,showingUploadProgress:r})},handleLocaleChange:function(e){var t=new v(e.target);this.setState({locale:t}),document.title=t.translate("app-title")},handleLanguageModuleRequest:function(e){var t=e.languageCode.substr(0,2);return new a(function(e,n){window.Promise||r(13);switch(t){case"en":r.e(0).then(function(){try{e(r(219))}catch(e){n(e)}}.bind(null,r)).catch(r.oe);break;case"fi":r.e(5).then(function(){try{e(r(220))}catch(e){n(e)}}.bind(null,r)).catch(r.oe);break;case"nb":r.e(4).then(function(){try{e(r(221))}catch(e){n(e)}}.bind(null,r)).catch(r.oe);break;case"pl":r.e(3).then(function(){try{e(r(222))}catch(e){n(e)}}.bind(null,r)).catch(r.oe);break;case"ru":r.e(2).then(function(){try{e(r(223))}catch(e){n(e)}}.bind(null,r)).catch(r.oe);break;case"zh":r.e(1).then(function(){try{e(r(224))}catch(e){n(e)}}.bind(null,r)).catch(r.oe);break;default:n(new Error("No module for language: "+t))}})},handleRouteChange:function(e){var t=this,r=new h(e.target),n=r.parameters.address,i=this.state.database;if(n!=this.state.database.context.address){var s=this.components.remoteDataSource;i=new d(s,{address:n})}i.hasAuthorization()?this.setState({route:r,database:i,canAccessServer:!0}):this.loadCredentialsFromCache(n).then(function(e){e&&i.addAuthorization(e),i.hasAuthorization()?t.setState({route:r,database:i,canAccessServer:!0}):t.setState({route:r,database:i,canAccessServer:!1})})},handleRedirectionRequest:function(e){var t=e.target,r=t.find(q,{code:404});return a.resolve(r)},handleClick:function(e){for(var t=e.target;t&&"A"!==t.tagName;)t=t.parentNode;if(t){var r=t.getAttribute("href");r&&-1===r.indexOf(":")&&(this.state.route.change(r),e.preventDefault())}},handleThemeChange:function(e){var t=new y(e.target);this.setState({theme:t})},handleConnection:function(e){this.setState({connectionId:e.token})},handleDisconnection:function(e){this.setState({connectionId:null})},handleChangeNotification:function(e){this.components.remoteDataSource.invalidate(e.address,e.changes),s.forIn(e.changes,function(e,t){console.log("Change notification: ",t,e)})},handleBeforeUnload:function(e){if(this.state.payloads&&this.state.payloads.uploading)return this.setState({showingUploadProgress:!0}),e.returnValue="Are you sure?"},hideSplashScreen:function(){var e=document.getElementById("splash-screen"),t=document.getElementById("splash-screen-style");e&&(e.className="transition-out",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)},1e3))}})},,,,,,,,function(e,t,r){"use strict";var n=(r(1),r(0)),i=n.PropTypes,s=r(4),a=r(6),o=r(111),l=r(18);r(511),e.exports=n.createClass({displayName:"ConfirmationDialogBox",propTypes:{show:i.bool,dangerous:i.bool,locale:i.instanceOf(s).isRequired,theme:i.instanceOf(a).isRequired,onConfirm:i.func,onCancel:i.func},getDefaultProps:function(){return{show:!0,dangerous:!0}},render:function(){var e=this.props.locale.translate,t={show:this.props.show,onBackgroundClick:this.handleCancelClick},r={className:"cancel",onClick:this.handleCancelClick},i={className:this.props.dangerous?"danger":"emphasis",onClick:this.handleConfirmClick};return n.createElement(o,t,n.createElement("div",{className:"confirmation-dialog-box"},n.createElement("div",{className:"message"},this.props.children),n.createElement("div",{className:"buttons"},n.createElement(l,r,e("confirmation-cancel"))," ",n.createElement(l,i,e("confirmation-confirm")))))},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleConfirmClick:function(e){this.props.onConfirm&&this.props.onConfirm({type:"confirm",target:this})}})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),s=r(13),a=r(0),o=a.PropTypes,l=r(17),c=r(24),u=r(149),d=r(110),p=r(10),h=r(4),m=r(6),f=r(44),g=r(111),v=r(18);r(512),e.exports=l.createClass({displayName:"ImageAlbumDialogBox",propTypes:{show:o.bool,purpose:o.string.isRequired,image:o.object,database:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(m).isRequired,payloads:o.instanceOf(f).isRequired,onSelect:o.func,onCancel:o.func},getInitialState:function(){return{shown:!1}},componentWillReceiveProps:function(e){e.show&&this.setState({shown:!0})},renderAsync:function(e){var t=this,r=this.props.database.use({schema:"global",by:this}),n={pictures:null,show:this.props.show,purpose:this.props.purpose,image:this.props.image,database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onSelect:this.props.onSelect,onCancel:this.props.onCancel};return r.start().then(function(e){if(t.props.show||t.state.shown){var n={purpose:t.props.purpose};return r.find({table:"picture",criteria:n})}}).then(function(e){return n.pictures=e,a.createElement(b,n)})}});var b=e.exports.Sync=a.createClass({displayName:"ImageAlbumDialogBox.Sync",propTypes:{show:o.bool,projects:o.arrayOf(o.object),purpose:o.string.isRequired,image:o.object,database:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(m).isRequired,payloads:o.instanceOf(f).isRequired,onSelect:o.func,onCancel:o.func},getInitialState:function(){return{managingImages:!1,selectedPictureId:null,deletionCandidateIds:[],isDropTarget:!1}},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleBackgroundClick},t={className:"image-album-dialog-box",onDragEnter:this.handleDragEnter};return a.createElement(g,e,a.createElement("div",t,this.renderPictures(),this.renderButtons(),this.renderDropIndicator()))},renderPictures:function(){var e=y(this.props.pictures);return a.createElement("div",{className:"scrollable"},i.map(e,this.renderPicture))},renderPicture:function(e,t){var r=e.details,s={className:"picture",onClick:this.handleImageClick,"data-picture-id":e.id};this.state.managingImages?i.includes(this.state.deletionCandidateIds,e.id)&&(s.className+=" deleting"):this.state.selectedPictureId?this.state.selectedPictureId===e.id&&(s.className+=" selected"):this.props.image&&this.props.image.url===e.url&&(s.className+=" selected");var o=Math.round(120*r.width/r.height),l={height:120,width:o};if(r.url){var c=this.props.theme.getImageUrl(r,{height:120,width:o});return a.createElement("div",n({key:t},s),a.createElement("img",{src:c,style:l}))}if(r.file){var u=URL.createObjectURL(r.file);return s.className+=" disabled",s.onClick=null,a.createElement("div",n({key:t},s),a.createElement(d,{url:u,style:l}))}},renderButtons:function(){var e=this.props.locale.translate;if(this.state.managingImages){var t={type:"file",value:"",accept:"image/*",multiple:!0,onChange:this.handleUploadChange},r={className:"cancel",onClick:this.handleCancelClick},n={className:"remove",disabled:i.isEmpty(this.state.deletionCandidateIds),onClick:this.handleRemoveClick};return a.createElement("div",{key:"manage",className:"buttons"},a.createElement("div",{className:"left"},a.createElement("label",{className:"push-button"},e("image-album-upload"),a.createElement("input",t))),a.createElement("div",{className:"right"},a.createElement(v,r,e("image-album-cancel"))," ",a.createElement(v,n,e("image-album-remove"))))}var s={className:"manage",onClick:this.handleManageClick},r={className:"cancel",onClick:this.handleCancelClick},o={className:"select",disabled:!this.state.selectedPictureId,onClick:this.handleSelectClick};return a.createElement("div",{key:"select",className:"buttons"},a.createElement("div",{className:"left"},a.createElement(v,s,e("image-album-manage"))),a.createElement("div",{className:"right"},a.createElement(v,r,e("image-album-cancel"))," ",a.createElement(v,o,e("image-album-select"))))},renderDropIndicator:function(){if(!this.state.isDropTarget)return null;var e={className:"drop-target",onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop};return a.createElement("div",e)},uploadPictures:function(e){var t=this;e=i.filter(e,function(e){return/^image\//.test(e.type)});var r=this.props.database.use({schema:"global",by:this}),n=this.props.payloads;return r.start().then(function(a){var o=[];return s.mapSeries(e,function(e,r){var s=o[r]=URL.createObjectURL(e);return u.loadImage(s).then(function(r){var s={format:i.last(i.split(e.type,"/")),width:r.naturalWidth,height:r.naturalHeight,file:e,type:"image"};return n.queue(s).then(function(e){return s.payload_id=e,{purpose:t.props.purpose,user_id:currentUserId,details:i.omit(s,"type")}})})}).then(function(e){return r.save({table:"picture"},e).mapSeries(function(e){var t=e.details.payload_id,r={payload_id:t},i=n.find(r);return e.details.file=i.file,n.send(t),e})}).finally(function(){i.each(o,function(e){URL.revokeObjectURL(e)})})})},removePictures:function(e){var t=i.keyBy(this.props.pictures,"id"),r=i.filter(i.map(e,function(e){return t[e]}));if(!i.isEmpty(r)){var n=this.props.database.use({schema:"global",by:this});return n.start().then(function(e){return n.remove({table:"picture"},r)})}},handleImageClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-picture-id"));if(this.state.managingImages){var r=i.slice(this.state.deletionCandidateIds);i.includes(this.state.deletionCandidateIds,t)?i.pull(r,t):r.push(t),this.setState({deletionCandidateIds:r})}else{var n=t,s=i.find(this.props.pictures,{id:t});this.props.image&&s.url===this.props.image.url&&(n=null),this.setState({selectedPictureId:n})}},handleManageClick:function(e){this.setState({managingImages:!0})},handleCancelClick:function(e){this.state.managingImages?this.setState({managingImages:!1,deletionCandidateIds:[]}):this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleSelectClick:function(e){if(this.props.onSelect){var t=this.state.selectedPictureId,r=i.find(this.props.pictures,{id:t});this.props.onSelect({type:"select",target:this,image:r.details})}},handleBackgroundClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleUploadChange:function(e){var t=e.target.files;if(t.length)return this.uploadPictures(t)},handleDragEnter:function(e){this.setState({isDropTarget:!0})},handleDragLeave:function(e){this.setState({isDropTarget:!1})},handleDragOver:function(e){e.preventDefault()},handleDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;e.dataTransfer.items;t.length>0&&this.uploadPictures(t),this.setState({isDropTarget:!1})},handleRemoveClick:function(e){var t=this,r=this.state.deletionCandidateIds;this.setState({deletionCandidateIds:[]},function(){t.removePictures(r)})}}),y=c(function(e){return i.orderBy(e,"mtime","desc")})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=(r(10),r(4)),o=r(6),l=r(111),c=r(18),u=r(244);r(513),e.exports=i.createClass({displayName:"ImageCroppingDialogBox",propTypes:{image:s.object,desiredWidth:s.number,desiredHeight:s.number,locale:s.instanceOf(a).isRequired,theme:s.instanceOf(o).isRequired,onSelect:s.func,onCancel:s.func},getInitialState:function(){return{clippingRect:this.props.image.clip,hasChanged:!1}},zoom:function(e){var t=this.resizeClippingRect(e);this.setState({clippingRect:t})},canZoom:function(e){var t=this.resizeClippingRect(e);return!n.isEqual(t,this.state.clippingRect)},resizeClippingRect:function(e){var t=this.state.clippingRect,r=Math.round(t.width*e),n=Math.round(t.height*e),i=this.props.image.width,s=this.props.image.height,a=this.props.desiredWidth/this.props.desiredHeight;r>i&&(r=i,n=Math.round(r/a)),n>s&&(n=s,r=Math.round(n*a));var o=t.left-Math.round((r-t.width)/2),l=t.top-Math.round((n-t.height)/2);return o<0&&(o=0),l<0&&(l=0),{left:o,top:l,width:r,height:n}},render:function(){return i.createElement(l,{show:this.props.show},i.createElement("div",{className:"image-cropping-dialog-box"},this.renderImage(),this.renderButtons()))},renderImage:function(){var e=this.props.image,t={url:this.props.theme.getImageUrl(e,{clip:null}),clippingRect:this.state.clippingRect,aspectRatio:this.props.desiredWidth/this.props.desiredHeight,onChange:this.handleChange},r={width:this.props.desiredWidth,height:this.props.desiredHeight};return i.createElement("div",{className:"image",style:r},i.createElement(u,t))},renderButtons:function(){var e=this.props.locale.translate,t={className:"zoom",disabled:!this.canZoom(1/.9),onClick:this.handleZoomOutClick},r={className:"zoom",disabled:!this.canZoom(.9),onClick:this.handleZoomInClick},n={className:"cancel",onClick:this.handleCancelClick},s={className:"select",disabled:!this.state.hasChanged,onClick:this.handleSelectClick};return i.createElement("div",{key:"select",className:"buttons"},i.createElement("div",{className:"left"},i.createElement(c,t,i.createElement("i",{className:"fa fa-search-minus"})),i.createElement(c,r,i.createElement("i",{className:"fa fa-search-plus"}))),i.createElement("div",{className:"right"},i.createElement(c,n,e("image-cropping-cancel"))," ",i.createElement(c,s,e("image-cropping-select"))))},handleChange:function(e){var t=this.props.image,r=n.mapValues(e.rect,function(e){return Math.round(e)}),i=!0;n.isEqual(r,t.rect)&&(i=!1),this.setState({clippingRect:r,hasChanged:i})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleSelectClick:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,clippingRect:this.state.clippingRect})},handleZoomInClick:function(e){this.zoom(.9)},handleZoomOutClick:function(e){this.zoom(1/.9)}})},function(e,t,r){"use strict";function n(e){var t=document.getElementById("app-container");if(!t)throw new Error("Unable to find app element in DOM");var r=i.createElement(a);return s.render(r,t),null}var i=r(0),s=r(40),a=r(218);window.addEventListener("load",n)},function(e,t,r){"use strict";function n(e){switch(e){case"facebook":return"facebook-official";default:return e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=r(1),a=r(0),o=a.PropTypes,l=r(17),c=(r(87),r(10)),u=r(11),d=r(4),p=r(6),h=r(18),m=r(42);r(525),e.exports=l.createClass({displayName:"SignInPage",propTypes:{database:o.instanceOf(c).isRequired,route:o.instanceOf(u).isRequired,locale:o.instanceOf(d).isRequired,theme:o.instanceOf(p).isRequired},renderAsync:function(e,t){var r=this.props.database.use({by:this}),n=this.props.route!==t.route?100:1e3,i={system:null,providers:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(a.createElement(f,i),n),r.beginAuthorization("admin").then(function(e){return i.system=e.system,i.providers=e.providers,a.createElement(f,i)})}});var f=e.exports.Sync=a.createClass({displayName:"SignInPage.Sync",propTypes:{system:o.object,providers:o.arrayOf(o.object),database:o.instanceOf(c).isRequired,route:o.instanceOf(u).isRequired,locale:o.instanceOf(d).isRequired,theme:o.instanceOf(p).isRequired},getInitialState:function(){return{username:"",password:"",submitting:!1,problem:null,errors:{}}},canSubmitForm:function(){return!!s.trim(this.state.username)&&!!s.trim(this.state.password)},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,r=this.props.system,n=t(s.get(r,"details.title"));return a.createElement("div",{className:"sign-in-page"},a.createElement("h2",null,e("sign-in-$title",n)),a.createElement("section",null,this.renderForm()),a.createElement("h2",null,e("sign-in-oauth")),a.createElement("section",null,this.renderOAuthButtons()))},renderForm:function(){var e=this.props.locale.translate,t=this.canSubmitForm(),r={id:"username",type:"text",value:this.state.username,disabled:this.state.submitting,locale:this.props.locale,onChange:this.handleUsernameChange},n={id:"password",type:"password",value:this.state.password,disabled:this.state.submitting,locale:this.props.locale,onChange:this.handlePasswordChange};return a.createElement("form",{onSubmit:this.handleFormSubmit},this.renderProblem(),a.createElement(m,r,e("sign-in-username")),a.createElement(m,n,e("sign-in-password")),a.createElement("div",{className:"button-row"},a.createElement(h,{disabled:!t||this.state.submitting},e("sign-in-submit"))))},renderProblem:function(){if(!this.state.problem)return null;var e=this.props.locale.translate;return a.createElement("div",{className:"error"},a.createElement("i",{className:"fa fa-exclamation-circle"})," ",e("sign-in-problem-"+this.state.problem))},renderOAuthButtons:function(){var e=(this.props.locale.translate,s.sortBy(this.props.providers,["type","name"]));return a.createElement("div",{className:"oauth-buttons"},s.map(e,this.renderOAuthButton))},renderOAuthButton:function(e,t){var r=this.props.locale.translate,s=this.props.locale.pick,o=s(e.details.title)||r("server-type-"+e.type),l=n(e.type),c={className:"oauth-button",href:e.url,onClick:this.handleOAuthButtonClick,"data-type":e.type},u=this.state.errors[e.type];if(u){var r=this.props.locale.translate,d=r("sign-in-error-"+u.reason);return c.className+=" error",a.createElement("a",i({key:t},c),a.createElement("span",{className:"icon"},a.createElement("i",{className:"fa fa-fw fa-"+l})),a.createElement("span",{className:"error"},d))}return a.createElement("a",i({key:t},c),a.createElement("span",{className:"icon"},a.createElement("i",{className:"fa fa-fw fa-"+l})),a.createElement("span",{className:"label"},o))},openPopUpWindow:function(e){return new Promise(function(t,r){var n={width:400,height:500,left:window.screenLeft+Math.round((window.outerWidth-400)/2),top:window.screenTop+Math.round((window.outerHeight-500)/2),toolbar:"no",menubar:"no",status:"no"},i=s.map(n,function(e,t){return t+"="+e}),a=window.open(e,"sign-in",i.join(","));if(a){a.location=e;var o=setInterval(function(){a.closed&&(clearInterval(o),t())},50)}else r(new Error("Unable to open popup"))})},handleOAuthButtonClick:function(e){var t=this,r=e.currentTarget.getAttribute("href"),n=e.currentTarget.getAttribute("data-type");return e.preventDefault(),this.openPopUpWindow(r).then(function(){return t.props.database.use({by:t}).checkAuthorizationStatus().catch(function(e){var r=s.clone(t.state.errors);r[n]=e,t.setState({errors:r})})})},handleUsernameChange:function(e){this.setState({username:e.target.value})},handlePasswordChange:function(e){this.setState({password:e.target.value})},handleFormSubmit:function(e){var t=this;e.preventDefault(),this.canSubmitForm()&&this.setState({submitting:!0},function(){t.props.database.use({by:t}).submitPassword(t.state.username,t.state.password).catch(function(e){var r;switch(e.statusCode){case 401:r="incorrect-username-password";break;case 403:r="no-support-for-username-password";break;default:r="unexpected-error"}t.setState({problem:r,submitting:!1})})})}})},function(e,t,r){"use strict";var n=r(1),i=(r(13),r(0)),s=i.PropTypes,a=r(17),o=r(10),l=r(11),c=r(4),u=r(6);r(526),e.exports=a.createClass({displayName:"StartPage",propTypes:{database:s.instanceOf(o).isRequired,route:s.instanceOf(l).isRequired,locale:s.instanceOf(c).isRequired,theme:s.instanceOf(u).isRequired},statics:{parseUrl:function(e,t,r){return l.match(e,["/:extra?"],function(e){return n.trimEnd(e.extra,"/")?null:e})},getUrl:function(e){return{path:"/",query:void 0,hash:void 0}}},renderAsync:function(e,t){var n=this,s=this.props.database.use({by:this}),a={locale:this.props.locale};return s.start().then(function(e){var t={deleted:!1};return s.findOne({schema:"global",table:"system",criteria:t})}).then(function(e){return e?(n.props.route.replace(r(67)),null):(setTimeout(function(){n.props.route.replace(r(104),{edit:!0})},2500),i.createElement(d,a))})}});var d=e.exports.Sync=i.createClass({displayName:"StartPage.Sync",propType:{locale:s.instanceOf(c).isRequired},render:function(){var e=this.props.locale.translate;return i.createElement("div",{className:"start-page "+this.props.stage},i.createElement("h2",null,e("welcome")))}})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=r(11),o=r(4),l=r(6),c=r(33),u=r(43);r(530),e.exports=i.createClass({displayName:"ProjectTooltip",mixins:[c],propTypes:{projects:s.arrayOf(s.object),route:s.instanceOf(a).isRequired,locale:s.instanceOf(o).isRequired,theme:s.instanceOf(l).isRequired},render:function(){if(null==this.props.projects)return null;var e=this.props.locale.translate,t=this.props.locale.pick,s=this.props.route,a=this.props.projects,o="-";if(a.length>0){var l,c=a[0];this.props.disabled||(l=s.find(r(49),{project:c.id}));var d=t(c.details.title)||c.name,o=i.createElement("a",{href:l,key:0},d);a=n.slice(a,1)}var p;if(a.length>0){var h,m=e("project-tooltip-$count-others",a.length);a.length>10&&(a=n.slice(a,0,10),h=i.createElement("div",{className:"ellipsis"},i.createElement("i",{className:"fa fa-ellipsis-v"})));var f=n.map(a,function(e,n){var a=s.find(r(49),{project:e.id}),o=t(e.details.title)||e.name;return i.createElement("div",{className:"item",key:n},i.createElement("a",{href:a},o))}),g=s.find(r(67),{});p=e("tooltip-$first-and-$tooltip",o,i.createElement(u,{className:"project",disabled:this.props.disabled||0===f.length,key:1},i.createElement("inline",null,m),i.createElement("window",null,f,h,i.createElement("div",{className:"bottom"},i.createElement("a",{href:g},e("tooltip-more"))))))}else p=o;return i.createElement("span",null,p)}})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=(r(11),r(4)),o=r(6),l=r(33),c=r(43);r(531),e.exports=i.createClass({displayName:"RepositoryTooltip",mixins:[l],propTypes:{repos:s.arrayOf(s.object),project:s.object.isRequired,route:s.object.isRequired,locale:s.instanceOf(a).isRequired,theme:s.instanceOf(o).isRequired,disabled:s.bool},render:function(){var e=this;if(null==this.props.repos)return null;var t=this.props.locale.translate,s=this.props.locale.pick,a=this.props.route,o=t("repository-tooltip-$count",this.props.repos.length),l=n.map(this.props.repos,function(n,o){var l=a.find(r(82),{project:e.props.project.id,repo:n.id}),c=n.type,u=s(n.details.title)||t("server-type-"+n.type);return i.createElement("div",{className:"item",key:o},i.createElement("a",{href:l},i.createElement("i",{className:"fa fa-"+c})," ",u))}),u=a.find(r(81),{project:this.props.project.id});return i.createElement(c,{className:"repository",disabled:this.props.disabled||0===l.length},i.createElement("inline",null,o),i.createElement("window",null,l,i.createElement("div",{className:"bottom"},i.createElement("a",{href:u},t("tooltip-more")))))}})},function(e,t,r){"use strict";var n=r(1),i=r(13),s=r(0),a=s.PropTypes,o=r(17),l=r(16),c=r(10),u=r(11),d=r(4),p=r(6),h=r(69);r(541),e.exports=o.createClass({displayName:"NavigationTree",propTypes:{disabled:a.bool,database:a.instanceOf(c).isRequired,route:a.instanceOf(u).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(p).isRequired},renderAsync:function(e){var t=this.props.route.parameters,r=this.props.database.use({schema:"global",by:this}),a={project:null,user:null,role:null,repo:null,server:null,disabled:this.props.disabled,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(s.createElement(m,a)),r.start().then(function(e){var s=n.keys(n.pickBy(a,n.isNull));return i.each(s,function(e){var n=parseInt(t[e]);if(n){var i={id:n};return r.findOne({schema:"global",table:e,criteria:i}).then(function(t){a[e]=t})}})}).then(function(){return s.createElement(m,a)}).catch(function(e){if(401===e.statusCode)return s.createElement(m,a);throw e})}});var m=e.exports.Sync=s.createClass({displayName:"NavigationTree.Sync",propTypes:{disabled:a.bool,project:a.object,user:a.object,role:a.object,repo:a.object,server:a.object,route:a.instanceOf(u).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(p).isRequired},getInitialState:function(){return this.components=l({activeLink:HTMLAnchorElement,container:HTMLElement,arrow:HTMLElement}),{arrowPosition:0,arrowCount:0,arrowAction:"",project:this.props.project||f,user:this.props.user||f,role:this.props.role||f,repo:this.props.repo||f,server:this.props.server||f}},componentWillReceiveProps:function(e){var t=n.keys(this.state),r=n.pickBy(n.pick(e,t),Boolean);n.isEmpty(r)||this.setState(r)},render:function(){var e=this.components.setters,t=["navigation-tree"];this.props.disabled&&t.push("disabled");var r=this.getRootNodes();return s.createElement("div",{ref:e.container,className:t.join(" ")},n.map(r,this.renderRootNode),this.renderArrow())},renderRootNode:function(e,t){return this.renderNode(e,1,t)},renderNode:function(e,t,r){if(e){var n;this.isActive(e)&&(n=this.components.setters.activeLink);var i;this.props.disabled||(i=e.url);return s.createElement("div",{key:r,className:"level"+t},s.createElement("a",{ref:n,href:i},e.label),this.renderChildNodes(e,t+1))}},renderChildNodes:function(e,t){var r=this;if(n.isEmpty(e.children))return null;var i={open:e.showChildren||this.hasActiveChild(e),children:n.map(e.children,function(e,n){return r.renderNode(e,t,n)})};return s.createElement(h,i)},renderArrow:function(){var e=["zero","one","two","three","four"],t={ref:this.components.setters.arrow,className:"arrow "+e[this.state.arrowCount]+" "+this.state.arrowAction,style:{top:this.state.arrowPosition}};return s.createElement("div",t,s.createElement("i",{className:"fa fa-play first"}),s.createElement("i",{className:"fa fa-play second"}),s.createElement("i",{className:"fa fa-play third"}),s.createElement("i",{className:"fa fa-play fourth"}))},componentDidMount:function(){var e=this;setTimeout(function(){e.repositionArrow()},100)},componentDidUpdate:function(e,t){e.route!==this.props.route&&this.repositionArrow()},isActive:function(e){return e.url===this.props.route.path},hasActiveChild:function(e){var t=this;return n.some(e.children,function(e){return t.isActive(e)||t.hasActiveChild(e)})},getRootNodes:function(){return[this.getProjectListNode(),this.getUserListNode(),this.getRoleListNode(),this.getServerListNode(),this.getSettingsNode()]},getProjectListNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-projects"),url:t.find(r(67)),children:[this.getProjectNode()]}},getProjectNode:function(){var e,t=this.props.locale.translate,n=this.props.locale.pick,i=this.props.route,a=i.parameters,o=this.state.project;e="new"===a.project?s.createElement("i",null,t("nav-project-new")):n(o.details.title)||o.name||"-";var l=i.find(r(49),{project:a.project}),c="number"==typeof a.project;return{label:e,url:l,children:[this.getMemberListNode(),this.getRepoListNode()],showChildren:c}},getMemberListNode:function(){var e,t=this.props.locale.translate,n=this.props.route,i=n.parameters,s=t("nav-members");return"number"==typeof i.project&&(e=n.find(r(80),{project:i.project})),{label:s,url:e,children:[this.getMemberNode()]}},getMemberNode:function(){var e,t,n=this.props.locale.translate,i=this.props.locale.pick,a=this.props.route,o=a.parameters,l=this.state.user;return e="new"===o.user?s.createElement("i",null,n("nav-member-new")):i(l.details.name)||l.username||"-","number"==typeof o.project&&(t=a.find(r(30),{project:o.project,user:o.user})),{label:e,url:t}},getRepoListNode:function(){var e,t=this.props.locale.translate,n=this.props.route,i=n.parameters,s=t("nav-repositories");return"number"==typeof i.project&&(e=n.find(r(81),{project:i.project})),{label:s,url:e,children:[this.getRepoNode()]}},getRepoNode:function(){var e,t=(this.props.locale.translate,this.props.locale.pick),n=this.props.route,i=n.parameters,s=this.state.repo,a=t(s.details.title)||s.name||"-";return i.project&&i.repo&&(e=n.find(r(82),{project:i.project,repo:i.repo})),{label:a,url:e}},getUserListNode:function(){return{label:(0,this.props.locale.translate)("nav-users"),url:this.props.route.find(r(84)),children:[this.getUserNode()]}},getUserNode:function(){var e,t,n=this.props.locale.translate,i=this.props.locale.pick,a=this.props.route,o=a.parameters,l=this.state.user;return e="new"===o.user?s.createElement("i",null,n("nav-user-new")):i(l.details.name)||l.username||"-",o.user&&(t=a.find(r(30),{user:o.user})),{label:e,url:t}},getRoleListNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-roles"),url:t.find(r(83)),children:[this.getRoleNode()]}},getRoleNode:function(){var e,t,n=this.props.locale.translate,i=this.props.locale.pick,a=this.props.route,o=a.parameters,l=this.state.role;return e="new"===o.role?s.createElement("i",null,n("nav-role-new")):i(l.details.title)||l.name||"-",o.role&&(t=a.find(r(50),{role:o.role})),{label:e,url:t}},getServerListNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-servers"),url:t.find(r(103)),children:[this.getServerNode()]}},getServerNode:function(){var e,t,n=this.props.locale.translate,i=this.props.locale.pick,a=this.props.route,o=a.parameters,l=this.state.server;return"new"===o.server?e=s.createElement("i",null,n("nav-server-new")):(e=i(l.details.title)||n("server-type-"+l.type),t=a.find(r(51),{server:o.server})),{label:e,url:t}},getSettingsNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-settings"),url:t.find(r(104))}},repositionArrow:function(){var e=this;setTimeout(function(){var t=0,r=e.components.activeLink;if(r)for(var n=r;n;n=n.parentNode){var i;if(i=/level(\d)/.exec(n.className)){t=parseInt(i[1]);break}}var s="";t>e.state.arrowCount?s="extending":t<e.state.arrowCount&&(s="retracting"),e.setState({arrowAction:s,arrowCount:t})},50);var t=this.components.arrow,r=this.components.container,n=setInterval(function(){var i=0,s=e.components.activeLink;if(s){var a=t.getBoundingClientRect(),o=s.getBoundingClientRect(),l=r.getBoundingClientRect();i=Math.floor(o.top+(o.height-a.height)/2-l.top)+1}i!==e.state.arrowPosition?e.setState({arrowPosition:i}):clearInterval(n)},50)}}),f={details:{}}},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),s=i.PropTypes,a=r(10),o=r(11),l=r(4),c=r(6),u=r(234),d=r(43),p=r(236);r(545),e.exports=i.createClass({displayName:"SideNavigation",propTypes:{disabled:s.bool,database:s.instanceOf(a).isRequired,route:s.instanceOf(o).isRequired,locale:s.instanceOf(l).isRequired,theme:s.instanceOf(c).isRequired},getDefaultProps:function(){return{disabled:!1}},getInitialState:function(){return{ready:!1}},getLanguage:function(e){e||(e=this.props.locale.lang);var t=this.props.locale.directory;return _.find(t,{code:e})},render:function(){var e="side-navigation";return this.state.ready||(e+=" hidden"),i.createElement("nav",{className:e},this.renderHeader(),this.renderNavTree(),this.renderBottomButtons())},renderNavTree:function(){var e={disabled:this.props.disabled,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(u,e)},renderBottomButtons:function(){return i.createElement("div",{className:"bottom-buttons"},this.renderLanguageButton(),this.renderCountryButton(),this.renderUserButton())},renderLanguageButton:function(){var e=this,t=this.getLanguage(this.props.locale.lang),r=_.filter(this.props.locale.directory,{locales:{admin:!0}}),s=_.map(r,function(r,s){var a={className:"item","data-code":r.code,onClick:e.handleLanguageClick};return r===t&&(a.className+=" selected",a.onClick=null),i.createElement("div",n({key:s},a),i.createElement("i",{className:"fa fa-check-circle-o"})," ",r.name)});return i.createElement("div",{className:"button language"},i.createElement(d,{upward:!0},i.createElement("inline",null,i.createElement("i",{className:"fa fa-language"})," ",t.name),i.createElement("window",null,s)))},renderCountryButton:function(){var e=this,t=this.getLanguage();if(_.size(t.countries)<=1)return null;var r=_.last(_.split(this.props.locale.languageCode,"-"));r||(r=t.defaultCountry);var s=t.countries[r],a=_.map(t.countries,function(t,s){var a={className:"item","data-code":s,onClick:e.handleCountryClick};return s===r&&(a.className+=" selected",a.onClick=null),i.createElement("div",n({key:s},a),i.createElement("i",{className:"fa fa-check-circle-o"})," ",t)});return i.createElement("div",{className:"button country"},i.createElement(d,{upward:!0},i.createElement("inline",null,s),i.createElement("window",null,a)))},renderUserButton:function(){var e=(this.props.locale.translate,{database:this.props.database,locale:this.props.locale,theme:this.props.theme});return i.createElement("div",{className:"button user"},i.createElement(d,{upward:!0,leftward:!0,disabled:this.props.disabled},i.createElement("inline",null,i.createElement("i",{className:"fa fa-user-circle-o"})),i.createElement("window",null,i.createElement(p,e))))},renderHeader:function(){return i.createElement("header",null,this.renderLogo(),this.renderAppName())},renderAppName:function(){var e=this.props.locale.translate;return i.createElement("h2",{className:"app-name"},e("app-name"))},renderLogo:function(){return i.createElement("svg",{className:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"1000 1000 5080 6299",preserveAspectRatio:"xMidYMid",style:{strokeLinejoin:"round",strokeWidth:30}},i.createElement("defs",{className:"ClipPathGroup"},i.createElement("clipPath",{clipPathUnits:"userSpaceOnUse"},i.createElement("rect",{x:"1000",y:"1000",width:"5080",height:"6299"}))),i.createElement("defs",{className:"TextShapeIndex"}),i.createElement("defs",{className:"EmbeddedBulletChars"},i.createElement("path",{d:"M0.3-0.6L0.6-0.3 0.3 0 0-0.3 0.3-0.6Z"}),i.createElement("path",{d:"M0-0.6L0.6-0.6 0.6 0 0 0 0-0.6Z"}),i.createElement("path",{d:"M0.1 0L0.3-0.4 0.1-0.7 0.7-0.4 0.1 0ZM1358 739L309 1346 659 739 1358 739Z"}),i.createElement("path",{d:"M1-0.4L0.6 0 0.4 0 0.6-0.3 0.1-0.3 0.1-0.5 0.6-0.5 0.4-0.7 0.6-0.7 1-0.4Z"}),i.createElement("path",{d:"M0 0C0 0 0 0 0 0L0.2-0.3C0.1-0.4 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5L0.2-0.5 0.2-0.4 0.4-0.5 0.4-0.5 0.4-0.5C0.4-0.5 0.4-0.5 0.5-0.5 0.4-0.5 0.4-0.4 0.4-0.4 0.4-0.4 0.3-0.3 0.3-0.3L0.4-0.1C0.4-0.1 0.4-0.1 0.3-0.1L0.4-0.1C0.4 0 0.3 0 0.3 0 0.3 0 0.3-0.1 0.2-0.2L0.1 0C0.1 0.1 0.1 0.1 0 0.1 0 0.1 0 0.1 0 0 0 0 0 0 0 0 0 0 0 0 0 0Z"}),i.createElement("path",{d:"M0.1 0C0.1 0 0.1 0 0-0.1 0-0.1 0-0.2 0-0.2 0-0.3 0-0.3 0-0.3 0.1-0.4 0.1-0.4 0.1-0.4 0.1-0.4 0.2-0.4 0.2-0.3L0.2-0.2C0.2-0.2 0.2-0.2 0.2-0.2L0.6-0.5C0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.5 0.6-0.5L0.6-0.5C0.6-0.5 0.6-0.4 0.6-0.4L0.2 0C0.2 0 0.2 0 0.1 0Z"}),i.createElement("path",{d:"M0.4 0C0.3 0 0.2 0 0.2-0.1 0.1-0.1 0.1-0.2 0.1-0.3 0.1-0.4 0.1-0.4 0.2-0.5 0.2-0.6 0.3-0.6 0.4-0.6 0.5-0.6 0.6-0.6 0.6-0.5 0.7-0.4 0.7-0.4 0.7-0.3 0.7-0.2 0.7-0.1 0.6-0.1 0.6 0 0.5 0 0.4 0Z"}),i.createElement("path",{d:"M0.2-0.2C0.1-0.2 0.1-0.2 0.1-0.3 0-0.3 0-0.3 0-0.4 0-0.4 0-0.4 0.1-0.4 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.3 0.3-0.3 0.3-0.3 0.2-0.2 0.2-0.2 0.2-0.2Z"}),i.createElement("path",{d:"M0-0.2L0.6-0.2 0.6-0.3 0-0.3 0-0.2Z"})),i.createElement("defs",{className:"TextEmbeddedBitmaps"}),i.createElement("g",{className:"SlideGroup"},i.createElement("g",{className:"Slide",clipPath:"url(#presentation_clip_path)"},i.createElement("g",{className:"Page"},i.createElement("g",{className:"com.sun.star.drawing.ClosedBezierShape"},i.createElement("rect",{className:"BoundingBox",x:"1000",y:"1000",width:"5082",height:"6301",fill:"none"}),i.createElement("path",{d:"M1655 2259L5444 2259 6080 2890 6080 3520 5233 3520 5233 3099 1847 3099 1847 3918 1847 4758 1847 5619 1847 6459 5233 6459 5233 5619 4809 5619 4809 4989 6080 4989 6080 6669 5444 7299 1635 7299 1000 6669 1000 2890 1655 2259ZM3116 6459L3116 4569 3963 4569 3963 6459 3116 6459ZM3540 3520C3780 3520 3963 3701 3963 3939 3963 4178 3780 4360 3540 4360 3300 4360 3116 4178 3116 3939 3116 3701 3300 3520 3540 3520ZM3116 3520L3116 3520ZM3964 4361L3964 4361ZM3328 2259L3328 1419 2693 1419 2693 1000 4387 1000 4387 1419 3752 1419 3752 2259 3328 2259Z",fill:"rgb(255,255,255)"}))))))},componentDidMount:function(){var e=this;setTimeout(function(){e.setState({ready:!0})},100)},handleLanguageClick:function(e){var t=e.currentTarget.getAttribute("data-code"),r=this.getLanguage(t);return this.props.locale.change(r.code+"-"+r.defaultCountry)},handleCountryClick:function(e){var t=e.currentTarget.getAttribute("data-code"),r=this.getLanguage();return this.props.locale.change(r.code+"-"+t)}})},function(e,t,r){"use strict";var n=(r(1),r(13),r(0)),i=n.PropTypes,s=r(17),a=r(10),o=r(4),l=r(6),c=r(86);r(546),e.exports=s.createClass({displayName:"SignOffMenu",propTypes:{database:i.instanceOf(a).isRequired,locale:i.instanceOf(o).isRequired,theme:i.instanceOf(l).isRequired},renderAsync:function(e){var t=this,i=this.props.database.use({schema:"global",by:this});return i.start().then(function(e){var t={id:e};return i.findOne({table:"user",criteria:t})}).then(function(e){var i=t.props.locale.translate,s=t.props.locale.pick,a=r(30).getUrl({userId:e.id});return n.createElement("div",{className:"sign-off-menu"},n.createElement("a",{href:a},n.createElement(c,{user:e,theme:t.props.theme,size:"large"}),n.createElement("div",{className:"name"},s(e.details.name))),n.createElement("div",{className:"sign-off",onClick:t.handleSignOffClick},i("sign-off-menu-sign-off")))})},handleSignOffClick:function(){this.props.database.use({by:this}).endAuthorization()}})},function(e,t,r){"use strict";var n=r(1),i=r(22),s=r(0),a=s.PropTypes,o=r(17),l=(r(148),r(10)),c=r(11),u=r(4),d=r(6);r(548),e.exports=o.createClass({displayName:"TaskAlertBar",propTypes:{database:a.instanceOf(l).isRequired,route:a.instanceOf(c).isRequired,locale:a.instanceOf(u).isRequired,theme:a.instanceOf(d).isRequired},getInitialState:function(){return{searchStartTime:this.getSearchStartTime()}},getSearchStartTime:function(){return i().subtract(8,"hour").startOf("hour").toISOString()},renderAsync:function(e){var t=this,r=this.props.database.use({schema:"global",by:this}),n={tasks:null,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(s.createElement(p,n)),r.start().then(function(e){var n={etime:null,deleted:!1,newer_than:t.state.searchStartTime,limit:10};return r.find({table:"task",criteria:n})}).then(function(e){return n.tasks=e,s.createElement(p,n)})},componentDidMount:function(){var e=this;this.hourChangeTimeout=setInterval(function(){var t=e.getSearchStartTime();e.state.searchStartTime!==t&&e.setState({searchStartTime:t})},3e5)},componentWillUnmount:function(){clearInterval(this.hourChangeInterval)}});var p=e.exports.Sync=s.createClass({displayName:"TaskAlertBar.Sync",propTypes:{tasks:a.arrayOf(a.object),route:a.instanceOf(c).isRequired,locale:a.instanceOf(u).isRequired,theme:a.instanceOf(d).isRequired},getInitialState:function(){return{showing:!1,rendering:!1,hidden:!0,selectedTask:null,highestTaskId:0}},getMessage:function(){var e=this.props.locale.translate,t=this.state.selectedTask;switch(t.action){case"gitlab-repo-import":return e("task-importing-repos");case"gitlab-user-import":return e("task-importing-users");case"gitlab-hook-install":return e("task-installing-hooks");case"gitlab-hook-remove":return e("task-removing-hooks");case"gitlab-event-import":var r=t.options.repo;return e("task-importing-events-from-$repo",r);case"gitlab-push-import":var r=t.options.repo;return e("task-importing-push-from-$repo",r);case"gitlab-commit-comment-import":var r=t.options.repo;return e("task-importing-commit-comments-from-$repo",r);case"gitlab-issue-comment-import":var r=t.options.repo;return e("task-importing-issue-comments-from-$repo",r);case"gitlab-merge-request-comment-import":var r=t.options.repo;return e("task-importing-merge-request-comments-from-$repo",r);default:return""}},getUrl:function(){var e=this.state.selectedTask,t=null,i=n.get(e,"options.server_id");if(i){t=this.props.route.find(r(51),{server:i,task:e.id})}return t},componentWillReceiveProps:function(e){var t=this;if(this.props.tasks!==e.tasks){var r=this.state.highestTaskId,i=n.sortBy(n.filter(e.tasks,{failed:!1}),"ctime"),s=n.first(i);if(s)s.id>r&&(r=s.id);else{var a=n.sortBy(n.filter(e.tasks,{failed:!0},"ctime"));s=n.find(a,function(e){if(e.id>=r)return!0})}if(s)this.setState({selectedTask:s,highestTaskId:r,showing:!0});else{var o=this.state.selectedTask;setTimeout(function(){o===t.state.selectedTask&&t.setState({showing:!1})},5e3)}}},render:function(){if(!this.state.rendering)return null;var e="task-alert-bar";return this.state.hidden&&(e+=" hidden"),this.state.selectedTask.failed&&(e+=" failure"),s.createElement("div",{className:e},this.renderMessage(),this.renderProgressBar())},renderMessage:function(){var e=this.getMessage(this.state.selectedTask),t=this.getUrl(this.state.selectedTask);return s.createElement("a",{href:t},e)},renderProgressBar:function(){var e=this.state.selectedTask,t=e.completion+"%";return s.createElement("div",{className:"progress-bar-frame"},s.createElement("div",{className:"bar",style:{width:t}}))},componentDidUpdate:function(e,t){var r=this;if(!t.showing&&this.state.showing)this.state.rendering||this.setState({rendering:!0,hidden:!0});else if(t.showing&&!this.state.showing)this.setState({hidden:!0}),setTimeout(function(){r.state.showing||r.setState({rendering:!1})},500);else if(!t.rendering&&this.state.rendering){i().subtract(2,"second").toISOString(),setTimeout(function(){r.setState({hidden:!1})},10)}}})},function(e,t,r){"use strict";function n(e){var t=[];return s.each(e.deleted,function(e){i(t,e,"item deleted")}),s.each(e.modified,function(e){i(t,e,"item modified")}),s.each(e.added,function(e){i(t,e,"item added")}),t}function i(e,t,r){var n=e.length;e.push(o.createElement("span",{className:r,key:n},t))}var s=r(1),a=r(22),o=r(0),l=o.PropTypes,c=r(17),u=r(24),d=r(10),p=r(11),h=r(4),m=r(6),f=r(260);r(549),e.exports=c.createClass({displayName:"TaskList",propTypes:{server:l.object,selectedTaskId:l.number,database:l.instanceOf(d).isRequired,route:l.instanceOf(p).isRequired,locale:l.instanceOf(h).isRequired,theme:l.instanceOf(m).isRequired,onSelectionClear:l.func},renderAsync:function(e){var t=this,r=this.props.database.use({schema:"global",by:this}),n={tasks:null,selectedTaskId:this.props.selectedTaskId,server:this.props.server,locale:this.props.locale,route:this.props.route,theme:this.props.theme,onSelectionClear:this.props.onSelectionClear};return e.show(o.createElement(g,n)),r.start().then(function(e){if(t.props.server){var n={options:{server_id:t.props.server.id},deleted:!1,limit:1e3};return r.find({table:"task",criteria:n})}}).then(function(e){return n.tasks=e,o.createElement(g,n)})}});var g=e.exports.Sync=o.createClass({displayName:"TaskList.Sync",propTypes:{tasks:l.arrayOf(l.object),selectedTaskId:l.number,route:l.instanceOf(p).isRequired,locale:l.instanceOf(h).isRequired,theme:l.instanceOf(m).isRequired,onSelectionClear:l.func},getInitialState:function(){return{expandedTaskIds:this.props.selectedTaskId?[this.props.selectedTaskId]:[]}},getMessage:function(e){var t=this.props.locale.translate;if(100===e.completion)switch(e.action){case"gitlab-repo-import":var r=s.size(e.details.added);return t("task-imported-$count-repos",r);case"gitlab-user-import":var r=s.size(e.details.added);return t("task-imported-$count-users",r);case"gitlab-hook-install":var r=s.size(e.details.added);return t("task-installed-$count-hooks",r);case"gitlab-hook-remove":var r=s.size(e.details.deleted);return t("task-removed-$count-hooks",r);case"gitlab-event-import":var r=s.size(e.details.added),n=e.options.repo;return t("task-imported-$count-events-from-$repo",r,n);case"gitlab-push-import":var r=s.size(e.details.added),n=e.options.repo;return t("task-imported-push-with-$count-commits-from-$repo-$branch",r,n,e.options.branch);case"gitlab-commit-comment-import":var r=s.size(e.details.added),n=e.options.repo;return t("task-imported-$count-commit-comments-from-$repo",r,n);case"gitlab-issue-comment-import":var r=s.size(e.details.added),n=e.options.repo;return t("task-imported-$count-issue-comments-from-$repo",r,n);case"gitlab-merge-request-comment-import":var r=s.size(e.details.added),n=e.options.repo;return t("task-imported-$count-merge-request-comments-from-$repo",r,n);default:return""}else switch(e.action){case"gitlab-repo-import":return t("task-importing-repos");case"gitlab-user-import":return t("task-importing-users");case"gitlab-hook-install":return t("task-installing-hooks");case"gitlab-hook-remove":return t("task-removing-hooks");case"gitlab-event-import":var n=e.options.repo;return t("task-importing-events-from-$repo",n);case"gitlab-push-import":var n=e.options.repo;return t("task-importing-push-from-$repo",n);case"gitlab-commit-comment-import":var n=e.options.repo;return t("task-importing-commit-comments-from-$repo",n);case"gitlab-issue-comment-import":var n=e.options.repo;return t("task-importing-issue-comments-from-$repo",n);case"gitlab-merge-request-comment-import":var n=e.options.repo;return t("task-importing-merge-request-comments-from-$repo",n);default:return""}},getDetails:function(e){this.props.locale.translate;switch(e.action){case"gitlab-repo-import":case"gitlab-user-import":case"gitlab-hook-install":case"gitlab-hook-remove":case"gitlab-event-import":case"gitlab-push-import":case"gitlab-commit-comment-import":case"gitlab-issue-comment-import":case"gitlab-merge-request-comment-import":return n(e.details);default:return""}},render:function(){var e=this.props.selectedTaskId,t={items:v(this.props.tasks),offset:5,behind:20,ahead:20,anchor:e?"task-"+e:void 0,onIdentity:this.handleTaskIdentity,onRender:this.handleTaskRender,onAnchorChange:this.handleTaskAnchorChange};return o.createElement("div",{className:"task-list"},o.createElement(f,t))},renderTask:function(e){var t=(this.getMessage(e),"task");return e.failed&&(t+=" failure"),s.includes(this.state.expandedTaskIds,e.id)&&(t+=" expanded"),o.createElement("div",{className:t},o.createElement("div",{className:"summary","data-task-id":e.id,onClick:this.handleTaskClick},this.renderStartTime(e),this.renderMessage(e),this.renderProgress(e)),this.renderDetails(e))},renderStartTime:function(e){var t=a(e.ctime).format("YYYY-MM-DD HH:mm:ss");return o.createElement("div",{className:"start-time"},t)},renderMessage:function(e){var t,r=this.getMessage(e);return e.failed&&(t=o.createElement("i",{className:"fa fa-exclamation-triangle"})),o.createElement("div",{className:"message"},r,t)},renderProgress:function(e){if(100===e.completion&&e.etime){var t=this.props.locale.translate,r=a(e.etime)-a(e.ctime),n=Math.ceil(r/1e3);return o.createElement("div",{className:"duration"},t("task-$seconds",n))}var i=e.completion+"%";return o.createElement("div",{className:"progress-bar-frame"},o.createElement("div",{className:"bar",style:{width:i}}))},renderDetails:function(e){if(!s.includes(this.state.expandedTaskIds,e.id))return null;var t=this.getDetails(e);return o.createElement("div",null,o.createElement("div",{className:"details"},t),this.renderError(e))},renderError:function(e){if(!e.failed)return null;var t=s.get(e,"details.error.stack");return t||(t=s.get(e,"details.error.message")),o.createElement("div",{className:"error"},t)},handleTaskIdentity:function(e){return"task-"+e.item.id},handleTaskRender:function(e){return e.needed?this.renderTask(e.item):o.createElement("div",{className:"task"})},handleTaskClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-task-id")),r=s.slice(this.state.expandedTaskIds);s.includes(r,t)?s.pull(r,t):r.push(t),this.setState({expandedTaskIds:r})},handleTaskAnchorChange:function(e){var t=s.get(e.item,"id");this.props.selectedTaskId&&t!==this.props.selectedTaskId&&this.props.onSelectionClear&&this.props.onSelectionClear({type:"selectionclear",target:this})}}),v=u(function(e){return s.orderBy(e,"id","desc")})},function(e,t,r){"use strict";function n(e,t){return e+"/"+("0000000000"+t).slice(-10)}function i(e,t){return e+"/"+t}var s=r(1),a=r(13),o=r(0),l=o.PropTypes,c=r(109);e.exports=o.createClass({displayName:"IndexedDBCache",propTypes:{databaseName:l.string.isRequired},statics:{isAvailable:function(){return!!window.indexedDB}},getInitialState:function(){return{database:null}},find:function(e){return this.open().then(function(t){return new a(function(r,i){var a=e.address,o=e.schema,l=e.table,u="local"===o,d=u?"local-data":"remote-data",p=t.transaction(d,"readonly"),h=u?l:a+"/"+o+"/"+l,m=p.objectStore(d),f=[],g=e.criteria;if(g&&void 0!==g.id&&1===s.size(g)){var v=g.id;if(v instanceof Array)if(s.isEmpty(v))r(f);else{var b=s.max(v),y=s.min(v),C=n(h,b),E=n(h,y),k=IDBKeyRange.bound(E,C),w=m.openCursor(k);w.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,i=n.data;if(s.includes(v,i.id)){var a=s.sortedIndexBy(f,i,"id");f.splice(a,0,i)}t.continue()}else r(f)},w.onerror=function(e){r(f)}}else{var x=n(h,v),w=m.get(x);w.onsuccess=function(e){var t=e.target.result;t&&f.push(t.data),r(f)},w.onerror=function(e){r(f)}}}else{var S=m.index("location"),w=S.openCursor(h);w.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,i=n.data;if(c.match(l,i,g)){var a=s.sortedIndexBy(f,i,"id");f.splice(a,0,i)}t.continue()}else r(f)}}})})},save:function(e,t){return this.open().then(function(r){return new a(function(a,o){var l=e.address,c=e.schema,u=e.table,d="local"===c,p=d?"local-data":"remote-data",h=r.transaction(p,"readwrite"),m=d?u:l+"/"+c+"/"+u,f=h.objectStore(p);h.oncomplete=function(e){a(t)},h.onerror=function(e){o(new Error(e.message))},s.each(t,function(e){var t=d?i(m,e.key):n(m,e.id),r={address:l,location:m,data:e};f.put(r,t)})})})},remove:function(e,t){return this.open().then(function(r){return new a(function(a,o){var l=e.address,c=e.schema,u=e.table,d="local"===c,p=d?"local-data":"remote-data",h=r.transaction(p,"readwrite"),m=d?u:l+"/"+c+"/"+u,f=h.objectStore(p);h.oncomplete=function(e){a(t)},h.onerror=function(e){o(new Error(e.message))},s.each(t,function(e){var t=d?i(m,e.key):n(m,e.id);f.delete(t)})})})},clean:function(e){return this.open().then(function(t){return new a(function(r,n){var i=t.transaction("remote-data","readwrite"),s=i.objectStore("remote-data");if(void 0!==e.address){var a=s.index("address"),o=a.openCursor(e.address),l=0;o.onsuccess=function(e){var t=e.target.result;t?(l++,t.delete(),t.continue()):r(l)}}else if(void 0!==e.count){var a=s.index("rtime"),o=a.openCursor(),l=0;o.onsuccess=function(t){var n=t.target.result;n?(l++,n.delete(),l<e.count?n.continue():r(l)):r(l)}}else if(void 0!==e.before){var a=s.index("rtime"),o=a.openCursor(),l=0;o.onsuccess=function(t){var n=t.target.result;if(n){n.value.data.rtime<e.before?(l++,n.delete(),n.continue()):r(l)}else r(l)}}})})},open:function(){var e=this;return this.databasePromise||(this.databasePromise=new a(function(t,r){var n=window.indexedDB.open(e.props.databaseName,1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(e){r(new Error(e.message))},n.onupgradeneeded=function(e){var t=e.target.result;t.onerror=function(e){r(new Error(e.message))},t.createObjectStore("local-data").createIndex("location","location",{unique:!1});var n=t.createObjectStore("remote-data");n.createIndex("location","location",{unique:!1}),n.createIndex("address","address",{unique:!1}),n.createIndex("rtime","data.rtime",{unique:!1})}})),this.databasePromise},render:function(){return o.createElement("div",null)}})},function(e,t,r){"use strict";function n(e){try{return JSON.parse(e)}catch(e){return null}}function i(e,t){var r=o.sortedIndexBy(e,{id:t},"id"),n=e[r];if(n&&n.id===t)return n}function s(e,t){var r=o.sortedIndexBy(e,t,"id"),n=e[r];n&&n.id===t.id?e[r]=t:e.splice(r,0,t)}function a(e,t){var r=o.sortedIndexBy(e,t,"id"),n=e[r];n&&n.id===t.id&&e.splice(r,1)}var o=r(1),l=r(13),c=r(0),u=c.PropTypes,d=r(109);e.exports=c.createClass({displayName:"LocalStorageCache",propTypes:{databaseName:u.string.isRequired},statics:{isAvailable:function(){return!!window.localStorage}},getInitialState:function(){var e=localStorage.getItem(this.props.databaseName);return this.localData=n(e)||{},this.remoteData={},{}},getRows:function(e,t,r){var n="local"===t?this.localData:this.remoteData,i=[e,t,r],s=o.get(n,i);return s||(s=[],o.set(n,i,s)),s},saveRows:function(e,t,r){if("local"===t){var n=JSON.stringify(this.localData);localStorage.setItem(this.props.databaseName,n)}},find:function(e){var t,r=e.server||"",n=e.schema,s=e.table,a=e.criteria,c=this.getRows(r,n,s);if(a&&void 0!==a.id&&1===o.size(a)){var u=a.id;u instanceof Array||(u=[u]),t=o.filter(o.map(u,function(e){return i(c,e)}))}else t=o.filter(c,function(e){return d.match(s,e,a)});return l.resolve(t)},save:function(e,t){var r=e.server||"",n=e.schema,i=e.table,a=this.getRows(r,n,i);return o.each(t,function(e){s(a,o.cloneDeep(e))}),this.saveRows(r,n,i),l.resolve(t)},remove:function(e,t){var r=e.server||"",n=e.schema,i=e.table,s=this.getRows(r,n,i);return o.each(t,function(e){a(s,e)}),this.saveRows(r,n,i),l.resolve(t)},clean:function(e){var t=this.remoteData,r=0;if(void 0!==e.server){var n=e.server,i=o.get(t,n);o.each(i,function(e){o.each(e,function(e){r+=e.length})}),o.set(t,n,void 0)}else if(void 0!==e.count){var s=[];o.each(t,function(e){o.each(e,function(e){o.each(e,function(e){for(var t=0;t<e.length;t++)s.push(e[t])})})}),s.sort(function(e,t){return e.rtime<t.rtime?-1:e.rtime>t.rtime?1:0}),s.splice(e.count),o.each(t,function(e){o.each(e,function(e){o.each(e,function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];-1!==s.indexOf(n)&&(e.splice(t,1),r++)}})})})}else void 0!==e.before&&o.each(t,function(t){o.each(t,function(t){o.each(t,function(t){for(var n=t.length-1;n>=0;n--){t[n].rtime<e.before&&(t.splice(n,1),r++)}})})});return l.resolve(r)},render:function(){return c.createElement("div",null)}})},function(e,t,r){"use strict";function n(e,t,r){var n=[];return E.each(e,function(e,i){var s=t[i],a=E.sortedIndexBy(r,{id:e},"id"),o=r?r[a]:null;o&&o.id===e&&o.gn===s||n.push(e)}),n}function i(e,t,r){var n=[];return E.each(r,function(t){E.includes(e,t.id)||n.push(t.id)}),n}function s(e,t){return E.isEmpty(t)?e:(e=E.slice(e),E.each(t,function(t){var r=E.sortedIndexBy(e,{id:t},"id"),n=e?e[r]:null;n&&n.id===t&&e.splice(r,1)}),e)}function a(e,t){var r=[];return E.each(t,function(t){var n=E.sortedIndexBy(e,{id:t},"id"),i=e[n];i&&i.id===t&&r.push(i)}),r}function o(e,t){return e=E.slice(e),E.each(t,function(t){var r=E.sortedIndexBy(e,t,"id"),n=e[r];n&&n.id===t.id?e[r]=t:e.splice(r,0,t)}),e}function l(){return(new Date).toISOString()}function c(e,t){if(!e)return 1/0;if(!t)return 0;var r="string"==typeof e?new Date(e):e;return("string"==typeof t?new Date(t):t)-r}function u(e){return"local"===e.schema?E.pick(e,"schema","table"):E.pick(e,"address","schema","table")}function d(e){return E.pick(e,"address","schema","table","criteria","minimum","expected")}function p(e){var t=T[e];return t||(t=T[e]={}),t}function h(){var e=S().toISOString();return E.pickBy(T,function(t){if(t&&!t.authorization&&t.authentication&&t.authentication.expire<e)return!0})}function m(e){T[e]=null}function f(e,t){return"local"===e.schema||!e.dirty&&!(.001*c(e.finish,new Date)>t)}function g(e){var t=e.minimum;return void 0===t&&(t=y(e)),void 0===t&&(t=1),!(e.results.length<t)}function v(e){var t=y(e);return!(e.results.length<t)}function b(e,t){if("local"===e.schema)return!0;var r=E.map(e.results,"rtime"),n=E.min(r);return!(n<j)&&(!(.001*c(n,new Date)>t)&&(e.finish=n,!0))}function y(e){return"number"==typeof e.expected?e.expected:e.criteria?C(e.criteria,"id")||C(e.criteria,"filters"):void 0}function C(e,t){var r=e[t];if(void 0!=r)return r instanceof Array?r.length:1}var E=r(1),k=r(13),w=r(0),x=w.PropTypes,S=r(22),R=r(87),O=r(68),N=r(109),j=r(148);e.exports=w.createClass({displayName:"RemoteDataSource",propTypes:{refreshInterval:x.number,basePath:x.string,discoveryFlags:x.object,retrievalFlags:x.object,cache:x.object,onChange:x.func,onAuthorization:x.func,onExpiration:x.func,onViolation:x.func,onStupefaction:x.func},getDefaultProps:function(){return{refreshInterval:900,basePath:""}},getInitialState:function(){return{recentSearchResults:[],recentStorageResults:[],recentRemovalResults:[]}},getServerAddress:function(e){return e.address},beginAuthorization:function(e,t){var r=this.getServerAddress(e),n=p(r);if(!n.authorizationPromise){var i=r+"/auth/session",s={responseType:"json",contentType:"json"};n.authorizationPromise=R.fetch("POST",i,{area:t},s).then(function(e){return n.authentication=e.authentication,{system:e.system,providers:e.providers}}).catch(function(e){throw n.authorizationPromise=null,e})}return n.authorizationPromise},checkAuthorizationStatus:function(e){var t=this,r=this.getServerAddress(e),n=p(r);if(!n.authentication)return k.resolve(!1);var i=n.authentication.token,s=r+"/auth/session/"+i,a={responseType:"json"};return R.fetch("GET",s,{},a).then(function(e){var i=e.authorization;if(i)return n.authorization=i,t.triggerAuthorizationEvent(r,i),!0;var s=E.get(e,"authentication.error");if(s)throw new O(s.statusCode,E.omit(s,"statusCode"));return!1}).catch(function(e){throw n.authorizationPromise=null,e})},submitPassword:function(e,t,r){var n=this,i=this.getServerAddress(e),s=p(i);if(!s.authentication)return k.resolve(!1);var a=s.authentication.token,o=i+"/auth/htpasswd",l={token:a,username:t,password:r},c={responseType:"json",contentType:"json"};return R.fetch("POST",o,l,c).then(function(e){var t=e.authorization;return!!t&&(s.authorization=t,n.triggerAuthorizationEvent(i,t),!0)}).catch(function(e){throw s.authorizationPromise=null,e})},endAuthorization:function(e){var t=this,r=this.getServerAddress(e),n=p(r);if(!n.authorization)return k.resolve(!1);var i=n.authorization.token,s=r+"/auth/session/"+i+"/end",a={responseType:"json",contentType:"json"};return R.fetch("POST",s,{},a).then(function(){return n.authentication=null,n.authorizationPromise=null,n.authorization=null,t.clearRecentSearches(r),t.clearCachedObjects(r),t.triggerExpirationEvent(r),!0})},getOAuthUrl:function(e,t,r){var n=this.getServerAddress(e),i=p(n);if(!i.authorization)return"";var s=i.authorization.token,a="sid="+t.id+"&token="+s;return"activation"===r?a+="&activation=1":"test"===r&&(a+="&test=1"),n+"/auth/"+t.type+"?"+a},hasAuthorization:function(e){return!!p(this.getServerAddress(e)).authorization},addAuthorization:function(e,t){p(this.getServerAddress(e)).authorization=t},start:function(e){var t=this;return k.resolve().then(function(){if("local"===e.schema)return 0;var r=t.getServerAddress(e),n=p(r);if(n.authorization)return n.authorization.user_id;throw new O(401)})},find:function(e){var t=this,r=E.get(e,"by.constructor.displayName"),n=e.required;e=d(e);var i=this.findRecentSearch(e);if(i)r&&(E.includes(i.by,r)||i.by.push(r)),i.promise.isFulfilled()?f(i)||i.updating||(i.updating=!0,this.searchRemoteDatabase(i).then(function(e){if(i.updating=!1,e)return t.triggerChangeEvent(),null})):i.promise.isRejected()&&(i.promise=this.searchRemoteDatabase(i).then(function(e){return e?(t.triggerChangeEvent(),null):i.results}));else{i=E.extend({},e,{start:null,finish:null,results:null,promise:null,by:r?[r]:[],dirty:!1,updating:!1});var s=this.searchLocalCache(i).then(function(){return!(!v(i)||!b(i,t.props.refreshInterval))}),a=s.then(function(e){return!e&&t.searchRemoteDatabase(i).then(function(e){if(e)return t.triggerChangeEvent(),null})});i.promise=s.then(function(e){return e?i.results:g(i)?i.results:a.then(function(){return i.results})});var o=E.slice(this.state.recentSearchResults);for(o.unshift(i);o.length>256;)o.pop();this.setState({recentSearchResults:o})}return n&&e.expected?i.promise.then(function(r){if(r.length<e.expected)throw t.triggerStupefactionEvent(e,r),new O(404);return r}):i.promise},save:function(e,t){var r=this,n=l(),i=E.get(e,"by.constructor.displayName");return e=u(e),"local"===e.schema?this.storeLocalObjects(e,t).then(function(t){return r.updateRecentSearchResults(e,t),r.triggerChangeEvent(),t}):this.storeRemoteObjects(e,t).then(function(t){var s=l();r.updateCachedObjects(e,t),r.updateRecentSearchResults(e,t),r.triggerChangeEvent();var a=E.clone(r.state.recentStorageResults);for(a.unshift({start:n,finish:s,duration:c(n,s),results:t,by:i});a.length>32;)a.pop();return r.setState({recentStorageResults:a}),t})},remove:function(e,t){var r=this,n=l(),i=E.get(e,"by.constructor.displayName");return e=u(e),"local"===e.schema?this.removeLocalObjects(e,t).then(function(t){return r.removeFromRecentSearchResults(e,t),r.triggerChangeEvent(),t}):(t=E.map(t,function(e){return{id:e.id,deleted:!0}}),this.storeRemoteObjects(e,t).then(function(t){var s=l();r.removeCachedObjects(e,t),r.removeFromRecentSearchResults(e,t),r.triggerChangeEvent();var a=E.clone(r.state.recentRemovalResults);for(a.unshift({start:n,finish:s,duration:c(n,s),results:t,by:i});a.length>32;)a.pop();return r.setState({recentRemovalResults:a}),t}))},invalidate:function(e,t){var r=this,n=!1;return E.forIn(t,function(t,i){var s=E.split(i,"."),a={address:e,schema:s[0],table:s[1]},o=r.getRelevantRecentSearches(a);E.each(o,function(e){var r=!1;y(e)===e.results.length?E.each(t,function(t){var n=E.sortedIndexBy(e.results,{id:t},"id"),i=e.results[n];if(i&&i.id===t)return r=!0,!1}):r=!0,r&&(e.dirty=!0,n=!0)})}),n&&this.triggerChangeEvent(),n},clear:function(e,t){var r=E.filter(this.state.recentSearchResults,function(r){return!E.isMatch(r,{address:e,schema:t})});this.setState({recentSearchResults:r})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerAuthorizationEvent:function(e,t){this.props.onAuthorization&&this.props.onAuthorization({type:"authorization",target:this,address:e,credentials:t})},triggerExpirationEvent:function(e){this.props.onExpiration&&this.props.onExpiration({type:"expiration",target:this,address:e})},triggerViolationEvent:function(e,t){this.props.onViolation&&this.props.onViolation({type:"violation",target:this,address:e,schema:t})},triggerStupefactionEvent:function(e,t){this.props.onStupefaction&&this.props.onStupefaction({type:"missingobject",target:this,query:e,results:t})},findRecentSearch:function(e){var t=E.findIndex(this.state.recentSearchResults,function(t){var r=d(t);return E.isEqual(e,r)});if(-1!==t){var r=E.slice(this.state.recentSearchResults),n=r[t];return r.splice(t,1),r.unshift(n),this.setState({recentSearchResults:r}),n}return null},searchRemoteDatabase:function(e){var t=this;if("local"===e.schema)return k.resolve(!1);var r=u(e),p=d(e);return e.start=l(),this.discoverRemoteObjects(p).then(function(l){var c=l.ids,u=l.gns,d=n(c,u,e.results),p=i(c,u,e.results);if(!E.isEmpty(p)){var h=a(e.results,p);t.removeCachedObjects(e,h)}if(E.isEmpty(d)){if(E.isEmpty(p))return null;return s(e.results,p)}return t.retrieveRemoteObjects(r,d).then(function(t){var r=t,n=o(e.results,r);return n=s(n,p)})}).then(function(n){n&&(e.results=n,e.promise=k.resolve(n)),e.finish=l(),e.duration=c(e.start,e.finish),e.dirty=!1;var i=E.slice(t.state.recentSearchResults);t.setState({recentSearchResults:i});var s=e.finish;return E.each(e.results,function(e){e.rtime=s}),t.updateCachedObjects(r,e.results),!!n})},discoverRemoteObjects:function(e){var t=u(e);return this.performRemoteAction(t,"discovery",e.criteria)},retrieveRemoteObjects:function(e,t){return this.performRemoteAction(e,"retrieval",{ids:t})},storeRemoteObjects:function(e,t){return this.performRemoteAction(e,"storage",{objects:t})},performRemoteAction:function(e,t,r){var n=this,i=this.getServerAddress(e),s=this.props.basePath,a=e.schema,o=e.table;if(!a)return k.reject(new Error("No schema specified"));if(!o)return k.reject(new Error("No table specified"));var l=""+i+s+"/data/"+t+"/"+a+"/"+o+"/",c=p(i);r=E.clone(r)||{},c.authorization&&(r.token=c.authorization.token),"retrieval"===t||"storage"===t?E.assign(r,this.props.retrievalFlags):"discovery"===t&&E.assign(r,this.props.discoveryFlags);var u={contentType:"json",responseType:"json"};return R.fetch("POST",l,r,u).then(function(e){return e}).catch(function(e){throw 401===e.statusCode?(m(i),n.clearRecentSearches(i),n.clearCachedObjects(i),n.triggerExpirationEvent(i),n.triggerChangeEvent()):403==e.statusCode&&(n.clearRecentSearches(i),n.clearCachedObjects(i),n.triggerViolationEvent(i,a),n.triggerChangeEvent()),e})},storeLocalObjects:function(e,t){var r=this.props.cache;return r?r.save(e,t):k.reject(new Error("No local cache"))},removeLocalObjects:function(e,t){var r=this.props.cache;return r?r.remove(e,t):k.reject(new Error("No local cache"))},searchLocalCache:function(e){var t=this.props.cache;if(!t)return!1;d(e);return t.find(e).then(function(t){return e.results=t,!0}).catch(function(e){return console.error(e),!1})},updateCachedObjects:function(e,t){var r=this.props.cache;return r?r.save(e,t).then(function(e){return!0}).catch(function(e){return console.error(e),!1}):k.resolve(!1)},removeCachedObjects:function(e,t){var r=this.props.cache;return r?r.remove(e,t).then(function(e){return!0}).catch(function(e){return console.error(e),!1}):k.resolve(!1)},clearCachedObjects:function(e){var t=this.props.cache;return t?t.clean({address:e}):k.resolve(0)},updateRecentSearchResults:function(e,t){var r=this.getRelevantRecentSearches(e),n="local"!==e.schema;E.each(r,function(e){var r=!1;E.each(t,function(t){var i;n?i=E.sortedIndexBy(e.results,t,"id"):-1===(i=E.findIndex(e.results,{key:t.key}))&&(i=e.results.length);var s=e.results[i],a=s&&s.id===t.id,o=N.match(e.table,t,e.criteria);o&&(r||(e.results=E.slice(e.results),e.promise=k.resolve(e.results),r=!0),o&&a?e.results[i]=t:o&&!a?e.results.splice(i,0,t):!o&&a&&e.results.splice(i,1))})})},removeFromRecentSearchResults:function(e,t){var r=this.getRelevantRecentSearches(e),n="local"!==e.schema;E.each(r,function(e){var r=!1;E.each(t,function(t){var i;i=n?E.sortedIndexBy(e.results,t,"id"):E.findIndex(e.results,{key:t.key});var s=e.results[i];s&&s.id===t.id&&(r||(e.results=E.slice(e.results),e.promise=k.resolve(e.results),r=!0),e.results.splice(i,1))})})},getRelevantRecentSearches:function(e){return E.filter(this.state.recentSearchResults,function(t){var r=u(t);if(t.results&&E.isEqual(e,r))return!0})},clearRecentSearches:function(e){var t=E.filter(this.state.recentSearchResults,function(t){return t.address!==e});this.setState({recentSearchResults:t})},componentWillMount:function(){var e=this;this.sessionCheckTimeout=setInterval(function(){var t=h();E.isEmpty(t)||(E.forIn(t,function(e,t){m(t)}),e.triggerChangeEvent())},3e5)},render:function(){return w.createElement("div",null)},componentDidMount:function(){this.triggerChangeEvent()},componentWillUnmount:function(){clearInterval(this.sessionExpirationCheckInterval)}});var T={}},function(e,t,r){"use strict";function n(){function e(e){void 0===r&&e&&e.length>=2&&(r=i.toLower(e))}i.each(navigator.languages,e);var t=["language","browserLanguage","systemLanguage","userLanguage"];i.each(t,function(t){e(navigator[t])});var r;return r}var i=r(1),s=r(0),a=s.PropTypes,o=r(10);e.exports=s.createClass({displayName:"LocaleManager",propTypes:{defaultLanguageCode:a.string,database:a.instanceOf(o),directory:a.arrayOf(a.object),onChange:a.func,onModuleRequest:a.func},getDefaultProps:function(){return{defaultLanguageCode:"en"}},getInitialState:function(){return{languageCode:"",phraseTable:{},missingPhrases:[]}},getLanguageCode:function(){return this.state.languageCode},getDirectory:function(){return this.props.directory},translate:function(e){var t=this.state.phraseTable[e];if(null==t)return e;if("function"!=typeof t)return t;try{var r=i.slice(arguments,1);return t.apply(this,r)}catch(t){return console.error(t),"["+e+": "+t.message+"]"}},pick:function(e,t){if("string"==typeof e)return e;var r=this.state.languageCode.substr(0,2);t&&(r=t.substr(0,2));var n="",s="",a=this.props.defaultLanguageCode.substr(0,2),o="";for(var l in e){var c=e[l],u=i.toLower(l);u===r&&(n=c),s||(s=c),u===a&&(o=c)}return n||(o||s)},change:function(e){var t=this;return e=i.toLower(e),e===this.state.languageCode?Promise.resolve(!0):this.load(e).then(function(r){var n;n="function"==typeof r?r(e):r;var i={languageCode:e,phraseTable:n};return t.setState(i,function(){t.triggerChangeEvent()}),!0})},load:function(e){var t=l[e];return t?Promise.resolve(t):this.triggerModuleRequest(e).then(function(t){return l[e]=t,t})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerModuleRequest:function(e){return this.props.onModuleRequest?this.props.onModuleRequest({type:"module_request",target:this,languageCode:e}):Promise.reject("onModuleRequest is not set")},render:function(){return null},componentDidMount:function(){var e=this,t=n()||this.props.defaultLanguageCode;this.change(t).catch(function(t){e.change(e.props.defaultLanguageCode)})},componentDidUpdate:function(e,t){var r=this;if(!e.database&&this.props.database){var n=this.props.database.use({by:this,schema:"local"});n.start().then(function(){return n.findOne({table:"settings",key:"language"})}).then(function(e){e&&e.selectedLanguageCode&&r.change(e.selectedLanguageCode)})}}});var l={}},function(e,t,r){"use strict";e.exports=[{name:"etina",code:"cz",script:"latin",countries:{cz:"esko",pl:"Polsko",sk:"Slovensko"},defaultCountry:"cz"},{name:"Dansk",code:"da",script:"latin",countries:{dk:"Danmark",fo:"Frerne",gl:"Grnland",de:"Tyskland"},defaultCountry:"dk"},{name:"Deutsch",code:"de",script:"latin",countries:{at:"sterreich",be:"Belgien",de:"Deutschland",lu:"Luxemburg",ch:"Schweiz"},defaultCountry:"de"},{name:"",code:"el",script:"greek",countries:{gr:"",cy:""},defaultCountry:"gr"},{name:"English",code:"en",script:"latin",countries:{au:"Australia",ca:"Canada",hk:"Hong Kong",ie:"Ireland",sg:"Singapore",gb:"United Kingdom",us:"United States"},defaultCountry:"us",locales:{admin:!0,client:!0}},{name:"Espaol",code:"es",script:"latin",countries:{ar:"Argentina",bo:"Bolivia",cl:"Chile",co:"Colombia",cr:"Costa Rica",cu:"Cuba",es:"Espaa",ec:"Ecuador",sv:"El Salvador",gq:"Guinea Ecuatorial",gt:"Guatemala",hn:"Honduras",mx:"Mxico",ni:"Nicaragua",pa:"Panam",py:"Paraguay",pe:"Per",pr:"Puerto Rico",do:"Repblica Dominicana",uy:"Uruguay",ve:"Venezuela"},defaultCountry:"es"},{name:"Franais",code:"fr",script:"latin",countries:{be:"Belgique",bj:"Bnin",bf:"Burkina Faso",bi:"Burundi",cm:"Cameroun",ca:"Canada",cg:"Congo",ci:"Cte d'Ivoire",dj:"Djibouti",gq:"Guine quatoriale",fr:"France",ga:"Gabon",gn:"Guine",ht:"Hati",lu:"Luxembourg",mg:"Madagascar",ml:"Mali",ne:"Niger",rw:"Rwanda",cf:"Rpublique centrafricaine",cd:"Rpublique dmocratique du Congo",sn:"Sngal",sc:"Seychelles",ch:"Suisse",td:"Tchad",tg:"Togo"},defaultCountry:"fr"},{name:"",code:"ko",script:"hangul",countries:{kr:"",cn:""},defaultCountry:"kr"},{name:"Hrvatski",code:"hr",script:"latin",countries:{ba:"Bosna i Hercegovina",hr:"Hrvatska",rs:"Srbija"},defaultCountry:"hr"},{name:"Italiano",code:"it",script:"latin",countries:{it:"Italia",ch:"Svizzera",hr:"Croazia",si:"Slovenia"},defaultCountry:"it"},{name:"Magyar",code:"hu",script:"latin",countries:{hr:"Magyarorszg",ro:"Romnia"},defaultCountry:"hu"},{name:"Nederlands",code:"nl",script:"latin",countries:{be:"Belgi",nl:"Nederland",sr:"Suriname"},defaultCountry:"nl"},{name:"",code:"jp",script:"hiragana",countries:{jp:""},defaultCountry:"jp"},{name:"Norsk",code:"nb",script:"latin",countries:{no:"Norge"},defaultCountry:"no",locales:{admin:!0,client:!0}},{name:"Polski",code:"pl",script:"latin",countries:{by:"Biaoru",lt:"Litwa",pl:"Polska",ua:"Ukraina"},defaultCountry:"pl",locales:{admin:!0,client:!0}},{name:"Portugus",code:"pt",script:"latin",countries:{ao:"Angola",br:"Brasil",tl:"Timor Leste",gq:"Guin Equatorial",gw:"Guin-Bissau",mz:"Moambique",mo:"Macao",pt:"Portugal"},defaultCountry:"pt"},{name:"",code:"ru",script:"cyrillic",countries:{am:"",by:"",ge:"",lv:"",kz:"",kg:"",lt:"",ru:"",tj:"",ua:"",uz:"",es:""},defaultCountry:"ru",locales:{admin:!0,client:!0}},{name:"Srpski",code:"sr",script:"latin",countries:{rs:"Srbija",hr:"Hrvatska",ba:"Bosna i Hercegovina"},defaultCountry:"sr"},{name:"Suomi",code:"fi",script:"latin",countries:{fi:"Suomi",se:"Ruotsi"},defaultCountry:"fi",locales:{admin:!0,client:!0}},{name:"Slovenina",code:"sk",script:"latin",countries:{cz:"esko",sk:"Slovensko"},defaultCountry:"sk"},{name:"Svenska",code:"sv",script:"latin",countries:{fi:"Finland",se:"Sverige"},defaultCountry:"se"},{name:"Ting Vit",code:"vi",script:"latin",countries:{vn:"Vit Nam"},defaultCountry:"vn"},{name:"Trke",code:"tr",script:"latin",countries:{cy:"Kbrs",tr:"Trkiye"},defaultCountry:"tr"},{name:"",code:"zh",script:"hanzi",countries:{cn:"",hk:"",mo:"",sg:"",tw:""},defaultCountry:"cn",locales:{admin:!0,client:!0}}]},function(e,t,r){"use strict";function n(e,t,r){e.left<0?e.left=0:e.left+e.width>t&&(e.left=t-e.width),e.top<0?e.top=0:e.top+e.height>r&&(e.top=r-e.height)}var i=(r(13),r(0)),s=i.PropTypes,a=(r(40),r(376)),o=r(16),l=r(110);r(552),e.exports=i.createClass({displayName:"ImageCropper",propTypes:{url:s.string.isRequired,clippingRect:s.object,aspectRatio:s.number,onChange:s.func,onLoad:s.func},getDefaultProps:function(){return{aspectRatio:1}},getInitialState:function(){return this.components=o({container:HTMLElement,image:l}),{clippingRect:this.props.clippingRect}},componentWillReceiveProps:function(e){this.props.url===e.url&&this.props.clippingRect===e.clippingRect||(this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.props.url!==e.url&&this.triggerChangeEvent(this.state.clippingRect)),this.setState({clippingRect:e.clippingRect}))},render:function(){var e=this.components.setters,t={ref:e.container,className:"image-cropper",onMouseDown:this.handleMouseDown,onWheel:this.handleMouseWheel},r={ref:e.image,url:this.props.url,clippingRect:this.state.clippingRect,onLoad:this.props.onLoad};return i.createElement("div",t,i.createElement(l,r))},componentDidMount:function(){var e=this.components.container;this.hammer=new a(e);var t=this.hammer.get("pan").set({direction:a.DIRECTION_ALL,threshold:5});this.hammer.get("pinch").set({enable:!0}).recognizeWith(t),this.hammer.on("panstart",this.handlePanStart),this.hammer.on("panmove",this.handlePanMove),this.hammer.on("panend",this.handlePanEnd),this.hammer.on("pinchstart",this.handlePinchStart),this.hammer.on("pinchmove",this.handlePinchMove),this.hammer.on("pinchend",this.handlePinchEnd)},componentWillUnmount:function(){this.dragStart&&this.handleMouseUp(),this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.triggerChangeEvent(this.state.clippingRect)),this.hammer&&(this.hammer.off("panstart",this.handlePanStart),this.hammer.off("panmove",this.handlePanMove),this.hammer.off("panend",this.handlePanEnd),this.hammer.off("pinchstart",this.handlePinchStart),this.hammer.off("pinchmove",this.handlePinchMove),this.hammer.off("pinchend",this.handlePinchEnd))},triggerChangeEvent:function(e){_.isEqual(this.props.clippingRect,e)||this.props.onChange&&this.props.onChange({type:"change",target:this,rect:e})},handleMouseDown:function(e){var t=this.components.image,r=this.components.container;if(t&&r&&this.state.clippingRect){var n=r.getBoundingClientRect(),i=this.state.clippingRect;this.dragStart={clippingRect:i,boundingRect:n,pageX:e.pageX,pageY:e.pageY,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},handleMouseMove:function(e){if(e.preventDefault(),this.dragStart){var t={x:this.dragStart.pageX-e.pageX,y:this.dragStart.pageY-e.pageY},r=this.dragStart.boundingRect,i=_.clone(this.dragStart.clippingRect),s=t.x*i.width/r.width,a=t.y*i.height/r.height;i.left+=Math.round(s),i.top+=Math.round(a),n(i,this.dragStart.naturalWidth,this.dragStart.naturalHeight),this.setState({clippingRect:i})}},handleMouseUp:function(e){this.dragStart&&(document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.triggerChangeEvent(this.state.clippingRect),this.dragStart=null)},handleMouseWheel:function(e){var t=this;e.preventDefault();var r=this.components.image,i=this.components.container;if(r&&i&&this.state.clippingRect){var s=4;e.shiftKey&&(s=1);var a=i.getBoundingClientRect(),o=_.clone(this.state.clippingRect),l=Math.round(e.deltaY*o.height/a.height/s),c=o.width+l;c>r.naturalWidth&&(c=r.naturalWidth,l=c-o.width);var u=o.height+l;u>r.naturalHeight&&(u=r.naturalHeight,l=u-o.height,c=o.width+l);var d={x:e.pageX-a.left,y:e.pageY-a.top},p=-d.x*l/a.width,h=-d.y*l/a.height;o.left+=Math.round(p),o.top+=Math.round(h),o.width=c,o.height=u,n(o,r.naturalWidth,r.naturalHeight),this.setState({clippingRect:o},function(){t.zoomChangeTimeout&&clearTimeout(t.zoomChangeTimeout),t.zoomChangeTimeout=setTimeout(function(){t.triggerChangeEvent(o),t.zoomChangeTimeout=0},1e3)}),this.dragStart&&(this.dragStart={clippingRect:o,boundingRect:a,pageX:e.pageX,pageY:e.pageY,naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight})}},handlePanStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,r=this.components.container;if(t&&r&&this.state.clippingRect){var n=r.getBoundingClientRect(),i=this.state.clippingRect;this.panStart={clippingRect:i,boundingRect:n,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},this.handlePanMove(e)}}},handlePanMove:function(e){if(this.panStart){var t=this.panStart.boundingRect,r=_.clone(this.panStart.clippingRect),i=-e.deltaX*r.width/t.width,s=-e.deltaY*r.height/t.height;r.left+=Math.round(i),r.top+=Math.round(s),n(r,this.panStart.naturalWidth,this.panStart.naturalHeight),this.setState({clippingRect:r})}},handlePanEnd:function(e){this.panStart&&(this.triggerChangeEvent(this.state.clippingRect),this.panStart=null)},handlePinchStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,r=this.components.container;if(t&&r&&this.state.clippingRect){var n=r.getBoundingClientRect(),i=this.state.clippingRect;this.pinchStart={clippingRect:i,boundingRect:n,pointers:_.map(e.pointers,function(e){return{pageX:e.pageX,pageY:e.pageY}})},this.handlePinchMove(e)}}},handlePinchMove:function(e){if(this.pinchStart){var t=this.components.image,r=_.clone(this.pinchStart.clippingRect),i=this.pinchStart.boundingRect,s=1/e.scale,a=Math.round(r.width*s);a>t.naturalWidth&&(a=t.naturalWidth,s=a/r.width);var o=Math.round(r.height*s);o>t.naturalHeight&&(o=t.naturalHeight,s=o/r.height,a=Math.round(r.width*s));var l={x:this.pinchStart.pointers[0].pageX-i.left,y:this.pinchStart.pointers[0].pageY-i.top},c={x:this.pinchStart.pointers[1].pageX-i.left,y:this.pinchStart.pointers[1].pageY-i.top},u={x:e.pointers[0].pageX-i.left,y:e.pointers[0].pageY-i.top},d={x:e.pointers[1].pageX-i.left,y:e.pointers[1].pageY-i.top},p=(l.x*r.width-u.x*a)/i.width,h=(c.x*r.width-d.x*a)/i.width,m=(l.y*r.height-u.y*o)/i.height,f=(c.y*r.height-d.y*o)/i.height;r.left+=Math.round((p+h)/2),r.top+=Math.round((m+f)/2),r.width=a,r.height=o,n(r,t.naturalWidth,t.naturalHeight),this.setState({clippingRect:r})}},handlePinchEnd:function(e){this.pinchStart&&(this.triggerChangeEvent(this.state.clippingRect),this.pinchStart=null)}})},function(e,t,r){"use strict";function n(e,t){return e<<8|t}function i(e,t){return t<<8|e}function s(e,t,r,n){return e<<24|t<<16|r<<8|n}function a(e,t,r,n){return n<<24|r<<16|t<<8|e}function o(e,t){var r=e.length,i=0;if(65496==n(e[i++],e[i++]))for(;i<r;){var s=n(e[i++],e[i++]),a=n(e[i++],e[i++]);if(65498==s)break;var o=t(s,i,a);if(void 0!==o&&!1!==o)return o;i+=a-2}return-1}function l(e){return o(e,function(t,r){if(65517==t&&80==e[r++]&&104==e[r++]&&111==e[r++]&&116==e[r++]&&111==e[r++]&&115==e[r++]&&104==e[r++]&&111==e[r++]&&112==e[r++]&&32==e[r++]&&51==e[r++]&&46==e[r++]&&48==e[r++])return r})}function c(e,t){for(var r=e.length,i=null,s=t;s+4<r;)if(56==e[s+0]&&66==e[s+1]&&73==e[s+2]&&77==e[s+3]){s+=4;for(var a=n(e[s++],e[s++]),o=e[s++],l="",c=0;c<o;c++)l+=String.fromCharCode(e[s++]);s++;var d=(n(e[s++],e[s++]),n(e[s++],e[s++]));a>=1999&&a<=2998&&(i||(i={}),i[l]=u(e,s,d)),s+=d}else s++;return i}function u(e,t,r){for(var i=r/26,a=0,o=[],l=[],c=t,u=0;u<i;u++){switch(n(e[c++],e[c++])){case 0:case 3:a=n(e[c++],e[c++]),c+=22;break;case 1:case 2:case 4:case 5:for(var d=0;d<3;d++){var p=s(e[c++],e[c++],e[c++],e[c++]),h=s(e[c++],e[c++],e[c++],e[c++]);p>=2147483648?p=(2147483647-p)/16777216:p/=16777216,h>=2147483648?h=(2147483647-h)/16777216:h/=16777216,l.push({x:h,y:p})}a--,0==a&&(l.push(l.shift()),l.push(l[0]),o.push(l),l=[]);break;default:c+=24}}return o}t.getDimensions=function(e){var t=o(e,function(e,t,r){if(65472===e||65474===e)return t});if(t>0){var r=(e[t++],n(e[t++],e[t++]));return{width:n(e[t++],e[t++]),height:r}}},t.getOrientation=function(e){var t=n,r=s,l=o(e,function(n,s,o){if(65505===n){var l=s,c=s+o;if(69==e[l++]&&120==e[l++]&&105==e[l++]&&102==e[l++]&&0==e[l++]&&0==e[l++]){var u=l;"II"===String.fromCharCode(e[l++])+String.fromCharCode(e[l++])&&(t=i,r=a);if(42!==t(e[l++],e[l++]))return;do{var d=r(e[l++],e[l++],e[l++],e[l++]);if(0===d)break;l=u+d;for(var p=t(e[l++],e[l++]),h=0;h<p;h++){var m=t(e[l++],e[l++]),f=t(e[l++],e[l++]),g=r(e[l++],e[l++],e[l++],e[l++]);if(274===m&&3===f&&1===g)return l;l+=4}}while(l<c)}}});if(l>0){return t(e[l++],e[l++])}},t.extractPaths=function(e){var t=l(e);return-1!==t?c(e,t):null}},function(e,t,r){"use strict";function n(e,t){if(e&&t&&!t.disabled){if("admin"===t.type||s.includes(e.user_ids,t.id))return e.archived?"read-only":"read-write";if(s.get(e,"settings.access_control.grant_view_access"))return e.archived?"read-only":s.get(e,"settings.access_control.grant_comment_access")?"read-comment":"read-only"}return null}function i(e,t){if(n(e,t))return!0;if("guest"===t.type){if(s.get(e,"settings.membership.allow_guest_request"))return!0}else if(s.get(e,"settings.membership.allow_user_request"))return!0;return!1}var s=r(1);t.default={},t.isVisibleToUser=i,t.getUserAccessLevel=n},function(e,t,r){"use strict";t.default={}},function(e,t,r){"use strict";t.default={}},function(e,t,r){"use strict";t.default={notification:{like:!0,comment:!0,task_completion:!0,vote:!0,bookmark:!0,coauthor:!0},web_alert:{like:!0,comment:!0,task_completion:!0,vote:!0,bookmark:!0,coauthor:!0},mobile_alert:{like:!0,comment:!0,task_completion:!0,vote:!0,bookmark:!0,coauthor:!0}}},function(e,t,r){"use strict";e.exports=t=["dropbox","facebook","github","gitlab","google"],t.integrated=["gitlab"]},function(e,t,r){"use strict";function n(e,t){var r,n,i=new RegExp("^/(https?)/([^/]*)"),s=i.exec(e.path);s?(n=s[1]+":",r=s[2],e.path=e.path.substr(s[0].length),t.cors=!0):(r=window.location.host,n=window.location.protocol,t.cors=!1),t.address=n+"//"+r}function i(e,t){if(t.cors){var r=t.address;if(r){var n=r.indexOf("://"),i=r.substr(0,n),s=r.substr(n+3);e.path="/"+i+"/"+s+e.path}}}t.extract=n,t.insert=i},function(e,t,r){"use strict";function n(e){var t=e,r="",n=t.indexOf("#");-1!==n&&(r=t.substr(n+1),t=t.substr(0,n));var s={},a=t.indexOf("?");return-1!==a&&(s=i(t.substr(a+1)),t=t.substr(0,a)),{path:t,query:s,hash:r}}function i(e){var t={},r=a.split(e,"&");return a.each(r,function(e){var r=a.split(e,"="),n=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]||"");i=a.replace(i,/\+/g," "),t[n]=i}),t}function s(e){return e.pathname+e.search+e.hash}var a=r(1),o=r(0),l=o.PropTypes,c=r(10);e.exports=o.createClass({displayName:"RouteManager",propTypes:{pages:l.array.isRequired,database:l.instanceOf(c),rewrite:l.func,onChange:l.func,onRedirectionRequest:l.func},getInitialState:function(){return{basePath:this.getBasePath(),url:null,component:null,parameters:null,query:null,hash:""}},getBasePath:function(){var e=document.getElementsByTagName("BASE")[0];if(e){var t=e.getAttribute("href");return a.replace(t,/\/+$/,"")}return""},getUrl:function(){return this.state.url},getComponent:function(){return this.state.component},getParameters:function(){return this.state.parameters},getQuery:function(){return this.state.query},getHash:function(){return this.state.hash},goTo:function(e,t){var r=s(e);return this.change(r,t)},find:function(e,t){t=a.clone(t)||{};var r=e.getUrl(t),n=this.state.basePath;n&&(r.path=n+r.path),this.props.rewrite&&this.props.rewrite(r,t,"find");var i=r.path;if(!a.isEmpty(r.query)){var s="";a.forIn(r.query,function(e,t){s+=s?"&":"?",s+=t+"="+encodeURIComponent(e).replace(/%20/g,"+")}),i+=s}return r.hash&&(i+="#"+r.hash),i},parse:function(e){var t=this,r=n(e),i={};this.props.rewrite&&this.props.rewrite(r,i,"parse");var s=this.state.basePath;if(s){if(!a.startsWith(r.path,s))return null;r.path=r.path.substr(s.length)}var o,l=0;try{a.each(this.props.pages,function(e){if("function"!=typeof e.parseUrl){var n=a.get(e,"displayName","Page");throw new Error(n+" does not implement the static function parseUrl()")}var s=e.parseUrl(r.path,r.query,r.hash);if(s&&s.match.length>l){var c=a.assign(a.omit(s,"match"),i),u=t.find(e,c);o={url:u,component:e,parameters:c,query:r.query,hash:r.hash},l=s.match.length}})}catch(e){return console.error(e),null}return o},change:function(e,t,r){var n=this;if(this.state.url===e)return Promise.resolve(!1);var i=this.parse(e);return i?(this.setState(i,function(){var e=window.location.protocol,r=window.location.host,s=e+"//"+r+i.url;window.location.href!==s&&(t?window.history.replaceState({},"",s):window.history.pushState({},"",s)),n.triggerChangeEvent()}),Promise.resolve(!0)):r?Promise.reject(new Error("Unable to find page")):this.triggerRedirectionRequest(e).then(function(e){return n.change(e,t,!0)})},loosen:function(){var e=window.location.href,t=e.indexOf("#");if(-1!==t){var r=e.substr(0,t);window.history.replaceState({},"",r)}},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerRedirectionRequest:function(e){if(this.props.onRedirectionRequest){var t=this.state.basePath;return t&&a.startsWith(e,t)&&(e=e.substr(t.length),a.startsWith(e,"/")||(e="/"+e)),this.props.onRedirectionRequest({type:"route_request",target:this,url:e})}return Promise.reject(new Error("Unable to route URL to a page: "+e))},render:function(){return null},componentDidMount:function(){this.componentDidUpdate({},{}),window.addEventListener("popstate",this.handlePopState)},componentDidUpdate:function(e,t){!e.database&&this.props.database&&this.goTo(window.location,!0).catch(function(e){console.error(e)})},componentWillUnmount:function(){window.removeEventListener("popstate",this.handlePopState)},handlePopState:function(e){var t=this,r=s(window.location),n=this.parse(r);n&&this.setState(n,function(){t.triggerChangeEvent()})}})},function(e,t,r){"use strict";function n(e){var t;if("number"==typeof e)return e;if(t=/^(\d+)\s*vw/.exec(e)){var r=parseInt(t[1]);return Math.round(r*document.body.offsetWidth/100)}if(t=/^(\d+)\s*vh/.exec(e)){var r=parseInt(t[1]);return Math.round(r*document.body.offsetHeight/100)}}var i=r(1),s=r(0),a=s.PropTypes,o=r(10);e.exports=s.createClass({displayName:"ThemeManager",propTypes:{modes:a.object,serverAddress:a.string,database:a.instanceOf(o),onChange:a.func},getInitialState:function(){return{mode:this.selectMode(),devicePixelRatio:window.devicePixelRatio,details:null}},getMode:function(){return this.state.mode},getModes:function(){var e=i.sortBy(i.toPairs(this.props.modes),1);i.map(e,0);return i.keys(this.props.modes)},getDetails:function(){return this.state.details},getImageUrl:function(e,t){t||(t={});var r;switch(e.type){case"video":case"audio":case"website":r=e.poster_url;break;default:r=e.url}if(r){var s=[],a=e.clip;if(t.hasOwnProperty("clip")&&(a=t.clip),a){var o=i.map([a.left,a.top,a.width,a.height],Math.round);s.push("cr"+o.join("-"))}var l=n(t.width),c=n(t.height);1!==this.state.devicePixelRatio&&(l=Math.round(l*this.state.devicePixelRatio),c=Math.round(c*this.state.devicePixelRatio)),l&&c?s.push("re"+l+"-"+c):!l&&c?s.push("h"+c):!c&&l&&s.push("w"+l),void 0!==t.quality&&s.push("q"+t.quality);var u="";return s.length>0&&(u="/"+s.join("+"),"png"!==e.format&&"gif"!==e.format||(u+=".png")),""+this.props.serverAddress+r+u}},getImageFile:function(e){switch(e.type){case"video":case"audio":case"website":return e.poster_file;default:return e.file}},getVideoUrl:function(e,t){var r=""+this.props.serverAddress+e.url;if(t&&t.version){var n=e.versions[t.version];r+="."+t.version+"."+n.format}return r},getAudioUrl:function(e,t){return this.getVideoUrl(e,t)},getUrl:function(e,t){switch(e.type){case"image":return this.getImageUrl(e,t);case"video":return this.getVideoUrl(e,t);case"website":return e.url;case"audio":return this.getAudioUrl(e,t)}},selectMode:function(){var e=document.body.parentNode.offsetWidth,t="";for(var r in this.props.modes){e>=this.props.modes[r]&&(t=r)}return t},change:function(e){var t=this;return i.isEqual(this.state.details,e)?Promise.resolve(!0):(this.setState({details:e},function(){t.triggerChangeEvent()}),Promise.resolve(!0))},componentWillMount:function(){window.addEventListener("resize",this.handleWindowResize)},render:function(){return null},componentDidMount:function(){this.change(l)},componentDidUpdate:function(e,t){var r=this;if(!e.database&&this.props.database){var n=this.props.database.use({schema:"local",by:this});n.start().then(function(){return n.findOne({table:"settings",key:"theme"})}).then(function(e){e&&e.theme&&r.change(e.theme)})}},componentWillUnmount:function(){window.removeEventListener("resize",this.handleWindowResize)},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleWindowResize:function(e){var t=this,r={},n=this.selectMode();this.state.mode!==n&&(r.mode=n),this.state.devicePixelRatio!==window.devicePixelRatio&&(r.devicePixelRatio=window.devicePixelRatio),i.isEmpty(r)||this.setState(r,function(){t.triggerChangeEvent()})}});var l={}},function(e,t,r){"use strict";function n(){this.parts=[],this.closed=!1,this.error=null,this.pullResult=null,this.waitResult=null,this.id=null,this.size=0}function i(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}var s=r(1);e.exports=n,n.prototype.toBlob=function(){var e=s.map(this.parts,"blob");if(e.length>1){var t=e[0].type;return new Blob(e,{type:t})}return 1===e.length?e[0]:new Blob},n.prototype.toJSON=function(){return this.id},n.prototype.push=function(e){this.parts.push({blob:e,sent:!1}),this.size+=e.size,this.pullResult&&(this.pullResult.resolve(e),this.pullResult=null)},n.prototype.close=function(){this.closed=!0,s.find(this.parts,{sent:!1})||(this.pullResult&&(this.pullResult.resolve(null),this.pullResult=null),this.waitResult&&(this.waitResult.resolve(),this.waitResult=null))},n.prototype.pull=function(){var e=s.find(this.parts,{sent:!1});return e?Promise.resolve(e.blob):this.closed?Promise.resolve(null):(this.pullResult||(this.pullResult=i()),this.pullResult.promise)},n.prototype.finalize=function(e){var t=s.find(this.parts,{blob:e});if(t&&(t.sent=!0),this.waitResult){!s.find(this.parts,{sent:!1})&&this.closed&&this.waitResult.resolve()}},n.prototype.abandon=function(e){this.error=e,this.waitResult&&this.waitResult.reject(e)},n.prototype.wait=function(){if(this.closed){if(this.error)return Promise.reject(this.error);if(!s.find(this.parts,{sent:!1}))return Promise.resolve()}return this.waitResult||(this.waitResult=i()),this.waitResult.promise},n.prototype.pipe=function(e,t){t||(t=1048576);for(var r=e.size,n=e.type,i=0;i<r;i+=t){var s=Math.min(t,r-i),a=e.slice(i,i+s,n);this.push(a)}this.close()}},function(e,t,r){"use strict";var n=r(1),i=r(13),s=r(0),a=s.PropTypes,o=r(22),l=r(87),c=(r(254),r(145)),u=r(10),d=r(11);e.exports=s.createClass({displayName:"PayloadManager",propTypes:{database:a.instanceOf(u),route:a.instanceOf(d),onChange:a.func},getInitialState:function(){return{payloads:[]}},queue:function(e,t){var r=this,s=this.getAction(t);if(!s)return i.resolve(null);var a=this.props.route.parameters.address,l={};return this.createTask(e,s,l).then(function(i){var s=n.pick(t,"file","poster_file","stream","external_url","external_poster_url","url"),l=n.assign({payload_id:i.id,action:i.action,token:i.token,start:o(),transferred:0,total:0,backendProgress:0,address:a,schema:e,promise:null},s),c=n.concat(r.state.payloads,l);return r.setState({payloads:c},function(){r.triggerChangeEvent()}),l.payload_id})},getAction:function(e){switch(e.type){case"image":if(!e.url){if(e.file instanceof Blob)return"image-upload";if(e.external_url)return"image-copy"}break;case"audio":if(!e.url){if(e.stream)return"audio-upload-transcode";if(e.file instanceof Blob)return"audio-upload-transcode";if(e.external_url)return"audio-copy-transcode"}break;case"video":if(!e.url){if(e.stream)return"video-upload-transcode";if(e.file instanceof Blob)return"video-upload-transcode";if(e.external_url)return"video-copy-transcode"}break;case"website":if(!e.poster_url&&e.url)return"website-poster-generate"}},createTask:function(e,t,r){var n=this.props.database.use({schema:e,by:this});return n.start().then(function(e){var i={action:t,options:r,user_id:e};return n.saveOne({table:"task"},i)})},find:function(e,t){if(!this.props.route)return null;var r=this.props.route.parameters.address;return n.find(this.state.payloads,function(i){if(i.address===r&&i.schema===e)return n.some(t,function(e,t){return i[t]===e})})},send:function(e,t){var r=this,n=this.find(e,{payload_id:t});if(n&&!n.promise){var i={responseType:"json"};if(!n.stream&&n.file){var s=n.file;i.onUploadProgress=function(e){var n=e.total?Math.round(s.size*(e.loaded/e.total)):0;r.updatePayloadStatus(t,{transferred:n,total:s.size})}}var a=this.createFormData(n).then(function(e){var t=r.getUrl(n);return l.fetch("POST",t,e,i)});n.promise=a}},createFormData:function(e){var t={};return e.stream?t.stream=this.stream(e.stream):e.file?t.file=e.file:e.external_url&&(t.external_url=e.external_url),e.poster_file?t.poster_file=e.poster_file:e.external_poster_url&&(t.external_poster_url=e.external_poster_url),e.url&&(t.url=e.url),i.props(t).then(function(e){return n.transform(e,function(e,t,r){e.append(r,t)},new FormData)})},getUrl:function(e){var t=e.schema,r=e.address,n=e.payload_id;switch(e.action){case"image-upload":case"image-copy":r+="/media/images/upload/"+t+"/"+n;break;case"video-copy-transcode":case"video-upload-transcode":r+="/media/videos/upload/"+t+"/"+n;break;case"audio-copy-transcode":case"audio-upload-transcode":r+="/media/audios/upload/"+t+"/"+n;break;case"website-poster-generate":r+="/media/html/screenshot/"+t+"/"+n;break;default:return}return r+="?token="+e.token},stream:function(e){var t=this,r=this.props.route.parameters;return e.id?i.resolve(e.id):new i(function(s,a){var o=0,u=!1,d=0;c.do(function(){return e.pull().then(function(i){var a=r.address+"/media/stream";e.id&&(a+="/"+e.id);var o=new FormData;i?o.append("file",i):u=!0;var c={responseType:"json"};return i&&(c.onUploadProgress=function(r){var s=n.find(t.state.payloads,{stream:e});if(s){var a=r.total?Math.round(i.size*(r.loaded/r.total)):0;t.updatePayloadStatus(s.id,{transferred:d+a,total:e.size})}}),l.fetch("POST",a,o,c).then(function(t){e.id||(e.id=t.id,s(e.id)),i&&(e.finalize(i),d+=i.size)})}).catch(function(t){if(++o<1)return i.delay(5e3);throw e.id||a(t),t})}),c.while(function(){return!u}),c.end().catch(function(t){e.abandon(t)})})},updatePayloadStatus:function(e,t){var r=this,i=n.slice(this.state.payloads),s=n.findIndex(i,{payload_id:e});-1!==s&&(i[s]=n.assign({},i[s],t),this.setState({payloads:i},function(){r.triggerChangeEvent()}))},updateProgress:function(){var e=this,t=this.props.database.use({by:this}),r=n.filter(this.state.payloads,function(e){if(e.address===t.context.address&&100!==e.backendProgress)return!0}),s=n.groupBy(r,"schema"),a=n.keys(s),o=!1;return i.each(a,function(e){var i=s[e],a=n.map(i,"payload_id"),l={id:a};return t.find({table:"task",schema:e,criteria:l}).then(function(e){r=n.map(r,function(t){if(n.includes(i,t)){var r=n.find(e,{id:t.payload_id});if(r&&r.completion!==t.backendProgress){var s=n.clone(t);return s.backendProgress=r.completion,o=!0,s}}return t})})}).then(function(){if(o)return e.setState({payloads:r},function(){e.triggerChangeEvent()}),null})},getUploadProgress:function(){var e=0,t=0;return n.each(this.state.payloads,function(r){var n=r.transferred,i=r.total;0===i&&(r.file?i=r.file.size:r.stream&&(i=r.stream.size)),n<i&&(e++,t+=Math.max(0,i-n))}),e>0?{files:e,bytes:t}:null},render:function(){return null},componentDidUpdate:function(e){!e.database&&this.props.database&&this.triggerChangeEvent(),e.database!==this.props.database&&this.updateProgress()},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})}})},function(e,t,r){"use strict";function n(e){try{return JSON.parse(e)}catch(e){}}function i(){return new a(function(e,t){Notification.requestPermission(function(r){"granted"===r?e():t(new Error("Unable to gain permission"))})})}var s=r(1),a=r(13),o=r(0),l=o.PropTypes,c=r(482),u=r(145),d=r(4);e.exports=o.createClass({displayName:"WebsocketNotifier",propTypes:{serverAddress:l.string,initialReconnectionDelay:l.number,maximumReconnectionDelay:l.number,defaultProfileImage:l.string,locale:l.instanceOf(d),onConnect:l.func,onDisconnect:l.func,onNotify:l.func,onAlertClick:l.func},statics:{isAvailable:function(){return!0}},getDefaultProps:function(){return{initialReconnectionDelay:500,maximumReconnectionDelay:3e4}},getInitialState:function(){return{socket:null,notificationPermitted:!1}},componentWillMount:function(){var e=this;i().then(function(){e.setState({notificationPermitted:!0})}).catch(function(e){}),this.updateConnection(this.props)},componentWillReceiveProps:function(e){this.props.serverAddress!==e.serverAddress&&this.updateConnection(e)},updateConnection:function(e){this.disconnect(),e.serverAddress&&this.connect(e.serverAddress)},connect:function(e){var t=this,r=this.connectionAttempt;if(r&&r.serverAddress===e)return r.promise;r=this.connectionAttempt={serverAddress:e};var i=!1,s=this.props.initialReconnectionDelay,o=this.props.maximumReconnectionDelay;return u.do(function(){return t.createSocket(e).then(function(s){r===t.connectionAttempt&&(s.onmessage=function(r){if(t.state.socket===s){var i=n(r.data);i.changes?t.triggerNotifyEvent(e,i.changes):i.alert?(console.log("WebSocket: ",i),t.showAlert(e,i.alert)):i.socket&&t.triggerConnectEvent(e,i.socket)}},s.onclose=function(){t.state.socket===s&&t.setState({socket:null,server:""},function(){console.log("Reestablishing web-socket connection..."),t.connect(e).then(function(e){e&&console.log("Connection reestablished")})}),t.triggerDisconnectEvent(e)},t.setState({socket:s,connected:!0})),i=!0}).catch(function(t){return s*=2,s>o&&(s=o),console.log("Connection attempt in "+s+"ms: "+e),a.delay(s)})}),u.while(function(){return r===t.connectionAttempt&&!i}),u.return(function(){return t.connectionAttempt=null,i}),r.promise=u.end(),r.promise},disconnect:function(){var e=this.state.socket;e&&this.setState({socket:null,connected:!1},function(){e.close()})},createSocket:function(e){return new a(function(t,r){var n=e+"/socket",i=new c(n),s=!1;i.onopen=function(e){s||(s=!0,t(i))},i.onclose=function(){s||r(new Error("Unable to establish a connection"))},i.onerror=function(e){s||(s=!0,r(new Error(e.message)))}})},triggerNotifyEvent:function(e,t){this.props.onNotify&&this.props.onNotify({type:"notify",target:this,address:e,changes:t})},triggerConnectEvent:function(e,t){this.props.onConnect&&this.props.onConnect({type:"connect",target:this,address:e,token:t})},triggerDisconnectEvent:function(e){this.props.onDisconnect&&this.props.onDisconnect({type:"disconnect",target:this,address:e})},triggerAlertClickEvent:function(e,t){this.props.onAlertClick&&this.props.onAlertClick({type:"alertclick",target:this,address:e,alert:t})},showAlert:function(e,t){var r=this;if(this.state.notificationPermitted){var n={};t.profile_image?n.icon=""+e+t.profile_image:n.icon=this.props.defaultProfileImage,t.message?n.body=t.message:t.attached_image&&(n.image=""+e+t.attached_image),n.lang=s.get(this.props.locale,"languageCode");var i=new Notification(t.title,n);i.addEventListener("click",function(){r.triggerAlertClickEvent(e,t),i.close()})}},render:function(){return null}})},function(e,t,r){"use strict";function n(e,t){"change"===e&&t&&c.push(t)}function i(e,t){"change"===e&&t&&a.pull(c,t)}function s(e){return e.format("YYYY-MM-DD")}var a=r(1),o=r(22),l=o();t.addEventListener=n,t.removeEventListener=i,t.today=s(l);var c=[];setInterval(function(){var e=o(),r=s(e);if(r!==t.today){t.today=r;var n={type:"change",target:t};a.each(c,function(e){e(n)})}},1e3)},function(e,t,r){"use strict";function n(e){switch(void 0===e?"undefined":i(e)){case"number":return 0;case"string":return s.repeat("x",e.length);case"boolean":return!1;case"object":return e instanceof Array?s.map(e,n):s.mapValues(e,n)}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(1),a={};s.mixin({decouple:function(e,t,r){"string"==typeof t?t=s.split(t,"."):t instanceof Array||(t=[t]),r||(r=a);var n=s.clone(e);n instanceof Object||(n={});for(var i=n,o=e,l=0;l<t.length;l++){var c=t[l],u=o?o[c]:void 0,d=s.clone(u);l===t.length-1?d instanceof r.constructor||(d=r):d instanceof Object||(d={}),i[c]=d,i=d,o=u}return n},decoupleSet:function(e,t,r){if("string"==typeof t?t=s.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var n=s.slice(t,0,-1),i=s.decouple(e,n,{});return s.set(i,t,r),i},decoupleUnset:function(e,t){if("string"==typeof t?t=s.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var r=s.slice(t,0,-1),n=s.decouple(e,r,{});return s.unset(n,t),n},decouplePush:function(e,t){for(var r=s.decouple(e,t,[]),n=s.get(r,t),i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return Array.prototype.push.apply(n,a),r},shallowDiff:function(e,t){return s.pickBy(e,function(e,r){return t[r]!==e})},obscure:function(e,t){var r=s.cloneDeep(e);return s.each(t,function(e){var t=s.get(r,e);s.set(r,e,n(t))}),r},strictParseInt:function(e){var t=s.parseInt(e);if(t.toString()!==e)throw new Error("Not an integer: "+e);return t}})},function(e,t,r){"use strict";var n=r(1),i=r(0),s=i.PropTypes,a=(r(40),r(262)),o=r(16);r(509),e.exports=i.createClass({displayName:"Chartist",propTypes:{type:s.oneOf(["line","bar","pie"]).isRequired,data:s.object.isRequired,className:s.string,options:s.object,responsiveOptions:s.array,style:s.object,onDraw:s.func},getInitialState:function(){return this.components=o({container:HTMLDivElement}),{}},componentWillReceiveProps:function(e){this.props.onDraw!==e.onDraw&&(this.chartist?this.chartist.off(this.props.onDraw):this.chartist.on(e.onDraw))},render:function(){var e=["ct-chart"];this.props.className&&e.push(this.props.className);var t={ref:this.components.setters.container,className:e.join(" "),style:this.props.style};return i.createElement("div",t)},componentDidUpdate:function(e,t){e.type!==this.props.type?(this.destroyChart(),this.createChart()):e.data===this.props.data&&e.options===this.props.options&&e.responsiveOptions===this.props.responsiveOptions||this.updateChart()},componentDidMount:function(){this.createChart()},createChart:function(){var e=a[n.upperFirst(this.props.type)],t=this.components.container;this.chartist=new e(t,this.props.data,this.props.options,this.props.responsiveOptions),this.props.onDraw&&this.chartist.on("draw",this.props.onDraw)},updateChart:function(){this.chartist.update(this.props.data,this.props.options,this.props.responsiveOptions)},destroyChart:function(){this.chartist&&this.chartist.detach();var e=this.components.container;if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}),e.exports.Interpolation=a.Interpolation,e.exports.Svg=a.Svg},function(e,t,r){"use strict";var n=r(0),i=n.PropTypes,s=r(40);e.exports=n.createClass({displayName:"SmartList",propTypes:{items:i.arrayOf(i.object),behind:i.number,ahead:i.number,anchor:i.string,offset:i.number,onIdentity:i.func.isRequired,onRender:i.func.isRequired,onAnchorChange:i.func,onBeforeAnchor:i.func},getDefaultProps:function(){return{behind:5,ahead:10,offset:0}},getInitialState:function(){return this.itemHeights={},this.itemNodes={},this.anchorOffset=this.props.offset,{currentAnchor:this.props.anchor,estimatedHeight:void 0}},componentWillReceiveProps:function(e){this.props.anchor!==e.anchor&&(this.setState({currentAnchor:e.anchor}),this.anchorOffset=e.offset)},render:function(){var e=this,t=this.props.items,r=this.props.onIdentity,i=_.map(t,function(t,n){return r({type:"identity",target:e,item:t,currentIndex:n})}),s=this.state.currentAnchor?_.indexOf(i,this.state.currentAnchor):0;if(-1===s&&t){for(var a=_.keys(this.itemNodes),o=_.indexOf(a,this.state.currentAnchor),l=o+1;l<a.length;l++){var c=_.indexOf(i,a[l]);if(-1!==c){s=c,this.state.currentAnchor=i[c],this.triggerAnchorChangeEvent(i[c]);break}}-1===s&&(this.state.currentAnchor=void 0,this.triggerAnchorChangeEvent(void 0))}var u=Math.max(0,s-this.props.behind),d=Math.min(_.size(t),s+this.props.ahead+1),p=this.props.onRender,h=_.map(this.props.items,function(t,r){var s=i[r],a={type:"render",target:e,item:t,needed:u<=r&&r<d,startIndex:u,currentIndex:r,endIndex:d,previousHeight:e.itemHeights[s],estimatedHeight:e.state.estimatedHeight},o=p(a);return n.createElement("div",{key:s,id:s},o)});return this.startIndex=u,this.endIndex=d,n.createElement("div",{className:"smart-list"},h)},componentDidMount:function(){this.container=s.findDOMNode(this);for(var e=this.container.parentNode;e;e=e.offsetParent){var t=getComputedStyle(e);if("auto"===t.overflowY||"scroll"===t.overflowY){this.scrollContainer=e;break}}this.scrollContainerWidth=this.scrollContainer.clientWidth,this.scrollContainer.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleWindowResize),this.scanItemNodes()},componentDidUpdate:function(e,t){var r=this,n=!_.isEmpty(this.itemNodes),i=this.scanItemNodes();if(this.state.currentAnchor&&n){var s=_.keys(this.itemNodes),a=_.indexOf(s,this.state.currentAnchor),o=_.transform(i,function(e,t){t<a&&e.push(r.props.items[t])},[]);_.isEmpty(o)||this.triggerBeforeAnchorEvent(o)}},componentWillUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleWindowResize)},scanItemNodes:function(){var e=this.startIndex,t=this.endIndex,r=0,n=this.itemNodes,i=[];this.itemNodes={};for(var s=this.container.firstChild;s;s=s.nextSibling){var a=s.id;this.itemNodes[a]=s,e<=r&&r<t&&(this.itemHeights[a]=s.offsetHeight),n[a]||i.push(r),r++}if(void 0===this.state.estimatedHeight){var o=_.values(this.itemHeights);if(!_.isEmpty(o)){var l=_.sum(o)/o.length,c=Math.round(l);this.setState({estimatedHeight:c})}}else if(!this.scrolling&&this.state.currentAnchor){var u=this.itemNodes[this.state.currentAnchor],d=this.anchorOffset;if(u&&void 0!==d){var p=this.scrollContainer.offsetTop,h=u.offsetTop-p,m=h-this.scrollContainer.scrollTop;if(m!==d){var f=h-d;this.scrollContainer.scrollTop=Math.max(0,f)}}}return i},resetHeights:function(){this.itemHeights={},this.setState({estimatedHeight:void 0})},triggerAnchorChangeEvent:function(e){if(this.props.onAnchorChange){var t=_.keys(this.itemNodes),r=_.indexOf(t,this.state.currentAnchor),n=this.props.items[r];this.props.onAnchorChange({type:"anchorchange",target:this,anchor:e,item:n})}},triggerBeforeAnchorEvent:function(e){this.props.onBeforeAnchor&&this.props.onBeforeAnchor({type:"beforeanchor",target:this,items:e})},handleScroll:function(e){var t,r,n=this,i=this.scrollContainer.scrollTop,s=this.scrollContainer.offsetTop;if(i>0)for(var a in this.itemNodes)if(t=this.itemNodes[a],(r=t.offsetTop-s)>i)break;var o=t?t.id:void 0;this.anchorOffset=t?r-i:void 0,this.state.currentAnchor!==o&&(this.setState({currentAnchor:o}),this.triggerAnchorChangeEvent(o)),this.scrolling=!0,this.scrollingEndTimeout&&clearTimeout(this.scrollingEndTimeout),this.scrollingEndTimeout=setTimeout(function(){n.scrolling=!1,n.scrollingEndTimeout=0},500)},handleWindowResize:function(){this.scrollContainerWidth!==this.scrollContainer.clientWidth&&(this.scrollContainerWidth=this.scrollContainer.clientWidth,this.resetHeights())}})},function(e,t,r){"use strict";function n(e){if(e<1024)return e+"B";var t=e/1024;if(t<1024)return i.round(t)+"KB";var r=t/1024;if(r<1024)return i.round(r,1)+"MB";var n=r/1024;return i.round(n,2)+"GB"}var i=r(1),s=r(0),a=s.PropTypes,o=r(4),l=r(44);r(556),e.exports=s.createClass({displayName:"UploadProgress",propTypes:{payloads:a.instanceOf(l).isRequired,locale:a.instanceOf(o).isRequired},render:function(){var e=this.props.locale.translate,t=this.props.payloads.uploading;if(!t)return null;var r=n(t.bytes),i=t.files;return s.createElement("div",{className:"upload-progress"},e("upload-progress-uploading-$count-files-$size-remaining",i,r))}})},,,function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,"* {\n  box-sizing: border-box;\n  font-family: sans-serif; }\n  *:focus {\n    outline-color: #fca326; }\n\nbody {\n  overflow: hidden; }\n\n.application {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  height: 100%;\n  width: 100%; }\n\n.page-view-port {\n  flex: 3 1 800px;\n  position: relative;\n  background-color: #ffffff; }\n  .page-view-port .scroll-box {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow-y: auto;\n    overflow-x: hidden;\n    padding: 0 2em 1.5em 2em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".confirmation-dialog-box {\n  background-color: #006699;\n  color: #ffffff;\n  max-width: 50vw;\n  padding: 1em 1em 1em 1em;\n  box-shadow: 5px 5px 4px #000000; }\n  .confirmation-dialog-box .message {\n    font-size: 1.6em;\n    margin-bottom: 0.5em; }\n  .confirmation-dialog-box .buttons {\n    border-top: 1px solid #ffffff;\n    text-align: right;\n    padding-top: 1em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,'.image-album-dialog-box {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  background-color: #006699;\n  color: #ffffff;\n  width: 80vw;\n  max-height: 60vh;\n  padding: 1em 1em 1em 1em;\n  box-shadow: 5px 5px 4px #000000; }\n  .image-album-dialog-box .scrollable {\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: auto;\n    margin-bottom: 0.5em;\n    min-height: 30vh;\n    text-align: center;\n    overflow: auto; }\n    .image-album-dialog-box .scrollable .picture {\n      display: inline-block;\n      border: 5px solid #ffffff;\n      margin: 0.3em 0.4em 0.3em 0.4em;\n      cursor: pointer; }\n      .image-album-dialog-box .scrollable .picture IMG, .image-album-dialog-box .scrollable .picture CANVAS {\n        display: block; }\n      .image-album-dialog-box .scrollable .picture.selected {\n        border-color: #99ddff; }\n      .image-album-dialog-box .scrollable .picture.deleting {\n        border-color: #ff9999; }\n      .image-album-dialog-box .scrollable .picture.disabled {\n        cursor: wait; }\n  .image-album-dialog-box .buttons {\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-basis: auto;\n    border-top: 1px solid #ffffff;\n    padding-top: 0.8em; }\n    .image-album-dialog-box .buttons .left {\n      float: left; }\n    .image-album-dialog-box .buttons .right {\n      float: right; }\n    .image-album-dialog-box .buttons label.push-button {\n      display: inline-block;\n      vertical-align: top;\n      user-select: none; }\n      .image-album-dialog-box .buttons label.push-button INPUT[type="file"] {\n        position: absolute;\n        z-index: -50000;\n        width: 1px;\n        height: 1px; }\n  .image-album-dialog-box .drop-target {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    border: 4px solid #ffff66;\n    background-color: rgba(255, 255, 102, 0.2); }\n',""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".image-cropping-dialog-box {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  background-color: #006699;\n  color: #ffffff;\n  padding: 1em 1em 1em 1em;\n  box-shadow: 5px 5px 4px #000000; }\n  .image-cropping-dialog-box .image {\n    max-width: 80vw;\n    max-height: 80vh;\n    margin-bottom: 0.8em; }\n  .image-cropping-dialog-box .buttons {\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-basis: auto;\n    border-top: 1px solid #ffffff;\n    padding-top: 0.8em; }\n    .image-cropping-dialog-box .buttons .left {\n      float: left; }\n    .image-cropping-dialog-box .buttons .right {\n      float: right; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".error-page {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 20vh; }\n  .error-page .text {\n    max-width: 20em;\n    line-height: 135%;\n    margin-left: 1em;\n    margin-right: 1em; }\n    .error-page .text h1 {\n      text-align: center; }\n  .error-page .graphic {\n    margin-left: 3em;\n    margin-right: 1em; }\n    .error-page .graphic svg {\n      width: 100%;\n      max-width: 20em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".member-list-page .buttons {\n  float: right;\n  margin-left: 0.4em; }\n\n.member-list-page .sortable-table #type {\n  width: 10em; }\n\n.member-list-page .sortable-table #roles {\n  width: 10em; }\n\n.member-list-page .sortable-table #range {\n  width: 14em; }\n\n.member-list-page .sortable-table #to_date, .member-list-page .sortable-table #last_month, .member-list-page .sortable-table #this_month {\n  width: 8em; }\n\n.member-list-page .sortable-table #mtime {\n  width: 10em; }\n\n.member-list-page .sortable-table .action-badge {\n  margin-top: 0.35em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".project-list-page .buttons {\n  float: right; }\n\n.project-list-page .sortable-table #users {\n  width: 10em; }\n\n.project-list-page .sortable-table #repos {\n  width: 10em; }\n\n.project-list-page .sortable-table #range {\n  width: 14em; }\n\n.project-list-page .sortable-table #to_date, .project-list-page .sortable-table #last_month, .project-list-page .sortable-table #this_month {\n  width: 8em; }\n\n.project-list-page .sortable-table #mtime {\n  width: 10em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".project-summary-page .buttons {\n  float: right; }\n\n.project-summary-page .form {\n  float: left;\n  max-width: 40em;\n  min-width: 20em;\n  width: 50%;\n  padding-left: 0.5em;\n  margin-right: 2em; }\n\n.project-summary-page .instructions {\n  padding-top: 1.2em; }\n\n.project-summary-page .statistics {\n  clear: both; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".repo-list-page .buttons {\n  float: right; }\n\n.repo-list-page .sortable-table #type {\n  width: 12em; }\n\n.repo-list-page .sortable-table #server {\n  width: 12em; }\n\n.repo-list-page .sortable-table #issues_enabled {\n  width: 8em; }\n\n.repo-list-page .sortable-table #range {\n  width: 14em; }\n\n.repo-list-page .sortable-table #to_date, .repo-list-page .sortable-table #last_month, .repo-list-page .sortable-table #this_month {\n  width: 8em; }\n\n.repo-list-page .sortable-table #mtime {\n  width: 10em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".repo-summary-page .buttons {\n  float: right; }\n\n.repo-summary-page .form {\n  float: left;\n  max-width: 40em;\n  min-width: 20em;\n  width: 50%;\n  padding-left: 0.5em;\n  margin-right: 2em; }\n\n.repo-summary-page .instructions {\n  padding-top: 1.2em; }\n\n.repo-summary-page .statistics {\n  clear: both; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".role-list-page .buttons {\n  float: right; }\n\n.role-list-page .sortable-table #mtime {\n  width: 12em; }\n\n.role-list-page .sortable-table #users {\n  width: 10em; }\n\n.role-list-page .sortable-table #mtime {\n  width: 12em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".role-summary-page .buttons {\n  float: right; }\n\n.role-summary-page .form {\n  float: left;\n  max-width: 40em;\n  min-width: 20em;\n  width: 50%;\n  padding-left: 0.5em;\n  margin-right: 2em; }\n\n.role-summary-page .instructions {\n  padding-top: 1.2em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".server-list-page .buttons {\n  float: right; }\n\n.server-list-page .sortable-table #type {\n  width: 10em; }\n\n.server-list-page .sortable-table #oauth {\n  width: 12em; }\n\n.server-list-page .sortable-table #api {\n  width: 12em; }\n\n.server-list-page .sortable-table #users {\n  width: 10em; }\n\n.server-list-page .sortable-table #mtime {\n  width: 10em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".server-summary-page .buttons {\n  float: right; }\n\n.server-summary-page .form {\n  float: left;\n  max-width: 40em;\n  min-width: 20em;\n  width: 50%;\n  padding-left: 0.5em;\n  margin-right: 2em; }\n\n.server-summary-page .instructions {\n  padding-top: 1.2em; }\n\n.server-summary-page .task-history {\n  clear: both; }\n\n.server-summary-page .fa-arrow-right {\n  margin-left: 0.3em;\n  margin-right: 0.15em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".settings-page .buttons {\n  float: right; }\n\n.settings-page .form {\n  float: left;\n  max-width: 40em;\n  min-width: 20em;\n  width: 50%;\n  padding-left: 0.5em;\n  margin-right: 2em; }\n\n.settings-page .instructions {\n  padding-top: 1.2em; }\n\n.settings-page .option-list .pos {\n  background-color: #000000;\n  color: #eeeeee;\n  display: inline-block;\n  font-size: 0.7em;\n  padding: 0.1em 0.4em 0.1em 0.4em;\n  border-radius: 1em;\n  vertical-align: 0.07em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".sign-in-page FORM {\n  max-width: 20em; }\n  .sign-in-page FORM .button-row {\n    margin-top: -0.5em;\n    text-align: right; }\n  .sign-in-page FORM .error {\n    color: #cc0000;\n    margin-bottom: 1em; }\n\n.sign-in-page .oauth-button {\n  display: table;\n  border: 1px solid #000000;\n  width: 100%;\n  max-width: 20em;\n  margin-top: 0.5em; }\n  .sign-in-page .oauth-button .icon {\n    width: 2em;\n    display: table-cell;\n    font-size: 2em;\n    padding: 0.26em 0 0.24em 0.25em;\n    text-align: center;\n    vertical-align: middle; }\n  .sign-in-page .oauth-button .label {\n    display: table-cell;\n    font-size: 1.25em;\n    padding-right: 2.5em;\n    text-align: center;\n    vertical-align: middle; }\n  .sign-in-page .oauth-button .error {\n    display: table-cell;\n    padding-left: 1.25em;\n    padding-right: 1.5em;\n    vertical-align: middle; }\n  .sign-in-page .oauth-button:link, .sign-in-page .oauth-button:visited {\n    text-decoration: none;\n    color: #000000; }\n  .sign-in-page .oauth-button.error {\n    border-color: #990000;\n    color: #990000; }\n  .sign-in-page .oauth-button:hover, .sign-in-page .oauth-button:active {\n    background-color: #99ddff;\n    color: #000000; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".start-page {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation-name: fade-in-out;\n  animation-delay: 0.5s;\n  animation-duration: 2s;\n  opacity: 0; }\n\n@keyframes fade-in-out {\n  0% {\n    opacity: 0; }\n  75% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n  .start-page h2 {\n    font-size: 3em;\n    text-transform: uppercase; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".user-list-page .buttons {\n  float: right; }\n\n.user-list-page .sortable-table #type {\n  width: 10em; }\n\n.user-list-page .sortable-table #roles {\n  width: 10em; }\n\n.user-list-page .sortable-table #projects {\n  width: 12em; }\n\n.user-list-page .sortable-table #email {\n  width: 12em; }\n\n.user-list-page .sortable-table #mtime {\n  width: 10em; }\n\n.user-list-page .sortable-table .action-badge {\n  margin-top: 0.35em; }\n\n.user-list-page .sortable-table .email {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".user-summary-page .buttons {\n  float: right; }\n\n.user-summary-page .form {\n  float: left;\n  max-width: 40em;\n  min-width: 20em;\n  width: 50%;\n  padding-left: 0.5em;\n  margin-right: 2em; }\n  .user-summary-page .form.social {\n    clear: left; }\n\n.user-summary-page .social-toggle {\n  float: left;\n  clear: left;\n  margin-top: 0;\n  cursor: pointer; }\n  .user-summary-page .social-toggle:hover {\n    color: #004466; }\n\n.user-summary-page .instructions {\n  padding-top: 1.2em; }\n\n.user-summary-page .statistics {\n  clear: both; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".tooltip.activity .window {\n  padding-bottom: 0.2em; }\n\n.tooltip.activity .item {\n  margin-bottom: 2px; }\n\n.tooltip.activity .icon {\n  height: 1.1em;\n  vertical-align: middle;\n  margin-bottom: 0.2em;\n  margin-right: 0.2em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".tooltip.project .item {\n  margin-bottom: 0.2em; }\n\n.tooltip.project .bottom {\n  font-size: 0.9em;\n  text-align: center;\n  border-top: 1px solid #999999;\n  padding-top: 0.2em; }\n  .tooltip.project .bottom A {\n    display: block; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".tooltip.repository .item {\n  margin-bottom: 0.2em; }\n\n.tooltip.repository .bottom {\n  font-size: 0.9em;\n  text-align: center;\n  border-top: 1px solid #999999;\n  padding-top: 0.2em; }\n  .tooltip.repository .bottom A {\n    display: block; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".tooltip.role .item {\n  margin-bottom: 0.2em; }\n\n.tooltip.role .bottom {\n  font-size: 0.9em;\n  text-align: center;\n  border-top: 1px solid #999999;\n  padding-top: 0.2em; }\n  .tooltip.role .bottom A {\n    display: block; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".tooltip.user .item {\n  margin-bottom: 2px;\n  vertical-align: middle; }\n\n.tooltip.user .ellipsis {\n  text-align: center;\n  color: #999999;\n  padding-bottom: 0.2em; }\n\n.tooltip.user .profile-image {\n  width: 1.5em;\n  height: 1.5em;\n  vertical-align: middle; }\n\n.tooltip.user .bottom {\n  font-size: 0.9em;\n  text-align: center;\n  border-top: 1px solid #999999;\n  padding-top: 0.2em; }\n  .tooltip.user .bottom A {\n    display: block; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".action-badge {\n  font-size: 0.7em;\n  color: #ffffff;\n  padding: 2px 4px 2px 4px;\n  float: right;\n  text-transform: uppercase;\n  margin-left: 0.1em; }\n  .action-badge .fa {\n    margin-right: 2px; }\n  .action-badge.add {\n    background-color: #009900; }\n  .action-badge.remove {\n    background-color: #cc0000; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".activity-chart {\n  margin-bottom: 1em; }\n  .activity-chart h2 {\n    float: left;\n    margin: 0; }\n  .activity-chart .legend {\n    text-align: right;\n    font-size: 0.8em;\n    margin-bottom: 1em;\n    padding-top: 0.25em; }\n    .activity-chart .legend .item {\n      display: inline-block;\n      white-space: nowrap;\n      margin-left: 0.6em;\n      margin-top: 0.25em; }\n      .activity-chart .legend .item .ct-chart-bar {\n        width: 0.8em;\n        height: 0.8em;\n        vertical-align: middle;\n        margin-right: 0.3em; }\n      .activity-chart .legend .item .label {\n        vertical-align: middle; }\n  .activity-chart .scroll-container {\n    width: 100%;\n    display: flex;\n    flex-direction: row-reverse;\n    overflow-y: hidden;\n    overflow-x: auto;\n    clear: both; }\n    .activity-chart .scroll-container .contents {\n      flex-grow: 0;\n      flex-shrink: 0;\n      min-width: 100%; }\n  .activity-chart .ct-label.ct-horizontal.ct-end {\n    min-width: 10em;\n    justify-content: flex-start;\n    text-align: left; }\n  .activity-chart .ct-label.ct-vertical.ct-start {\n    justify-content: flex-start;\n    text-align: left; }\n  .activity-chart .ct-line {\n    stroke-linecap: round;\n    stroke-width: 2px; }\n  .activity-chart .ct-grid.ct-horizontal.month-start {\n    stroke: #000000;\n    stroke-width: 1px;\n    stroke-dasharray: none; }\n  .activity-chart .ct-grid.ct-horizontal.today {\n    stroke-width: 1px;\n    stroke-dasharray: none; }\n  .activity-chart .ct-chart svg {\n    margin-bottom: -0.75em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".combo-button {\n  display: inline-block;\n  position: relative; }\n  .combo-button BUTTON {\n    font-size: 1.2em;\n    background-color: #cccccc;\n    border: 2px outset #dddddd;\n    color: #000000; }\n    .combo-button BUTTON.main {\n      padding: 0.14em 0.5em 0.14em 0.5em;\n      border-right: 0; }\n      .combo-button BUTTON.main:active {\n        border-style: inset; }\n    .combo-button BUTTON.side {\n      padding: 0.14em 5px 0.14em 5px;\n      border-left: 1px inset #dddddd; }\n      .combo-button BUTTON.side:active {\n        border-left-width: 2px;\n        padding-left: 4px;\n        border-style: inset; }\n    .combo-button BUTTON.alert {\n      animation: blink normal 2.5s infinite ease-in-out; }\n\n@keyframes blink {\n  50% {\n    background-color: #e0e0e0;\n    border-color: #e0e0e0;\n    color: #101010; } }\n  .combo-button .container {\n    position: absolute;\n    width: 50vw;\n    right: 0;\n    z-index: 1000;\n    text-align: right; }\n    .combo-button .container .menu {\n      display: inline-block;\n      border: 2px outset #dddddd;\n      padding: 0.5em 0.5em 0.5em 0.5em;\n      background-color: #cccccc;\n      text-align: left; }\n      .combo-button .container .menu .option {\n        cursor: pointer;\n        margin-bottom: 0.5em; }\n        .combo-button .container .menu .option.disabled {\n          color: #aaaaaa;\n          cursor: default; }\n        .combo-button .container .menu .option.separator {\n          border-top: 1px solid #999999;\n          padding-top: 0.5em; }\n        .combo-button .container .menu .option:last-child {\n          margin-bottom: 0; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,'.image-selector {\n  margin-bottom: 1em;\n  overflow: hidden; }\n  .image-selector label {\n    display: block;\n    font-weight: 600; }\n  .image-selector .contents {\n    margin-top: 4px; }\n    .image-selector .contents .image {\n      float: left;\n      z-index: 1; }\n      .image-selector .contents .image A {\n        display: block; }\n      .image-selector .contents .image .placeholder {\n        display: block;\n        position: relative;\n        background-color: #eeeeee; }\n        .image-selector .contents .image .placeholder .fa {\n          display: block;\n          position: absolute;\n          font-size: 2em;\n          top: 0;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          margin: auto;\n          height: 1em;\n          width: 1em; }\n    .image-selector .contents .options {\n      margin-left: 0.35em;\n      transition: opacity 1s;\n      z-index: 0;\n      overflow: hidden;\n      display: inline-block; }\n      .image-selector .contents .options .option {\n        display: block;\n        font-weight: normal;\n        padding: 0.25em 0.4em 0.15em 0.4em;\n        cursor: pointer; }\n        .image-selector .contents .options .option INPUT[type="file"] {\n          position: absolute;\n          z-index: -50000;\n          width: 1px;\n          height: 1px; }\n        .image-selector .contents .options .option:hover {\n          background-color: #99ddff; }\n        .image-selector .contents .options .option.disabled {\n          cursor: default;\n          color: #999999; }\n          .image-selector .contents .options .option.disabled:hover {\n            background-color: transparent; }\n  .image-selector.readonly .options {\n    opacity: 0; }\n    .image-selector.readonly .options .option {\n      cursor: default; }\n',""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".input-error {\n  font-weight: normal;\n  float: right;\n  color: #cc0000; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".instruction-block {\n  transition: opacity 0.5s linear 0.5s;\n  opacity: 1; }\n  .instruction-block .contents {\n    overflow: hidden;\n    padding: 0 1em 0 1em;\n    min-width: 15em;\n    margin-bottom: 1em;\n    background: #99ddff;\n    background: linear-gradient(135deg, transparent 0.6em, #99ddff 0) top left, linear-gradient(225deg, transparent 0.6em, #99ddff 0) top right, linear-gradient(315deg, transparent 0.6em, #99ddff 0) bottom right, linear-gradient(45deg, transparent 0.6em, #99ddff 0) bottom left;\n    background-size: 51% 51%;\n    background-repeat: no-repeat; }\n  .instruction-block .collapsible-container {\n    transition: height 1s;\n    overflow: visible; }\n    .instruction-block .collapsible-container.collapsing {\n      transition: height 1s linear 0.5s; }\n  .instruction-block.hidden {\n    opacity: 0; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".multilingual-text-field {\n  margin-bottom: 1em; }\n  .multilingual-text-field label {\n    display: block;\n    font-weight: 600; }\n  .multilingual-text-field input[type=text],\n  .multilingual-text-field textarea {\n    display: block;\n    width: 100%;\n    transition: border-color 1s ease-out;\n    border: 1px solid #000000;\n    font-size: 1em;\n    margin-top: 2px;\n    margin-bottom: 0;\n    padding: 2px 2px 1px 4px; }\n  .multilingual-text-field textarea {\n    resize: none; }\n  .multilingual-text-field.multiple-languages input[type=text],\n  .multilingual-text-field.multiple-languages textarea {\n    border-bottom: 0;\n    padding-bottom: 2px; }\n  .multilingual-text-field .tabs {\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    background-color: #000000;\n    border: 1px solid #000000;\n    border-top: 0;\n    transition: border-color 1s ease-out; }\n  .multilingual-text-field .tab {\n    flex: 1 1 auto;\n    text-align: center;\n    font-variant: small-caps;\n    color: #ffffff;\n    font-size: 0.8em;\n    padding: 0.25em 0 0.25em 0;\n    transition: font-size 0.25s;\n    cursor: pointer; }\n    .multilingual-text-field .tab.selected {\n      color: #000000;\n      background-size: 100% 100%;\n      background-repeat: no-repeat;\n      background: linear-gradient(45deg, transparent 1.2em, #fff 0) bottom left;\n      cursor: default; }\n      .multilingual-text-field .tab.selected:first-child {\n        background: linear-gradient(315deg, transparent 1.2em, #fff 0) bottom right; }\n  .multilingual-text-field .bubble {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -3em; }\n    .multilingual-text-field .bubble .arrow {\n      position: absolute;\n      top: 0;\n      left: 8px;\n      width: 0;\n      height: 0;\n      border: 8px solid transparent;\n      border-bottom-color: #e0e0e0;\n      border-top: 0;\n      margin-left: -8px;\n      margin-top: -8px; }\n    .multilingual-text-field .bubble .box {\n      background: #e0e0e0;\n      box-shadow: 3px 3px 3px 0px rgba(0, 0, 0, 0.5);\n      padding: 6px 4px 4px 4px;\n      margin-left: 1em;\n      margin-right: 1em; }\n  .multilingual-text-field.readonly input[type=text],\n  .multilingual-text-field.readonly textarea {\n    border-color: #ffffff;\n    cursor: text;\n    outline: none; }\n  .multilingual-text-field.readonly .tabs {\n    background-color: #ffffff;\n    border-color: #ffffff; }\n  .multilingual-text-field.readonly .tab {\n    color: #999999; }\n    .multilingual-text-field.readonly .tab .selected {\n      color: #000000; }\n  .multilingual-text-field.collapsed .tab {\n    font-size: 0; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".navigation-tree {\n  position: relative; }\n  .navigation-tree .level1 {\n    font-size: 1.4em;\n    padding-left: 2em;\n    margin-bottom: 0.5em; }\n  .navigation-tree .level2 {\n    font-size: 0.8em;\n    padding-left: 0.5em;\n    margin-top: 0.2em;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap; }\n  .navigation-tree .level3 {\n    font-size: 0.95em;\n    padding-left: 0.6em;\n    margin-top: 0.2em; }\n  .navigation-tree .level4 {\n    font-size: 0.95em;\n    padding-left: 0.5em;\n    margin-top: 0.2em;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap; }\n  .navigation-tree A {\n    cursor: default; }\n    .navigation-tree A:link, .navigation-tree A:visited {\n      color: #ffffff;\n      text-decoration: none;\n      cursor: pointer; }\n      .navigation-tree A:link:hover, .navigation-tree A:visited:hover {\n        color: #99ddff; }\n  .navigation-tree .collapsible-container {\n    transition: height .25s; }\n  .navigation-tree .arrow {\n    position: absolute;\n    font-size: 1.2em;\n    left: 16px;\n    opacity: 1;\n    transition: top 0.5s, opacity 0.8s; }\n    .navigation-tree .arrow .second, .navigation-tree .arrow .third, .navigation-tree .arrow .fourth {\n      position: absolute;\n      transition: left 0.3s; }\n    .navigation-tree .arrow.extending .second, .navigation-tree .arrow.extending .third, .navigation-tree .arrow.extending .fourth {\n      transition: left 0.3s linear 0.3s; }\n    .navigation-tree .arrow.retracting {\n      transition: top 0.5s linear 0.2s, opacity 0.8s linear 0.2s; }\n    .navigation-tree .arrow.zero {\n      visibility: hidden;\n      opacity: 0; }\n    .navigation-tree .arrow.one .second, .navigation-tree .arrow.one .third, .navigation-tree .arrow.one .fourth {\n      left: 0px; }\n    .navigation-tree .arrow.two .second, .navigation-tree .arrow.two .third, .navigation-tree .arrow.two .fourth {\n      left: 0.5em; }\n    .navigation-tree .arrow.three .second {\n      left: 0.5em; }\n    .navigation-tree .arrow.three .third, .navigation-tree .arrow.three .fourth {\n      left: 1em; }\n    .navigation-tree .arrow.four .second {\n      left: 0.5em; }\n    .navigation-tree .arrow.four .third {\n      left: 1em; }\n    .navigation-tree .arrow.four .fourth {\n      left: 1.5em; }\n  .navigation-tree.disabled A {\n    color: #2483b3; }\n  .navigation-tree.disabled .arrow {\n    opacity: 0; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".option-list {\n  margin-bottom: 1em; }\n  .option-list label {\n    display: block;\n    font-weight: 600; }\n  .option-list .container {\n    margin-top: 3px;\n    border: 1px solid #000000;\n    transition: border-color 1s ease-out;\n    max-height: 30em;\n    overflow: auto;\n    clear: both; }\n  .option-list .sortable-table TD {\n    padding-left: 4px; }\n  .option-list .badge {\n    float: right;\n    margin-top: 0.1em; }\n    .option-list .badge.add {\n      color: #009900; }\n    .option-list .badge.remove {\n      color: #cc0000; }\n  .option-list.readonly .container {\n    border-color: #ffffff; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".profile-image.small {\n  width: 1.5em;\n  height: 1.5em;\n  vertical-align: middle; }\n\n.profile-image.large {\n  width: 6em;\n  height: 6em;\n  vertical-align: middle; }\n\nsvg.profile-image {\n  background-color: #999999; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".push-button {\n  font-size: 1.2em;\n  padding: 0.14em 0.5em 0.14em 0.5em;\n  background-color: #cccccc;\n  border: 2px outset #dddddd;\n  color: #000000; }\n  .push-button:disabled {\n    color: #999999; }\n  .push-button.emphasis {\n    color: #ffffff;\n    background-color: #006699;\n    border: 2px outset #0088cc; }\n    .push-button.emphasis:disabled {\n      color: #5c8599; }\n  .push-button.danger {\n    color: #ffffff;\n    background-color: #cc2929;\n    border: 2px outset #ff3333; }\n    .push-button.danger:disabled {\n      color: #cc7a7a; }\n  .push-button:active {\n    border-style: inset; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".side-navigation {\n  flex: 1 1 auto;\n  position: relative;\n  color: #fff;\n  background-color: #006699;\n  min-width: 15em;\n  max-width: 20em; }\n  .side-navigation HEADER {\n    cursor: pointer;\n    overflow: hidden;\n    margin-bottom: 1em; }\n  .side-navigation .logo {\n    float: left;\n    margin: 10px 16px 8px 16px;\n    width: 32px;\n    height: 40px; }\n  .side-navigation .app-name {\n    text-transform: uppercase;\n    opacity: 1;\n    transition: opacity 1s ease-out 0.6s; }\n  .side-navigation .navigation-tree {\n    opacity: 1;\n    transition: opacity 1s ease-out 1s; }\n  .side-navigation .bottom-buttons {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    background-color: #005580;\n    transition: bottom 1s linear 1s; }\n    .side-navigation .bottom-buttons .button {\n      position: relative;\n      float: left; }\n      .side-navigation .bottom-buttons .button.country .label {\n        border-left: 1px solid #006699; }\n      .side-navigation .bottom-buttons .button.user {\n        float: right; }\n        .side-navigation .bottom-buttons .button.user .label {\n          border-left: 1px solid #006699; }\n        .side-navigation .bottom-buttons .button.user .window-container {\n          left: auto;\n          right: 0.1em; }\n      .side-navigation .bottom-buttons .button .tooltip .label {\n        display: inline-block;\n        color: #0077b3;\n        padding: 0.4em 0.5em 0.3em 0.5em; }\n      .side-navigation .bottom-buttons .button .tooltip.live .label {\n        cursor: pointer; }\n        .side-navigation .bottom-buttons .button .tooltip.live .label:hover {\n          color: #99ddff; }\n      .side-navigation .bottom-buttons .button .tooltip .item {\n        color: #777777;\n        margin-top: 0.25em;\n        margin-right: 0.25em;\n        cursor: pointer; }\n        .side-navigation .bottom-buttons .button .tooltip .item .fa {\n          visibility: hidden; }\n        .side-navigation .bottom-buttons .button .tooltip .item.selected {\n          cursor: default;\n          color: #0077b3; }\n          .side-navigation .bottom-buttons .button .tooltip .item.selected .fa {\n            visibility: visible; }\n  .side-navigation.hidden .app-name, .side-navigation.hidden .navigation-tree {\n    opacity: 0; }\n  .side-navigation.hidden .bottom-buttons {\n    bottom: -2em; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".sign-off-menu {\n  text-align: center;\n  padding-top: 0.25em; }\n  .sign-off-menu A {\n    display: block;\n    cursor: pointer; }\n    .sign-off-menu A:link, .sign-off-menu A:visited {\n      color: #777777;\n      text-decoration: none; }\n    .sign-off-menu A:hover {\n      color: #004466; }\n  .sign-off-menu .name {\n    padding: 0.5em 0.25em 0.25em 0.25em;\n    text-align: center; }\n  .sign-off-menu .sign-off {\n    text-align: center;\n    padding: 0.5em 0.25em 0 0.25em;\n    border-top: 1px solid #dddddd;\n    color: #777777;\n    cursor: pointer; }\n    .sign-off-menu .sign-off:hover {\n      color: #004466; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".sortable-table {\n  width: 100%;\n  border-collapse: collapse;\n  table-layout: fixed; }\n  .sortable-table TH {\n    text-align: left;\n    cursor: pointer;\n    border-bottom: 1px solid #000000;\n    border-top: 1px solid #000000;\n    padding: 0.2em 0.4em 0.1em 0.4em; }\n    .sortable-table TH .arrow {\n      display: none;\n      margin-left: 0.5em; }\n  .sortable-table TH.asc .arrow.down {\n    display: inline; }\n  .sortable-table TH.desc .arrow.up {\n    display: inline; }\n  .sortable-table TBODY TD {\n    padding: 0.3em 0.4em 0.2em 0.4em;\n    word-wrap: break-word;\n    transition: padding-top 0.5s, padding-bottom 0.5s; }\n  .sortable-table TBODY TR {\n    background-color: #ffffff;\n    transition: background-color 0.5s, opacity 0.5s; }\n    .sortable-table TBODY TR.pending {\n      opacity: 0.5 !important; }\n    .sortable-table TBODY TR.disabled {\n      opacity: 0.3 !important; }\n    .sortable-table TBODY TR.deleted {\n      opacity: 0.15 !important; }\n  .sortable-table TBODY TR:nth-child(even) {\n    background-color: #eeeeee; }\n  .sortable-table .collapsible-container {\n    transition: height 0.5s; }\n  .sortable-table A:link, .sortable-table A:visited {\n    color: #000000;\n    text-decoration: none; }\n    .sortable-table A:link:hover, .sortable-table A:visited:hover {\n      color: #004466; }\n  .sortable-table.expandable TBODY TR {\n    background-color: #ffffff; }\n    .sortable-table.expandable TBODY TR.collapsed {\n      opacity: 0; }\n      .sortable-table.expandable TBODY TR.collapsed TD {\n        padding-top: 0;\n        padding-bottom: 0; }\n    .sortable-table.expandable TBODY TR.expanded {\n      opacity: 1; }\n      .sortable-table.expandable TBODY TR.expanded TD {\n        padding-top: 0.3em;\n        padding-bottom: 0.2em; }\n  .sortable-table.selectable TBODY TR {\n    cursor: pointer; }\n    .sortable-table.selectable TBODY TR.selected {\n      background-color: #99ddff;\n      opacity: 1 !important; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".task-alert-bar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #005580;\n  padding: 0.4em 0.5em 0.3em 0.5em;\n  border-left: 1px solid #006699;\n  text-align: right;\n  transition: bottom 0.4s; }\n  .task-alert-bar .progress-bar-frame {\n    display: inline-block;\n    width: 10em;\n    border: 1px solid #0077b3;\n    margin-left: 0.5em; }\n    .task-alert-bar .progress-bar-frame .bar {\n      background-color: #0077b3;\n      height: 0.6em; }\n  .task-alert-bar.hidden {\n    bottom: -1.8em; }\n  .task-alert-bar A {\n    color: #0077b3; }\n    .task-alert-bar A:link, .task-alert-bar A:visited {\n      text-decoration: none; }\n    .task-alert-bar A:hover {\n      color: #99ddff; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".task-list {\n  max-height: 25em;\n  overflow-y: auto;\n  padding: 0 0.5em 0 0.5em;\n  margin-bottom: 1em; }\n  .task-list .task {\n    clear: both;\n    padding: 0.25em 0.25em 0.2em 0.25em;\n    overflow: hidden; }\n    .task-list .task .summary {\n      cursor: pointer; }\n    .task-list .task .start-time {\n      float: left;\n      margin-right: 1em; }\n    .task-list .task .message {\n      float: left;\n      margin-right: 1em; }\n      .task-list .task .message .fa {\n        margin-left: 0.5em; }\n    .task-list .task .duration {\n      display: inline-block;\n      float: right;\n      margin-left: 1em; }\n    .task-list .task .progress-bar-frame {\n      display: inline-block;\n      float: right;\n      width: 7em;\n      border: 1px solid #000000;\n      margin-top: 0.2em;\n      margin-left: 0.5em; }\n      .task-list .task .progress-bar-frame .bar {\n        background-color: #0077b3;\n        height: 0.6em; }\n    .task-list .task.expanded {\n      background: #99ddff; }\n    .task-list .task .details {\n      clear: both;\n      margin-top: 0.25em;\n      padding-top: 0.25em; }\n      .task-list .task .details .item {\n        display: inline-block;\n        color: #000000;\n        max-width: 8em;\n        padding: 0.15em 0.5em 0.15em 0.5em;\n        margin-right: 0.3em;\n        text-align: center;\n        text-overflow: ellipsis;\n        border: 1px solid black;\n        overflow: hidden;\n        white-space: nowrap; }\n        .task-list .task .details .item.added {\n          background-color: #99ee66; }\n        .task-list .task .details .item.deleted {\n          background-color: #ee3333; }\n        .task-list .task .details .item.modified {\n          background-color: #66aaff; }\n    .task-list .task .error {\n      font-size: 0.8em;\n      clear: both;\n      white-space: pre-wrap;\n      padding-top: 0.35em;\n      padding-bottom: 0.35em;\n      border-top: 1px solid #551111; }\n    .task-list .task.failure {\n      color: #551111; }\n      .task-list .task.failure .progress-bar-frame {\n        border-color: #551111; }\n        .task-list .task.failure .progress-bar-frame .bar {\n          background-color: #ff6666; }\n      .task-list .task.failure .details {\n        border-top-color: #551111; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".text-field {\n  margin-bottom: 1em; }\n  .text-field label {\n    display: block;\n    font-weight: 600; }\n  .text-field input[type=text],\n  .text-field input[type=password],\n  .text-field input[type=email],\n  .text-field textarea {\n    display: block;\n    width: 100%;\n    transition: border-color 1s ease-out;\n    border: 1px solid #000000;\n    font-size: 1em;\n    margin-top: 2px;\n    padding: 2px 2px 1px 4px; }\n  .text-field textarea {\n    resize: none; }\n  .text-field.readonly input[type=text],\n  .text-field.readonly input[type=password],\n  .text-field.readonly input[type=email],\n  .text-field.readonly textarea {\n    border-color: #ffffff;\n    cursor: text;\n    outline: none; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".tooltip {\n  position: relative;\n  display: inline-block; }\n  .tooltip.live .label {\n    cursor: pointer; }\n  .tooltip .window-container {\n    position: absolute;\n    top: 100%;\n    left: 0.5em;\n    width: 50vw;\n    z-index: 100;\n    margin-top: 0.2em; }\n  .tooltip.upward .window-container {\n    top: auto;\n    bottom: 100%;\n    margin-bottom: 0.2em; }\n  .tooltip.leftward .window-container {\n    left: auto;\n    right: 0.3em; }\n    .tooltip.leftward .window-container .window {\n      float: right; }\n  .tooltip .window {\n    display: inline-block;\n    padding: 0.4em 0.5em 0.4em 0.5em;\n    border: 1px solid black;\n    background-color: #ffffff;\n    box-shadow: 1px 1px 3px 0px rgba(0, 0, 0, 0.75); }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".image-cropper {\n  overflow: hidden; }\n  .image-cropper CANVAS {\n    width: 100%;\n    display: block; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".autosize-text-area {\n  position: relative; }\n  .autosize-text-area TEXTAREA {\n    width: 100%;\n    resize: vertical; }\n  .autosize-text-area .shadow {\n    position: absolute;\n    top: 0;\n    left: 0;\n    min-height: 1em !important;\n    max-height: 1em !important;\n    visibility: hidden; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".collapsible-container {\n  transition: height .25s;\n  overflow: hidden; }\n  .collapsible-container .collapsible-contents {\n    overflow: hidden; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n  z-index: 5000; }\n  .overlay .background {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: #000;\n    transition: opacity 0.5s; }\n  .overlay .foreground {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 90%;\n    transition: opacity 0.25s, top 0.25s; }\n  .overlay.show .background {\n    opacity: 0.75; }\n  .overlay.show .foreground {\n    opacity: 1; }\n  .overlay.hide .background {\n    opacity: 0; }\n  .overlay.hide .foreground {\n    top: -30px;\n    opacity: 0; }\n",""])},function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,".upload-progress {\n  position: fixed;\n  right: 1em;\n  bottom: 3em;\n  font-size: 1.2em;\n  font-weight: bold;\n  color: #eeeeee;\n  background-color: #aa0000;\n  padding: 0.5em 0.5em 0.5em 0.5em; }\n",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var n=r(264);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(265);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(266);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(267);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(268);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(269);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(270);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(271);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(272);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(273);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(274);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(275);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(276);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(277);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(278);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(279);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(280);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(281);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(282);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(283);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(284);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(285);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(286);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(287);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(288);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(289);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(290);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(291);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(292);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(293);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(294);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(295);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(296);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(297);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(298);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(299);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(300);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(301);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(302);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(303);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(304);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(305);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(306);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(307);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(308);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(309);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(310);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(3)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){function n(e){return i.createElement("svg",e,[i.createElement("polygon",{points:"280,653 373,679 255,840",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:0}),i.createElement("polygon",{points:"102,634 298,439 373,430 297,540 447,585 387,674 281,646 285,575",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:1}),i.createElement("polygon",{points:"312,528 386,425 431,428",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:2}),i.createElement("polygon",{points:"332,520 485,397 513,414 496,435",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:3}),i.createElement("polygon",{points:"316,534 492,443 467,467 521,509 515,543 565,587 560,592 498,549",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:4}),i.createElement("polygon",{points:"318,542 496,557 555,595 548,605",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:5}),i.createElement("polygon",{points:"550,611 574,592 599,618",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:6}),i.createElement("polygon",{points:"476,466 543,399 521,500",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:7}),i.createElement("polygon",{points:"525,524 555,392 600,427",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:8}),i.createElement("polygon",{points:"522,542 605,435 597,604",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:9}),i.createElement("polygon",{points:"613,444 743,521 685,543 775,833 554,617 605,625",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:10}),i.createElement("polygon",{points:"565,318 620,318 655,457 613,434",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:11}),i.createElement("polygon",{points:"629,310 695,204 751,184 733,267 740,508 661,462",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:12}),i.createElement("polygon",{points:"757,183 869,81 776,196",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:13}),i.createElement("polygon",{points:"743,273 755,194 848,270 853,338",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:14})])}var i=r(0);n.displayName="Unicorn",n.defaultProps={version:"1.1",viewBox:"0 0 1000 1000"},e.exports=n,n.default=n},,,,,,,,,,,,,,,,,,function(e,t,r){function n(e){return r(i(e))}function i(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var s={"./project.en.md":170,"./repo.en.md":171,"./role.en.md":172,"./server.en.md":173,"./settings.en.md":174,"./user.en.md":175};n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id=575},function(e,t,r){function n(e){return r(i(e))}function i(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var s={"./project.en.md":170,"./repo.en.md":171,"./role.en.md":172,"./server.en.md":173,"./settings.en.md":174,"./user.en.md":175};n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id=576}],[229]);