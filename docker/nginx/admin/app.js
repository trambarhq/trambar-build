webpackJsonp(["app"],{"../../common/node_modules/asap/browser-asap.js":function(e,t,n){"use strict";function r(){if(c.length)throw c.shift()}function s(e){var t;t=a.length?a.pop():new o,t.task=e,i(t)}function o(){this.task=null}var i=n("../../common/node_modules/asap/browser-raw.js"),a=[],c=[],l=i.makeRequestCallFromTimer(r);e.exports=s,o.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(c.push(e),l())}finally{this.task=null,a[a.length]=this}}},"../../common/node_modules/asap/browser-raw.js":function(e,t,n){"use strict";(function(t){function n(e){i.length||(o(),a=!0),i[i.length]=e}function r(){for(;c<i.length;){var e=c;if(c+=1,i[e].call(),c>l){for(var t=0,n=i.length-c;t<n;t++)i[t]=i[t+c];i.length-=c,c=0}}i.length=0,c=0,a=!1}function s(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,i=[],a=!1,c=0,l=1024,u=void 0!==t?t:self,d=u.MutationObserver||u.WebKitMutationObserver;o="function"==typeof d?function(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):s(r),n.requestFlush=o,n.makeRequestCallFromTimer=s}).call(t,n("../node_modules/webpack/buildin/global.js"))},"../../common/node_modules/async-do-while/index.js":function(e,t,n){function r(){var e=this;return o.resolve().then(function(){return e.begin()}).then(function(){return e.loop()}).catch(function(e){if(e!==d)throw e}).then(function(){return e.return()})}function s(){}var o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=null,a=null,c=null,l=null,u="";t.begin=function(e){if(a||c)throw new Error("Cannot call begin() after while() or do()");if(!(e instanceof Function))throw new Error("Argument must be a function");i=e},t.while=function(e){if(c)throw new Error("Cannot call while() consecutively");if(!(e instanceof Function))throw new Error("Argument must be a function");a&&(u="do-while"),c=e},t.do=function(e){if(a)throw new Error("Cannot call do() consecutively");if(!(e instanceof Function))throw new Error("Argument must be a function");c&&(u="while-do"),a=e},t.return=function(e){if(!a||!c)throw new Error("Cannot call return() without calling while() and do() beforehand");if(!(e instanceof Function))throw new Error("Argument must be a function");l=e},t.end=function(){if(!a||!c)throw new Error("Cannot call end() without calling while() and do() beforehand");var e;"while-do"===u?e=function(){var e=this;return o.resolve(e.while()).then(function(t){if(t)return o.resolve(e.do()).then(function(){return e.loop()})})}:"do-while"===u&&(e=function(){var e=this;return o.resolve(e.do()).then(function(){return o.resolve(e.while()).then(function(t){if(t)return e.loop()})})});var t={begin:i||s,do:a,while:c,return:l||s,loop:e};return i=null,a=null,c=null,l=null,u="",r.call(t)};var d=new Error;t.break=function(){throw d}},"../../common/node_modules/b64-to-blob/b64toBlob.js":function(e,t,n){var r,s,o;!function(n,i,a){s=[],r=a,void 0!==(o="function"==typeof r?r.apply(t,s):r)&&(e.exports=o)}(0,0,function(){"use strict";return function(e,t,n){t=t||"",n=n||512;for(var r=atob(e),s=[],o=0;o<r.length;o+=n){for(var i=r.slice(o,o+n),a=new Array(i.length),c=0;c<i.length;c++)a[c]=i.charCodeAt(c);var l=new Uint8Array(a);s.push(l)}return new Blob(s,{type:t})}})},"../../common/node_modules/d/auto-bind.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/object/copy.js"),o=n("../../common/node_modules/es5-ext/object/normalize-options.js"),i=n("../../common/node_modules/es5-ext/object/valid-callable.js"),a=n("../../common/node_modules/es5-ext/object/map.js"),c=n("../../common/node_modules/es5-ext/object/valid-callable.js"),l=n("../../common/node_modules/es5-ext/object/valid-value.js"),u=Function.prototype.bind,d=Object.defineProperty,m=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,o=l(t)&&c(t.value);return r=s(t),delete r.writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&m.call(this,e)?o:(t.value=u.call(o,n.resolveContext?n.resolveContext(this):this),d(this,e,t),this[e])},r},e.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&i(t.resolveContext),a(e,function(e,n){return r(n,e,t)})}},"../../common/node_modules/d/index.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/object/assign/index.js"),o=n("../../common/node_modules/es5-ext/object/normalize-options.js"),i=n("../../common/node_modules/es5-ext/object/is-callable.js"),a=n("../../common/node_modules/es5-ext/string/#/contains/index.js");r=e.exports=function(e,t){var n,r,i,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=i=!0,r=!1):(n=a.call(e,"c"),r=a.call(e,"e"),i=a.call(e,"w")),l={value:t,configurable:n,enumerable:r,writable:i},c?s(o(c),l):l},r.gs=function(e,t,n){var r,c,l,u;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:i(t)?null==n?n=void 0:i(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(r=!0,c=!1):(r=a.call(e,"c"),c=a.call(e,"e")),u={get:t,set:n,configurable:r,enumerable:c},l?s(o(l),u):u}},"../../common/node_modules/es5-ext/array/#/clear.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-value.js");e.exports=function(){return r(this).length=0,this}},"../../common/node_modules/es5-ext/array/#/e-index-of.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/number/is-nan/index.js"),s=n("../../common/node_modules/es5-ext/number/to-pos-integer.js"),o=n("../../common/node_modules/es5-ext/object/valid-value.js"),i=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,c=Math.abs,l=Math.floor;e.exports=function(e){var t,n,u,d;if(!r(e))return i.apply(this,arguments);for(n=s(o(this).length),u=arguments[1],u=isNaN(u)?0:u>=0?l(u):s(this.length)-l(c(u)),t=u;t<n;++t)if(a.call(this,t)&&(d=this[t],r(d)))return t;return-1}},"../../common/node_modules/es5-ext/array/from/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/array/from/is-implemented.js")()?Array.from:n("../../common/node_modules/es5-ext/array/from/shim.js")},"../../common/node_modules/es5-ext/array/from/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},"../../common/node_modules/es5-ext/array/from/shim.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es6-symbol/index.js").iterator,s=n("../../common/node_modules/es5-ext/function/is-arguments.js"),o=n("../../common/node_modules/es5-ext/function/is-function.js"),i=n("../../common/node_modules/es5-ext/number/to-pos-integer.js"),a=n("../../common/node_modules/es5-ext/object/valid-callable.js"),c=n("../../common/node_modules/es5-ext/object/valid-value.js"),l=n("../../common/node_modules/es5-ext/object/is-value.js"),u=n("../../common/node_modules/es5-ext/string/is-string.js"),d=Array.isArray,m=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;e.exports=function(e){var t,n,f,g,v,b,y,j,w,E,C=arguments[1],x=arguments[2];if(e=Object(c(e)),l(C)&&a(C),this&&this!==Array&&o(this))t=this;else{if(!C){if(s(e))return 1!==(v=e.length)?Array.apply(null,e):(g=new Array(1),g[0]=e[0],g);if(d(e)){for(g=new Array(v=e.length),n=0;n<v;++n)g[n]=e[n];return g}}g=[]}if(!d(e))if(void 0!==(w=e[r])){for(y=a(w).call(e),t&&(g=new t),j=y.next(),n=0;!j.done;)E=C?m.call(C,x,j.value,n):j.value,t?(p.value=E,h(g,n,p)):g[n]=E,j=y.next(),++n;v=n}else if(u(e)){for(v=e.length,t&&(g=new t),n=0,f=0;n<v;++n)E=e[n],n+1<v&&(b=E.charCodeAt(0))>=55296&&b<=56319&&(E+=e[++n]),E=C?m.call(C,x,E,f):E,t?(p.value=E,h(g,f,p)):g[f]=E,++f;v=f}if(void 0===v)for(v=i(e.length),t&&(g=new t(v)),n=0;n<v;++n)E=C?m.call(C,x,e[n],n):e[n],t?(p.value=E,h(g,n,p)):g[n]=E;return t&&(p.value=null,g.length=v),g}},"../../common/node_modules/es5-ext/array/to-array.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/from/index.js"),s=Array.isArray;e.exports=function(e){return s(e)?e:r(e)}},"../../common/node_modules/es5-ext/error/custom.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/assign/index.js"),s=n("../../common/node_modules/es5-ext/object/is-object.js"),o=n("../../common/node_modules/es5-ext/object/is-value.js"),i=Error.captureStackTrace;t=e.exports=function(e){var n=new Error(e),a=arguments[1],c=arguments[2];return o(c)||s(a)&&(c=a,a=null),o(c)&&r(n,c),o(a)&&(n.code=a),i&&i(n,t),n}},"../../common/node_modules/es5-ext/function/#/partial.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-callable.js"),s=n("../../common/node_modules/es5-ext/array/from/index.js"),o=n("../../common/node_modules/es5-ext/function/_define-length.js"),i=Function.prototype.apply;e.exports=function(){var e=r(this),t=s(arguments);return o(function(){return i.call(e,this,t.concat(s(arguments)))},e.length-t.length)}},"../../common/node_modules/es5-ext/function/_define-length.js":function(e,t,n){"use strict";var r,s,o,i,a=n("../../common/node_modules/es5-ext/number/to-pos-integer.js"),c=function(e,t){return t};try{Object.defineProperty(c,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===c.length?(r={configurable:!0,writable:!1,enumerable:!1},s=Object.defineProperty,e.exports=function(e,t){return t=a(t),e.length===t?e:(r.value=t,s(e,"length",r))}):(i=n("../../common/node_modules/es5-ext/object/mixin.js"),o=function(){var e=[];return function(t){var n,r=0;if(e[t])return e[t];for(n=[];t--;)n.push("a"+(++r).toString(36));return new Function("fn","return function ("+n.join(", ")+") { return fn.apply(this, arguments); };")}}(),e.exports=function(e,t){var n;if(t=a(t),e.length===t)return e;n=o(t)(e);try{i(n,e)}catch(e){}return n})},"../../common/node_modules/es5-ext/function/is-arguments.js":function(e,t,n){"use strict";var r=Object.prototype.toString,s=r.call(function(){return arguments}());e.exports=function(e){return r.call(e)===s}},"../../common/node_modules/es5-ext/function/is-function.js":function(e,t,n){"use strict";var r=Object.prototype.toString,s=r.call(n("../../common/node_modules/es5-ext/function/noop.js"));e.exports=function(e){return"function"==typeof e&&r.call(e)===s}},"../../common/node_modules/es5-ext/function/noop.js":function(e,t,n){"use strict";e.exports=function(){}},"../../common/node_modules/es5-ext/math/sign/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/math/sign/is-implemented.js")()?Math.sign:n("../../common/node_modules/es5-ext/math/sign/shim.js")},"../../common/node_modules/es5-ext/math/sign/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},"../../common/node_modules/es5-ext/math/sign/shim.js":function(e,t,n){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},"../../common/node_modules/es5-ext/number/is-nan/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/number/is-nan/is-implemented.js")()?Number.isNaN:n("../../common/node_modules/es5-ext/number/is-nan/shim.js")},"../../common/node_modules/es5-ext/number/is-nan/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},"../../common/node_modules/es5-ext/number/is-nan/shim.js":function(e,t,n){"use strict";e.exports=function(e){return e!==e}},"../../common/node_modules/es5-ext/number/to-integer.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/math/sign/index.js"),s=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?r(e)*o(s(e)):e)}},"../../common/node_modules/es5-ext/number/to-pos-integer.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/number/to-integer.js"),s=Math.max;e.exports=function(e){return s(0,r(e))}},"../../common/node_modules/es5-ext/object/_iterate.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-callable.js"),s=n("../../common/node_modules/es5-ext/object/valid-value.js"),o=Function.prototype.bind,i=Function.prototype.call,a=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,l){var u,d=arguments[2],m=arguments[3];return n=Object(s(n)),r(l),u=a(n),m&&u.sort("function"==typeof m?o.call(m,n):void 0),"function"!=typeof e&&(e=u[e]),i.call(e,u,function(e,r){return c.call(n,e)?i.call(l,d,n[e],e,n,r):t})}}},"../../common/node_modules/es5-ext/object/assign/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/object/assign/is-implemented.js")()?Object.assign:n("../../common/node_modules/es5-ext/object/assign/shim.js")},"../../common/node_modules/es5-ext/object/assign/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},"../../common/node_modules/es5-ext/object/assign/shim.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/keys/index.js"),s=n("../../common/node_modules/es5-ext/object/valid-value.js"),o=Math.max;e.exports=function(e,t){var n,i,a,c=o(arguments.length,2);for(e=Object(s(e)),a=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},i=1;i<c;++i)t=arguments[i],r(t).forEach(a);if(void 0!==n)throw n;return e}},"../../common/node_modules/es5-ext/object/copy.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/from/index.js"),s=n("../../common/node_modules/es5-ext/object/assign/index.js"),o=n("../../common/node_modules/es5-ext/object/valid-value.js");e.exports=function(e){var t=Object(o(e)),n=arguments[1],i=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?r(n,function(t){(i.ensure||t in e)&&(a[t]=e[t])}):s(a,e),a}},"../../common/node_modules/es5-ext/object/create.js":function(e,t,n){"use strict";var r,s=Object.create;n("../../common/node_modules/es5-ext/object/set-prototype-of/is-implemented.js")()||(r=n("../../common/node_modules/es5-ext/object/set-prototype-of/shim.js")),e.exports=function(){var e,t,n;return r?1!==r.level?s:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return s(null===t?e:t,n)}):s}()},"../../common/node_modules/es5-ext/object/for-each.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/object/_iterate.js")("forEach")},"../../common/node_modules/es5-ext/object/is-callable.js":function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},"../../common/node_modules/es5-ext/object/is-object.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-value.js"),s={function:!0,object:!0};e.exports=function(e){return r(e)&&s[typeof e]||!1}},"../../common/node_modules/es5-ext/object/is-value.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/function/noop.js")();e.exports=function(e){return e!==r&&null!==e}},"../../common/node_modules/es5-ext/object/keys/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/object/keys/is-implemented.js")()?Object.keys:n("../../common/node_modules/es5-ext/object/keys/shim.js")},"../../common/node_modules/es5-ext/object/keys/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},"../../common/node_modules/es5-ext/object/keys/shim.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-value.js"),s=Object.keys;e.exports=function(e){return s(r(e)?Object(e):e)}},"../../common/node_modules/es5-ext/object/map.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-callable.js"),s=n("../../common/node_modules/es5-ext/object/for-each.js"),o=Function.prototype.call;e.exports=function(e,t){var n={},i=arguments[2];return r(t),s(e,function(e,r,s,a){n[r]=o.call(t,i,e,r,s,a)}),n}},"../../common/node_modules/es5-ext/object/mixin.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-value.js"),s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols;e.exports=function(e,t){var n,c=Object(r(t));if(e=Object(r(e)),i(c).forEach(function(r){try{s(e,r,o(t,r))}catch(e){n=e}}),"function"==typeof a&&a(c).forEach(function(r){try{s(e,r,o(t,r))}catch(e){n=e}}),void 0!==n)throw n;return e}},"../../common/node_modules/es5-ext/object/normalize-options.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-value.js"),s=Array.prototype.forEach,o=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return s.call(arguments,function(e){r(e)&&i(Object(e),t)}),t}},"../../common/node_modules/es5-ext/object/primitive-set.js":function(e,t,n){"use strict";var r=Array.prototype.forEach,s=Object.create;e.exports=function(e){var t=s(null);return r.call(arguments,function(e){t[e]=!0}),t}},"../../common/node_modules/es5-ext/object/set-prototype-of/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/object/set-prototype-of/is-implemented.js")()?Object.setPrototypeOf:n("../../common/node_modules/es5-ext/object/set-prototype-of/shim.js")},"../../common/node_modules/es5-ext/object/set-prototype-of/is-implemented.js":function(e,t,n){"use strict";var r=Object.create,s=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&s(e(t(null),o))===o}},"../../common/node_modules/es5-ext/object/set-prototype-of/shim.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/object/is-object.js"),o=n("../../common/node_modules/es5-ext/object/valid-value.js"),i=Object.prototype.isPrototypeOf,a=Object.defineProperty,c={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(o(e),null===t||s(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var s;return r(t,n),s=i.call(e.nullPolyfill,t),s&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,s&&a(e.nullPolyfill,"__proto__",c),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),n("../../common/node_modules/es5-ext/object/create.js")},"../../common/node_modules/es5-ext/object/valid-callable.js":function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},"../../common/node_modules/es5-ext/object/valid-object.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-object.js");e.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},"../../common/node_modules/es5-ext/object/valid-value.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-value.js");e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},"../../common/node_modules/es5-ext/object/validate-stringifiable-value.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-value.js"),s=n("../../common/node_modules/es5-ext/object/validate-stringifiable.js");e.exports=function(e){return s(r(e))}},"../../common/node_modules/es5-ext/object/validate-stringifiable.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-callable.js");e.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},"../../common/node_modules/es5-ext/safe-to-string.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/is-callable.js");e.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},"../../common/node_modules/es5-ext/string/#/contains/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es5-ext/string/#/contains/is-implemented.js")()?String.prototype.contains:n("../../common/node_modules/es5-ext/string/#/contains/shim.js")},"../../common/node_modules/es5-ext/string/#/contains/is-implemented.js":function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},"../../common/node_modules/es5-ext/string/#/contains/shim.js":function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},"../../common/node_modules/es5-ext/string/is-string.js":function(e,t,n){"use strict";var r=Object.prototype.toString,s=r.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===s)||!1}},"../../common/node_modules/es5-ext/string/random-uniq.js":function(e,t,n){"use strict";var r=Object.create(null),s=Math.random;e.exports=function(){var e;do{e=s().toString(36).slice(2)}while(r[e]);return e}},"../../common/node_modules/es5-ext/to-short-string-representation.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/safe-to-string.js"),s=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=r(e);return t.length>100&&(t=t.slice(0,99)+"â€¦"),t=t.replace(s,function(e){return JSON.stringify(e).slice(1,-1)})}},"../../common/node_modules/es6-iterator/array.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/object/set-prototype-of/index.js"),o=n("../../common/node_modules/es5-ext/string/#/contains/index.js"),i=n("../../common/node_modules/d/index.js"),a=n("../../common/node_modules/es6-symbol/index.js"),c=n("../../common/node_modules/es6-iterator/index.js"),l=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");c.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",l(this,"__kind__",i("",t))},s&&s(r,c),delete r.prototype.constructor,r.prototype=Object.create(c.prototype,{_resolve:i(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),l(r.prototype,a.toStringTag,i("c","Array Iterator"))},"../../common/node_modules/es6-iterator/for-of.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/function/is-arguments.js"),s=n("../../common/node_modules/es5-ext/object/valid-callable.js"),o=n("../../common/node_modules/es5-ext/string/is-string.js"),i=n("../../common/node_modules/es6-iterator/get.js"),a=Array.isArray,c=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var n,u,d,m,p,h,f,g,v=arguments[2];if(a(e)||r(e)?n="array":o(e)?n="string":e=i(e),s(t),d=function(){m=!0},"array"===n)return void l.call(e,function(e){return c.call(t,v,e,d),m});if("string"!==n)for(u=e.next();!u.done;){if(c.call(t,v,u.value,d),m)return;u=e.next()}else for(h=e.length,p=0;p<h&&(f=e[p],p+1<h&&(g=f.charCodeAt(0))>=55296&&g<=56319&&(f+=e[++p]),c.call(t,v,f,d),!m);++p);}},"../../common/node_modules/es6-iterator/get.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/function/is-arguments.js"),s=n("../../common/node_modules/es5-ext/string/is-string.js"),o=n("../../common/node_modules/es6-iterator/array.js"),i=n("../../common/node_modules/es6-iterator/string.js"),a=n("../../common/node_modules/es6-iterator/valid-iterable.js"),c=n("../../common/node_modules/es6-symbol/index.js").iterator;e.exports=function(e){return"function"==typeof a(e)[c]?e[c]():r(e)?new o(e):s(e)?new i(e):new o(e)}},"../../common/node_modules/es6-iterator/index.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/array/#/clear.js"),o=n("../../common/node_modules/es5-ext/object/assign/index.js"),i=n("../../common/node_modules/es5-ext/object/valid-callable.js"),a=n("../../common/node_modules/es5-ext/object/valid-value.js"),c=n("../../common/node_modules/d/index.js"),l=n("../../common/node_modules/d/auto-bind.js"),u=n("../../common/node_modules/es6-symbol/index.js"),d=Object.defineProperty,m=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");m(this,{__list__:c("w",a(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(i(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,m(r.prototype,o({_next:c(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:c(function(e){return this.__list__[e]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object "+(this[u.toStringTag]||"Object")+"]"})},l({_onAdd:c(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,"__redo__",c("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:c(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:c(function(){this.__redo__&&s.call(this.__redo__),this.__nextIndex__=0})}))),d(r.prototype,u.iterator,c(function(){return this}))},"../../common/node_modules/es6-iterator/is-iterable.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/function/is-arguments.js"),s=n("../../common/node_modules/es5-ext/object/is-value.js"),o=n("../../common/node_modules/es5-ext/string/is-string.js"),i=n("../../common/node_modules/es6-symbol/index.js").iterator,a=Array.isArray;e.exports=function(e){return!!s(e)&&(!!a(e)||(!!o(e)||(!!r(e)||"function"==typeof e[i])))}},"../../common/node_modules/es6-iterator/string.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/object/set-prototype-of/index.js"),o=n("../../common/node_modules/d/index.js"),i=n("../../common/node_modules/es6-symbol/index.js"),a=n("../../common/node_modules/es6-iterator/index.js"),c=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),c(this,"__length__",o("",e.length))},s&&s(r,a),delete r.prototype.constructor,r.prototype=Object.create(a.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),c(r.prototype,i.toStringTag,o("c","String Iterator"))},"../../common/node_modules/es6-iterator/valid-iterable.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es6-iterator/is-iterable.js");e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},"../../common/node_modules/es6-symbol/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es6-symbol/is-implemented.js")()?Symbol:n("../../common/node_modules/es6-symbol/polyfill.js")},"../../common/node_modules/es6-symbol/is-implemented.js":function(e,t,n){"use strict";var r={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},"../../common/node_modules/es6-symbol/is-symbol.js":function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},"../../common/node_modules/es6-symbol/polyfill.js":function(e,t,n){"use strict";var r,s,o,i,a=n("../../common/node_modules/d/index.js"),c=n("../../common/node_modules/es6-symbol/validate-symbol.js"),l=Object.create,u=Object.defineProperties,d=Object.defineProperty,m=Object.prototype,p=l(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),i=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var n,r,s=0;e[t+(s||"")];)++s;return t+=s||"",e[t]=!0,n="@@"+t,d(m,n,a.gs(null,function(e){r||(r=!0,d(this,n,a(e)),r=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return s(e)},e.exports=s=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?r(t):(n=l(o.prototype),t=void 0===t?"":String(t),u(n,{__description__:a("",t),__name__:a("",h(t))}))},u(s,{for:a(function(e){return p[e]?p[e]:p[e]=s(String(e))}),keyFor:a(function(e){var t;c(e);for(t in p)if(p[t]===e)return t}),hasInstance:a("",r&&r.hasInstance||s("hasInstance")),isConcatSpreadable:a("",r&&r.isConcatSpreadable||s("isConcatSpreadable")),iterator:a("",r&&r.iterator||s("iterator")),match:a("",r&&r.match||s("match")),replace:a("",r&&r.replace||s("replace")),search:a("",r&&r.search||s("search")),species:a("",r&&r.species||s("species")),split:a("",r&&r.split||s("split")),toPrimitive:a("",r&&r.toPrimitive||s("toPrimitive")),toStringTag:a("",r&&r.toStringTag||s("toStringTag")),unscopables:a("",r&&r.unscopables||s("unscopables"))}),u(o.prototype,{constructor:a(s),toString:a("",function(){return this.__name__})}),u(s.prototype,{toString:a(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:a(function(){return c(this)})}),d(s.prototype,s.toPrimitive,a("",function(){var e=c(this);return"symbol"==typeof e?e:e.toString()})),d(s.prototype,s.toStringTag,a("c","Symbol")),d(o.prototype,s.toStringTag,a("c",s.prototype[s.toStringTag])),d(o.prototype,s.toPrimitive,a("c",s.prototype[s.toPrimitive]))},"../../common/node_modules/es6-symbol/validate-symbol.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es6-symbol/is-symbol.js");e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},"../../common/node_modules/es6-weak-map/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/es6-weak-map/is-implemented.js")()?WeakMap:n("../../common/node_modules/es6-weak-map/polyfill.js")},"../../common/node_modules/es6-weak-map/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&("function"==typeof e.set&&(e.set({},1)===e&&("function"==typeof e.delete&&("function"==typeof e.has&&"one"===e.get(t)))))}},"../../common/node_modules/es6-weak-map/is-native-implemented.js":function(e,t,n){"use strict";e.exports=function(){return"function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)}()},"../../common/node_modules/es6-weak-map/polyfill.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/object/set-prototype-of/index.js"),o=n("../../common/node_modules/es5-ext/object/valid-object.js"),i=n("../../common/node_modules/es5-ext/object/valid-value.js"),a=n("../../common/node_modules/es5-ext/string/random-uniq.js"),c=n("../../common/node_modules/d/index.js"),l=n("../../common/node_modules/es6-iterator/get.js"),u=n("../../common/node_modules/es6-iterator/for-of.js"),d=n("../../common/node_modules/es6-symbol/index.js").toStringTag,m=n("../../common/node_modules/es6-weak-map/is-native-implemented.js"),p=Array.isArray,h=Object.defineProperty,f=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=m&&s&&WeakMap!==r?s(new WeakMap,g(this)):this,null!=t&&(p(t)||(t=l(t))),h(e,"__weakMapData__",c("c","$weakMap$"+a())),t?(u(t,function(t){i(t),e.set(t[0],t[1])}),e):e},m&&(s&&s(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:c(r)})),Object.defineProperties(r.prototype,{delete:c(function(e){return!!f.call(o(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:c(function(e){if(f.call(o(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:c(function(e){return f.call(o(e),this.__weakMapData__)}),set:c(function(e,t){return h(o(e),this.__weakMapData__,c("c",t)),this}),toString:c(function(){return"[object WeakMap]"})}),h(r.prototype,d,c("c","WeakMap"))},"../../common/node_modules/event-emitter/index.js":function(e,t,n){"use strict";var r,s,o,i,a,c,l,u=n("../../common/node_modules/d/index.js"),d=n("../../common/node_modules/es5-ext/object/valid-callable.js"),m=Function.prototype.apply,p=Function.prototype.call,h=Object.create,f=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return d(t),v.call(this,"__ee__")?n=this.__ee__:(n=b.value=h(null),f(this,"__ee__",b),b.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},s=function(e,t){var n,s;return d(t),s=this,r.call(this,e,n=function(){o.call(s,e,n),m.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,s,o;if(d(t),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;s=r[o];++o)s!==t&&s.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},i=function(e){var t,n,r,s,o;if(v.call(this,"__ee__")&&(s=this.__ee__[e]))if("object"==typeof s){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(s=s.slice(),t=0;r=s[t];++t)m.call(r,this,o)}else switch(arguments.length){case 1:p.call(s,this);break;case 2:p.call(s,this,arguments[1]);break;case 3:p.call(s,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];m.call(s,this,o)}},a={on:r,once:s,off:o,emit:i},c={on:u(r),once:u(s),off:u(o),emit:u(i)},l=g({},c),e.exports=t=function(e){return null==e?h(l):g(Object(e),c)},t.methods=a},"../../common/node_modules/mark-gor/lib/react-renderer.js":function(e,t,n){function r(){for(var e=0;e<arguments.length;e++)for(var t=arguments[e],n=Object.keys(t),s=0;s<n.length;s++){var o=n[s];this[o]=t[o]}this.options||(this.options=r.defaults)}var s=n("../../common/node_modules/react/react.js");r.defaults={sanitize:!1,langPrefix:"lang-",headerPrefix:""},r.prototype.render=function(e){return this.renderTokens(e)},r.prototype.renderChildren=function(e){return e.children?this.renderTokens(e.children):null},r.prototype.renderTokens=function(e,t){for(var n=[],r=0;r<e.length;r++){var s=this.renderToken(e[r],r);if(s instanceof Array)for(var o=0,i=s;o<i.length;o++)n.push(i[o]);else s&&n.push(s)}return n},r.prototype.renderToken=function(e,t){switch(e.type){case"code":return this.renderCode(e,t);case"blockquote":return this.renderBlockquote(e,t);case"html":return this.renderHtml(e,t);case"heading":return this.renderHeading(e,t);case"hr":return this.renderHorizontalLine(e,t);case"list":return this.renderList(e,t);case"list_item":return this.renderListItem(e,t);case"loose_item":return this.renderLooseItem(e,t);case"paragraph":return this.renderParagraph(e,t);case"table":return this.renderTable(e,t);case"table_header":return this.renderTableHeader(e,t);case"table_row":return this.renderTableRow(e,t);case"table_header_cell":return this.renderTableHeaderCell(e,t);case"table_row_cell":return this.renderTableRowCell(e,t);case"strong":return this.renderStrong(e,t);case"em":return this.renderEmphasized(e,t);case"codespan":return this.renderCodeSpan(e,t);case"del":return this.renderDeleted(e,t);case"br":return this.renderLineBreak(e,t);case"link":return this.renderLink(e,t);case"autolink":return this.renderAutolink(e,t);case"url":return this.renderUrl(e,t);case"image":return this.renderImage(e,t);case"text":return this.renderText(e,t);case"text_block":return this.renderTextBlock(e,t);case"html_block":return this.renderHtmlBlock(e,t);case"space":return this.renderSpace(e,t);case"def":return this.renderRefDefinition(e,t);default:throw new Error("Unrecognized token: "+e.type)}},r.prototype.renderCode=function(e,t){var n,r=e.text,o=e.lang;return o&&(n=this.options.langPrefix+o),s.createElement("pre",{key:t},s.createElement("code",{className:n},r,"\n"))},r.prototype.renderBlockquote=function(e,t){return s.createElement("blockquote",{key:t},this.renderChildren(e))},r.prototype.renderHtml=function(e,t){return null},r.prototype.renderHeading=function(e,t){var n=this.options.headerPrefix+e.name;return s.createElement("h"+e.depth,{id:n,key:t},this.renderChildren(e))},r.prototype.renderHorizontalLine=function(e,t){return s.createElement("hr",{key:t})},r.prototype.renderList=function(e,t){return e.ordered?s.createElement("ol",{key:t},this.renderChildren(e)):s.createElement("ul",{key:t},this.renderChildren(e))},r.prototype.renderLooseItem=r.prototype.renderListItem=function(e,t){return s.createElement("li",{key:t},this.renderChildren(e))},r.prototype.renderParagraph=function(e,t){return s.createElement("p",{key:t},this.renderChildren(e))},r.prototype.renderTable=function(e,t){var n=e.children,r=s.createElement("thead",null,this.renderTableHeader(n[0])),o=s.createElement("tbody",null,this.renderTokens(n.slice(1)));return s.createElement("table",{key:t},r,o)},r.prototype.renderTableHeader=r.prototype.renderTableRow=function(e,t){return s.createElement("tr",{key:t},this.renderChildren(e))},r.prototype.renderTableHeaderCell=function(e,t){return s.createElement("th",{key:t,style:{textALign:e.align}},this.renderChildren(e))},r.prototype.renderTableRowCell=function(e,t){return s.createElement("td",{key:t,style:{textALign:e.align}},this.renderChildren(e))},r.prototype.renderStrong=function(e,t){return s.createElement("strong",{key:t},this.renderChildren(e))},r.prototype.renderEmphasized=function(e,t){return s.createElement("em",{key:t},this.renderChildren(e))},r.prototype.renderCodeSpan=function(e,t){var n=e.text;return s.createElement("code",{key:t},n)},r.prototype.renderLineBreak=function(e,t){return s.createElement("br",{key:t})},r.prototype.renderDeleted=function(e,t){return s.createElement("del",{key:t},this.renderChildren(e))},r.prototype.renderUrl=r.prototype.renderAutolink=function(e,t){if(!this.sanitizeUrl(e.href))return"";var n=e.href,r=e.text;return s.createElement("a",{key:t,href:n},r)},r.prototype.renderLink=function(e,t){if(!this.sanitizeUrl(e.href))return null;var n=e.href,r=e.title;return s.createElement("a",{key:t,href:n,title:r},this.renderChildren(e))},r.prototype.sanitizeUrl=function(e){if(this.options.sanitize){try{var t=decodeURIComponent(e).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return!1}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return!1}return!0},r.prototype.renderImage=function(e,t){var n=e.href,r=e.title,o=e.text;return s.createElement("img",{key:t,src:n,alt:o,title:r})},r.prototype.renderText=function(e,t){return e.text},r.prototype.renderHtmlBlock=r.prototype.renderTextBlock=function(e,t){return e.paragraph?this.renderParagraph(e,t):this.renderChildren(e)},r.prototype.renderRefDefinition=r.prototype.renderSpace=function(e,t){return null},e.exports=r},"../../common/node_modules/mark-gor/react.js":function(e,t,n){function r(e,t){var n=new s({options:u(t,s.defaults)}),r=new a({options:u(t,a.defaults)}),o=n.parse(e);return r.render(o)}var s=n("../../common/node_modules/mark-gor/lib/parser.js"),o=n("../../common/node_modules/mark-gor/lib/block-lexer.js"),i=n("../../common/node_modules/mark-gor/lib/inline-lexer.js"),a=n("../../common/node_modules/mark-gor/lib/react-renderer.js"),c=n("../../common/node_modules/mark-gor/lib/helpers.js"),l=c.merge,u=c.pick;t.parse=r,t.defaults=l({},s.defaults,a.defaults),t.BlockLexer=o,t.InlineLexer=i,t.Parser=s,t.Renderer=a},"../../common/node_modules/next-tick/index.js":function(e,t,n){"use strict";(function(t,n){var r,s;r=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},s=function(e){var t,n,s=document.createTextNode(""),o=0;return new e(function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(s.data=o=++o%2;n;)e=n.shift(),n.length||(n=null),e()}).observe(s,{characterData:!0}),function(e){if(r(e),t)return void("function"==typeof t?t=[t,e]:t.push(e));t=e,s.data=o=++o%2}},e.exports=function(){if("object"==typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return s(MutationObserver);if("function"==typeof WebKitMutationObserver)return s(WebKitMutationObserver)}return"function"==typeof n?function(e){n(r(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(r(e),0)}:null}()}).call(t,n("../node_modules/process/browser.js"),n("../node_modules/timers-browserify/main.js").setImmediate)},"../../common/node_modules/promise/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/promise/lib/index.js")},"../../common/node_modules/promise/lib/core.js":function(e,t,n){"use strict";function r(){}function s(e){try{return e.then}catch(e){return v=e,b}}function o(e,t){try{return e(t)}catch(e){return v=e,b}}function i(e,t,n){try{e(t,n)}catch(e){return v=e,b}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==r&&f(e,this)}function c(e,t,n){return new e.constructor(function(s,o){var i=new a(r);i.then(s,o),l(e,new h(t,n,i))})}function l(e,t){for(;3===e._65;)e=e._55;if(a._37&&a._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);u(e,t)}function u(e,t){g(function(){var n=1===e._65?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._65?d(t.promise,e._55):m(t.promise,e._55));var r=o(n,e._55);r===b?m(t.promise,v):d(t.promise,r)})}function d(e,t){if(t===e)return m(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=s(t);if(n===b)return m(e,v);if(n===e.then&&t instanceof a)return e._65=3,e._55=t,void p(e);if("function"==typeof n)return void f(n.bind(t),e)}e._65=1,e._55=t,p(e)}function m(e,t){e._65=2,e._55=t,a._87&&a._87(e,t),p(e)}function p(e){if(1===e._40&&(l(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)l(e,e._72[t]);e._72=null}}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1,r=i(e,function(e){n||(n=!0,d(t,e))},function(e){n||(n=!0,m(t,e))});n||r!==b||(n=!0,m(t,v))}var g=n("../../common/node_modules/asap/browser-raw.js"),v=null,b={};e.exports=a,a._37=null,a._87=null,a._61=r,a.prototype.then=function(e,t){if(this.constructor!==a)return c(this,e,t);var n=new a(r);return l(this,new h(e,t,n)),n}},"../../common/node_modules/promise/lib/done.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/promise/lib/core.js");e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},"../../common/node_modules/promise/lib/es6-extensions.js":function(e,t,n){"use strict";function r(e){var t=new s(s._61);return t._65=1,t._55=e,t}var s=n("../../common/node_modules/promise/lib/core.js");e.exports=s;var o=r(!0),i=r(!1),a=r(null),c=r(void 0),l=r(0),u=r("");s.resolve=function(e){if(e instanceof s)return e;if(null===e)return a;if(void 0===e)return c;if(!0===e)return o;if(!1===e)return i;if(0===e)return l;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new s(t.bind(e))}catch(e){return new s(function(t,n){n(e)})}return r(e)},s.all=function(e){var t=Array.prototype.slice.call(e);return new s(function(e,n){function r(i,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof s&&a.then===s.prototype.then){for(;3===a._65;)a=a._55;return 1===a._65?r(i,a._55):(2===a._65&&n(a._55),void a.then(function(e){r(i,e)},n))}var c=a.then;if("function"==typeof c){return void new s(c.bind(a)).then(function(e){r(i,e)},n)}}t[i]=a,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,n){e.forEach(function(e){s.resolve(e).then(t,n)})})},s.prototype.catch=function(e){return this.then(null,e)}},"../../common/node_modules/promise/lib/finally.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/promise/lib/core.js");e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},"../../common/node_modules/promise/lib/index.js":function(e,t,n){"use strict";e.exports=n("../../common/node_modules/promise/lib/core.js"),n("../../common/node_modules/promise/lib/done.js"),n("../../common/node_modules/promise/lib/finally.js"),n("../../common/node_modules/promise/lib/es6-extensions.js"),n("../../common/node_modules/promise/lib/node-extensions.js"),n("../../common/node_modules/promise/lib/synchronous.js")},"../../common/node_modules/promise/lib/node-extensions.js":function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var s=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],s)(o,e)}function s(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var s=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],s)(o,e)}var o=n("../../common/node_modules/promise/lib/core.js"),i=n("../../common/node_modules/asap/browser-asap.js");e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):s(e)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null===n||void 0===n)return new o(function(t,n){n(e)});i(function(){n.call(r,e)})}}},o.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){i(function(){e.call(t,null,n)})},function(n){i(function(){e.call(t,n)})})}},"../../common/node_modules/promise/lib/synchronous.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/promise/lib/core.js");e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},r.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},r.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},"../../common/src/data/database.js":function(e,t,n){"use strict";function r(e,t,n){this.context=t||{},this.remoteDataSource=e,this.online=n}function s(e,t){return o.assign({},e,t)}var o=n("../../common/node_modules/lodash/lodash.js");n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/src/errors/http-error.js");e.exports=r,r.prototype.find=function(e){return e=s(this.context,e),this.remoteDataSource.find(e)},r.prototype.findOne=function(e){return e=o.extend({expected:1},e),this.find(e).then(function(e){return e[0]||null})},r.prototype.save=function(e,t,n){return e=s(this.context,e),this.remoteDataSource.save(e,t,n)},r.prototype.saveOne=function(e,t,n){return this.save(e,[t],n).then(function(e){return e.length>0?e[0]:null})},r.prototype.remove=function(e,t){return e=s(this.context,e),this.remoteDataSource.remove(e,t)},r.prototype.removeOne=function(e,t){return this.remove(e,[t]).then(function(e){return e.length>0?e[0]:null})},r.prototype.await=function(e,t,n){return e=s(this.context,e),this.remoteDataSource.await(e,t,n)},r.prototype.refresh=function(e,t){return e=s(this.context,e),this.remoteDataSource.refresh(e,t)},r.prototype.use=function(){var e={};o.assign(e,this.context);for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];return o.each(n,function(t){o.assign(e,t)}),new r(this.remoteDataSource,e)},r.prototype.start=function(e){return e=s(this.context,e),this.remoteDataSource.start(e)},r.prototype.beginSession=function(e){return this.remoteDataSource.beginSession(this.context,e)},r.prototype.checkSession=function(){return this.remoteDataSource.checkSession(this.context)},r.prototype.hasAuthorization=function(){return this.remoteDataSource.hasAuthorization(this.context)},r.prototype.restoreSession=function(e){this.remoteDataSource.restoreSession(e)},r.prototype.submitPassword=function(e,t){return this.remoteDataSource.submitPassword(this.context,e,t)},r.prototype.endSession=function(){return this.remoteDataSource.endSession(this.context)},r.prototype.beginMobileSession=function(e){return this.remoteDataSource.beginMobileSession(this.context,e)},r.prototype.acquireMobileSession=function(e){return this.remoteDataSource.acquireMobileSession(this.context,e)},r.prototype.releaseMobileSession=function(){return this.remoteDataSource.releaseMobileSession(this.context)},r.prototype.endMobileSession=function(e){return this.remoteDataSource.endMobileSession(this.context,e)},r.prototype.getOAuthURL=function(e,t){return this.remoteDataSource.getOAuthURL(this.context,e,t)},r.prototype.findTemporaryID=function(e,t){return e=s(this.context,e),this.remoteDataSource.findTemporaryID(e,t)},r.prototype.findPermanentID=function(e,t){return e=s(this.context,e),this.remoteDataSource.findPermanentID(e,t)}},"../../common/src/data/empty.js":function(e,t,n){"use strict";e.exports={array:[],object:{},string:"",func:function(){}}},"../../common/src/data/indexed-db-cache.jsx":function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(s)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/data/local-search.js"),l=n("../../common/src/mixins/update-check.js"),u=n("../../common/src/widgets/diagnostics.jsx"),d=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=i.createClass({displayName:"IndexedDBCache",mixins:[l],propTypes:{databaseName:a.string.isRequired},statics:{isAvailable:function(){return!!window.indexedDB}},getInitialState:function(){return this.tables={},{database:null,recordCounts:{},writeCount:0,readCount:0,deleteCount:0}},find:function(e){var t=this,n=e.address||"",r=e.schema,o=e.table,i=e.criteria;return this.fetchTable(n,r,o).then(function(e){var n=t.getObjectKeyName(r),a=[];if(s.isEqual(s.keys(i),[n])){var l=i[n];return l=l instanceof Array?s.sortBy(s.slice(l)):[l],s.each(l,function(t){var r={};r[n]=t;var o=s.sortedIndexBy(e,r,n),i=e[o];i&&i[n]===t&&a.push(i)}),a}return s.each(e,function(e){c.match(o,e,i)&&a.push(e)}),a}).then(function(n){c.limit(o,n,e.criteria);var r=t.state.readCount;return r+=n.length,t.setState({readCount:r}),n})},save:function(e,t){var n=this,r=e.address||"",i=e.schema,a=e.table;return this.open().then(function(e){return new o(function(o,c){var l=n.getTablePath(r,i,a),u=n.getPrimaryKeyGenerator(r,i,a),d=n.getObjectStoreName(i),m=e.transaction(d,"readwrite"),p=m.objectStore(d);m.oncomplete=function(e){o(t)},m.onerror=function(e){c(new Error(e.message))},s.each(t,function(e){var t=u(e),n={address:r,location:l,data:e};p.put(n,t)})})}).then(function(e){var t=n.state.writeCount;return t+=e.length,n.setState({writeCount:t}),n.updateTableEntry(r,i,a,e,!1),n.updateRecordCount(i,500),e})},remove:function(e,t){var n=this,r=e.address||"",i=e.schema,a=e.table;return this.open().then(function(e){return new o(function(o,c){var l=n.getPrimaryKeyGenerator(r,i,a),u=(n.getTablePath(r,i,a),n.getObjectStoreName(i)),d=e.transaction(u,"readwrite"),m=d.objectStore(u);d.oncomplete=function(e){o(t)},d.onerror=function(e){c(new Error(e.message))},s.each(t,function(e){var t=l(e);m.delete(t)})})}).then(function(e){var t=n.state.deleteCount;return t+=e.length,n.setState({deleteCount:t}),n.updateTableEntry(r,i,a,e,!0),n.updateRecordCount(i,500),e})},clean:function(e){var t=this;return this.open().then(function(n){return new o(function(r,o){var i=t.getObjectStoreName("remote"),a=n.transaction(i,"readwrite"),c=a.objectStore(i);if(void 0!=e.address){var l=null;e.schema&&"*"!==e.schema&&(l=e.address+"/"+e.schema+"/");var u=c.index("address"),d=u.openCursor(e.address),m=[],p=[];d.onsuccess=function(e){var t=!0,n=e.target.result;if(n){var o=n.value,i=n.primaryKey;l&&!s.startsWith(o.location,l)||(m.push(o),p.push(i)),n.continue(),t=!1}t&&(s.each(p,function(e){c.delete(e)}),r(m))}}else if(void 0!=e.count){var u=c.index("rtime"),d=u.openCursor(),m=[],p=[];d.onsuccess=function(t){var n=!0,o=t.target.result;if(o){var i=o.value,a=o.primaryKey;m.push(i),p.push(a),m.length<e.count&&(o.continue(),n=!1)}n&&(s.each(p,function(e){c.delete(e)}),r(m))}}else{if(void 0==e.before)return[];var u=c.index("rtime"),d=u.openCursor(),m=[],p=[];d.onsuccess=function(t){var n=!0,o=t.target.result;if(o){var i=o.value,a=o.primaryKey;i.data.rtime<e.before&&(m.push(i),p.push(a),o.continue(),n=!1)}n&&(s.each(p,function(e){c.delete(e)}),r(m))}}})}).then(function(e){var n=e.length;if(n>0){var o=t.state.deleteCount;o+=e.length,t.setState({deleteCount:o}),t.updateRecordCount("remote",500);var i=[];s.each(e,function(e){var t=e.address||"",n=e.location.substr(t.length+1).split("/"),o=r(n,2),a=o[0],c=o[1],l=s.find(i,{address:t,schema:a,table:c});l||(l={address:t,schema:a,table:c,objects:[]},i.push(l)),l.objects.push(e.data)}),s.each(i,function(e){t.updateTableEntry(e.address,e.schema,e.table,e.objects,!0)})}return n}).catch(function(e){return t.destroy()})},open:function(){var e=this;return this.databasePromise||(this.databasePromise=new o(function(t,n){var r=window.indexedDB.open(e.props.databaseName,1);r.onsuccess=function(n){var r=n.target.result;t(r),e.setState({database:r})},r.onerror=function(e){n(new Error(e.message))},r.onupgradeneeded=function(e){var t=e.target.result;t.onerror=function(e){n(new Error(e.message))},t.createObjectStore("local-data").createIndex("location","location",{unique:!1});var r=t.createObjectStore("remote-data");r.createIndex("location","location",{unique:!1}),r.createIndex("address","address",{unique:!1}),r.createIndex("rtime","data.rtime",{unique:!1})}})),this.databasePromise},destroy:function(){var e=this;return new o(function(t,n){var r=window.indexedDB.deleteDatabase(e.props.databaseName);r.onsuccess=function(e){t(!0)},r.onerror=function(e){t(!1)}})},reset:function(e,t){var n="local"===t?["local"]:s.filter(["remote",e,t]);s.unset(this.tables,n)},getObjectStoreName:function(e){return"local"===e?"local-data":"remote-data"},getObjectKeyName:function(e){return"local"===e?"key":"id"},getTablePath:function(e,t,n){return"local"===t?n:e+"/"+t+"/"+n},getPrimaryKeyGenerator:function(e,t,n){var r=this.getTablePath(e,t,n);return"local"===t?function(e){return r+"/"+e.key}:function(e){var t=("0000000000"+e.id).slice(-10);return r+"/"+t}},getTableEntry:function(e,t,n){var r="local"===t?["local",n]:["remote",e,t,n],o=s.get(this.tables,r);return o||(o={promise:null,objects:null},s.set(this.tables,r,o)),o},updateTableEntry:function(e,t,n,r,o){var i=this.getTableEntry(e,t,n);if(i.objects){var a=this.getObjectKeyName(t);s.each(r,function(e){var t=s.sortedIndexBy(i.objects,e,a),n=i.objects[t];n&&n[a]===e[a]?o?i.objects.splice(t,1):i.objects[t]=e:o||i.objects.splice(t,0,e)})}},fetchTable:function(e,t,n){var r=this.getTableEntry(e,t,n);return r.promise||(r.promise=this.loadTable(e,t,n).then(function(e){return r.objects=e,r.objects})),r.promise},loadTable:function(e,t,n){var r=this;return this.open().then(function(i){return new o(function(o,a){var c=r.getObjectStoreName(t),l=r.getObjectKeyName(t),u=i.transaction(c,"readonly"),d=u.objectStore(c),m=d.index("location"),p=r.getTablePath(e,t,n),h=m.openCursor(p),f=[];h.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,r=n.data,i=s.sortedIndexBy(f,r,l);f.splice(i,0,r),t.continue()}else o(f)}})})},updateRecordCount:function(e,t){var n=this,r=this.getObjectStoreName(e),o="updateRecordCountTimeouts."+r,i=s.get(this,o);i&&clearTimeout(i),i=setTimeout(function(){n.open().then(function(e){e.transaction(r,"readonly").objectStore(r).count().onsuccess=function(e){var t=s.clone(n.state.recordCounts);t[r]=e.target.result,n.setState({recordCounts:t})}}).catch(function(e){}),s.set(n,o,0)},t||0),s.set(this,o,i)},componentDidMount:function(){this.updateRecordCount("remote"),this.updateRecordCount("local")},render:function(){var e=this.state.database,t=s.get(this.state.recordCounts,"local-data"),n=s.get(this.state.recordCounts,"remote-data");return i.createElement(u,{type:"indexed-db-cache"},i.createElement(d,{label:"Database details"},i.createElement("div",null,"Name: ",e?e.name:""),i.createElement("div",null,"Version: ",e?e.version:"")),i.createElement(d,{label:"Usage"},i.createElement("div",null,"Local objects: ",t),i.createElement("div",null,"Remote objects: ",n),i.createElement("div",null,"Objects read: ",this.state.readCount),i.createElement("div",null,"Objects written: ",this.state.writeCount),i.createElement("div",null,"Objects deleted: ",this.state.deleteCount)))}})},"../../common/src/data/local-search.js":function(e,t,n){"use strict";function r(e,t,n){var r=!0;for(var s in n){var a=n[s];if(void 0!==a){if(t.hasOwnProperty(s)){var c=t[s];if(a instanceof Array)if(c instanceof Array)0===i.intersection(a,c).length&&(r=!1);else{var l;l=c instanceof Object?i.some(a,function(e){return i.isEqual(e,c)}):i.includes(a,c),l||(r=!1)}else if(c!==a){"object"===(void 0===c?"undefined":o(c))&&"object"===(void 0===a?"undefined":o(a))?i.isEqual(c,a)||(r=!1):r=!1;break}}else switch(s){case"time_range":if(a){var u=a.substr(1,a.length-2).split(","),d=u[0],m=u[1];d<=t.ptime&&t.ptime<m||(r=!1)}break;case"exclude":a instanceof Array?i.includes(a,t.id)&&(r=!1):a===t.id&&(r=!1);break;case"newer_than":!t.ptime||t.ptime>a||(r=!1);break;case"older_than":!t.ptime||t.ptime<a||(r=!1);break;case"search":r=!1}if(!r)break}}return r}function s(e,t,n){if(n&&(n.limit&&t.length>n.limit&&t.splice(0,t.length-n.limit),n.per_user_limit)){var r=n.per_user_limit,s={},o=[];i.eachRight(t,function(e){var t=!1;if(e.hasOwnProperty("user_id")){var n=e.user_id,a=s[n]||0;a<r&&(s[n]=a+1,t=!0)}else e.hasOwnProperty("user_ids")&&i.each(e.user_ids,function(e){var n=s[e]||0;n<r&&(s[e]=n+1,t=!0)});t||o.push(e)}),i.pullAll(t,o)}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n("../../common/node_modules/lodash/lodash.js");e.exports={match:r,limit:s}},"../../common/src/data/local-storage-cache.jsx":function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return null}}function s(e,t,n){var r={};r[n]=t;var s=a.sortedIndexBy(e,r,n),o=e[s];if(o&&o[n]===t)return o}function o(e,t,n){var r=a.sortedIndexBy(e,t,n),s=e[r];s&&s[n]===t[n]?e[r]=t:e.splice(r,0,t)}function i(e,t,n){var r=a.sortedIndexBy(e,t,n),s=e[r];s&&s[n]===t[n]&&e.splice(r,1)}var a=n("../../common/node_modules/lodash/lodash.js"),c=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/node_modules/react/react.js"),u=l.PropTypes,d=n("../../common/src/data/local-search.js");e.exports=l.createClass({displayName:"LocalStorageCache",propTypes:{databaseName:u.string.isRequired},statics:{isAvailable:function(){return!!window.localStorage}},getInitialState:function(){var e=localStorage.getItem(this.props.databaseName);return this.localData=r(e)||{},this.remoteData={},{}},getRows:function(e,t,n){var r="local"===t?this.localData:this.remoteData,s=a.filter([e,t,n]),o=a.get(r,s);return o||(o=[],a.set(r,s,o)),o},getKeyName:function(e){return"local"===e?"key":"id"},saveRows:function(e,t,n){if("local"===t){var r=JSON.stringify(this.localData);localStorage.setItem(this.props.databaseName,r)}},find:function(e){var t,n=e.server||"",r=e.schema,o=e.table,i=e.criteria,l=this.getRows(n,r,o),u=this.getKeyName(r);if(i&&void 0!==i.id&&1===a.size(i)){var m=i.id;m instanceof Array||(m=[m]),t=a.filter(a.map(m,function(e){return s(l,e,u)}))}else t=a.filter(l,function(e){return d.match(o,e,i)});return d.limit(o,t,i),c.resolve(t)},save:function(e,t){var n=e.server||"",r=e.schema,s=e.table,i=this.getRows(n,r,s),l=this.getKeyName(r);return a.each(t,function(e){o(i,a.cloneDeep(e),l)}),this.saveRows(n,r,s),c.resolve(t)},remove:function(e,t){var n=e.server||"",r=e.schema,s=e.table,o=this.getRows(n,r,s),l=this.getKeyName(r);return a.each(t,function(e){i(o,e,l)}),this.saveRows(n,r,s),c.resolve(t)},clean:function(e){var t=this.remoteData,n=0;if(void 0!==e.server){var r=e.server,s=a.get(t,r);a.each(s,function(e){a.each(e,function(e){n+=e.length})}),a.set(t,r,void 0)}else if(void 0!==e.count){var o=[];a.each(t,function(e){a.each(e,function(e){a.each(e,function(e){for(var t=0;t<e.length;t++)o.push(e[t])})})}),o.sort(function(e,t){return e.rtime<t.rtime?-1:e.rtime>t.rtime?1:0}),o.splice(e.count),a.each(t,function(e){a.each(e,function(e){a.each(e,function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];-1!==o.indexOf(r)&&(e.splice(t,1),n++)}})})})}else void 0!==e.before&&a.each(t,function(t){a.each(t,function(t){a.each(t,function(t){for(var r=t.length-1;r>=0;r--){t[r].rtime<e.before&&(t.splice(r,1),n++)}})})});return c.resolve(n)},reset:function(e,t){if("local"!==t){var n=a.filter([e,t]);a.unset(this.remoteData,n)}},render:function(){return l.createElement("div",null)}})},"../../common/src/data/remote-data-source/change.js":function(e,t,n){"use strict";function r(e,t,n){var r=this;this.location=e,this.objects=s.map(t,function(e){return e.uncommitted||(e=s.clone(e),e.id||(e.id=c.allocate()),e.uncommitted=!0),e}),this.removed=s.map(t,function(e){return!1}),this.dispatched=!1,this.delayed=!1,this.dispatching=!1,this.committed=!1,this.canceled=!1,this.timeout=0,this.promise=new o(function(e,t){r.resolvePromise=e,r.rejectPromise=t}),this.dependentPromises=[],this.delivered=null,this.received=null,this.error=null,this.time=null,n&&(n.delay&&(this.delayed=!0,this.timeout=setTimeout(function(){r.delayed=!1,r.dispatching&&(r.dispatching=!1,r.dispatch())},n.delay)),this.onConflict=n.onConflict),this.onDispatch=null}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/node_modules/async-do-while/index.js"),a=n("../../common/src/data/local-search.js"),c=n("../../common/src/data/remote-data-source/temporary-id.js");e.exports=r,r.prototype.dispatch=function(){var e=this;if(!this.dispatched&&!this.canceled)return this.delayed?void(this.dispatching=!0):void o.all(this.dependentPromises).then(function(){var t=1,n=1e3;return i.while(function(){return!e.committed&&!e.canceled&&!e.dispatched}),i.do(function(){return e.dispatched=!0,e.onDispatch(e).then(function(t){e.committed=!0,e.received=t,e.time=new Date,e.canceled?e.resolvePromise([]):e.resolvePromise(t)}).catch(function(r){if(!(r.statusCode>=400&&r.statusCode<=499))return e.dispatched=!1,n=Math.min(2*n,1e4),o.delay(n).then(function(){e.canceled?e.resolvePromise([]):t++});e.error=r,e.rejectPromise(r),e.canceled=!0})}),i.end()})},r.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.dispatched||(this.timeout&&clearTimeout(this.timeout),this.resolvePromise([])))},r.prototype.merge=function(e){var t=this;if(s.isEqual(e.location,this.location)){var n=!1;if(s.each(this.objects,function(t,r){var o=s.findIndex(e.objects,{id:t.id});if(-1!==o&&!e.removed[o])if(!e.dispatched||t.id>=1){var i=e.objects[o];s.forIn(i,function(e,n){void 0===t[n]&&(t[n]=e)}),e.removed[o]=!0}else n=!0}),n){var r=e.promise.then(function(){s.each(t.objects,function(t){if(t.id<1){var n=e.findPermanentID(t.id);n&&(t.id=n)}})}).catch(function(e){});this.dependentPromises.push(r)}else s.every(e.removed)&&e.cancel()}},r.prototype.findPermanentID=function(e){var t=s.findIndex(this.delivered,{id:e});if(-1!==t&&this.received){var n=this.received[t];if(n)return n.id}},r.prototype.apply=function(e,t){var n=this;this.canceled||s.isMatch(e,this.location)&&s.each(this.objects,function(r,o){if(!n.removed[o]){var i=s.findIndex(e.results,{id:r.id});if(-1!==i)if(r.deleted&&!t)e.results.splice(i,1);else{var c=a.match(e.table,r,e.criteria);if(c){var l,u=e.results[i],d=s.some(u,function(e,t){if(!r.hasOwnProperty(t))return!0});l=d?s.extend({},u,r):r,e.results[i]=l}else e.results.splice(i,1)}else if(!r.deleted||t){var c=a.match(e.table,r,e.criteria);c&&e.results.push(r)}}})},r.prototype.deliverables=function(){var e=this;return this.delivered=s.filter(this.objects,function(t,n){return!e.removed[n]}),s.map(this.delivered,function(e){return e.id<1?s.omit(e,"id","uncommitted"):s.omit(e,"uncommitted")})},r.prototype.noop=function(){return this.objects=s.filter(this.objects,function(e){return!(e.deleted&&e.id<1)}),s.isEmpty(this.objects)},r.prototype.matchLocation=function(e){return this.location.address===e.address&&(this.location.schema===e.schema&&this.location.table===e.table)}},"../../common/src/data/remote-data-source/index.jsx":function(e,t,n){"use strict";function r(e,t){return c.isEmpty(t)?e:(e=c.slice(e),c.each(t,function(t){var n=c.sortedIndexBy(e,{id:t},"id"),r=e?e[n]:null;r&&r.id===t&&e.splice(n,1)}),e)}function s(e,t){return e=c.slice(e),c.each(t,function(t){var n=c.sortedIndexBy(e,t,"id"),r=e[n];r&&r.id===t.id?e[n]=t:e.splice(n,0,t)}),e}function o(e,t){t||(t="primary");var n=c.find(_,{address:e,type:t});return n||(n={address:e,type:t},_.push(n)),n}function i(e){return c.filter(_,e)}function a(e){c.pull(_,e)}var c=n("../../common/node_modules/lodash/lodash.js"),l=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),u=n("../../common/node_modules/react/react.js"),d=u.PropTypes,m=n("../../common/node_modules/moment/moment.js"),p=n("../../common/src/transport/http-request.js"),h=n("../../common/src/errors/http-error.js"),f=n("../../common/src/data/local-search.js"),g=n("../../common/src/data/remote-data-source/search.js"),v=n("../../common/src/data/remote-data-source/change.js"),b=n("../../common/src/data/remote-data-source/storage.js"),y=n("../../common/src/data/remote-data-source/removal.js"),j=n("../../common/src/mixins/update-check.js"),w=n("../../common/src/widgets/diagnostics.jsx"),E=n("../../common/src/widgets/diagnostics-section.jsx"),C=n("../../common/src/data/remote-data-source/recent-search-table.jsx"),x=n("../../common/src/data/remote-data-source/recent-storage-table.jsx");e.exports=u.createClass({displayName:"RemoteDataSource",mixins:[j],propTypes:{basePath:d.string,discoveryFlags:d.object,retrievalFlags:d.object,online:d.bool,connected:d.bool,inForeground:d.bool,prefetching:d.bool,cache:d.object,cacheValidation:d.bool,refreshInterval:d.number,sessionRetryInterval:d.number,onChange:d.func,onSearch:d.func,onAuthorization:d.func,onExpiration:d.func,onViolation:d.func,onStupefaction:d.func},getDefaultProps:function(){return{basePath:"/srv/data",discoveryFlags:{},retrievalFlags:{},online:!0,connected:!1,inForeground:!0,prefetching:!0,cacheValidation:!0,refreshInterval:900,sessionRetryInterval:5e3}},getInitialState:function(){this.searching=!1,this.disconnected=!1,this.idMappings={},this.cacheValidation={},this.cacheClearing={},this.changeMonitors=[];var e={recentSearchResults:[],recentStorageResults:[],recentRemovalResults:[],changeQueue:[]};return c.assign(this,e),e},updateList:function(e,t){var n=this[e],r=t(n);this[e]=r;var s={};s[e]=r,this.setState(s)},isOnline:function(){return this.props.online},isReceivingNotification:function(){return this.props.connected},beginSession:function(e,t){var n=this,r=e.address,s=o(r);if(!s.promise){var i=r+"/srv/session/",a={responseType:"json",contentType:"json"};s.promise=p.fetch("POST",i,{area:t},a).then(function(e){if(c.assign(s,e.session),s.handle)return{system:e.system,servers:e.servers};throw new h(s.error)}).catch(function(e){throw s.promise=null,setTimeout(n.triggerChangeEvent,n.props.sessionRetryInterval),e})}return s.promise},checkSession:function(e){var t=this,n=e.address,r=o(n),s=r.handle;if(!s)return l.resolve(!1);var i=n+"/srv/session/",a={responseType:"json"};return p.fetch("GET",i,{handle:s},a).then(function(e){if(e&&e.session&&c.assign(r,e.session),r.token)return t.triggerAuthorizationEvent(r),!0;if(r.error)throw new h(r.error);return!1}).catch(function(e){throw r.promise=null,t.triggerChangeEvent(),e})},submitPassword:function(e,t,n){var r=this,s=e.address,i=o(s),a=i.handle;if(!a)return l.resolve(!1);var u=s+"/srv/session/htpasswd/",d={handle:a,username:t,password:n},m={responseType:"json",contentType:"json"};return p.fetch("POST",u,d,m).then(function(e){return c.assign(i,e.session),r.triggerAuthorizationEvent(i),null}).catch(function(e){throw 401!==e.statusCode&&(i.promise=null,r.triggerChangeEvent()),e})},endSession:function(e){var t=this,n=e.address,r=o(n),s=r.handle;return s?l.resolve(r.promise).then(function(){var e=n+"/srv/session/",o={responseType:"json",contentType:"json"};return p.fetch("DELETE",e,{handle:s},o).catch(function(e){console.error(e)}).then(function(){return a(r),t.clearRecentOperations(n),t.clearCachedSchemas(n),t.triggerExpirationEvent(r),null})}):l.resolve(null)},beginMobileSession:function(e,t){var n=e.address,r=o(n,"mobile");if(!r.promise){var s=o(n),i=s.handle,a=n+"/srv/session/",l={responseType:"json",contentType:"json"};r.promise=p.fetch("POST",a,{area:t,handle:i},l).then(function(e){if(c.assign(r,e.session),r.handle)return r.handle;throw h(r.error)}).catch(function(e){throw r.promise=null,e})}return r.promise},acquireMobileSession:function(e,t){var n=this,r=e.address,s=o(r);if(s.handle!==t&&(s.promise=null,s.handle=t),!s.promise){var i=r+"/srv/session/",a={responseType:"json",contentType:"json"};s.promise=p.fetch("GET",i,{handle:t},a).then(function(e){if(c.assign(s,e.session),s.token)return n.triggerAuthorizationEvent(s),s.user_id;throw new h(s.error)}).catch(function(e){throw setTimeout(function(){s.promise=null,s.handle=null},5e3),e})}return s.promise},releaseMobileSession:function(e){var t=e.address,n=o(t,"mobile");return n.promise?n.promise.then(function(){a(n)}):l.resolve()},endMobileSession:function(e,t){var n=e.address,r=n+"/srv/session/",s={responseType:"json",contentType:"json"};return p.fetch("DELETE",r,{handle:t},s).then(function(){return null})},getOAuthURL:function(e,t,n){var r=e.address,s=o(r),i=s.handle;if(!i)return"";var a="sid="+t.id+"&handle="+i;return"activation"===n?a+="&activation=1":"test"===n&&(a+="&test=1"),r+"/srv/session/"+t.type+"/?"+a},hasAuthorization:function(e){return!!o(e.address).token},restoreSession:function(e){if(m(e.etime)>m()&&e.handle&&e.token){var t=o(e.address);c.assign(t,e)}},start:function(e){return l.resolve().then(function(){if("local"===e.schema)return 0;var t=e.address,n=o(t);if(n.token)return n.user_id;throw new h(401)})},find:function(e){var t=this,n=new g(e);if(n.isLocal())return this.searchLocalCache(n).then(function(){return n.results});var r,s=c.get(e,"by.constructor.displayName"),o=e.required,i=e.committed;r=!0===e.blocking?"insufficient":!1===e.blocking?"never":void 0==e.blocking?"insufficient":e.blocking,o&&"never"===r&&(r="incomplete");var a,l=this.findExistingSearch(n);if(l&&l.promise.isRejected()&&(l=null),l){s&&(c.includes(l.by,s)||l.by.push(s));if("expired"===(l.promise.isFulfilled()?l.isFresh(this.props.refreshInterval)?"complete":l.updating?"updating":"expired":"running")){var u=this.searchRemoteDatabase(l).then(function(e){return e&&t.triggerChangeEvent(),l.results}),d=!0;"expired"!==r&&(d=!1),d&&(l.promise=u)}a=l}else n=this.addSearch(n),n.promise=this.searchLocalCache(n).then(function(){var e;if("complete"===(e=n.isMeetingExpectation()?n.isSufficientlyRecent(t.props.refreshInterval)?"complete":"stale":n.isSufficientlyCached()?"incomplete":"insufficient"))return n.results;var s=t.searchRemoteDatabase(n).then(function(e){return e&&t.triggerChangeEvent(),a.results}),o=!0;return"never"===r?o=!1:"stale"===e?"incomplete"!==r&&"insufficient"!==r||(o=!1):"incomplete"===e&&"insufficient"===r&&(o=!1),o?s:n.results}),a=n;return a.promise.then(function(r){if(c.get(t.props.discoveryFlags,"include_uncommitted")&&!0!==i&&(a=t.applyUncommittedChanges(a)),o&&!a.isMeetingExpectation())throw t.triggerStupefactionEvent(e,n.results),new h(404);return a.results})},save:function(e,t,n){var r=this,s=this.addStorage(new b(e,t,n));return s.isLocal()?this.updateLocalDatabase(s).then(function(){return r.triggerChangeEvent(),s.results}):this.updateRemoteDatabase(s).then(function(){return s.cancelled?[]:(r.updateLocalCache(s),r.updateRecentSearchResults(s),r.triggerChangeEvent(),s.results)})},remove:function(e,t){var n=this,r=this.addRemoval(new y(e,t));return r.isLocal()?this.updateLocalDatabase(r).then(function(){return n.triggerChangeEvent(),r.results}):this.updateRemoteDatabase(r).then(function(){return n.updateLocalCache(r),n.updateRecentSearchResults(r),n.triggerChangeEvent(),r.results})},await:function(e,t,n){var r=this,s={location:c.pick(e,"address","schema","table"),id:t.id,promise:null,resolve:null},o=new l(function(e){s.resolve=e});return s.promise=o.timeout(n).then(function(){return!0}).catch(function(e){return!1}).finally(function(){c.pull(r.changeMonitors,s)}),this.changeMonitors.push(s),s.promise},refresh:function(e,t){var n=this.getRelevantRecentSearches(e);c.each(n,function(e){var n=e.results,r=!1,s=c.sortedIndexBy(n,t,"id"),o=n[s];o&&o.id===t.id&&(r=!0),r&&(e.dirty=!0)})},abandon:function(e,t){this.updateList("recentSearchResults",function(n){var r=c.slice(n);return c.each(r,function(n){n.isLocal()||n.address===e&&(t&&n.schema!==t||(n.dirty=!0))}),r}),this.props.cache&&this.props.cache.reset(e,t)},invalidate:function(e){var t=this;if(!e||(e=this.omitOwnChanges(e),!c.isEmpty(e)))return this.reconcileChanges(e).then(function(){var n=[];return t.updateList("recentSearchResults",function(t){var r=c.slice(t);return c.each(r,function(t){if(!t.dirty){var r;r=!e||c.some(e,function(e){if(t.matchLocation(e)){if(!t.isMeetingExpectation())return!0;var n=c.sortedIndexBy(t.results,{id:e.id},"id"),r=t.results[n];if(r&&r.id===e.id)return!0}}),r&&(t.dirty=!0,n.push(t))}}),r}),!c.isEmpty(n)&&(t.props.online&&t.props.connected&&(t.triggerChangeEvent(),t.props.prefetching&&t.schedulePrefetch(n)),!0)})},revalidate:function(e){this.cacheValidation=c.mapValues(this.cacheValidation,function(t,n){return c.omitBy(t,function(t,r){return!e||(e.address===n&&("*"===e.schema||e.schema===r)||void 0)})})},triggerChangeMonitors:function(e,t){c.each(this.changeMonitors,function(n){c.isEqual(e,n.location)&&c.includes(t,n.id)&&n.resolve()})},omitOwnChanges:function(e){var t=this;return e?c.filter(e,function(e){var n=c.filter(t.changeQueue,function(t){if(t.dispatched&&!t.failed&&t.matchLocation(e))return!0});return!c.some(n,function(t){return t.committed?c.some(t.received,function(t){if(t.id===e.id&&t.gn>=e.gn)return!0}):c.some(t.delivered,function(t){if(t.id===e.id)return!0})})}):null},reconcileChanges:function(e){var t=this;return l.each(this.state.changeQueue,function(n){if(!1!==n.onConflict&&!n.dispatched){var r=c.filter(e,function(e){return n.matchLocation(e)}),s=c.filter(n.objects,function(t,s){if(!n.removed[s])return!e&&t.id>=1||c.some(r,function(e){if(e.id===t.id)return!0})});if(c.isEmpty(s))return null;var o=c.map(s,"id");return t.retrieveRemoteObjects(n.location,o,!0).then(function(e){return c.each(s,function(r){var s=c.find(e,{id:r.id});if(s&&s.gn>r.gn){var o=!1;if(n.onConflict&&n.onConflict({type:"conflict",target:t,local:r,remote:s,preventDefault:function(){o=!0}}),!o){var i=c.indexOf(n.objects,r);n.removed[i]=!0}}}),c.every(n.removed)&&n.cancel(),null})}})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerAuthorizationEvent:function(e){this.props.onAuthorization&&this.props.onAuthorization({type:"authorization",target:this,session:e})},triggerExpirationEvent:function(e){this.props.onExpiration&&this.props.onExpiration({type:"expiration",target:this,session:e})},triggerViolationEvent:function(e,t){this.props.onViolation&&this.props.onViolation({type:"violation",target:this,address:e,schema:t})},triggerStupefactionEvent:function(e,t){this.props.onStupefaction&&this.props.onStupefaction({type:"stupefaction",target:this,query:e,results:t})},triggerSearchEvent:function(e){this.props.onSearch&&this.props.onSearch({type:"search",target:this,searching:e})},findExistingSearch:function(e){var t=c.findIndex(this.recentSearchResults,function(t){return e.match(t)});if(-1!==t){var n=this.recentSearchResults[t];return this.updateList("recentSearchResults",function(e){var r=c.slice(e);return r.splice(t,1),r.unshift(n),r}),n}return null},addSearch:function(e){return this.updateList("recentSearchResults",function(t){var n=c.slice(t);for(n.unshift(e);n.length>1024;)n.pop();return n}),e},addStorage:function(e){return this.updateList("recentStorageResults",function(t){var n=c.slice(t);for(n.unshift(e),c.remove(n,{canceled:!0});n.length>32;)n.pop();return n}),e},addRemoval:function(e){return this.updateList("recentRemovalResults",function(t){var n=c.clone(t);for(n.unshift(e);n.length>32;)n.pop();return n}),e},searchRemoteDatabase:function(e){var t=this;if(e.isLocal())return l.resolve(!1);if(!this.props.online)return l.resolve(!1);if(e.updating)return l.resolve(!1);e.updating=!0,e.scheduled=!1,this.searching||(this.searching=!0,this.triggerSearchEvent(!0));var n=e.getLocation(),o=e.criteria;return e.start(),this.discoverRemoteObjects(n,o).then(function(n){return t.searchLocalCache(e,n).return(n)}).then(function(o){var i=o.ids,a=o.gns,u=e.getUpdateList(i,a),d=e.getRemovalList(i);if(c.isEmpty(u)){if(c.isEmpty(d))return null;return r(e.results,d)}return t.retrieveRemoteObjects(n,u).then(function(o){var i=o,a=s(e.results,i);if(a=r(a,d),c.get(t.props.discoveryFlags,"include_uncommitted")){var u=c.filter(t.changeQueue,function(e){if(e.dispatched&&!e.committed&&e.matchLocation(n))return!0});if(!c.isEmpty(u)){var m=c.map(u,"promise");return l.all(m).reflect().then(function(){return a})}}return a})}).then(function(n){return e.finish(n),t.updateList("recentSearchResults",function(e){return c.slice(e)}),t.updateLocalCache(e),!!n}).finally(function(){e.updating=!1,t.searchingEndTimeout&&clearTimeout(t.searchingEndTimeout),t.searchingEndTimeout=setTimeout(function(){var e=c.find(t.recentSearchResults,{scheduled:!0});e?t.searchRemoteDatabase(e):t.searching&&(t.searching=!1,t.triggerSearchEvent(!1)),t.searchingEndTimeout=0},250)})},discoverRemoteObjects:function(e,t){return this.performRemoteAction(e,"discovery",t)},retrieveRemoteObjects:function(e,t){return this.performRemoteAction(e,"retrieval",{ids:t})},updateRemoteDatabase:function(e){var t=this,n=new v(e.getLocation(),e.objects,e.options);return c.each(this.changeQueue,function(e){e.committed||e.canceled||n.merge(e)}),n.noop()?(e.finish(e.objects),l.resolve()):(n.onDispatch=function(n){var r=n.deliverables(),s=n.location;return e.start(),t.performRemoteAction(s,"storage",{objects:r}).then(function(e){return t.saveIDMapping(s,n.objects,e),e})},this.queueChange(n),this.props.online&&n.dispatch(),this.triggerChangeEvent(),n.promise.then(function(t){n.canceled?e.cancel():e.finish(t)}).catch(function(e){throw t.triggerChangeEvent(),e}))},queueChange:function(e){this.updateList("changeQueue",function(t){var n=m().subtract(1,"minute").toISOString(),r=c.reject(t,function(e){if(e.committed){if(e.time<n)return!0}else if(e.dispatched){if(e.error)return!0}else if(e.canceled)return!0});return r.push(e),r})},saveIDMapping:function(e,t,n){if(t.length===n.length){var r=[e.address,e.schema,e.table],s=c.get(this.idMappings,r);s||(s=[],c.set(this.idMappings,r,s)),c.each(t,function(e,t){if(e.id<1){var r=n[t];c.remove(s,{permanent:r.id}),s.push({temporary:e.id,permanent:r.id})}})}},findTemporaryID:function(e,t){var n=[e.address,e.schema,e.table],r=c.get(this.idMappings,n),s=c.find(r,{permanent:t});if(s)return s.temporary},findPermanentID:function(e,t){var n=[e.address,e.schema,e.table],r=c.get(this.idMappings,n),s=c.find(r,{temporary:t});if(s)return s.permanent},applyUncommittedChanges:function(e){var t=c.filter(this.changeQueue,{committed:!1,canceled:!1,error:null});if(!c.isEmpty(t)){var n=c.get(this.props.discoveryFlags,"include_deleted");e=c.clone(e),e.results=c.slice(e.results),c.each(t,function(t){t.apply(e,n)})}return e},performRemoteAction:function(e,t,n){var r=this,s=e.address,i=this.props.basePath,u=e.schema,d=e.table;if(!u)return l.reject(new Error("No schema specified"));if(!d)return l.reject(new Error("No table specified"));var m;"retrieval"===t||"storage"===t?m=this.props.retrievalFlags:"discovery"===t&&(m=c.omit(this.props.discoveryFlags,"include_uncommitted"));var h=""+s+i+"/"+t+"/"+u+"/"+d+"/",f=o(s),g=c.assign({},n,m,{auth_token:f.token}),v={contentType:"json",responseType:"json"};return p.fetch("POST",h,g,v).then(function(e){return e}).catch(function(e){throw 401!==e.statusCode&&403!=e.statusCode||(r.clearRecentOperations(s),r.clearCachedSchemas(s),401===e.statusCode?(a(f),r.triggerExpirationEvent(f)):403==e.statusCode&&r.triggerViolationEvent(s,u),r.triggerChangeEvent()),e})},updateLocalDatabase:function(e){var t=this;return l.try(function(){var n=t.props.cache,r=e.getLocation();return e.start(),e.promise=e instanceof y?n.remove(r,e.objects):n.save(r,e.objects),e.promise.then(function(t){e.finish(t)})})},searchLocalCache:function(e,t){var n=this;return this.validateCache(e.address,e.schema).then(function(r){e.validateResults(r);var o=n.props.cache;if(t){if(!e.remote)return!1;var i=e.getFetchList(t.ids);if(c.isEmpty(i))return!1;var a=c.assign({criteria:{id:i}},e.getLocation());return o.find(a).then(function(t){return e.results=s(e.results,t),!0})}if(e.remote)return!1;var a=e.getQuery();return o.find(a).then(function(t){return e.results=t,!0})}).catch(function(e){return console.error(e),!1})},validateCache:function(e,t){var n=this;if("local"===t||!this.props.cacheValidation)return l.resolve("none");var r=(this.props.cache,[e,t]),s=c.get(this.cacheValidation,r);return s||(s=this.getRemoteSignature(e,t).then(function(r){return n.getCacheSignature(e,t).then(function(s){return r?s?s===r?r:n.clearCachedObjects(e,t).then(function(){return n.setCacheSignature(e,t,r),r}):n.waitForCacheClearing(e,t).then(function(){return n.setCacheSignature(e,t,r),r}):s||"none"})}).catch(function(e){console.error(e),c.unset(n.cacheValidation,r)}),c.set(this.cacheValidation,r,s)),s},clearCachedSchemas:function(e){var t=this;return c.unset(this.cacheValidation,[e]),this.clearCachedObjects(e,"*").then(function(){var n=t.props.cache,r={schema:"local",table:"remote_schema"},s=e+"/";return n.find(r).filter(function(e){return c.startsWith(e.key,s)}).then(function(e){return n.remove(r,e)})})},getRemoteSignature:function(e,t){if(!this.props.online)return l.resolve("");var n=""+e+this.props.basePath+"/signature/"+t,r=o(e),s={responseType:"json",contentType:"json"},i={auth_token:r.token};return p.fetch("POST",n,i,s).then(function(e){return c.get(e,"signature")})},getCacheSignature:function(e,t){var n=this.props.cache,r={schema:"local",table:"remote_schema",criteria:{key:e+"/"+t}};return n.find(r).get(0).then(function(e){return c.get(e,"signature")})},setCacheSignature:function(e,t,n){var r=this.props.cache,s={schema:"local",table:"remote_schema"},o={key:e+"/"+t,signature:n};return r.save(s,[o])},updateLocalCache:function(e){var t=this;return l.try(function(){var n=t.props.cache,r=e.getLocation();return e instanceof g?n.save(r,e.results).then(function(){return n.remove(r,e.missingResults)}):e instanceof y?n.remove(r,e.results):e instanceof b?n.save(r,e.results):void 0}).then(function(){return!0}).catch(function(e){return console.error(e),!1})},clearCachedObjects:function(e,t){var n=this;return l.try(function(){var r=n.props.cache,s=c.get(n.cacheClearing,[e,"*"]);if(s)return s;var o=[e,t],i=c.get(n.cacheClearing,o);return i||(i=r.clean({address:e,schema:t}).then(function(e){return c.unset(n.cacheClearing,o),e}),c.set(n.cacheClearing,o,i)),i})},waitForCacheClearing:function(e,t){var n=c.get(this.cacheClearing,[e,"*"]);if(n)return n;var r=c.get(this.cacheClearing,[e,t]);return r||l.resolve(0)},updateRecentSearchResults:function(e){var t=this.getRelevantRecentSearches(e.getLocation());c.each(t,function(t){var n=t.results,r=n;c.each(e.results,function(s){var o=c.sortedIndexBy(r,s,"id"),i=r[o],a=i&&i.id===s.id;if(e instanceof y)a&&(r===n&&(r=c.slice(r)),r.splice(o,1));else if(e instanceof b){var l=f.match(t.table,s,t.criteria);(l||a)&&(r===n&&(r=c.slice(r)),l&&a?r[o]=s:l&&!a?(r.splice(o,0,s),f.limit(t.table,r,t.criteria)):!l&&a&&r.splice(o,1))}}),r!==n&&(t.results=r,t.promise=l.resolve(r))})},getRelevantRecentSearches:function(e){return c.filter(this.recentSearchResults,function(t){if(t.matchLocation(e))return!0})},clearRecentOperations:function(e){var t=this,n=["recentSearchResults","recentStorageResults","recentRemovalResults"];c.each(n,function(n){t.updateList(n,function(t){return c.filter(t,function(t){return t.address!==e})})})},componentWillMount:function(){var e=this;this.sessionCheckTimeout=setInterval(function(){var t=m().add(5,"minute").toISOString(),n=i(function(e){if(e.etime<t)return!0});c.isEmpty(n)||(c.each(n,function(e){e.token||a(e)}),e.triggerChangeEvent())},6e4)},componentDidMount:function(){this.triggerChangeEvent()},componentWillReceiveProps:function(e){var t=this,n=!this.props.online&&e.online,r=!this.props.connected&&e.connected;if(n||r)this.disconnected&&(this.invalidate().then(function(){c.each(t.changeQueue,function(e){e.dispatch()})}),this.disconnected=!1);else{var s=this.props.online&&!e.online,o=this.props.connected&&!e.connected;(s||o)&&(this.disconnected=!0)}},componentWillUnmount:function(){clearInterval(this.sessionExpirationCheckInterval)},schedulePrefetch:function(e){var t=this,n=[];c.each(e,function(e){if(e.prefetch){var t=e.getCriteriaShape();return!(!c.some(n,function(n){if(c.includes(e.by,n.component)&&c.isEqual(t,n.shape))return!0})&&(n.push(e),e.updating||(e.scheduled=!0),n.length>16))&&void 0}}),setTimeout(function(){if(!t.searching){var e=c.find(t.recentSearchResults,{scheduled:!0,updating:!1});e&&t.searchRemoteDatabase(e)}},50)},render:function(){var e=this.state.recentSearchResults,t=this.state.recentStorageResults,n=this.state.recentRemovalResults;return u.createElement(w,{type:"remote-data-source"},u.createElement(E,{label:"Recent searches"},u.createElement(C,{searches:e})),u.createElement(E,{label:"Recent storage",hidden:c.isEmpty(t)},u.createElement(x,{stores:t})),u.createElement(E,{label:"Recent removal",hidden:c.isEmpty(n)},u.createElement(x,{stores:n})))}});var _=[]},"../../common/src/data/remote-data-source/operation.js":function(e,t,n){"use strict";function r(e){var t=s.get(e,"by.constructor.displayName");"local"!==e.schema&&(this.address=e.address),this.schema=e.schema,this.table=e.table,this.startTime=null,this.finishTime=null,this.results=[],this.promise=null,this.by=t?[t]:[]}var s=n("../../common/node_modules/lodash/lodash.js");e.exports=r,r.prototype.getLocation=function(){return this.isLocal()?s.pick(this,"schema","table"):s.pick(this,"address","schema","table")},r.prototype.matchLocation=function(e){return this.address===e.address&&(this.schema===e.schema&&this.table===e.table)},r.prototype.isLocal=function(){return"local"===this.schema},r.prototype.start=function(){var e=new Date;this.startTime=e.toISOString()},r.prototype.finish=function(e){var t=new Date(this.startTime),n=new Date;e&&(this.results=e),this.finishTime=n.toISOString(),this.duration=n-t},r.prototype.cancel=function(){this.canceled=!0},r.prototype.getTimeElapsed=function(){var e=new Date(this.finishTime);return.001*(new Date-e)}},"../../common/src/data/remote-data-source/recent-search-table.jsx":function(e,t,n){"use strict";function r(e){var t=o.filter(e.searches,function(e){return"local"!==e.schema}),n=function(e,t){var n;e.updating?n="updating":e.dirty&&(n="dirty");var r=e.duration?e.duration+"ms":"",a=JSON.stringify(e.criteria,void 0,4),c=JSON.stringify(e.criteria);return i.createElement("tr",{key:t,className:n},i.createElement("td",{className:"time"},r),i.createElement("td",{className:"schema"},e.schema),i.createElement("td",{className:"table"},e.table),i.createElement("td",{className:"criteria",title:s(a)},c),i.createElement("td",{className:"objects"},o.size(e.results)," (",e.lastRetrieved,")"),i.createElement("td",{className:"by"},o.join(e.by,", ")))};return i.createElement("table",{className:"recent-search-table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{className:"time"},"Time"),i.createElement("th",{className:"schema"},"Schema"),i.createElement("th",{className:"table"},"Table"),i.createElement("th",{className:"criteria"},"Criteria"),i.createElement("th",{className:"objects"},"Objects (fresh)"),i.createElement("th",{className:"by"},"By"))),i.createElement("tbody",null,o.map(t,n)))}function s(e){return e.replace(/\[([^\]]{1,50},\s*)[^\]]{50,}?(\s*)\]/g,"[$1...$2]")}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js");i.PropTypes;e.exports=r},"../../common/src/data/remote-data-source/recent-storage-table.jsx":function(e,t,n){"use strict";function r(e){var t=s.filter(e.stores,function(e){return"local"!==e.schema}),n=function(e,t){var n=e.duration?e.duration+"ms":"",r=JSON.stringify(e.results,void 0,4),s=JSON.stringify(e.results);return o.createElement("tr",{key:t},o.createElement("td",{className:"time"},n),o.createElement("td",{className:"schema"},e.schema),o.createElement("td",{className:"table"},e.table),o.createElement("td",{className:"objects",title:r},s),o.createElement("td",{className:"by"},e.by))};return o.createElement("table",{className:"recent-storage-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{className:"time"},"Time"),o.createElement("th",{className:"schema"},"Schema"),o.createElement("th",{className:"table"},"Table"),o.createElement("th",{className:"objects"},"Objects"),o.createElement("th",{className:"by"},"By"))),o.createElement("tbody",null,s.map(t,n)))}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js");o.PropTypes;e.exports=r},"../../common/src/data/remote-data-source/removal.js":function(e,t,n){"use strict";function r(e,t){s.call(this,e,t,{onConflict:!1}),this.isLocal()||(this.objects=_.map(t,function(e){return{id:e.id,deleted:!0}}))}var s=n("../../common/src/data/remote-data-source/storage.js");e.exports=r,r.prototype=Object.create(s.prototype)},"../../common/src/data/remote-data-source/search.js":function(e,t,n){"use strict";function r(e){l.call(this,e),this.criteria=e.criteria||{},this.remote=e.remote||!1,this.dirty=!1,this.cacheSignatureBefore="",this.cacheSignatureAfter="",this.updating=!1,this.scheduled=!1,this.lastRetrieved=0,this.missingResults=[],this.minimum=e.minimum,this.expected=e.expected,this.prefetch=e.prefetch,"number"!=typeof this.expected&&(this.expected=s(this.criteria,"id")||s(this.criteria,"name")||s(this.criteria,"filters")||void 0),this.criteria=o(this.criteria),this.criteria=i(this.criteria)}function s(e,t){if(e){var n=e[t];if(void 0!=n)return n instanceof Array?n.length:n?1:0}}function o(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++){var r=e[n];void 0!==r&&(r instanceof Object&&(r=o(r)),t.push(r))}return t}if(e instanceof Object){var t={};for(var s in e){var r=e[s];void 0!==r&&(r instanceof Object&&(r=o(r)),t[s]=r)}return t}return e}function i(e){return a.mapValues(e,function(e,t){return e instanceof Array&&/(^|_)ids?$/.test(t)&&(e=a.filter(e,function(e){return!("number"==typeof e&&e<1)})),e})}var a=n("../../common/node_modules/lodash/lodash.js"),c=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/src/data/remote-data-source/operation.js"),u=n("../../common/src/data/session-start-time.js");e.exports=r,r.prototype=Object.create(l.prototype),r.prototype.getQuery=function(){return a.pick(this,"address","schema","table","criteria")},r.prototype.getCriteriaShape=function(){return a.mapValues(this.criteria,function(e){return null!=e?e.constructor:null})},r.prototype.match=function(e){return!!this.matchLocation(e)&&(!!this.matchCriteria(e)&&!!this.matchOptions(e))},r.prototype.matchCriteria=function(e){return a.isEqual(this.criteria,e.criteria)},r.prototype.matchOptions=function(e){return this.remote===e.remote},r.prototype.isSufficientlyRecent=function(e){if(this.isLocal())return!0;var t=a.map(this.results,"rtime"),n=a.min(t);if(n<u)return!1;var r=new Date(n);return!(.001*(new Date-r)>e)&&(this.finishTime=n,!0)},r.prototype.isFresh=function(e){return"local"===this.schema||!this.dirty&&!(this.getTimeElapsed()>e)},r.prototype.isSufficientlyCached=function(){var e=this.results.length;return void 0!=this.minimum&&!(e<this.minimum)},r.prototype.isMeetingExpectation=function(){return this.results.length===this.expected},r.prototype.validateResults=function(e){this.cacheSignatureAfter=e},r.prototype.getUpdateList=function(e,t){if(this.cacheSignatureBefore&&this.cacheSignatureBefore!==this.cacheSignatureAfter)return a.slice(e);var n=this.results,r=[];return a.each(e,function(e,s){var o=t[s],i=a.sortedIndexBy(n,{id:e},"id"),c=n?n[i]:null;c&&c.id===e&&c.gn===o||r.push(e)}),r},r.prototype.getRemovalList=function(e){if(this.cacheSignatureBefore&&this.cacheSignatureBefore!==this.cacheSignatureAfter)return[];var t=[];return a.each(this.results,function(n){a.includes(e,n.id)||t.push(n.id)}),t},r.prototype.getFetchList=function(e){if(this.cacheSignatureBefore&&this.cacheSignatureBefore!==this.cacheSignatureAfter)return[];var t=this.results,n=[];return a.each(e,function(e,r){var s=a.sortedIndexBy(t,{id:e},"id"),o=t?t[s]:null;o&&o.id===e||n.push(e)}),n},r.prototype.finish=function(e){var t=this,n=this.results,r=[],s=0;l.prototype.finish.call(this,e),this.dirty=!1,this.cacheSignatureBefore=this.cacheSignatureAfter,e&&(this.promise=c.resolve(this.results),a.each(this.results,function(e){e.rtime||s++,e.rtime=t.finishTime}),a.each(n,function(t){var n=a.sortedIndexBy(e,t,"id"),s=e[n];s&&s.id===t.id||r.push(t)})),this.missingResults=r,this.lastRetrieved=s}},"../../common/src/data/remote-data-source/storage.js":function(e,t,n){"use strict";function r(e,t,n){o.call(this,e),this.objects=t,this.options=n||{},this.canceled=!1}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/src/data/remote-data-source/operation.js");e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.finish=function(e){var t=this;o.prototype.finish.call(this,e),this.isLocal()||s.each(this.results,function(e){e.rtime=t.finishTime})}},"../../common/src/data/remote-data-source/temporary-id.js":function(e,t,n){"use strict";function r(){var e=s+1e-9;return s=e,e}t.allocate=r;var s=0},"../../common/src/data/session-manager.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/src/data/database.js"),c=n("../../common/src/mixins/update-check.js"),l=n("../../common/src/widgets/diagnostics.jsx"),u=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=o.createClass({displayName:"SessionManager",mixins:[c],propTypes:{database:i.instanceOf(a)},getInitialState:function(){return this.removalQueue=[],{loaded:[],removed:[],saved:[]}},loadFromCache:function(e){var t=this;if(r.some(this.removalQueue,{address:e}))return s.resolve(null);var n=this.props.database.use({schema:"local",by:this}),o={key:e};return n.findOne({table:"session",criteria:o}).then(function(n){return n?(t.setState({loaded:r.union(t.state.loaded,[e])}),{address:n.key,handle:n.handle,token:n.token,user_id:n.user_id,etime:n.etime}):null})},saveToCache:function(e){var t=this,n=this.props.database.use({schema:"local",by:this}),s={key:e.address,handle:e.handle,token:e.token,user_id:e.user_id,etime:e.etime};return n.saveOne({table:"session"},s).then(function(n){return t.setState({saved:r.union(t.state.loaded,[e.address])}),n})},removeFromCache:function(e){var t=this;this.removalQueue.push(e);var n=this.props.database.use({schema:"local",by:this}),s={key:e.address};return n.removeOne({table:"session"},s).then(function(n){r.pull(t.removalQueue,e),t.setState({removed:r.union(t.state.loaded,[e.address])})})},render:function(){return o.createElement(l,{type:"session-manager"},o.createElement(u,{label:"Session Handling"},o.createElement("div",null,"Loaded from cache: ",r.join(this.state.loaded," ")),o.createElement("div",null,"Saved to cache: ",r.join(this.state.saved," ")),o.createElement("div",null,"Removed from cache: ",r.join(this.state.removed," "))))}})},"../../common/src/data/session-start-time.js":function(e,t,n){"use strict";e.exports=(new Date).toISOString()},"../../common/src/data/subscription-manager.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=(n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/node_modules/react/react.js")),o=s.PropTypes,i=n("../../common/src/data/database.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/mixins/update-check.js"),l=n("../../common/src/widgets/diagnostics.jsx"),u=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=s.createClass({displayName:"SubscriptionManager",mixins:[c],propTypes:{area:o.oneOf(["client","admin"]).isRequired,connection:o.object,schema:o.string,database:o.instanceOf(i),locale:o.instanceOf(a)},getInitialState:function(){return{subscription:null,serverAddress:null}},componentWillReceiveProps:function(e){this.props.connection&&e.connection&&this.props.connection.address!==e.connection.address&&this.setState({subscription:null})},componentDidUpdate:function(e,t){var n=this;if(this.props.connection&&this.props.database&&this.props.locale){var s=this.props.database.use({schema:"global",by:this});s.start().then(function(e){var t=n.state.subscription,o=s.context.address,i={user_id:e,schema:n.props.schema,area:n.props.area,locale:n.props.locale.localeCode,method:n.props.connection.method,token:n.props.connection.token,relay:n.props.connection.relay,details:n.props.connection.details};if(t&&n.state.serverAddress===o){if(r.isMatch(t,i))return;r.assign(t,i),i=t}else n.setState({subscription:i,serverAddress:o});return s.saveOne({table:"subscription"},i).then(function(e){return n.setState({subscription:e}),null}).catch(function(e){if(404===e.statusCode&&i.id)return i.id=void 0,s.saveOne({table:"subscription"},i).then(function(e){return n.setState({subscription:e}),null})})}).catch(function(e){if(401!==e.statusCode)throw e})}},render:function(){var e=this.state.subscription||{};return s.createElement(l,{type:"subscription-manager"},s.createElement(u,{label:"Current subscription"},s.createElement("div",null,"ID: ",e.id),s.createElement("div",null,"Token: ",e.token),s.createElement("div",null,"Method: ",e.method),s.createElement("div",null,"Schema: ",e.schema),s.createElement("div",null,"Locale: ",e.locale),s.createElement("div",null,"Relay: ",e.relay)))}})},"../../common/src/errors/file-error.js":function(e,t,n){"use strict";function r(e){e instanceof Object&&(e=e.code),this.code=e,this.message=s[e]}e.exports=r;var s={1:"A required file or directory could not be found at the time an operation was processed",2:"Access to the file was denied",3:"Operation was aborted",4:"The file or directory cannot be read",5:"The URL is malformed",6:"The state of the underlying file system prevents any writing to a file or a directory",7:"The operation cannot be performed on the current state of the interface object",8:"Synax error",9:"The modification requested is not allowed",10:"Not enough remaining storage space or the storage quota was reached",11:"The app looked up an entry, but the entry found is of the wrong type",12:"The file or directory with the same path already exists"};r.prototype=Object.create(Error.prototype)},"../../common/src/errors/http-error.js":function(e,t,n){"use strict";function r(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if("number"==typeof t)this.statusCode=t;else if("string"==typeof t)this.message=t;else if("object"===(void 0===t?"undefined":s(t)))for(var n in t)this[n]=t[n]}this.statusCode||(this.statusCode=500),this.hasOwnProperty("name")||(this.name=o[this.statusCode]),this.hasOwnProperty("message")||(this.message=this.name)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=r;var o={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"};r.prototype=Object.create(Error.prototype)},"../../common/src/languages.js":function(e,t,n){"use strict";e.exports=[{name:"ÄŒeÅ¡tina",code:"cz",script:"latin",countries:{cz:"ÄŒesko",pl:"Polsko",sk:"Slovensko"},defaultCountry:"cz",module:function(){return n.e("locale-cs").then(n.bind(null,"./locales/cs.js"))}},{name:"Dansk",code:"da",script:"latin",countries:{dk:"Danmark",fo:"FÃ¦rÃ¸erne",gl:"GrÃ¸nland",de:"Tyskland"},defaultCountry:"dk"},{name:"Deutsch",code:"de",script:"latin",countries:{at:"Ã–sterreich",be:"Belgien",de:"Deutschland",lu:"Luxemburg",ch:"Schweiz"},defaultCountry:"de",module:function(){return n.e("locale-de").then(n.bind(null,"./locales/de.js"))}},{name:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬",code:"el",script:"greek",countries:{gr:"Î•Î»Î»Î¬Î´Î±",cy:"ÎšÏÏ€ÏÎ¿Ï‚"},defaultCountry:"gr"},{name:"English",code:"en",script:"latin",countries:{au:"Australia",ca:"Canada",hk:"Hong Kong",ie:"Ireland",sg:"Singapore",gb:"United Kingdom",us:"United States"},defaultCountry:"us",module:function(){return n.e("locale-en").then(n.bind(null,"./locales/en.js"))}},{name:"EspaÃ±ol",code:"es",script:"latin",countries:{ar:"Argentina",bo:"Bolivia",cl:"Chile",co:"Colombia",cr:"Costa Rica",cu:"Cuba",es:"EspaÃ±a",ec:"Ecuador",sv:"El Salvador",gq:"Guinea Ecuatorial",gt:"Guatemala",hn:"Honduras",mx:"MÃ©xico",ni:"Nicaragua",pa:"PanamÃ¡",py:"Paraguay",pe:"PerÃº",pr:"Puerto Rico",do:"RepÃºblica Dominicana",uy:"Uruguay",ve:"Venezuela"},defaultCountry:"es"},{name:"FranÃ§ais",code:"fr",script:"latin",countries:{be:"Belgique",bj:"BÃ©nin",bf:"Burkina Faso",bi:"Burundi",cm:"Cameroun",ca:"Canada",cg:"Congo",ci:"CÃ´te d'Ivoire",dj:"Djibouti",gq:"GuinÃ©e Ã©quatoriale",fr:"France",ga:"Gabon",gn:"GuinÃ©e",ht:"HaÃ¯ti",lu:"Luxembourg",mg:"Madagascar",ml:"Mali",ne:"Niger",rw:"Rwanda",cf:"RÃ©publique centrafricaine",cd:"RÃ©publique dÃ©mocratique du Congo",sn:"SÃ©nÃ©gal",sc:"Seychelles",ch:"Suisse",td:"Tchad",tg:"Togo"},defaultCountry:"fr",module:function(){return n.e("locale-fr").then(n.bind(null,"./locales/fr.js"))}},{name:"í•œêµ­ì–´",code:"ko",script:"hangul",countries:{kr:"í•œêµ­",cn:"ì¤‘êµ­"},defaultCountry:"kr"},{name:"Hrvatski",code:"hr",script:"latin",countries:{ba:"Bosna i Hercegovina",hr:"Hrvatska",rs:"Srbija"},defaultCountry:"hr"},{name:"Italiano",code:"it",script:"latin",countries:{it:"Italia",ch:"Svizzera",hr:"Croazia",si:"Slovenia"},defaultCountry:"it",module:function(){return n.e("locale-it").then(n.bind(null,"./locales/it.js"))}},{name:"Magyar",code:"hu",script:"latin",countries:{hr:"MagyarorszÃ¡g",ro:"RomÃ¡nia"},defaultCountry:"hu"},{name:"Nederlands",code:"nl",script:"latin",countries:{be:"BelgiÃ«",nl:"Nederland",sr:"Suriname"},defaultCountry:"nl"},{name:"æ—¥æœ¬èªž",code:"jp",script:"hiragana",countries:{jp:"æ—¥æœ¬"},defaultCountry:"jp"},{name:"Norsk",code:"nb",script:"latin",countries:{no:"Norge"},defaultCountry:"no",module:function(){return n.e("locale-nb").then(n.bind(null,"./locales/nb.js"))}},{name:"Polski",code:"pl",script:"latin",countries:{by:"BiaÅ‚oruÅ›",lt:"Litwa",pl:"Polska",ua:"Ukraina"},defaultCountry:"pl",module:function(){return n.e("locale-pl").then(n.bind(null,"./locales/pl.js"))}},{name:"PortuguÃªs",code:"pt",script:"latin",countries:{ao:"Angola",br:"Brasil",tl:"Timor Leste",gq:"GuinÃ© Equatorial",gw:"GuinÃ©-Bissau",mz:"MoÃ§ambique",mo:"Macao",pt:"Portugal"},defaultCountry:"pt"},{name:"Ð ÑƒÑÑÐºÐ¸Ð¹",code:"ru",script:"cyrillic",countries:{am:"ÐÑ€Ð¼ÐµÐ½Ð¸Ñ",by:"Ð‘ÐµÐ»Ð°Ñ€ÑƒÑÑŒ",ge:"Ð“Ñ€ÑƒÐ·Ð¸Ñ",lv:"Ð›Ð°Ñ‚Ð²Ð¸Ñ",kz:"ÐšÐ°Ð·Ð°Ñ…ÑÑ‚Ð°Ð½",kg:"ÐšÐ¸Ñ€Ð³Ð¸Ð·Ð¸Ñ",lt:"Ð›Ð¸Ñ‚Ð²Ð°",ru:"Ð Ð¾ÑÑÐ¸Ñ",tj:"Ð¢Ð°Ð´Ð¶Ð¸ÐºÐ¸ÑÑ‚Ð°Ð½",ua:"Ð£ÐºÑ€Ð°Ð¸Ð½Ð°",uz:"Ð£Ð·Ð±ÐµÐºÐ¸ÑÑ‚Ð°Ð½",es:"Ð­ÑÑ‚Ð¾Ð½Ð¸Ñ"},defaultCountry:"ru",module:function(){return n.e("locale-ru").then(n.bind(null,"./locales/ru.js"))}},{name:"Srpski",code:"sr",script:"latin",countries:{rs:"Srbija",hr:"Hrvatska",ba:"Bosna i Hercegovina"},defaultCountry:"sr"},{name:"Suomi",code:"fi",script:"latin",countries:{fi:"Suomi",se:"Ruotsi"},defaultCountry:"fi",module:function(){return n.e("locale-fi").then(n.bind(null,"./locales/fi.js"))}},{name:"SlovenÄina",code:"sk",script:"latin",countries:{cz:"ÄŒesko",sk:"Slovensko"},defaultCountry:"sk"},{name:"Svenska",code:"sv",script:"latin",countries:{fi:"Finland",se:"Sverige"},defaultCountry:"se"},{name:"Tiáº¿ng Viá»‡t",code:"vi",script:"latin",countries:{vn:"Viá»‡t Nam"},defaultCountry:"vn"},{name:"TÃ¼rkÃ§e",code:"tr",script:"latin",countries:{cy:"KÄ±brÄ±s",tr:"TÃ¼rkiye"},defaultCountry:"tr"},{name:"ä¸­æ–‡",code:"zh",script:"hanzi",countries:{cn:"ä¸­å›½",hk:"é¦™æ¸¯",mo:"æ¾³é–€",sg:"æ–°åŠ å¡",tw:"å°ç£"},defaultCountry:"cn",module:function(){return n.e("locale-zh").then(n.bind(null,"./locales/zh.js"))}}]},"../../common/src/locale/locale-manager.jsx":function(e,t,n){"use strict";function r(){function e(e){void 0===n&&e&&e.length>=2&&(n=s.toLower(e))}s.each(navigator.languages,e);var t=["language","browserLanguage","systemLanguage","userLanguage"];s.each(t,function(t){e(navigator[t])});var n;return n}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/src/data/database.js"),c=n("../../common/src/widgets/diagnostics.jsx"),l=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=o.createClass({displayName:"LocaleManager",propTypes:{defaultLanguageCode:i.string,database:i.instanceOf(a),directory:i.arrayOf(i.object).isRequired,onChange:i.func},getDefaultProps:function(){return{defaultLanguageCode:"en"}},getInitialState:function(){return{localeCode:"",localeCodeSaved:"",phraseTable:{},missingPhrases:[]}},getLocaleCode:function(){return this.state.localeCode},getDirectory:function(){return this.props.directory},translate:function(e){var t=this,n=this.state.phraseTable[e];if(null==n)return setTimeout(function(){var n=s.union(t.state.missingPhrases,[e]);t.setState({missingPhrases:n})},10),e;if("function"!=typeof n)return n;try{for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n.apply(this,o)}catch(t){return console.error(t),"["+e+": "+t.message+"]"}},pick:function(e,t){if("string"==typeof e)return e;var n=this.state.localeCode.substr(0,2);t&&(n=t.substr(0,2));var r="",o="",i=this.props.defaultLanguageCode.substr(0,2),a="";for(var c in e){var l=e[c],u=s.toLower(c);u===n&&(r=l),o||(o=l),u===i&&(a=l)}return r||(a||o)},change:function(e){var t=this;return e=s.toLower(e),e===this.state.localeCode?Promise.resolve(!0):this.load(e).then(function(n){var r;r="function"==typeof n?n(e):n;var s={localeCode:e,phraseTable:r};return t.setState(s,function(){t.triggerChangeEvent()}),!0})},load:function(e){var t=e.substr(0,2),n=s.find(this.props.directory,{code:t});return n&&n.module?Promise.resolve(n.module()):Promise.reject(new Error("No module for language: "+t))},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},componentDidMount:function(){var e=this,t=r()||this.props.defaultLanguageCode;this.change(t).catch(function(t){e.change(e.props.defaultLanguageCode)})},componentDidUpdate:function(e,t){var n=this;if(!e.database&&this.props.database){var o=this.props.database.use({by:this,schema:"local"});o.start().then(function(){var e={key:"language"};return o.findOne({table:"settings",criteria:e})}).then(function(e){var t=s.get(e,"selectedLanguageCode");t&&(n.change(t),n.setState({localeCodeSaved:t}))})}if(t.localeCode!==this.state.localeCode&&this.props.database){var o=this.props.database.use({by:this,schema:"local"});o.start().then(function(){var e={key:"language",selectedLanguageCode:n.state.localeCode};return e.selectedLanguageCode!==r()?o.saveOne({table:"settings"},e):t.localeCode?o.removeOne({table:"settings"},e):void 0})}},render:function(){var e=r(),t=this.state.missingPhrases;return o.createElement(c,{type:"locale-manager"},o.createElement(l,{label:"Locale code"},o.createElement("div",null,"Current: ",this.state.localeCode),o.createElement("div",null,"Browser: ",e),o.createElement("div",null,"Previously saved: ",this.state.localeCodeSaved)),o.createElement(l,{label:"Missing phrases",hidden:s.isEmpty(t)},s.map(t,function(e,t){return o.createElement("div",{key:t},e)})))}})},"../../common/src/locale/locale.js":function(e,t,n){"use strict";function r(e){this.localeManager=e,this.directory=this.localeManager.getDirectory(),this.localeCode=this.localeManager.getLocaleCode();var t=_.split(this.localeCode,"-");this.languageCode=t[0],this.countryCode=t[1],this.translate=this.translate.bind(this),this.pick=this.pick.bind(this),this.name=this.name.bind(this),this.change=this.change.bind(this)}e.exports=r,r.prototype.translate=function(e){return e instanceof Object?this.localeManager.pick(e):this.localeManager.translate.apply(this.localeManager,arguments)},r.prototype.pick=function(e,t){return this.localeManager.pick(e,t)},r.prototype.name=function(e,t,n){var r=this.localeManager.pick(e,n),s=new String(r||"");return s.gender=t,s},r.prototype.change=function(e){return this.localeManager.change(e)}},"../../common/src/media/bitmap-view.jsx":function(e,t,n){"use strict";function r(e){var t=i(e,6),n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],c=t[5],l=n*o-r*s;return[o/l,-r/l,-s/l,n/l,(s*c-o*a)/l,-(n*c-r*a)/l]}function s(e,t){var n=i(e,6),r=n[0],s=n[1],o=n[2],a=n[3],c=n[4],l=n[5],u=i(t,2),d=u[0],m=u[1];return[r*d+o*m+c,s*d+a*m+l]}function o(e,t){var n=[t.left,t.top],r=[t.left+t.width,t.top+t.height];return n=s(e,n),r=s(e,r),{width:Math.abs(r[0]-n[0]),height:Math.abs(r[1]-n[1]),left:Math.min(r[0],n[0]),top:Math.min(r[1],n[1])}}var i=function(){function e(e,t){var n=[],r=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(s)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n("../../common/node_modules/lodash/lodash.js"),l=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),u=n("../../common/node_modules/react/react.js"),d=u.PropTypes,m=n("../../common/src/transport/blob-manager.js"),p=n("../../common/src/transport/blob-reader.js"),h=n("../../common/src/media/media-loader.js"),f=n("../../common/src/media/jpeg-analyser.js"),g=n("../../common/src/utils/component-refs.js");e.exports=u.createClass({displayName:"BitmapView",propTypes:{url:d.string,clippingRect:d.object,onLoad:d.func,onError:d.func},getInitialState:function(){return this.components=g({canvas:HTMLCanvasElement}),{}},componentWillMount:function(){this.load(this.props.url)},componentWillReceiveProps:function(e){this.props.url!==e.url&&this.load(e.url),this.clippingRect!==e.clippingRect&&this.image&&this.drawImage(e.clippingRect)},render:function(){var e=this.components.setters,t=c.omit(this.props,"onLoad","url","clippingRect");return t.width=4,t.height=4,u.createElement("canvas",a({ref:e.canvas},t))},componentDidMount:function(){this.image&&this.redrawNeeded&&this.drawImage(this.props.clippingRect)},triggerLoadEvent:function(){this.props.onLoad&&this.props.onLoad({type:"load",target:this})},triggerErrorEvent:function(e){this.props.onError&&this.props.onError({type:"error",target:this,error:e})},load:function(e){var t=this;return e?m.fetch(e).then(function(e){var n=h.loadImage(e),r=p.loadUint8Array(e);return l.join(n,r,function(e,n){var r=f.getOrientation(n)||1;return t.image=e,t.orientation=r,r<5?(t.naturalWidth=e.naturalWidth,t.naturalHeight=e.naturalHeight):(t.naturalWidth=e.naturalHeight,t.naturalHeight=e.naturalWidth),t.drawImage(t.props.clippingRect),t.triggerLoadEvent(),null})}).catch(function(e){return console.error(e),t.triggerErrorEvent(e),null}):(this.clearCanvas(),l.resolve())},drawImage:function(e){var t=this.image;if(t){var n=this.components.canvas;if(!n)return void(this.redrawNeeded=!0);var s,i=this.orientation,a=t.naturalWidth,c=t.naturalHeight;switch(i){case 1:s=[1,0,0,1,0,0];break;case 2:s=[-1,0,0,1,a,0];break;case 3:s=[-1,0,0,-1,a,c];break;case 4:s=[1,0,0,-1,0,c];break;case 5:s=[0,1,1,0,0,0];break;case 6:s=[0,1,-1,0,c,0];break;case 7:s=[0,-1,-1,0,c,a];break;case 8:s=[0,-1,1,0,0,a]}e||(e={left:0,top:0,width:this.naturalWidth,height:this.naturalHeight}),this.width=e.width,this.height=e.height;var l=r(s),u=o(l,e),d=o(l,{left:0,top:0,width:e.width,height:e.height});n.width=d.width,n.height=d.height;var m=n.getContext("2d");m.transform.apply(m,s),m.drawImage(t,u.left,u.top,u.width,u.height,d.left,d.top,d.width,d.height)}},extractMosaic:function(){try{var e=this.components.canvas,t=document.createElement("CANVAS");t.width=48,t.height=48;t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height);var n=document.createElement("CANVAS");n.width=4,n.height=4;var r=n.getContext("2d");r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height);var s=r.getImageData(0,0,n.width,n.height),o=s.data;if(c.size(o)>=64){for(var i=[],a=0;a<16;a++){var l=o[4*a+0],u=o[4*a+1],d=o[4*a+2],m=l<<16|u<<8|d<<0;i.push(m.toString(16))}return i}}catch(e){}},clearCanvas:function(){var e=this.components.canvas;e&&(e.width=0,e.height=0),this.width=0,this.height=0,this.orientation=void 0}})},"../../common/src/media/frame-grabber.js":function(e,t,n){"use strict";function r(e,t){return new i(function(n,r){function i(t){if(g)c(t);else if(t){var n=d*m*3,r=t.size,s=r/n;s>.02?c(t):((!f||f.size<t.size)&&(f=t),h>10?c(f):(e.currentTime+=1e3,h++))}else l(new Error("Unable to obtain a frame"))}function a(t){try{p.getContext("2d").drawImage(e,0,0,d,m),s(p,"image/jpeg",.75,i)}catch(e){l(e)}}function c(e){u(),n(e)}function l(e){u(),f?n(f):r(e)}function u(){g&&(e.removeEventListener("seeked",a),clearTimeout(y))}var d=e.videoWidth,m=e.videoHeight,p=document.createElement("CANVAS");p.width=d,p.height=m;var h=1,f=null,g=e.duration===1/0,v=o.get(t,"start",0),b=o.get(t,"timeout",1e3);if(g)a();else{e.addEventListener("seeked",a),e.addEventListener("ended",function(){l(new Error("Unable to obtain an image before video ended"))}),e.currentTime=v;var y=setTimeout(function(){l(new Error("Unable to obtain an image within time limit"))},b)}})}function s(e,t,r,s){if("function"==typeof e.toBlob)e.toBlob(s,t,90);else{s(n("../../common/node_modules/b64-to-blob/b64toBlob.js")(e.toDataURL(t,r).replace("data:image/jpeg;base64,",""),"image/jpeg"))}}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/bluebird/js/browser/bluebird.js");e.exports={capture:r}},"../../common/src/media/image-cropping.js":function(e,t,n){"use strict";function r(e,t){var n=0,r=0,s=Math.min(e,t);return e>s?n=Math.floor((e-s)/2):t>s&&(r=Math.floor((t-s)/2)),{left:n,top:r,width:s,height:s}}e.exports={centerSquare:r,default:r}},"../../common/src/media/jpeg-analyser.js":function(e,t,n){"use strict";function r(e){var t=u(e,function(e,t,n){if(65472===e||65474===e)return t});if(t>0){var n=(e[t++],o(e[t++],e[t++]));return{width:o(e[t++],e[t++]),height:n}}}function s(e){var t=o,n=a,r=u(e,function(r,s,o){if(65505===r){var a=s,l=s+o;if(69==e[a++]&&120==e[a++]&&105==e[a++]&&102==e[a++]&&0==e[a++]&&0==e[a++]){var u=a;"II"===String.fromCharCode(e[a++])+String.fromCharCode(e[a++])&&(t=i,n=c);if(42!==t(e[a++],e[a++]))return;do{var d=n(e[a++],e[a++],e[a++],e[a++]);if(0===d)break;a=u+d;for(var m=t(e[a++],e[a++]),p=0;p<m;p++){var h=t(e[a++],e[a++]),f=t(e[a++],e[a++]),g=n(e[a++],e[a++],e[a++],e[a++]);if(274===h&&3===f&&1===g)return a;a+=4}}while(a<l)}}});if(r>0){return t(e[r++],e[r++])}}function o(e,t){return e<<8|t}function i(e,t){return t<<8|e}function a(e,t,n,r){return e<<24|t<<16|n<<8|r}function c(e,t,n,r){return r<<24|n<<16|t<<8|e}function l(e){var t=d(e);return-1!==t?m(e,t):null}function u(e,t){var n=e.length,r=0;if(65496==o(e[r++],e[r++]))for(;r<n;){var s=o(e[r++],e[r++]),i=o(e[r++],e[r++]);if(65498==s)break;var a=t(s,r,i);if(void 0!==a&&!1!==a)return a;r+=i-2}return-1}function d(e){return u(e,function(t,n){if(65517==t&&80==e[n++]&&104==e[n++]&&111==e[n++]&&116==e[n++]&&111==e[n++]&&115==e[n++]&&104==e[n++]&&111==e[n++]&&112==e[n++]&&32==e[n++]&&51==e[n++]&&46==e[n++]&&48==e[n++])return n})}function m(e,t){for(var n=e.length,r=null,s=t;s+4<n;)if(56==e[s+0]&&66==e[s+1]&&73==e[s+2]&&77==e[s+3]){s+=4;for(var i=o(e[s++],e[s++]),a=e[s++],c="",l=0;l<a;l++)c+=String.fromCharCode(e[s++]);s++;var u=(o(e[s++],e[s++]),o(e[s++],e[s++]));i>=1999&&i<=2998&&(r||(r={}),r[c]=p(e,s,u)),s+=u}else s++;return r}function p(e,t,n){for(var r=n/26,s=0,i=[],c=[],l=t,u=0;u<r;u++){switch(o(e[l++],e[l++])){case 0:case 3:s=o(e[l++],e[l++]),l+=22;break;case 1:case 2:case 4:case 5:for(var d=0;d<3;d++){var m=a(e[l++],e[l++],e[l++],e[l++]),p=a(e[l++],e[l++],e[l++],e[l++]);m>=2147483648?m=(2147483647-m)/16777216:m/=16777216,p>=2147483648?p=(2147483647-p)/16777216:p/=16777216,c.push({x:p,y:m})}s--,0==s&&(c.push(c.shift()),c.push(c[0]),i.push(c),c=[]);break;default:l+=24}}return i}e.exports={getDimensions:r,getOrientation:s,extractPaths:l}},"../../common/src/media/media-loader.js":function(e,t,n){"use strict";function r(e){var t;return t="string"==typeof e?e:h.manage(e),new p(function(e,n){var r=document.createElement("IMG");r.src=t,r.onload=function(t){e(r)},r.onerror=function(e){console.log("load image error",e.message),n(new Error("Unable to load "+t))}})}function s(e){if(/iPhone/i.test(navigator.userAgent))return p.reject("Cannot load video on iPhone");var t;return t="string"==typeof e?e:h.manage(e),new p(function(e,n){var r=document.createElement("VIDEO");r.src=t,r.preload=!0,r.onloadeddata=function(t){e(r)},r.onerror=function(e){n(new Error("Unable to load "+t))}})}function o(e){var t;return t="string"==typeof e?e:h.manage(e),new p(function(e,n){var r=document.createElement("AUDIO");r.src=t,r.preload=!0,r.onloadeddata=function(t){e(r)},r.onerror=function(e){n(new Error("Unable to load "+t))}})}function i(e){return f.loadText(e).then(function(e){var t=new DOMParser,n=t.parseFromString(e,"text/xml"),r=n.getElementsByTagName("svg")[0];if(!r)throw new Error("Invalid SVG document");return r})}function a(e){if("string"==typeof e){var t=e;return h.fetch(t).then(function(e){return a(e)}).catch(function(e){return r(t).then(function(e){return{width:e.naturalWidth,height:e.naturalHeight,format:u(t,"image")}})})}var n=m(e.type);return"svg"===n?i(e).then(function(e){var t=e.width.baseVal.value,r=e.height.baseVal.value,s=e.viewBox.baseVal;return t||(t=s.width),r||(r=s.height),t||(t=1e3),r||(r=1e3),{width:t,height:r,format:n}}):"jpeg"===n?f.loadUint8Array(e).then(function(e){var t=g.getDimensions(e),r=g.getOrientation(e);if(!t)throw new Error("Invalid JPEG file");var s,o;return r>=5?(s=t.height,o=t.width):(s=t.width,o=t.height),{width:s,height:o,format:n}}):r(e).then(function(e){return{width:e.naturalWidth,height:e.naturalHeight,format:n}})}function c(e){if("string"==typeof e){var t=e;return h.fetch(t).then(function(e){return c(e)}).catch(function(e){return s(t).then(function(e){return v.capture(e).then(function(n){return{width:e.videoWidth,height:e.videoHeight,duration:Math.round(1e3*e.duration),format:u(t,"video"),poster:n}})})})}return s(e).then(function(t){return v.capture(t).then(function(n){return{width:t.videoWidth,height:t.videoHeight,duration:Math.round(1e3*t.duration),format:m(e.type),poster:n}})})}function l(e){if("string"==typeof e){var t=e;return h.fetch(t).then(function(e){return l(e)}).catch(function(e){return o(t).then(function(e){return{duration:Math.round(1e3*e.duration),format:u(t,"image")}})})}return o(e).then(function(t){return{duration:Math.round(1e3*t.duration),format:m(e.type)}})}function u(e,t){var n,r=/\.(\w+)$/.execute(e.replace(/#.*/,"").replace(/\?.*/,""));if(r)switch(n=_.toLower(r[1])){case"jpg":return"jpeg";default:return n}else switch(t){case"image":return"jpeg";case"video":return"mp4";case"audio":return"mp3";default:return""}}function d(e){var t=_.split(e,"/");return _.toLower(t[0])}function m(e){var t=_.split(e,"/"),n=_.toLower(t[1]);switch(n){case"svg+xml":return"svg";default:return n}}var p=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),h=n("../../common/src/transport/blob-manager.js"),f=n("../../common/src/transport/blob-reader.js"),g=n("../../common/src/media/jpeg-analyser.js"),v=n("../../common/src/media/frame-grabber.js");e.exports={loadImage:r,loadVideo:s,loadAudio:o,loadSVG:i,getImageMetadata:a,getVideoMetadata:c,getAudioMetadata:l,extractFileCategory:d,extractFileFormat:m}},"../../common/src/media/vector-view.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/media/media-loader.js"),l=n("../../common/src/utils/component-refs.js");e.exports=i.createClass({displayName:"VectorView",propTypes:{url:a.string,clippingRect:a.object,title:a.string,onLoad:a.func,onError:a.func},getInitialState:function(){return this.components=l({svg:SVGGraphicsElement}),{}},componentWillMount:function(){this.load(this.props.url)},componentWillReceiveProps:function(e){this.props.url!==e.url&&this.load(e.url),this.props.clippingRect!==e.clippingRect&&this.setViewBox(e.clippingRect),this.props.title!==e.title&&this.setTitle(e.title)},render:function(){var e=this.components.setters,t=s.omit(this.props,"onLoad","url","clippingRect","title");return i.createElement("svg",r({ref:e.svg,viewBox:"0 0 4 4",width:4,height:4},t))},triggerLoadEvent:function(){this.props.onLoad&&this.props.onLoad({type:"load",target:this})},triggerErrorEvent:function(e){this.props.onError&&this.props.onError({type:"error",target:this,error:e})},load:function(e){var t=this;return e?c.loadSVG(e).then(function(e){var n=t.components.svg;if(!n)throw new Error("Invalid missing container");t.clear(),t.addTitle(t.props.title);for(var r;r=e.firstChild;)e.removeChild(r),n.appendChild(r);var s=e.width.baseVal.value,o=e.height.baseVal.value,i=e.viewBox.baseVal;s||(s=i.width),o||(o=i.height),s||(s=1e3),o||(o=1e3),t.originX=i.x,t.originY=i.y,t.zoomX=i.width?i.width/s:1,t.zoomY=i.height?i.height/o:1,t.naturalWidth=s,t.naturalHeight=o,t.setViewBox(t.props.clippingRect),t.triggerLoadEvent()}).catch(function(e){t.triggerErrorEvent(e)}):(this.clear(),this.originX=0,this.originY=0,this.zoomX=1,this.zoomY=1,this.naturalWidth=4,this.naturalHeight=4,this.setViewBox(),o.resolve())},clear:function(){for(var e=this.components.svg;e.firstChild;)e.removeChild(e.firstChild)},addTitle:function(e){var t=this.components.svg;if(e&&t){var n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=e,t.appendChild(n)}},setTitle:function(e){var t=svg.getElementByTagName("title");t?e?t.textContent=e:svg.removeChild(t):this.addTitle(e)},setViewBox:function(e){e||(e={left:0,top:0,width:this.naturalWidth,height:this.naturalHeight});var t=this.components.svg,n=t.viewBox.baseVal,r=t.width.baseVal,s=t.height.baseVal;n.x=e.left*this.zoomX+this.originX,n.y=e.top*this.zoomX+this.originY,n.width=e.width*this.zoomX,n.height=e.height*this.zoomY,r.value=e.width,s.value=e.height}})},"../../common/src/mixins/update-check.js":function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in t){var r=e[n];if(t[n]!==r)return!1}return!0}e.exports={shouldComponentUpdate:function(e,t){return!r(this.props,e)||!r(this.state,t)}}},"../../common/src/objects/finders/picture-finder.js":function(e,t,n){"use strict";function r(e,t,n){return e.find({table:"picture",criteria:{purpose:t,deleted:!1},minimum:n})}e.exports={findPictures:r}},"../../common/src/objects/finders/project-finder.js":function(e,t,n){"use strict";function r(e,t){return e.findOne({schema:"global",table:"project",criteria:{id:t},required:!0})}function s(e,t){return e.find({table:"project",criteria:{},minimum:t})}function o(e){return e.findOne({schema:"global",table:"project",criteria:{name:e.context.schema+""},required:!0})}function i(e,t){return e.find({schema:"global",table:"project",criteria:{archived:!1,deleted:!1},minimum:t})}function a(e,t,n){var r=l.map(t,"id");return l.isEmpty(r)?u.resolve(d.array):(r=l.sortBy(l.uniq(r)),e.find({schema:"global",table:"project",criteria:{user_ids:r},minimum:n}))}function c(e){return e.find({schema:"local",table:"project_link",criteria:{}}).filter(function(t){return e.findOne({schema:"local",table:"session",criteria:{key:t.address}}).then(function(e){if(e){if((new Date).toISOString()<e.etime)return!0}})})}var l=n("../../common/node_modules/lodash/lodash.js"),u=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),d=n("../../common/src/data/empty.js");e.exports={findProject:r,findAllProjects:s,findCurrentProject:o,findActiveProjects:i,findProjectsWithMembers:a,findProjectLinks:c}},"../../common/src/objects/finders/repo-finder.js":function(e,t,n){"use strict";function r(e,t){return e.findOne({schema:"global",table:"repo",criteria:{id:t},required:!0})}function s(e,t){return e.find({schema:"global",table:"repo",criteria:{},minimum:t})}function o(e,t){return e.find({schema:"global",table:"repo",criteria:{deleted:!1},minimum:t})}function i(e,t){if(t instanceof Array){var n=a.flatten(a.map(t,"repo_ids"));return a.isEmpty(n)?c.resolve(l.array):(n=a.sortBy(a.uniq(n)),e.find({schema:"global",table:"repo",criteria:{id:n,deleted:!1}}))}var r=t;return r?e.find({schema:"global",table:"repo",criteria:{id:r.repo_ids,deleted:!1},prefetch:!0}):c.resolve(l.array)}var a=n("../../common/node_modules/lodash/lodash.js"),c=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/src/data/empty.js");e.exports={findRepo:r,findAllRepos:s,findExistingRepos:o,findProjectRepos:i}},"../../common/src/objects/finders/role-finder.js":function(e,t,n){"use strict";function r(e,t){return e.findOne({schema:"global",table:"role",criteria:{id:t},required:!0})}function s(e,t){return e.find({schema:"global",table:"role",criteria:{},minimum:t})}function o(e,t){return e.find({schema:"global",table:"role",criteria:{deleted:!1,disabled:!1},minimum:t})}function i(e,t){var n=a.flatten(a.map(t,"role_ids"));return a.isEmpty(n)?c.resolve(l.array):(n=a.sortBy(a.uniq(n)),e.find({schema:"global",table:"role",criteria:{id:n}}))}var a=n("../../common/node_modules/lodash/lodash.js"),c=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/src/data/empty.js");e.exports={findRole:r,findAllRoles:s,findActiveRoles:o,findRolesOfUsers:i}},"../../common/src/objects/finders/server-finder.js":function(e,t,n){"use strict";function r(e,t){return e.findOne({schema:"global",table:"server",criteria:{id:t},required:!0})}function s(e,t){return e.find({schema:"global",table:"server",criteria:{},minimum:t})}function o(e,t){var n=i.filter(i.map(t,function(e){var t=l.findLinkByServerType(e,e.type);if(t)return t.server_id}));return i.isEmpty(n)?a.resolve(c.array):(n=i.sortBy(i.uniq(n)),e.find({schema:"global",table:"server",criteria:{id:n}}))}var i=n("../../common/node_modules/lodash/lodash.js"),a=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),c=n("../../common/src/data/empty.js"),l=n("../../common/src/objects/utils/external-data-utils.js");e.exports={findServer:r,findAllServers:s,findServersOfRepos:o}},"../../common/src/objects/finders/statistics-finder.js":function(e,t,n){"use strict";function r(e,t){var n,r,o,a=!1;if(t&&(n=t.type,t.user?r=t.user:t.user_id&&(r={id:t.user_id}),t.project?o=t.project:t.schema?o={name:t.schema}:t.project_name&&(o={name:t.project_name}),a=t.public),"daily-activities"===n){if(r&&o)return i(e,o,r,a);if(o)return s(e,o,r,a)}else if("daily-notifications"===n&&r&&o)return c(e,o,r);return g.resolve(null)}function s(e,t,n){if(!t||t.deleted)return null;var r={schema:t.name,table:"statistics",criteria:{type:"story-date-range",filters:{public:n||void 0}},prefetch:!0};return e.findOne(r).then(function(r){if(m(r)){var s=y.getMonthRanges(r.details.start_time,r.details.end_time),o=y.getTimeZoneOffset(),i=f.map(s,function(e){return{time_range:e,tz_offset:o,public:n||void 0}}),a={schema:t.name,table:"statistics",criteria:{type:"daily-activities",filters:i},prefetch:!0};return e.find(a).then(function(e){return j(e,r)})}})}function o(e,t){return g.mapSeries(t,function(t){return s(e,t)}).then(function(e){var n=f.map(t,"id");return f.zipObject(n,e)})}function i(e,t,n,r){return n?a(e,t,[n],r).then(function(e){return f.get(e,n.id,null)}):null}function a(e,t,n,r){if(!t)return g.resolve(null);var s=(t.name,f.filter(n,function(e){return!e.deleted})),o=f.map(s,function(e){return{user_ids:[e.id],public:r||void 0}}),i={schema:t.name,table:"statistics",criteria:{type:"story-date-range",filters:o},prefetch:!0};return e.find(i).then(function(n){n=f.filter(n,m);var s=f.map(n,function(e){var t=y.getMonthRanges(e.details.start_time,e.details.end_time),n=y.getTimeZoneOffset();return f.map(t,function(t){return{user_ids:e.filters.user_ids,time_range:t,tz_offset:n,public:r||void 0}})}),o=f.flatten(s);if(f.isEmpty(o))return{};var i={schema:t.name,table:"statistics",criteria:{type:"daily-activities",filters:o},prefetch:!0};return e.find(i).then(function(e){return f.transform(n,function(t,n){var r=n.filters.user_ids[0],s=f.filter(e,function(e){return e.filters.user_ids[0]===r});t[r]=j(s,n)},{})})})}function c(e,t,n){return n?l(e,t,[n]).then(function(e){return f.get(e,n.id,null)}):null}function l(e,t,n){if(!t)return g.resolve(null);var r=t.name,s=f.filter(n,function(e){return!e.deleted}),o={type:"notification-date-range",filters:f.map(s,function(e){return{target_user_id:e.id}})};return e.find({schema:r,table:"statistics",criteria:o}).then(function(t){t=f.filter(t,m);var n=f.map(t,function(e){var t=y.getMonthRanges(e.details.start_time,e.details.end_time),n=y.getTimeZoneOffset();return f.map(t,function(t){return{target_user_id:e.filters.target_user_id,time_range:t,tz_offset:n}})}),s=f.flatten(n);if(f.isEmpty(s))return{};var o={type:"daily-notifications",filters:s};return e.find({schema:r,table:"statistics",criteria:o}).then(function(e){return f.transform(t,function(t,n){var r=n.filters.target_user_id,s=f.filter(e,function(e){return e.filters.target_user_id===r});t[r]=j(s,n)},{})})})}function u(e,t,n){return n?d(e,t,[n]).then(function(e){return f.get(e,n.id,null)}):null}function d(e,t,n){if(!t)return g.resolve(null);var r=t.name,s=f.filter(n,function(e){return!e.deleted}),o={type:"story-date-range",filters:f.map(s,function(e){return{external_object:f.find(e.external,{type:e.type})}})};return e.find({schema:r,table:"statistics",criteria:o}).then(function(t){t=f.filter(t,m);var s=f.map(t,function(e){var t=y.getMonthRanges(e.details.start_time,e.details.end_time),n=y.getTimeZoneOffset();return f.map(t,function(t){return{external_object:e.filters.external_object,time_range:t,tz_offset:n}})}),o=f.flatten(s);if(f.isEmpty(o))return{};var i={type:"daily-activities",filters:o};return e.find({schema:r,table:"statistics",criteria:i}).then(function(e){return f.transform(t,function(t,r){var s=r.filters.external_object,o=f.filter(e,function(e){return f.isEqual(e.filters.external_object,s)});t[f.find(n,function(e){return f.some(e.external,s)}).id]=j(o,r)},{})})})}function m(e){return e&&!!e.details.start_time&&!!e.details.end_time}function p(e,t){var n={total:0};return f.each(e,function(e){f.each(e.details,function(e,r){t&&r.substr(0,7)!==t||f.each(e,function(e,t){"#"!==t.charAt(0)&&(n.total+=e),n[t]?n[t]+=e:n[t]=e})})}),n}function h(e){var t={};return f.each(e,function(e){f.assign(t,e.details)}),t}var f=n("../../common/node_modules/lodash/lodash.js"),g=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),v=n("../../common/node_modules/moment/moment.js"),b=n("../../common/src/utils/memoize.js"),y=n("../../common/src/utils/date-utils.js");e.exports={find:r,findDailyActivitiesOfProject:s,findDailyActivitiesOfProjects:o,findDailyActivitiesOfUser:i,findDailyActivitiesOfUsers:a,findDailyNotificationsOfUser:c,findDailyNotificationsOfUsers:l,findDailyActivitiesOfRepo:u,findDailyActivitiesOfRepos:d};var j=b(function(e,t,n){var r=v().subtract(1,"month").format("YYYY-MM"),s=v().format("YYYY-MM"),o=h(e),i=p(e,r),a=p(e,s),c=p(e),l=t.details.start_time,u=t.details.end_time;if(0===i.total){l.substr(0,7)<=r||(i.total=void 0)}return{range:{start:l,end:u},last_month:i,this_month:a,to_date:c,daily:o}})},"../../common/src/objects/finders/system-finder.js":function(e,t,n){"use strict";function r(e){return e.findOne({schema:"global",table:"system",criteria:{},prefetch:!0}).then(function(e){return e||{}})}n("../../common/node_modules/lodash/lodash.js"),n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/src/data/empty.js");e.exports={findSystem:r}},"../../common/src/objects/finders/task-finder.js":function(e,t,n){"use strict";function r(e,t,n){return e.find({schema:"global",table:"task",criteria:{etime:null,deleted:!1,newer_than:t,limit:10,user_id:null},minimum:n})}function s(e,t,n){return t?e.find({schema:"global",table:"task",criteria:{options:{server_id:t.id},deleted:!1,limit:1e3},minimum:n}):o.resolve(i.array)}var o=(n("../../common/node_modules/lodash/lodash.js"),n("../../common/node_modules/bluebird/js/browser/bluebird.js")),i=n("../../common/src/data/empty.js");e.exports={findActiveTasks:r,findServerTasks:s}},"../../common/src/objects/finders/user-finder.js":function(e,t,n){"use strict";function r(e,t){return e.findOne({schema:"global",table:"user",criteria:{id:t},required:!0})}function s(e,t){return f.isEmpty(t)?g.resolve(v.array):(t=f.sortBy(f.uniq(t)),e.find({schema:"global",table:"user",criteria:{id:t}}))}function o(e,t){return e.find({schema:"global",table:"user",criteria:{},minimum:t})}function i(e,t){var n;if(t instanceof Array)n=f.flatten(f.map(t,"user_ids"));else{var r=t;n=f.get(r,"user_ids")}return s(e,n)}function a(e,t){return e.find({schema:"global",table:"user",criteria:{deleted:!1},minimum:t})}function c(e,t){return e.find({schema:"global",table:"user",criteria:{deleted:!1,disabled:!1},minimum:t})}function l(e,t,n){var r=f.map(t,"id");return r=f.sortBy(f.uniq(r)),e.find({schema:"global",table:"user",criteria:{role_ids:r},minimum:n})}function u(e,t){return s(e,f.flatten(f.map(t,"user_ids")))}function d(e,t){return s(e,f.map(t,"user_id"))}function m(e,t){return s(e,f.map(t,"target_user_id"))}function p(e,t){return s(e,f.flatten(f.map(t,"user_ids")))}function h(e,t){return s(e,f.map(t,"user_id"))}var f=n("../../common/node_modules/lodash/lodash.js"),g=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),v=n("../../common/src/data/empty.js");e.exports={findUser:r,findUsers:s,findAllUsers:o,findUsersWithRoles:l,findProjectMembers:i,findExistingUsers:a,findActiveUsers:c,findStoryAuthors:u,findReactionAuthors:d,findBookmarkRecipients:m,findBookmarkSenders:p,findNotificationTriggerers:h}},"../../common/src/objects/settings/project-settings.js":function(e,t,n){"use strict";function r(e,t){if(e&&t&&!t.disabled){if("admin"===t.type||o.includes(e.user_ids,t.id))return e.archived?"read-only":"read-write";if(o.get(e,"settings.access_control.grant_view_access"))return e.archived?"read-only":o.get(e,"settings.access_control.grant_comment_access")?"read-comment":"read-only"}return null}function s(e,t){if(r(e,t))return!0;if("guest"===t.type){if(o.get(e,"settings.membership.allow_guest_request"))return!0}else if(o.get(e,"settings.membership.allow_user_request"))return!0;return!1}var o=n("../../common/node_modules/lodash/lodash.js");e.exports={default:{},isVisibleToUser:s,getUserAccessLevel:r}},"../../common/src/objects/settings/server-settings.js":function(e,t,n){"use strict";e.exports={default:{}}},"../../common/src/objects/settings/system-settings.js":function(e,t,n){"use strict";e.exports={default:{}}},"../../common/src/objects/settings/user-settings.js":function(e,t,n){"use strict";e.exports={default:{notification:{like:!0,comment:!0,task_completion:!0,vote:!0,bookmark:!0,mention:!0,coauthor:!0},web_alert:{like:!0,comment:!0,task_completion:!0,vote:!0,bookmark:!0,mention:!0,coauthor:!0},mobile_alert:{like:!0,comment:!0,task_completion:!0,vote:!0,bookmark:!0,mention:!0,coauthor:!0}}}},"../../common/src/objects/types/server-types.js":function(e,t,n){"use strict";e.exports=t=["dropbox","facebook","github","gitlab","google","windows"],t.integrated=["gitlab"]},"../../common/src/objects/types/story-types.js":function(e,t,n){"use strict";(function(r){e.exports=t=["push","merge","branch","tag","issue","milestone","merge-request","wiki","member","repo","post","survey","task-list"],t.editable=["post","task-list","survey"],t.trackable=["post"],t.git=["push","merge","branch","tag","issue","milestone","merge-request","wiki","member","repo"],"[object process]"===Object.prototype.toString.call(void 0!==r?r:0)||(t.icons={push:n("../node_modules/octicons/build/svg/repo-push.svg"),merge:n("../node_modules/octicons/build/svg/git-merge.svg"),branch:n("../node_modules/octicons/build/svg/git-branch.svg"),tag:n("../node_modules/octicons/build/svg/tag.svg"),issue:n("../node_modules/octicons/build/svg/issue-opened.svg"),"issue.opened":n("../node_modules/octicons/build/svg/issue-opened.svg"),"issue.closed":n("../node_modules/octicons/build/svg/issue-closed.svg"),"issue.reopened":n("../node_modules/octicons/build/svg/issue-reopened.svg"),milestone:n("../node_modules/octicons/build/svg/milestone.svg"),"merge-request":n("../node_modules/octicons/build/svg/git-pull-request.svg"),wiki:n("../node_modules/octicons/build/svg/file-text.svg"),member:n("../node_modules/octicons/build/svg/person.svg"),repo:n("../node_modules/octicons/build/svg/repo.svg"),post:n("../node_modules/octicons/build/svg/note.svg"),survey:n("../node_modules/octicons/build/svg/list-unordered.svg"),"task-list":n("../node_modules/octicons/build/svg/list-ordered.svg")})}).call(t,n("../node_modules/process/browser.js"))},"../../common/src/objects/types/user-types.js":function(e,t,n){"use strict";e.exports=["guest","regular","moderator","admin"]},"../../common/src/objects/utils/external-data-utils.js":function(e,t,n){"use strict";function r(e,t){return y.assign({type:e.type,server_id:e.id},t)}function s(e,t,n){var r=c(t,e);if(!r)throw new Error("Parent object is not linked to server");return r=y.pickBy(r,function(e,t){return"_"!==t.charAt(0)}),y.assign(r,n)}function o(e,t,n){return a(e,r(t,n))}function i(e,t,n,r){return a(e,s(t,n,r))}function a(e,t){return e.external?y.remove(e.external,{server_id:t.server_id}):e.external=[],e.external.push(t),t}function c(e,t,n){var r=y.find(e.external,{server_id:t.id});return!r||n&&!y.isMatch(r,n)?null:r}function l(e,t,n){var r=y.find(e.external,{type:t});return!r||n&&!y.isMatch(r,n)?null:r}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y.find(e.external,function(e){if(y.every(y.pick(e,n)))return!0})||null}function d(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return y.find(e.external,function(e){return y.find(t.external,function(t){if(e.type===t.type&&e.server_id===t.server_id){if(y.isEmpty(r))return!0;if(y.isEqual(y.pick(e,r),y.pick(t,r)))return!0}})})||null}function m(e,t,n){y.remove(e.external,function(e){if(e.server_id===t.id&&(!n||y.isMatch(e,n)))return!0})}function p(e){return y.size(e.external)}function h(e,t,n,r){if(!r.ignore){var s,o=y.get(e,n),i=r.overwrite,a=y.indexOf(i,":");if(-1!==a&&(s=i.substr(a+1),i=i.substr(0,a)),"always"===i)void 0!==r.value?y.set(e,n,r.value):y.unset(e,n);else if("never"===i)void 0===o&&void 0!==r.value&&y.set(e,n,r.value);else{if("match-previous"!==i)throw new Error("Unknown option: "+i);var c=v(e,t),l=y.get(c,s);y.isEqual(o,l)&&(void 0!==r.value?(y.set(e,n,r.value),y.set(c,s,r.value)):(y.unset(e,n),y.unset(c,s)))}}}function f(e,t,n){if(!n.ignore){var r="details.resources",s=y.get(e,r,[]),o=y.findIndex(s,{type:n.type}),i=s[o],a=n.replace;if("always"===a)void 0===i?n.value&&s.push(n.value):n.value?s[o]=n.value:s.splice(o,1);else if("never"===a)void 0===i&&n.value&&s.push(n.value);else{if("match-previous"!==a)throw new Error("Unknown option: "+a);var c=v(e,t),l=y.get(c,"resources",[]),u=y.findIndex(l,{type:n.type}),d=l[u];y.isEqual(i,d)&&(void 0===i?n.value&&(s.push(n.value),l.push(n.value)):n.value?(s[o]=n.value,l[u]=n.value):(s.splice(o,1),l.splice(u,1))),y.isEmpty(l)?y.unset(c,"resources"):y.set(c,"resources",l)}y.isEmpty(s)?y.unset(e,r):y.set(e,r,s)}}function g(e,t,n,r,s){if(!s.ignore){var o,i=y.get(r,n),a=s.overwrite,c=y.indexOf(a,":");if(-1!==c&&(o=a.substr(c+1),a=a.substr(0,c)),"always"===a)y.set(r,n,s.value);else if("never"===a)void 0===i&&y.set(r,n,s.value);else{if("match-previous"!==a)throw new Error("Unknown option: "+a);var l=v(e,t),u=y.get(l,o);y.isEqual(i,u)&&(y.set(r,n,s.value),y.set(l,o,s.value))}}}function v(e,t){var n=y.find(e.exchange,{server_id:t.id});return n||(n={type:t.type,server_id:t.id,previous:{}},e.exchange||(e.exchange=[]),e.exchange.push(n)),n.previous}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=y.first(t),s=y.slice(t,1),o=y.find(r.external,function(e){var t=y.pick(e,"server_id","type");return y.every(s,function(e){return y.some(e.external,t)})});return o?{id:o.server_id,type:o.type}:null}var y=n("../../common/node_modules/lodash/lodash.js");e.exports={createLink:r,extendLink:s,addLink:o,inheritLink:i,attachLink:a,findLink:c,findLinkByServerType:l,findLinkByRelations:u,findLinkByRelative:d,removeLink:m,countLinks:p,importProperty:h,importResource:f,exportProperty:g,findCommonServer:b}},"../../common/src/routing/cors-rewriter.js":function(e,t,n){"use strict";function r(e,t){var n,r,s=new RegExp("^/(https?)/([^/]*)"),o=s.exec(e.path);o?(r=o[1]+":",n=o[2],e.path=e.path.substr(o[0].length),t.cors=!0):(n=window.location.host,r=window.location.protocol,t.cors=!1),r&&n&&(t.address=r+"//"+n)}function s(e,t){if(t.cors){var n=t.address;if(n){var r=n.indexOf("://"),s=n.substr(0,r),o=n.substr(r+3);e.path="/"+s+"/"+o+e.path}}}e.exports={extract:r,insert:s}},"../../common/src/routing/route-manager.jsx":function(e,t,n){"use strict";function r(e){var t=e,n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r+1),t=t.substr(0,r));var o={},i=t.indexOf("?");return-1!==i&&(o=s(t.substr(i+1)),t=t.substr(0,i)),{path:t,query:o,hash:n}}function s(e){var t={},n=i.split(e,"&");return i.each(n,function(e){var n=i.split(e,"="),r=decodeURIComponent(n[0]),s=decodeURIComponent(n[1]||"");s=i.replace(s,/\+/g," "),t[r]=s}),t}function o(e){return e.pathname+e.search+e.hash}var i=n("../../common/node_modules/lodash/lodash.js"),a=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),c=n("../../common/node_modules/react/react.js"),l=c.PropTypes,u=n("../../common/src/data/database.js");e.exports=c.createClass({displayName:"RouteManager",propTypes:{pages:l.array.isRequired,database:l.instanceOf(u),rewrite:l.func,onChange:l.func,onRedirectionRequest:l.func},getInitialState:function(){return{basePath:this.getBasePath(),url:null,component:null,parameters:null,query:null,hash:""}},getBasePath:function(){var e=document.getElementsByTagName("BASE")[0];if(e){var t=e.getAttribute("href");return i.replace(t,/\/+$/,"")}return""},getURL:function(){return this.state.url},getComponent:function(){return this.state.component},getParameters:function(){return this.state.parameters},getQuery:function(){return this.state.query},getHash:function(){return this.state.hash},goTo:function(e,t){var n=o(e);return this.change(n,t)},find:function(e,t){var n,r;e instanceof Array?(n=e[0],r=i.slice(e,1)):n=e,t=i.clone(t)||{};var s=n.getURL(t),o=this.state.basePath;o&&(s.path=o+s.path),this.props.rewrite&&this.props.rewrite(s,t,"find");var a=s.path;if(!i.isEmpty(s.query)){var c="";i.forIn(s.query,function(e,t){c+=c?"&":"?",c+=t+"="+encodeURIComponent(e).replace(/%20/g,"+")}),a+=c}var l=i.map(r,function(e){return e.getHash(t)}),u=i.join(l,"");return u&&(a+="#"+u),a},parse:function(e){var t=this,n=r(e),s={};this.props.rewrite&&this.props.rewrite(n,s,"parse");var o=this.state.basePath;if(o){if(!i.startsWith(n.path,o))return null;n.path=n.path.substr(o.length)}var a,c=0;try{i.each(this.props.pages,function(e){if("function"!=typeof e.parseURL){var r=i.get(e,"displayName","Page");throw new Error(r+" does not implement the static function parseURL()")}var o=e.parseURL(n.path,n.query);if(o&&o.match.length>c){var l=i.assign(i.omit(o,"match"),s),u=t.find(e,l);n.hash&&(u+="#"+n.hash),a={url:u,component:e,parameters:l,query:n.query,hash:n.hash},c=o.match.length}})}catch(e){return console.error(e),null}return a},change:function(e,t,n){var r=this;if(this.state.url===e)return a.resolve(!1);var s=this.parse(e);return s?(this.setState(s,function(){n||(n=s.url);var e=window.location.protocol,o=window.location.host,i=e+"//"+o+n;window.location.href!==i&&(t?window.history.replaceState({},"",i):window.history.pushState({},"",i)),r.triggerChangeEvent()}),a.resolve(!0)):this.triggerRedirectionRequest(e,t)},reanchor:function(e){var t=window.location.href,n=t.indexOf("#"),r=-1!==n?t.substr(0,n):t;e&&(r+="#"+e),t!==r&&window.history.replaceState({},"",r),this.state.hash!==e&&this.setState({hash:e})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerRedirectionRequest:function(e,t){var n=this;if(this.props.onRedirectionRequest&&!this.redirecting){var r=this.state.basePath;return r&&i.startsWith(e,r)&&(e=e.substr(r.length),i.startsWith(e,"/")||(e="/"+e)),this.redirecting=!0,a.try(function(){return n.props.onRedirectionRequest({type:"redirection",target:n,url:e,replacing:t})}).finally(function(){n.redirecting=!1})}return a.reject(new Error("Unable to route URL to a page: "+e))},render:function(){return null},componentDidMount:function(){this.componentDidUpdate({},{}),window.addEventListener("popstate",this.handlePopState)},componentDidUpdate:function(e,t){!e.database&&this.props.database&&this.goTo(window.location,!0).catch(function(e){console.error(e)})},componentWillUnmount:function(){window.removeEventListener("popstate",this.handlePopState)},handlePopState:function(e){var t=this;e.preventDefault();var n=o(window.location),r=this.parse(n);r&&this.setState(r,function(){t.triggerChangeEvent()})}})},"../../common/src/routing/route.js":function(e,t,n){"use strict";function r(e){this.routeManager=e,this.url=this.routeManager.getURL(),this.path=o.replace(this.url,/[?#].*/,""),this.component=this.routeManager.getComponent(),this.parameters=this.routeManager.getParameters(),this.query=this.routeManager.getQuery(),this.hash=this.routeManager.getHash(),this.callbacks=[]}function s(e){var t=c[e];if(!t){var n=[],r=e.replace(/(:\w+)/g,function(e){return n.push(e),"([^\\/]+)"});t=c[e]=new RegExp("^"+r),t.names=n}return t}var o=("function"==typeof Symbol&&Symbol.iterator,n("../../common/node_modules/lodash/lodash.js")),i=n("../../common/node_modules/bluebird/js/browser/bluebird.js");e.exports=r,r.prototype.change=function(e,t,n){var r=this;if("string"!=typeof e)throw new Error("Invalid argument");return this.ask(e,!0).then(function(s){return!!s&&r.routeManager.change(e,t,n)})},r.prototype.find=function(e,t){return this.routeManager.find(e,t)},r.prototype.push=function(e,t){var n=this.routeManager.find(e,t);return this.change(n,!1)},r.prototype.replace=function(e,t){var n=this.routeManager.find(e,t);return this.change(n,!0)},r.prototype.reanchor=function(e){this.routeManager.reanchor(e),this.hash=e||""},r.prototype.ask=function(e,t){return t?i.reduce(this.callbacks,function(t,n){try{if(!t)return!1;var r=n(e,!0);return i.resolve(r)}catch(e){return console.error(e),!0}},!0).then(function(e){return e}):o.reduce(this.callbacks,function(e,t){try{if(!e)return!1;var n=t(!1);if("boolean"!=typeof n)throw new Error("Callback passed to keep() should return a boolean when interactive (2nd argument) is true");return n}catch(e){return console.error(e),!0}},!0)},r.prototype.keep=function(e){this.callbacks.push(e)},r.prototype.free=function(e){o.pull(this.callbacks,e)},r.prototype.toString=function(){return this.url},r.compare=function(e,t){if(e&&t){if(e.component!==t.component)return!1;var n=e.parameters,r=t.parameters,s=o.union(o.keys(n),o.keys(r));return o.every(s,function(e){var t=n[e],s=r[e];return!(!o.isEqual(t,s)&&(t instanceof Array&&0===t.length&&(t=null),s instanceof Array&&0===s.length&&(s=null),t||s))})}return!1},r.match=function(e,t,n){for(var r=0;r<t.length;r++){var i=s(t[r]),a=i.exec(e);if(a){var c={};return o.each(i.names,function(e,t){c[e.substr(1)]=a[t+1]}),n&&(c=n(c)),c&&(c.match=a[0]),c}}},r.parseIdList=function(e){if(void 0!=e){if(e){var t=o.split(e,/[\s\+]/);return o.map(t,o.strictParseInt)}return a}};var a=[];r.parseId=function(e,t){if(void 0!=e){if(t instanceof RegExp){var n=t.exec(e);if(!n)return;e=n[1]}return o.strictParseInt(e)}},r.parseDate=function(e){if(void 0!=e)return/\d{4}-\d{2}-\d{2}/.test(e)?e:""};var c={}},"../../common/src/theme/theme-manager.jsx":function(e,t,n){"use strict";function r(e){var t;if("number"==typeof e)return e;if(t=/^(\d+)\s*vw/.exec(e)){var n=parseInt(t[1]);return Math.round(n*document.body.offsetWidth/100)}if(t=/^(\d+)\s*vh/.exec(e)){var n=parseInt(t[1]);return Math.round(n*document.body.offsetHeight/100)}}function s(e){switch(e){case"cellular":case"2g":return"50kbps";case"3g":return"400kbps";case"4g":return"5000kbps";case"ethernet":case"wifi":default:return"10000kpbs"}}function o(e,t){if(t.original)return null;var n=e.clip;return t.hasOwnProperty("clip")?n=t.clip:n||(n=p.default(e.width,e.height)),n}function i(){var e=document.createElement("CANVAS");if(e.width=e.height=1,e.toDataURL){if(5===e.toDataURL("image/webp").indexOf("image/webp"))return!0}return!1}function a(){var e=navigator.userAgent;return!(!/Android/.test(e)||/Edge/.test(e))}function c(){if(!a())return!1;var e=window.innerHeight;return screen.height-e>200}function l(){var e=navigator.userAgent;return!!/iPhone|iPad|iPod/.test(e)||(!!/Android/.test(e)||!!/Windows Phone/.test(e))}var u=n("../../common/node_modules/lodash/lodash.js"),d=n("../../common/node_modules/react/react.js"),m=d.PropTypes,p=n("../../common/src/media/image-cropping.js"),h=n("../../common/src/transport/blob-manager.js"),f=n("../../common/src/data/database.js");e.exports=d.createClass({displayName:"ThemeManager",propTypes:{modes:m.object,serverAddress:m.string,networkType:m.string,database:m.instanceOf(f),useWebP:m.bool,onChange:m.func},getInitialState:function(){return{mode:this.selectMode(),onscreenKeyboard:c(),touchInterface:l(),devicePixelRatio:window.devicePixelRatio,webpSupport:i(),details:null}},getMode:function(){return this.state.mode},getModes:function(){var e=u.sortBy(u.toPairs(this.props.modes),1);u.map(e,0);return u.keys(this.props.modes)},getBandwidth:function(){return 1e3*parseInt(s(this.props.networkType))},getDetails:function(){return this.state.details},hasKeyboard:function(){return this.state.onscreenKeyboard},hasTouchInterface:function(){return this.state.touchInterface},getImageURL:function(e,t){if(!e)return null;t||(t={});var n=this.getRemoteImageURL(e,t);return n||t.remote||(n=this.getLocalImageURL(e,t)),n},getLocalImageURL:function(e,t){if(e.payload_token){var n;switch(e.type){case"video":case"audio":case"website":n="poster";break;default:n="main"}var r="payload:"+e.payload_token+"/"+n,s=h.find(r);if(!s)return null;var i={url:h.url(s),clip:o(e,t),format:e.format};return"json:"+JSON.stringify(i)}},getRemoteImageURL:function(e,t){var n;switch(e.type){case"video":case"audio":case"website":n=e.poster_url;break;default:n=e.url}if(n){var s="";if(!t.original){var i=[],a=o(e,t);if(a){var c=u.map([a.left,a.top,a.width,a.height],Math.round);i.push("cr"+c.join("-"))}var l=r(t.width),d=r(t.height);1!==this.state.devicePixelRatio&&(l*=this.state.devicePixelRatio,d*=this.state.devicePixelRatio),l=Math.round(l),d=Math.round(d);var m=l||d;m&&(l&&d?i.push("re"+l+"-"+d):!l&&d?i.push("h"+d):!d&&l&&i.push("w"+l),"png"!==e.format&&"gif"!==e.format||i.push("sh")),void 0!==t.quality&&i.push("q"+t.quality);var p;"svg"===e.format?p="svg":this.state.webpSupport&&!1!==this.props.useWebP||!0===this.props.useWebP?(p="webp","png"!==e.format&&"gif"!==e.format||m||i.push("l")):p="png"===e.format||"gif"===e.format?"png":"jpg",s="/"+i.join("+")+"."+p}return""+this.props.serverAddress+n+s}},getVideoURL:function(e,t){if(!e.url)return null;t||(t={});var n=""+this.props.serverAddress+e.url;if(!t||!t.original){var r=this.pickVideoVersion(e,t);r&&(n+="."+r.name+"."+r.format)}return n},getAudioURL:function(e,t){if(!e.url)return null;t||(t={});var n=""+this.props.serverAddress+e.url;if(!t||!t.original){var r=this.pickAudioVersion(e,t);r&&(n+="."+r.name+"."+r.format)}return n},getImageDimensions:function(e,t){t||(t={});var n=o(e,t);return n&&!t.original?{width:n.width,height:n.height}:{width:e.width,height:e.height}},getDimensions:function(e,t){if("video"===e.type){if(!t.original){var n=this.pickVideoVersion(e,t);if(n&&n.width&&n.height)return{width:n.width,height:n.height}}return{width:e.width,height:e.height}}return this.getImageDimensions(e,t)},pickVideoVersion:function(e,t){if(t.hasOwnProperty("bitrate"))return u.find(e.resources,{bitrates:{video:t.bitrate}})||null;var n=this.getBandwidth(),r=function(e){return parseInt(u.get(e,"bitrates.video"))},s=function(e){var t=r(e);return t<=n?n-t:1/0},o=function(e){var t=r(e);return t>n?t-n:0},i=u.sortBy(e.versions,[s,o]);return u.first(i)||null},pickAudioVersion:function(e,t){if(t.hasOwnProperty("bitrate"))return u.find(e.resources,{bitrates:{audio:t.bitrate}})||null;var n=this.getBandwidth(),r=function(e){return parseInt(u.get(e,"bitrates.audio"))},s=function(e){var t=r(e);return t<=n?n-t:1/0},o=function(e){var t=r(e);return t>n?t-n:0},i=u.sortBy(e.versions,[s,o]);return u.first(i)||null},getURL:function(e,t){switch(e.type){case"image":return this.getImageURL(e,t);case"video":return this.getVideoURL(e,t);case"website":return e.url;case"audio":return this.getAudioURL(e,t)}},selectMode:function(){var e=document.body.parentNode.offsetWidth,t="";for(var n in this.props.modes){e>=this.props.modes[n]&&(t=n)}return t},change:function(e){var t=this;return u.isEqual(this.state.details,e)?Promise.resolve(!0):(this.setState({details:e},function(){t.triggerChangeEvent()}),Promise.resolve(!0))},componentWillMount:function(){window.addEventListener("resize",this.handleWindowResize)},render:function(){return null},componentDidMount:function(){this.change(g)},componentDidUpdate:function(e,t){var n=this;if(!e.database&&this.props.database){var r=this.props.database.use({schema:"local",by:this});r.start().then(function(){return r.findOne({table:"settings",key:"theme"})}).then(function(e){e&&e.theme&&n.change(e.theme)})}},componentWillUnmount:function(){window.removeEventListener("resize",this.handleWindowResize)},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleWindowResize:function(e){var t=this,n={},r=this.selectMode();this.state.mode!==r&&(n.mode=r);var s=c();if(this.state.onscreenKeyboard!==s&&(n.onscreenKeyboard=s,s&&a())){var o=document.activeElement;o&&setTimeout(function(){o.scrollIntoViewIfNeeded({behavior:"smooth",block:"center"})},100)}this.state.devicePixelRatio!==window.devicePixelRatio&&(n.devicePixelRatio=window.devicePixelRatio),u.isEmpty(n)||this.setState(n,function(){t.triggerChangeEvent()})}});var g={}},"../../common/src/theme/theme.js":function(e,t,n){"use strict";function r(e){this.themeManager=e,this.mode=this.themeManager.getMode(),this.modes=this.themeManager.getModes(),this.keyboard=this.themeManager.hasKeyboard(),this.touch=this.themeManager.hasTouchInterface(),this.details=this.themeManager.getDetails()}var s=n("../../common/node_modules/lodash/lodash.js");e.exports=r,r.prototype.change=function(e){return this.themeManager.change(e)},r.prototype.isAboveMode=function(e){var t=s.indexOf(this.modes,e);return s.indexOf(this.modes,this.mode)>=t},r.prototype.isBelowMode=function(e){return!this.isAboveMode(e)},r.prototype.getImageURL=function(e,t){return this.themeManager.getImageURL(e,t)},r.prototype.getVideoURL=function(e,t){return this.themeManager.getVideoURL(e,t)},r.prototype.getAudioURL=function(e,t){return this.themeManager.getAudioURL(e,t)},r.prototype.getURL=function(e,t){return this.themeManager.getURL(e,t)},r.prototype.getImageDimensions=function(e,t){return this.themeManager.getImageDimensions(e,t)},r.prototype.getDimensions=function(e,t){return this.themeManager.getDimensions(e,t)}},"../../common/src/transport/background-file-transfer.js":function(e,t,n){"use strict";function r(){try{c=a.init(),c.on("success",function(e){var t=i.find(l,{id:e.id});t&&t.onSuccess&&t.onSuccess(e),i.pull(l,t)}),c.on("progress",function(e){var t=i.find(l,{id:e.id});t&&t.onProgress&&t.onProgress(e)}),c.on("error",function(e){var t=i.find(l,{id:e.id});t&&t.onError&&t.onError(new Error(e.error))})}catch(e){c=null}}function s(e,t,n,r){var s={id:e,filePath:t,serverUrl:n,fileKey:"file",headers:i.get(r,"headers",{}),parameters:i.get(r,"parameters",{})};c.startUpload(s);var o={id:e,onSuccess:i.get(r,"onSuccess"),onError:i.get(r,"onError"),onProgress:i.get(r,"onProgress")};l.push(o)}function o(e){return new Promise(function(t,n){var r=function(e){t(e)},s=function(e){n(new Error(e.error))};c.removeUpload(e,r,s)})}var i=n("../../common/node_modules/lodash/lodash.js"),a=window.FileTransferManager;e.exports={initialize:r,send:s,cancel:o};var c,l=[]},"../../common/src/transport/blob-manager.js":function(e,t,n){"use strict";function r(e){var t=new Date,n=u.find(p,{blob:e});if(n)return n.atime=t,n.localURL;var r;e instanceof Blob&&(r=URL.createObjectURL(e));var s=[r];return p.push({blob:e,localURL:r,urls:s,atime:t}),r}function s(e){if(!e)return null;var t=u.find(p,function(t){return u.includes(t.urls,e)});return t?(t.atime=new Date,t.blob):null}function o(e,t){if(e&&t){var n=u.find(p,{blob:e});n||(r(e),n=u.find(p,{blob:e})),n.urls.push(t)}}function i(e){if(!e)throw d.reject(new Error("Invalid argument"));var t=s(e);if(t)return d.resolve(t);var n={responseType:"blob"};return m.fetch("GET",e,null,n).then(function(t){r(t);return o(t,e),t})}function a(e){var t=u.findIndex(p,{blob:e});if(-1!==t){var n=p[t];p.splice(t,1),c(n)}}function c(e){e.blob instanceof Blob&&URL.revokeObjectURL(e.localURL)}function l(){var e=new Date,t=u.remove(p,function(t){if(u.some(t.urls,function(e){return/https?:/.test(e)})&&e-t.atime>18e4)return!0});u.each(t,function(e){c(e)})}var u=n("../../common/node_modules/lodash/lodash.js"),d=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),m=(n("../../common/node_modules/moment/moment.js"),n("../../common/src/transport/http-request.js"));e.exports={manage:r,find:s,associate:o,fetch:i,release:a,url:r};var p=[];setInterval(l,6e4)},"../../common/src/transport/blob-reader.js":function(e,t,n){"use strict";function r(e){return s(e).then(function(e){return new Uint8Array(e)})}function s(e){if("string"==typeof e){var t=e;return a.fetch(t).then(function(e){return s(e)})}return new i(function(t,n){var r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(e){n(new Error("Unable to load blob"))},r.readAsArrayBuffer(e)})}function o(e){if("string"==typeof e){var t=e;return a.fetch(t).then(function(e){return o(e)})}return new i(function(t,n){var r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(e){n(new Error("Unable to load text"))},r.readAsText(e)})}var i=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/transport/blob-manager.js");e.exports={loadUint8Array:r,loadArrayBuffer:s,loadText:o}},"../../common/src/transport/blob-stream.js":function(e,t,n){"use strict";function r(e,t){this.id=c.generate(),this.address=e,this.options=t,this.parts=[],this.closed=!1,this.error=null,this.pullResult=null,this.waitResult=null,this.size=0,this.started=!1,this.canceled=!1,this.finished=!1,this.online=!0,this.transferred=0,this.promise=null,this.onProgress=null,this.onComplete=null,this.onError=null}function s(){var e={};return e.promise=new i(function(t,n){e.resolve=t,e.reject=n}),e}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/transport/http-request.js"),c=n("../../common/src/utils/random-token.js"),l=n("../../common/node_modules/async-do-while/index.js");e.exports=r,r.prototype.toBlob=function(){var e=o.map(this.parts,"blob");if(e.length>1){var t=e[0].type;return new Blob(e,{type:t})}return 1===e.length?e[0]:new Blob},r.prototype.setOptions=function(e){if(this.started)throw new Error("Cannot set options once a stream has started");this.options=o.assign({},this.options,e)},r.prototype.push=function(e){this.parts.push({blob:e,sent:!1}),this.size+=e.size,this.pullResult&&(this.pullResult.resolve(e),this.pullResult=null)},r.prototype.close=function(){this.closed=!0,o.find(this.parts,{sent:!1})||(this.pullResult&&(this.pullResult.resolve(null),this.pullResult=null),this.waitResult&&(this.waitResult.resolve(),this.waitResult=null))},r.prototype.pull=function(){var e=o.find(this.parts,{sent:!1});return e?i.resolve(e.blob):this.closed?i.resolve(null):(this.pullResult||(this.pullResult=s()),this.pullResult.promise)},r.prototype.finalize=function(e){var t=o.find(this.parts,{blob:e});if(t&&(t.sent=!0),this.waitResult){!o.find(this.parts,{sent:!1})&&this.closed&&this.waitResult.resolve()}},r.prototype.abandon=function(e){this.error=e,this.waitResult&&this.waitResult.reject(e)},r.prototype.wait=function(){if(this.closed){if(this.error)return i.reject(this.error);if(!o.find(this.parts,{sent:!1}))return i.resolve()}return this.waitResult||(this.waitResult=s()),this.waitResult.promise},r.prototype.pipe=function(e,t){t||(t=1048576);for(var n=e.size,r=e.type,s=0;s<n;s+=t){var o=Math.min(t,n-s),i=e.slice(s,s+o,r);this.push(i)}return this.close(),this},r.prototype.suspend=function(e){this.online&&(this.online=!1)},r.prototype.resume=function(){if(!this.online&&(this.online=!0,this.onConnectivity)){var e=this.onConnectivity;this.onConnectivity=null,this.connectivityPromise=null,e()}},r.prototype.waitForConnectivity=function(){var e=this;return this.online?i.resolve():(this.connectivityPromise||(this.connectivityPromise=new i(function(t,n){e.onConnectivity=t})),this.connectivityPromise)},r.prototype.start=function(){var e=this;return this.promise||(this.promise=this.waitForConnectivity().then(function(){return e.started=!0,new i(function(t,n){var r=0,s=!1,c=0,u=0,d=1e3;l.do(function(){return e.waitForConnectivity().then(function(){return e.pull().then(function(n){if(e.canceled)throw new Error("Stream was canceled");var r=e.getURL(),i=new FormData;n?(i.append("file",n),i.append("chunk",u),0===u&&o.each(e.options,function(e,t){i.append(t,e)})):s=!0;var l={responseType:"json",onUploadProgress:function(t){if(n){var r=Math.round(n.size*(t.loaded/t.total));r&&e.updateProgress(c+r)}}};return e.chunkPromise=a.fetch("POST",r,i,l),e.chunkPromise.then(function(r){n&&(e.finalize(n),c+=n.size),0===u&&t(),u++}).finally(function(){e.chunkPromise=null})}).catch(function(t){if(!e.canceled&&!(t.statusCode>=400&&t.statusCode<=499&&429!==t.statusCode)&&++r<10)return d=Math.min(2*d,3e4),i.delay(d);throw t})})}),l.while(function(){return!s}),l.end().then(function(){e.finished=!0,e.onComplete&&e.onComplete({type:"complete",target:e})}).catch(function(t){if(e.abandon(t),0!==u){var r=e.getURL(),s=new FormData;return s.append("abort",1),a.fetch("POST",r,s).catch(function(e){}).finally(function(){e.onError&&e.onError(t)})}n(t)})})})),this.promise},r.prototype.cancel=function(){this.canceled||this.finished||(this.canceled=!0,this.chunkPromise&&this.chunkPromise.isPending()&&this.chunkPromise.cancel())},r.prototype.getURL=function(){return this.address+"/srv/media/stream/?id="+this.id},r.prototype.updateProgress=function(e){this.transferred=e,this.onProgress&&this.onProgress({type:"progress",target:this,loaded:e,total:this.size,lengthComputable:this.closed})}},"../../common/src/transport/http-request.js":function(e,t,n){"use strict";function r(e,t,n,r){var c=new XMLHttpRequest,l=new i(function(i,l){var u=o.get(r,"username",null),d=o.get(r,"password",null),m=o.get(r,"contentType",null);if("GET"===(e=o.toUpper(e))&&!o.isEmpty(n)){var p=[];o.forIn(n,function(e,t){t=encodeURIComponent(t),void 0!==(e=encodeURIComponent(e))&&p.push(t+"="+e)}),-1===o.indexOf(t,"?")?t+="?":t+="&",t+=o.join(p,"&"),n=null}"json"===m&&(m="application/json"),"application/json"===m&&o.isObject(n)&&(n=JSON.stringify(n,s)),c.timeout=o.get(r,"timeout"),c.withCredentials=o.get(r,"crossSite",!1),c.responseType=o.get(r,"responseType",""),c.attributes=o.get(r,"attributes"),c.attributes&&c.upload&&(c.upload.attributes=c.attributes),c.open(e,t,!0,u,d),m&&c.setRequestHeader("Content-Type",m),c.onload=function(e){if(c.status>=400){var t=new a(c.status,c.response);l(t)}else{var n=c.response;i(n)}},c.ontimeout=function(e){l(new Error("Request timed out"))},c.onerror=function(e){l(new Error(e.message))},c.onabort=function(e){l(new Error("Transfer aborted: "+t))};var h=o.get(r,"onDownloadProgress"),f=o.get(r,"onUploadProgress");c.onprogress=function(e){h&&h(e)},c.upload.onprogress=function(e){f&&f(e)},c.send(n)});return l.cancel=function(){c.abort()},l}function s(e,t){if(!(t instanceof Blob))return t}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/errors/http-error.js");e.exports={fetch:r}},"../../common/src/transport/notification-unpacker.js":function(e,t,n){"use strict";function r(e){return e.changes?{type:"change",changes:s(e)}:e.alert?{type:"alert",alert:o(e)}:e.revalidation?{type:"revalidation",revalidation:i(e)}:e.socket?{type:"connection",connection:a(e)}:e.address&&e.schema&&e.notification_id?{type:"alert",alert:c(e)}:null}function s(e){var t=[],n=e.address;return l.each(e.changes,function(e,r){var s=l.split(r,"."),o=s[0],i=s[1];l.each(e.ids,function(r,s){var a=e.gns[s];t.push({address:n,schema:o,table:i,id:r,gn:a})})}),t}function o(e){var t=e.address,n=l.clone(e.alert);return n.address=t,n.profile_image&&(n.profile_image=t+n.profile_image),n.attached_image&&(n.attached_image=t+n.attached_image),n}function i(e){var t=e.address,n=l.clone(e.revalidation);return n.address=t,n}function a(e){return{method:"websocket",relay:null,token:e.socket,address:e.address,details:{user_agent:navigator.userAgent}}}function c(e){return{title:"",message:"",type:e.type,address:e.address,schema:e.schema,notification_id:parseInt(e.notification_id),reaction_id:parseInt(e.reaction_id),story_id:parseInt(e.story_id),user_id:parseInt(e.user_id),foreground:!!e.foreground}}var l=n("../../common/node_modules/lodash/lodash.js");e.exports={unpack:r}},"../../common/src/transport/payload-manager.jsx":function(e,t,n){"use strict";(function(t){function r(e){return e>=1073741824?s.round(e/1073741824)+" GB":e>=1048576?s.round(e/1048576)+" MB":e>=1024?s.round(e/1024)+" KB":e>0?e+" bytes":"0"}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/node_modules/moment/moment.js"),l=n("../../common/src/transport/blob-stream.js"),u=n("../../common/src/transport/payload.js"),d=n("../../common/src/data/database.js"),m=n("../../common/src/routing/route.js"),p=n("../../common/src/widgets/diagnostics.jsx"),h=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=i.createClass({displayName:"PayloadManager",propTypes:{online:a.bool,database:a.instanceOf(d),route:a.instanceOf(m),onChange:a.func},getDefaultProps:function(){return{online:!0}},getInitialState:function(){var e={payloads:[],streams:[]};return s.assign(this,e),e},updateList:function(e,t){var n=this[e],r=t(n);this[e]=r;var s={};s[e]=r,this.setState(s)},add:function(e,t){t||(t={});var n=this.props.route.parameters,r=t.address||n.address,o=t.schema||n.schema||"global",i=new u(r,o,e);return i.onUploadProgress=this.handleUploadProgress,i.onUploadComplete=this.handleUploadComplete,this.updateList("payloads",function(e){return s.concat(e,i)}),i},stream:function(){var e=this.props.route.parameters,t=new l(e.address);return this.props.online||t.suspend(),this.updateList("streams",function(e){return s.concat(e,t)}),t},dispatch:function(e){var t=this,n=s.filter(this.payloads,function(t){return s.includes(e,t.token)});s.isEmpty(n)||this.acquirePermission(n).then(function(){return s.each(n,function(e){e.send()}),null}).then(function(){t.triggerChangeEvent()})},abandon:function(e){var t=s.filter(this.payloads,function(t){return s.includes(e,t.token)});s.isEmpty(t)||(s.each(t,function(e){e.cancel()}),s.pullAll(this.payloads,t),this.triggerChangeEvent())},inquire:function(e){var n=this;if(s.isEmpty(e))return null;var r=s.filter(this.payloads,function(t){return s.includes(e,t.token)});if(r.length<e)return t(function(){var t=n.props.route.parameters,r=[];s.each(e,function(e){s.find(n.payloads,{token:e})||r.push(new u(t.address,t.schema,"unknown",e))}),n.updateList("payloads",function(e){return s.concat(e,r)})}),{action:"unknown",progress:void 0};var o=0,i=0;if(s.each(r,function(e){o+=e.getSize(),i+=e.getUploaded()}),(i=o>0?Math.round(i/o*100):100)<100)return{action:"uploading",progress:i};if(s.some(r,{failed:!0}))return{action:"failed"};var a=s.filter(r,function(e){return"web-site"===e.type});if(s.some(a,{completed:!1})){var c=0;return s.each(l,function(e){c+=e.processed}),c=Math.round(c/s.size(a)),{action:"rendering",progress:c}}var l=s.filter(r,function(e){return"video"===e.type||"audio"===e.type});if(s.some(l,{completed:!1})){var d=0;return s.each(l,function(e){d+=e.processed}),d=Math.round(d/s.size(l)),{action:"transcoding",progress:d}}return null},getUploadProgress:function(){var e=0,t=0;return s.each(this.payloads,function(n){n.started&&(n.failed||n.sent||(t+=n.getRemainingFiles(),e+=n.getRemainingBytes()))}),t>0?{files:t,bytes:e}:null},acquirePermission:function(e){var t=s.filter(e,{approved:!1});if(s.isEmpty(t))return o.resolve();var n=this.props.database.use({by:this});return n.start().then(function(r){var o,i=s.map(t,function(e){o=e.schema;var t={};return s.each(e.parts,function(e){t[e.name]=!1}),{token:e.token,action:e.action,options:t,user_id:r}});return n.save({schema:o,table:"task"},i).then(function(t){s.each(e,function(e){e.approved=!0})}).catch(function(t){s.each(e,function(e){e.failed=!0})})})},componentDidMount:function(){},componentDidUpdate:function(e,t){var n=this;!e.database&&this.props.database&&this.triggerChangeEvent(),e.database===this.props.database&&t.payloads===this.state.payloads||this.props.route&&this.updateBackendProgress(),e.online!==this.props.online&&s.each(this.streams,function(e){n.props.online?e.resume():e.suspend()})},updateBackendProgress:function(){var e=this,t=this.props.route.parameters,n=t.schema||"global",r=s.filter(this.payloads,{sent:!0,completed:!1,address:t.address,schema:n});if(!s.isEmpty(r)){var o=this.props.database.use({schema:n,by:this});o.start().then(function(t){var n={token:s.map(r,"token"),user_id:t};return o.find({table:"task",criteria:n}).then(function(t){var n=!1;s.each(t,function(e){var t=s.find(r,{token:e.token});t&&t.updateBackendStatus(e)&&(n=!0)}),n&&e.triggerChangeEvent()})})}},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleUploadProgress:function(e){this.triggerChangeEvent()},handleUploadComplete:function(e){this.triggerChangeEvent()},render:function(){var e=this.state.payloads;if(s.isEmpty(e))return null;var t=s.filter(e,{started:!1}),n=s.filter(e,{started:!0,sent:!1,failed:!1}),r=s.filter(e,{sent:!0,completed:!1}),o=s.filter(e,{failed:!0}),a=s.filter(e,{completed:!0});return i.createElement(p,{type:"payload-manager"},i.createElement(h,{label:"Pending payloads",hidden:s.isEmpty(t)},s.map(t,this.renderPayload)),i.createElement(h,{label:"Payloads in transit",hidden:s.isEmpty(n)},s.map(n,this.renderPayload)),i.createElement(h,{label:"Payloads in backend process",hidden:s.isEmpty(r)},s.map(r,this.renderPayload)),i.createElement(h,{label:"Failed payloads",hidden:s.isEmpty(o)},s.map(o,this.renderPayload)),i.createElement(h,{label:"Completed payloads",hidden:s.isEmpty(a)},s.map(a,this.renderPayload)))},renderPayload:function(e,t){return i.createElement("div",{key:t},i.createElement("div",null,"Payload token: ",e.token),i.createElement("div",null,"Resource type: ",e.type),this.renderTransferStatus(e),this.renderBackendStatus(e),i.createElement("ol",null,s.map(e.parts,this.renderPayloadPart)))},renderTransferStatus:function(e){if(!e.started)return null;if(e.sent){var t,n=.001*(c(e.uploadEndTime)-c(e.uploadStartTime)),o=e.getSize();o>0&&(t="("+r(o/n)+" per sec)");var a=s.round(n,n<1?2:0)+"s";return i.createElement("div",null,"Upload duration: ",a," ",t)}var o=e.getSize(),l=e.getUploaded(),u=Math.round(l/o*100||0)+"%";return i.createElement("div",null,"Upload progress: ",u)},renderBackendStatus:function(e){if(!e.sent)return null;if(e.completed){var t=.001*(c(e.processEndTime)-c(e.uploadEndTime)),n=s.round(t,t<1?2:0)+"s";return i.createElement("div",null,"Backend duration: ",n)}var r=e.processed+"%";return i.createElement("div",null,"Backend progress: ",r)},renderPayloadPart:function(e,t){var n,s=e.name;e.blob||e.cordovaFile?n="File":e.stream?n="Stream":e.url&&(n="URL");var o;return e.size>0&&(o=i.createElement("span",{className:"file-size"},r(e.size))),i.createElement("li",{key:t},n," - ",s," ",o)}})}).call(t,n("../node_modules/timers-browserify/main.js").setImmediate)},"../../common/src/transport/payload.js":function(e,t,n){"use strict";function r(e,t,n,r){this.address=e,this.schema=t,this.type=n,this.action="add-"+n,this.token=r||d.generate(),this.recreated=!!r,this.options={},this.url="payload:"+this.token,this.processed=0,this.promise=null,this.parts=[],this.approved=!1,this.started=!!r,this.sent=!1,this.failed=!1,this.canceled=!1,this.completed=!1,this.uploadStartTime=null,this.uploadEndTime=null,this.processEndTime=null,this.onUploadProgress=null,this.onUploadComplete=null}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/node_modules/moment/moment.js"),a=(n("../../common/src/transport/blob-stream.js"),n("../../common/src/transport/blob-manager.js")),c=n("../../common/src/transport/http-request.js"),l=n("../../common/src/transport/background-file-transfer.js"),u=n("../../common/src/errors/http-error.js"),d=(n("../../common/src/errors/file-error.js"),n("../../common/src/utils/random-token.js")),m=n("../../common/node_modules/async-do-while/index.js");e.exports=r,r.getImageURL=function(e){if(e.payload_token){var t;switch(e.type){case"image":t="main";break;default:t="poster"}var n="payload:"+e.payload_token+"/"+t;return a.find(n)}},r.prototype.attachFile=function(e,t){t||(t="main");var n="payload:"+this.token+"/"+t;return a.associate(e,n),e instanceof Blob&&this.parts.push({blob:e,size:e.size,uploaded:0,sent:!1,name:t}),this},r.prototype.attachStream=function(e,t){return t||(t="main"),this.parts.push({stream:e,size:e.size,uploaded:e.transferred,sent:!1,name:t}),this},r.prototype.attachURL=function(e,t){return t||(t="main"),this.parts.push({url:e,name:t,sent:!1}),this},r.prototype.attachStep=function(e,t){var n;switch(t){case"poster":n={generate_poster:!0}}return this.setPartOptions(n,e),this.parts.push({name:t,sent:!1}),this},r.prototype.setPartOptions=function(e,t){t||(t="main");var n=s.find(this.parts,{name:t});if(!n)throw new Error("Unable to find part: "+t);n.stream?n.stream.setOptions(e):n.options=s.assign({},n.options,e)},r.prototype.send=function(){var e=this;if(!this.started){if(!this.approved)throw new u(403);this.started=!0,this.uploadStartTime=i().toISOString(),o.each(this.parts,function(t){var n=!1,r=1,s=1e3;return m.do(function(){return e.sendPart(t).then(function(){n=t.sent=!0}).catch(function(t){if(t.statusCode>=400&&t.statusCode<=499)throw t;return s=Math.min(2*s,1e4),o.delay(s).then(function(){e.canceled||r++})})}),m.while(function(){return!n&&!e.canceled}),m.end()}).then(function(){e.sent=!0,e.uploadEndTime=i().toISOString(),e.onUploadComplete&&e.onUploadComplete({type:"uploadcomplete",target:e})})}},r.prototype.sendPart=function(e){return e.stream?this.sendStream(e):e.blob?this.sendBlob(e):(e.cordovaFile,e.url?this.sendURL(e):o.resolve())},r.prototype.sendBlob=function(e){var t=this,n=this.getDestinationURL(e.name),r=e.blob,o=new FormData;o.append("file",r),s.each(e.options,function(e,t){o.append(t,e)});var i={responseType:"json",onUploadProgress:function(n){t.updateProgress(e,n.loaded/n.total)}};return e.uploaded=0,e.promise=c.fetch("POST",n,o,i),e.promise.then(function(e){return t.associateRemoteURL(e.url,r),e})},r.prototype.sendCordovaFile=function(e){return},r.prototype.sendStream=function(e){var t=this,n=this.getDestinationURL(e.name),r=e.stream;return r.onProgress=function(n){t.updateProgress(e,n.loaded/n.total)},r.start().then(function(){var e={responseType:"json",contentType:"json"};return c.fetch("POST",n,{stream:r.id},e)})},r.prototype.sendURL=function(e){var t=this.getDestinationURL(e.name),n={responseType:"json",contentType:"json"},r=s.extend({url:e.url},e.options);return e.promise=c.fetch("POST",t,r,n),e.promise},r.prototype.cancel=function(){var e=this;return!this.started||this.completed||this.failed||this.canceled?o.resolve(!1):(this.canceled=!0,o.each(this.parts,function(t){if(!t.sent)return e.cancelPart(t)}).then(function(){return!0}))},r.prototype.cancelPart=function(e){return e.stream?this.cancelStream(e):e.blob?this.cancelBlob(e):(e.cordovaFile,e.url?this.cancelURL(e):o.resolve())},r.prototype.cancelStream=function(e){return o.try(function(){return e.stream.cancel()}).catch(function(e){})},r.prototype.cancelBlob=function(e){return o.try(function(){if(e.promise&&e.promise.isPending())return e.promise.cancel()}).catch(function(e){})},r.prototype.cancelCordovaFile=function(e){var t=this;return o.try(function(){var n=s.indexOf(t.parts,e),r=t.token+"-"+(n+1);return l.cancel(r)}).catch(function(e){})},r.prototype.cancelURL=function(e){return o.try(function(){if(e.promise&&e.promise.isPending())return e.promise.cancel()}).catch(function(e){})},r.prototype.getSize=function(){var e=s.map(this.parts,function(e){return e.size||0});return s.sum(e)},r.prototype.getUploaded=function(){var e=s.map(this.parts,function(e){return e.uploaded||0});return s.sum(e)},r.prototype.getRemainingFiles=function(){return s.filter(this.parts,function(e){if(e.size>0&&e.uploaded<e.size)return!0}).length},r.prototype.getRemainingBytes=function(){var e=s.map(this.parts,function(e){return e.size>0?e.size-e.uploaded:0});return s.sum(e)},r.prototype.getDestinationURL=function(e){var t;switch(this.type){case"image":"main"===e&&(t="/srv/media/images/upload/"+this.schema+"/");break;case"video":"main"===e?t="/srv/media/videos/upload/"+this.schema+"/":"poster"===e&&(t="/srv/media/videos/poster/"+this.schema+"/");break;case"audio":"main"===e?t="/srv/media/audios/upload/"+this.schema+"/":"poster"===e&&(t="/srv/media/audios/poster/"+this.schema+"/");break;case"website":"poster"===e&&(t="/srv/media/html/poster/"+this.schema+"/")}return t?""+this.address+t+"?token="+this.token:null},r.prototype.updateProgress=function(e,t){t&&(e.uploaded=Math.round(e.size*t),this.onUploadProgress&&this.onUploadProgress({type:"uploadprogress",target:this}))},r.prototype.updateBackendStatus=function(e){var t=!1;return"unknown"===this.type&&(this.action=e.action,this.type=s.replace(this.action,/^add\-/,""),this.sent=e.completion>0,t=!0),this.processed!==e.completion&&(this.processed=e.completion,t=!0),this.processEndTime!==e.etime&&(this.processEndTime=e.etime,e.etime&&!e.failed&&(this.completed=!0),t=!0),e.failed&&!this.failed&&(this.failed=!0,t=!0),t},r.prototype.associateRemoteURL=function(e,t){e&&a.associate(t,this.address+e)}},"../../common/src/transport/payloads.js":function(e,t,n){"use strict";function r(e,t){this.payloadManager=e,this.destination=t,this.uploading=this.payloadManager.getUploadProgress()}function s(e){var t=[];if(e){var n=e.details;n&&(n.resources?o.each(n.resources,function(e){e.payload_token&&t.push(e.payload_token)}):n.payload_token&&t.push(n.payload_token))}return t}var o=n("../../common/node_modules/lodash/lodash.js");n("../../common/node_modules/bluebird/js/browser/bluebird.js");e.exports=r,r.prototype.add=function(e){return this.payloadManager.add(e,this.destination)},r.prototype.cancel=function(e){return this.payloadManager.abandon([e])},r.prototype.override=function(e){return new r(this.payloadManager,e)},r.prototype.stream=function(){return this.payloadManager.stream()},r.prototype.dispatch=function(e){var t=s(e);return this.payloadManager.dispatch(t)},r.prototype.abandon=function(e){var t=s(e);return this.payloadManager.abandon(t)},r.prototype.inquire=function(e){var t=s(e);return this.payloadManager.inquire(t)}},"../../common/src/transport/websocket-notifier.jsx":function(e,t,n){"use strict";function r(){return new a(function(e,t){Notification.requestPermission(function(n){"granted"===n?e():t(new Error("Unable to gain permission"))})})}function s(e,t){return c.createElement("pre",{key:t},JSON.stringify(e,void 0,4))}function o(e){try{return JSON.parse(e)}catch(e){return{}}}var i=n("../../common/node_modules/lodash/lodash.js"),a=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),c=n("../../common/node_modules/react/react.js"),l=c.PropTypes,u=n("../../common/node_modules/sockjs-client/lib/entry.js"),d=n("../../common/node_modules/async-do-while/index.js"),m=n("../../common/src/transport/notification-unpacker.js"),p=n("../../common/src/locale/locale.js"),h=n("../../common/src/widgets/diagnostics.jsx"),f=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=c.createClass({displayName:"WebsocketNotifier",propTypes:{serverAddress:l.string,basePath:l.string,initialReconnectionDelay:l.number,maximumReconnectionDelay:l.number,defaultProfileImage:l.string,online:l.bool,locale:l.instanceOf(p),onConnect:l.func,onDisconnect:l.func,onNotify:l.func,onAlertClick:l.func,onRevalidate:l.func},statics:{isAvailable:function(){return!0}},getDefaultProps:function(){return{basePath:"/srv/socket",online:!0,initialReconnectionDelay:500,maximumReconnectionDelay:3e4}},getInitialState:function(){return{socket:null,notificationPermitted:!1,reconnectionCount:0,recentMessages:[]}},componentWillMount:function(){var e=this;r().then(function(){e.setState({notificationPermitted:!0})}).catch(function(e){}),this.updateConnection(this.props)},componentWillReceiveProps:function(e){this.props.serverAddress!==e.serverAddress&&this.updateConnection(e),!this.props.online&&e.online?this.onConnectivity&&this.onConnectivity():this.props.online&&!e.online&&this.state.socket&&this.state.socket.close()},updateConnection:function(e){this.disconnect(),e.serverAddress&&this.connect(e.serverAddress)},waitForConnectivity:function(){var e=this;return this.props.online?a.resolve():(this.connectivityPromise||(this.connectivityPromise=new a(function(t,n){e.onConnectivity=function(){e.connectivityPromise=null,e.onConnectivity=null,t()}})),this.connectivityPromise)},connect:function(e){var t=this,n=this.connectionAttempt;if(n&&n.serverAddress===e)return n.promise;n=this.connectionAttempt={serverAddress:e};var r=!1,s=this.props.initialReconnectionDelay,c=this.props.maximumReconnectionDelay;return d.do(function(){return t.createSocket(e).then(function(s){n===t.connectionAttempt&&(s.onmessage=function(n){if(t.state.socket===s){var r=o(n.data),a=i.assign({address:e},r),c=m.unpack(a);"change"===c.type?t.triggerNotifyEvent(c.changes):"alert"===c.type?t.showAlert(c.alert):"connection"===c.type?(s.id=c.connection.token,t.triggerConnectEvent(c.connection)):"revalidation"===c.type&&t.triggerRevalidateEvent(c.revalidation);var l=i.slice(t.state.recentMessages);l.unshift(r),l.length>10&&l.splice(10),t.setState({recentMessages:l})}},s.onclose=function(){t.state.socket===s&&(t.setState({socket:null},function(){t.connect(e).then(function(e){if(e){var n=t.state.reconnectionCount+1;t.setState({reconnectionCount:n}),console.log("Connection reestablished")}})}),t.props.serverAddress===e&&(console.log("Disconnect"),t.triggerDisconnectEvent()))},t.setState({socket:s})),r=!0}).catch(function(t){return s*=2,s>c&&(s=c),console.log("Connection attempt in "+s+"ms: "+e),a.delay(s)})}),d.while(function(){return n===t.connectionAttempt&&!r}),d.return(function(){return t.connectionAttempt=null,r}),n.promise=d.end(),n.promise},disconnect:function(){var e=this.state.socket;e&&this.setState({socket:null,reconnectionCount:0},function(){e.close()})},createSocket:function(e){var t=this.props.basePath;return this.waitForConnectivity().then(function(){return new a(function(n,r){var s=""+e+t,o=new u(s),i=!1;o.onopen=function(e){i||(i=!0,n(o))},o.onclose=function(){i||r(new Error("Unable to establish a connection"))},o.onerror=function(e){i||(i=!0,r(new Error(e.message)))}})})},triggerNotifyEvent:function(e){this.props.onNotify&&this.props.onNotify({type:"notify",target:this,changes:e})},triggerConnectEvent:function(e){this.props.onConnect&&this.props.onConnect({type:"connect",target:this,connection:e})},triggerDisconnectEvent:function(){this.props.onDisconnect&&this.props.onDisconnect({type:"disconnect",target:this})},triggerAlertClickEvent:function(e){this.props.onAlertClick&&this.props.onAlertClick({type:"alertclick",target:this,alert:e})},triggerRevalidateEvent:function(e){this.props.onRevalidate&&this.props.onRevalidate({type:"invalidate",target:this,revalidation:e})},showAlert:function(e){var t=this;if(this.state.notificationPermitted){var n={};e.profile_image?n.icon=e.profile_image:n.icon=this.props.defaultProfileImage,e.message?n.body=e.message:e.attached_image&&(n.image=e.attached_image),n.lang=i.get(this.props.locale,"languageCode");var r=new Notification(e.title,n);r.addEventListener("click",function(){t.triggerAlertClickEvent(e),r.close()})}},render:function(){var e=i.get(this.state.socket,"id");return c.createElement(h,{type:"websocket-notifier"},c.createElement(f,{label:"Connection"},c.createElement("div",null,"ID: ",e),c.createElement("div",null,"Socket: ",this.state.socket?"established":"none"),c.createElement("div",null,"Reconnection count: ",this.state.reconnectionCount),c.createElement("div",null,"Notification: ",this.state.notificationPermitted?"permitted":"denied")),c.createElement(f,{label:"Recent messages"},i.map(this.state.recentMessages,s)))}})},"../../common/src/utils/component-refs.js":function(e,t,n){"use strict";function r(e){if(!this)return new r(e);var t=this,n={};s.forIn(e,function(e,r){var s=function(e){if(!(arguments.length>0))return t[r];t[r]=e};n[r]=s}),this.setters=n,s.forIn(e,function(e,n){t[n]=null})}var s=n("../../common/node_modules/lodash/lodash.js");e.exports=r},"../../common/src/utils/date-tracker.js":function(e,t,n){"use strict";function r(e,t){"change"===e&&t&&p.push(t)}function s(e,t){"change"===e&&t&&u.pull(p,t)}function o(e){h=e,a(d())&&l()}function i(e){return e.format("YYYY-MM-DD")}function a(e){var n=!1;return u.each(m,function(r,s){var o=r(e.clone()),a=t[s];if(o){var c=i(o);a!==c&&(t[s]=c,t[s+"ISO"]=o.toISOString(),n=!0)}}),n}function c(){var e=d();i(e)!==t.today&&(a(e),l())}function l(){var e={type:"change",target:t};u.each(p,function(t){t(e)})}var u=n("../../common/node_modules/lodash/lodash.js"),d=n("../../common/node_modules/moment/moment.js");e.exports=t={addEventListener:r,removeEventListener:s,setLocale:o,today:void 0};var m={today:function(e){return e.startOf("day")},yesterday:function(e){return e.subtract(1,"day").startOf("day")},oneWeekAgo:function(e){return e.subtract(7,"day").startOf("day")},twoWeeksAgo:function(e){return e.subtract(14,"day").startOf("day")},oneMonthAgo:function(e){return e.subtract(1,"month").startOf("day")},twoMonthsAgo:function(e){return e.subtract(2,"month").startOf("day")},startOfWeek:function(e){if(h)return e.locale(h).startOf("week")},endOfWeek:function(e){if(h)return e.locale(h).endOf("week")},startOfMonth:function(e){return e.startOf("month")},endOfMonth:function(e){return e.endOf("month")},startOfLastMonth:function(e){return e.subtract(1,"month").startOf("month")},endOfLastMonth:function(e){return e.subtract(1,"month").endOf("month")},startOfYear:function(e){return e.startOf("year")},endOfYear:function(e){return e.endOf("year")}},p=[],h="";setInterval(c,1e3),c()},"../../common/src/utils/date-utils.js":function(e,t,n){"use strict";function r(e){var t=e instanceof a?e:a(e),n=t.clone().endOf("day");return"["+t.toISOString()+","+n.toISOString()+"]"}function s(e,t){for(var n=e instanceof a?e:a(e),r=t instanceof a?t:a(t),s=n.startOf("month"),o=r.endOf("month"),i=[],c=s.clone();c<=o;c.add(1,"month")){var l=c.toISOString(),u=c.clone().endOf("month").toISOString(),d="["+l+","+u+"]";i.push(d)}return i}function o(e,t){for(var n=startTime instanceof a?startTime:a(startTime),r=t instanceof a?t:a(t),s=n.startOf("day"),o=r.endOf("day"),i=[],c=s.clone();c<=o;c.add(1,"day")){var l=c.format("YYYY-MM-DD");i.push(l)}return i}function i(){return a().utcOffset()}var a=n("../../common/node_modules/moment/moment.js");n("../../common/src/utils/date-tracker.js");e.exports={getDayRange:r,getMonthRanges:s,getTimeZoneOffset:i,getDates:o}},"../../common/src/utils/lodash-extra.js":function(e,t,n){"use strict";function r(e){switch(void 0===e?"undefined":s(e)){case"number":return 0;case"string":return o.repeat("x",e.length);case"boolean":return!1;case"object":return e instanceof Array?o.map(e,r):o.mapValues(e,r)}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n("../../common/node_modules/lodash/lodash.js"),i={};o.mixin({decouple:function(e,t,n){"string"==typeof t?t=o.split(t,"."):t instanceof Array||(t=[t]),n||(n=i);var r=o.clone(e);r instanceof Object||(r={});for(var s=r,a=e,c=0;c<t.length;c++){var l=t[c],u=a?a[l]:void 0,d=o.clone(u);c===t.length-1?d instanceof n.constructor||(d=n):d instanceof Object||(d={}),s[l]=d,s=d,a=u}return r},decoupleSet:function(e,t,n){if("string"==typeof t?t=o.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var r=o.slice(t,0,-1),s=o.decouple(e,r,{});return o.set(s,t,n),s},decoupleUnset:function(e,t){if("string"==typeof t?t=o.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var n=o.slice(t,0,-1),r=o.decouple(e,n,{});return o.unset(r,t),r},decouplePush:function(e,t){for(var n=o.decouple(e,t,[]),r=o.get(n,t),s=arguments.length,i=Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];return Array.prototype.push.apply(r,i),n},shallowDiff:function(e,t){return o.pickBy(e,function(e,n){return t[n]!==e})},obscure:function(e,t){var n=o.cloneDeep(e);return o.each(t,function(e){var t=o.get(n,e);o.set(n,e,r(t))}),n},strictParseInt:function(e){var t=o.parseInt(e);if(t.toString()!==e)throw new Error("Not an integer: "+e);return t},fileSize:function(e){if(e<1024)return e+"B";var t=e/1024;if(t<1024)return o.round(t)+"KB";var n=t/1024;if(n<1024)return o.round(n,1)+"MB";var r=n/1024;return o.round(r,2)+"GB"}})},"../../common/src/utils/memoize.js":function(e,t,n){"use strict";function r(e,t,n){void 0===t&&(t=null);var r=!1!==n?o(e):s(e);return function(){return null!=arguments[0]?r.apply(null,arguments):t}}var s=n("../node_modules/memoizee/index.js"),o=n("../node_modules/memoizee/weak.js");e.exports=r},"../../common/src/utils/random-token.js":function(e,t,n){"use strict";function r(){var e=new Uint32Array(4);window.crypto.getRandomValues(e);var t=[];return e.forEach(function(e){for(var n=e.toString(16);n.length<8;)n="0"+n;t.push(n)}),t.join("")}e.exports={generate:r}},"../../common/src/utils/slug-generator.js":function(e,t,n){"use strict";function r(e){"string"==typeof e&&(e={en:e});var t,n="";for(var t in e)if(n=String(e[t]),n=o(n).toLowerCase(),n=n.replace(/\s+/g,"-"),n=n.replace(/[^0-9a-z\-]/g,""),/^\-+$/.test(n)&&(n=""),n)break;return n.length>32&&(n=n.substr(0,32)),n}function s(e){"string"==typeof e&&(e={en:e});var t,n="";for(var t in e){var r=String(e[t]).split(/\s+/).map(function(e){return o(e).toLowerCase().replace(/[^a-z]/g,"")}).filter(Boolean);if(r.length>0){for(var s=r[r.length-1],i="",a=0;a<r.length-1;a++)i+=r[a].charAt(0);if(n=i+s)break}}return n}function o(e){return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"")}e.exports={fromTitle:r,fromPersonalName:s}},"../../common/src/widgets/autosize-text-area.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=(o.PropTypes,n("../../common/src/utils/component-refs.js")),a=n("../../common/src/mixins/update-check.js");n("../../common/src/widgets/autosize-text-area.scss"),e.exports=o.createClass({displayName:"AutosizeTextArea",mixins:[a],getInitialState:function(){return this.components=i({actual:HTMLTextAreaElement,shadow:HTMLTextAreaElement}),{requiredHeight:void 0}},getElement:function(){return this.components.actual},componentWillReceiveProps:function(e){if(this.props.value!==e.value){var t=this.components.actual;t&&t===document.activeElement&&t.value!==e.value&&(this.caretPosition={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,text:t.value})}},render:function(){var e=this.components.setters,t=s.extend({height:this.state.requiredHeight},this.props.style),n=s.omit(this.props,"style");return o.createElement("div",{className:"autosize-text-area"},o.createElement("textarea",{ref:e.shadow,style:t,className:"shadow",value:n.value,readOnly:!0}),o.createElement("textarea",r({ref:e.actual,style:t},n)))},componentDidMount:function(){window.removeEventListener("resize",this.handleDocumentResize),this.updateSize()},componentDidUpdate:function(e,t){if(this.caretPosition){var n,r,o=this.components.actual,i=this.caretPosition.selectionStart,a=this.caretPosition.selectionEnd,c=this.caretPosition.text,l=this.props.value,u=c.substring(0,i),d=c.substring(a),m=c.substring(i,a);s.startsWith(l,u)&&(n=i),s.endsWith(l,d)&&(r=l.length-d.length),void 0!==n&&void 0===r?(r=n+m.length)>l.length&&(r=l.length):void 0===n&&void 0!==r&&(n=r-m.length)<0&&(n=0),void 0!==n&&void 0!==r&&(m||(n=r),o.selectionStart=n,o.selectionEnd=r),this.caretPosition=null}e.value!==this.props.value&&this.updateSize()},componentWillUnmount:function(){window.removeEventListener("resize",this.handleDocumentResize)},focus:function(){this.components.actual.focus()},updateSize:function(){var e=this.components.shadow,t=this.components.actual;if(e&&t){var n=e.offsetHeight,r=e.scrollHeight,s=e.clientHeight,o=t.offsetHeight,i=r+(n-s)+1;if(this.state.height!==i){if(o>i&&o>this.state.requiredHeight)return;this.setState({requiredHeight:i})}}},handleResize:function(e){},handleDocumentResize:function(e){this.updateSize()}})},"../../common/src/widgets/autosize-text-area.scss":function(e,t){},"../../common/src/widgets/chartist.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=(n("../../common/node_modules/react-dom/index.js"),n("../../common/node_modules/chartist/dist/chartist.js")),a=n("../../common/src/utils/component-refs.js");n("./widgets/chartist.scss"),e.exports=s.createClass({displayName:"Chartist",propTypes:{type:o.oneOf(["line","bar","pie"]).isRequired,data:o.object.isRequired,className:o.string,options:o.object,responsiveOptions:o.array,style:o.object,onDraw:o.func,onClick:o.func},getInitialState:function(){return this.components=a({container:HTMLDivElement}),{}},componentWillReceiveProps:function(e){this.props.onDraw!==e.onDraw&&(this.chartist?this.chartist.off("draw",this.props.onDraw):this.chartist.on("draw",e.onDraw))},render:function(){var e=["ct-chart"];this.props.className&&e.push(this.props.className);var t={ref:this.components.setters.container,className:e.join(" "),style:this.props.style,onClick:this.props.onClick};return s.createElement("div",t)},componentDidUpdate:function(e,t){e.type!==this.props.type?(this.destroyChart(),this.createChart()):e.data===this.props.data&&e.options===this.props.options&&e.responsiveOptions===this.props.responsiveOptions||this.updateChart()},componentDidMount:function(){this.createChart()},createChart:function(){var e=i[r.upperFirst(this.props.type)],t=this.components.container;this.chartist=new e(t,this.props.data,this.props.options,this.props.responsiveOptions),this.props.onDraw&&this.chartist.on("draw",this.props.onDraw)},updateChart:function(){this.chartist.update(this.props.data,this.props.options,this.props.responsiveOptions)},destroyChart:function(){this.chartist&&this.chartist.detach();var e=this.components.container;if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}),e.exports.Interpolation=i.Interpolation,e.exports.Svg=i.Svg},"../../common/src/widgets/collapsible-container.jsx":function(e,t,n){"use strict";function r(e){var t=e.offsetHeight,n=e.getElementsByClassName("collapsible-container");return _.each(n,function(e){if(t-=e.offsetHeight,parseInt(e.style.height)>0){var n=e.children[0];t+=n.offsetHeight}}),t}var s=n("../../common/node_modules/react/react.js"),o=(s.PropTypes,n("../../common/src/utils/component-refs.js"));n("../../common/src/widgets/collapsible-container.scss"),e.exports=s.createClass({displayName:"CollapsibleContainer",propTypes:{open:s.PropTypes.bool},getInitialState:function(){return this.components=o({container:HTMLDivElement,contents:HTMLDivElement}),{contentHeight:void 0,collapsing:!1,expanding:!1}},componentWillReceiveProps:function(e){this.props.open!==e.open&&(e.open?this.setState({collapsing:!1,expanding:!0}):this.setState({collapsing:!0,expanding:!1}))},render:function(){var e=this.components.setters,t={};this.props.open?t.height=this.state.contentHeight:t.height=0;var n="collapsible-container";return this.state.expanding?n+=" expanding":this.state.collapsing&&(n+=" collapsing"),s.createElement("div",{ref:e.container,className:n,style:t},s.createElement("div",{ref:e.contents,className:"collapsible-contents"},this.props.children))},componentDidMount:function(){this.props.open&&(this.updateHeight(),this.updateTimeout=setTimeout(this.updateHeight,10))},componentDidUpdate:function(e,t){this.updateHeight(),this.updateTimeout=setTimeout(this.updateHeight,10)},componentWillUnmount:function(){this.updateTimeout&&clearTimeout(this.updateTimeout)},updateHeight:function(){if(this.components.contents){var e=r(this.components.contents);this.state.contentHeight!==e&&this.setState({contentHeight:e})}}})},"../../common/src/widgets/collapsible-container.scss":function(e,t){},"../../common/src/widgets/diagnostics-section.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/react/react.js"),s=r.PropTypes,o=n("../../common/src/widgets/collapsible-container.jsx");e.exports=r.createClass({displayName:"DiagnosticsSection",propTypes:{label:s.string,hidden:s.bool},getInitialState:function(){return{open:!1}},render:function(){if(this.props.hidden)return null;var e="diagnostics-section";return this.state.open&&(e+=" open"),r.createElement("div",{className:e},r.createElement("div",{className:"title",onClick:this.handleLabelClick},this.props.label),r.createElement(o,{open:this.state.open},this.props.children))},handleLabelClick:function(e){var t=!this.state.open;this.setState({open:t})}})},"../../common/src/widgets/diagnostics.jsx":function(e,t,n){"use strict";(function(t){function r(n){var r=n.type,s=n.children;return i[r]=s,c||(c=t(function(){c=0,_.each(a,function(t){t({type:"change",target:e.exports})})})),null}var s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i={},a=[],c=0;e.exports=r,r.propTypes={type:o.string.isRequired},r.get=function(e){return i[e]},r.addListener=function(e){e&&a.push(e)},r.removeListener=function(e){_.pull(a,e)}}).call(t,n("../node_modules/timers-browserify/main.js").setImmediate)},"../../common/src/widgets/image-cropper.jsx":function(e,t,n){"use strict";function r(e,t,n){e.left<0?e.left=0:e.left+e.width>t&&(e.left=t-e.width),e.top<0?e.top=0:e.top+e.height>n&&(e.top=n-e.height)}var s=n("../../common/node_modules/lodash/lodash.js"),o=(n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/node_modules/react/react.js")),i=o.PropTypes,a=(n("../../common/node_modules/react-dom/index.js"),n("../node_modules/hammerjs/hammer.js")),c=n("../../common/src/utils/component-refs.js"),l=n("../../common/src/media/bitmap-view.jsx"),u=n("../../common/src/media/vector-view.jsx");n("../../common/src/widgets/image-cropper.scss"),e.exports=o.createClass({displayName:"ImageCropper",propTypes:{url:i.string.isRequired,clippingRect:i.object,vector:i.bool,disabled:i.bool,onChange:i.func,onLoad:i.func},getDefaultProps:function(){return{vector:!1}},getInitialState:function(){return this.components=c({container:HTMLElement,image:l}),{clippingRect:this.props.clippingRect,hasFocus:!1}},componentWillReceiveProps:function(e){this.props.clippingRect!==e.clippingRect&&(this.zoomChangeTimeout?console.log("Ignoring incoming clipping rect"):this.setState({clippingRect:e.clippingRect})),this.props.url!==e.url&&this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.triggerChangeEvent(this.state.clippingRect),this.zoomChangeTimeout=0)},render:function(){var e=this.components.setters,t={ref:e.container,className:"image-cropper"};this.props.disabled||(s.assign(t,{tabIndex:0,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur}),this.state.hasFocus&&s.assign(t,{onWheel:this.handleMouseWheel,onKeyDown:this.handleKeyDown}));var n={ref:e.image,url:this.props.url,clippingRect:this.state.clippingRect,onLoad:this.props.onLoad},r=l;return this.props.vector&&(r=u),o.createElement("div",t,o.createElement(r,n))},focus:function(){this.components.container.focus()},extractMosaic:function(){var e=this.components.image;if(e instanceof l)return e.extractMosaic()},activateTouchHandling:function(){var e=this.components.container;if(e&&!this.hammer){this.hammer=new a(e);var t=this.hammer.get("pan").set({direction:a.DIRECTION_ALL,threshold:5});this.hammer.get("pinch").set({enable:!0}).recognizeWith(t),this.hammer.on("panstart",this.handlePanStart),this.hammer.on("panmove",this.handlePanMove),this.hammer.on("panend",this.handlePanEnd),this.hammer.on("pinchstart",this.handlePinchStart),this.hammer.on("pinchmove",this.handlePinchMove),this.hammer.on("pinchend",this.handlePinchEnd)}},deactivateTouchHandling:function(){this.hammer&&(this.hammer.off("panstart",this.handlePanStart),this.hammer.off("panmove",this.handlePanMove),this.hammer.off("panend",this.handlePanEnd),this.hammer.off("pinchstart",this.handlePinchStart),this.hammer.off("pinchmove",this.handlePinchMove),this.hammer.off("pinchend",this.handlePinchEnd),this.hammer.stop(!0),this.hammer.element.style.touchAction="",this.hammer.destroy(),this.hammer=null)},componentDidUpdate:function(e,t){!t.hasFocus&&this.state.hasFocus?this.activateTouchHandling():t.hasFocus&&!this.state.hasFocus&&this.deactivateTouchHandling()},componentWillUnmount:function(){this.dragStart&&this.handleMouseUp(),this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.triggerChangeEvent(this.state.clippingRect)),this.deactivateTouchHandling()},triggerChangeEvent:function(e){s.isEqual(this.props.clippingRect,e)||this.props.onChange&&this.props.onChange({type:"change",target:this,rect:e})},handleFocus:function(e){this.setState({hasFocus:!0})},handleBlur:function(e){this.setState({hasFocus:!1})},handleMouseDown:function(e){if(0===e.button){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var r=n.getBoundingClientRect(),s=this.state.clippingRect;this.dragStart={clippingRect:s,boundingRect:r,pageX:e.pageX,pageY:e.pageY,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}}},handleMouseMove:function(e){if(e.preventDefault(),this.dragStart){var t={x:this.dragStart.pageX-e.pageX,y:this.dragStart.pageY-e.pageY},n=this.dragStart.boundingRect,o=s.clone(this.dragStart.clippingRect),i=t.x*o.width/n.width,a=t.y*o.height/n.height;o.left+=Math.round(i),o.top+=Math.round(a),r(o,this.dragStart.naturalWidth,this.dragStart.naturalHeight),this.setState({clippingRect:o})}},handleMouseUp:function(e){this.dragStart&&(document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.triggerChangeEvent(this.state.clippingRect),this.dragStart=null)},handleMouseWheel:function(e){var t=this;e.preventDefault();var n=this.components.image,o=this.components.container;if(n&&o&&this.state.clippingRect){var i=4;e.shiftKey&&(i=1);var a,c=o.getBoundingClientRect(),l=s.clone(this.state.clippingRect);switch(e.deltaMode){case 0:a=e.deltaY;break;case 1:a=18*e.deltaY;break;case 2:a=480*e.deltaY}var u=Math.round(a*l.height/c.height/i),d=l.width+u;d>n.naturalWidth&&(d=n.naturalWidth,u=d-l.width);var m=l.height+u;m>n.naturalHeight&&(m=n.naturalHeight,u=m-l.height,d=l.width+u);var p={x:e.pageX-c.left,y:e.pageY-c.top},h=-p.x*u/c.width,f=-p.y*u/c.height;l.left+=Math.round(h),l.top+=Math.round(f),l.width=d,l.height=m,r(l,n.naturalWidth,n.naturalHeight),this.setState({clippingRect:l},function(){t.zoomChangeTimeout&&clearTimeout(t.zoomChangeTimeout),t.zoomChangeTimeout=setTimeout(function(){t.triggerChangeEvent(l),t.zoomChangeTimeout=0},1e3)}),this.dragStart&&(this.dragStart={clippingRect:l,boundingRect:c,pageX:e.pageX,pageY:e.pageY,naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight})}},handlePanStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var r=n.getBoundingClientRect(),s=this.state.clippingRect;this.panStart={clippingRect:s,boundingRect:r,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},this.handlePanMove(e)}}},handlePanMove:function(e){if(this.panStart){var t=this.panStart.boundingRect,n=s.clone(this.panStart.clippingRect),o=-e.deltaX*n.width/t.width,i=-e.deltaY*n.height/t.height;n.left+=Math.round(o),n.top+=Math.round(i),r(n,this.panStart.naturalWidth,this.panStart.naturalHeight),this.setState({clippingRect:n})}},handlePanEnd:function(e){this.panStart&&(this.triggerChangeEvent(this.state.clippingRect),this.panStart=null)},handlePinchStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var r=n.getBoundingClientRect(),o=this.state.clippingRect;this.pinchStart={clippingRect:o,boundingRect:r,pointers:s.map(e.pointers,function(e){return{pageX:e.pageX,pageY:e.pageY}})},this.handlePinchMove(e)}}},handlePinchMove:function(e){if(this.pinchStart){var t=this.components.image,n=s.clone(this.pinchStart.clippingRect),o=this.pinchStart.boundingRect,i=1/e.scale,a=Math.round(n.width*i);a>t.naturalWidth&&(a=t.naturalWidth,i=a/n.width);var c=Math.round(n.height*i);c>t.naturalHeight&&(c=t.naturalHeight,i=c/n.height,a=Math.round(n.width*i));var l={x:this.pinchStart.pointers[0].pageX-o.left,y:this.pinchStart.pointers[0].pageY-o.top},u={x:this.pinchStart.pointers[1].pageX-o.left,y:this.pinchStart.pointers[1].pageY-o.top},d={x:e.pointers[0].pageX-o.left,y:e.pointers[0].pageY-o.top},m={x:e.pointers[1].pageX-o.left,y:e.pointers[1].pageY-o.top},p=(l.x*n.width-d.x*a)/o.width,h=(u.x*n.width-m.x*a)/o.width,f=(l.y*n.height-d.y*c)/o.height,g=(u.y*n.height-m.y*c)/o.height;n.left+=Math.round((p+h)/2),n.top+=Math.round((f+g)/2),n.width=a,n.height=c,r(n,t.naturalWidth,t.naturalHeight),this.setState({clippingRect:n})}},handlePinchEnd:function(e){this.pinchStart&&(this.triggerChangeEvent(this.state.clippingRect),this.pinchStart=null)},handleKeyDown:function(e){if(27===e.keyCode){this.components.container.blur()}}})},"../../common/src/widgets/image-cropper.scss":function(e,t){},"../../common/src/widgets/overlay.jsx":function(e,t,n){"use strict";function r(e){var t=_.omit(e,"className","children","show");return t.className="overlay",e.show?t.className+=" show":t.className+=" hide",e.className&&(t.className+=" "+e.className),s.createElement("div",t,s.createElement("div",{className:"background"}),s.createElement("div",{className:"foreground"},e.children))}var s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/node_modules/react-dom/index.js");n("../../common/src/theme/theme.js");n("../../common/src/widgets/overlay.scss"),e.exports=s.createClass({displayName:"OverlayProxy",propTypes:{className:o.string,show:o.bool,onBackgroundClick:o.func},statics:{active:!1},getDefaultProps:function(){return{show:!1}},render:function(){return null},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(e){e.show!==this.props.show?this.props.show?this.show():this.hide():e.children!==this.props.children&&this.props.show&&this.redraw(this.shown)},componentWillUnmount:function(){this.hide()},show:function(){var e=this;if(this.containerNode)this.containerRemovalTimeout&&(clearTimeout(this.containerRemovalTimeout),this.containerRemovalTimeout=0);else{var t=document.getElementById("application");this.containerNode=document.createElement("DIV"),t.appendChild(this.containerNode),t.addEventListener("keydown",this.handleKeyDown);var n=document.activeElement;n&&n!==document.body?(this.originalFocusElement=n,n.blur()):this.originalFocusElement=null}this.redraw(!1),this.shown=!1,setTimeout(function(){e.shown=!0,e.redraw(e.shown)},10),this.constructor.active=!0},redraw:function(e){var t={show:e,onClick:this.handleClick,onTouchMove:this.handleTouchMove,children:this.props.children};i.render(s.createElement(r,t),this.containerNode)},hide:function(){var e=this;this.containerNode&&(this.containerRemovalTimeout||(this.containerRemovalTimeout=setTimeout(function(){var t=document.getElementById("application");i.unmountComponentAtNode(e.containerNode),t.removeChild(e.containerNode),t.removeEventListener("keydown",e.handleKeyDown),e.containerNode=null,e.containerRemovalTimeout=0},500),this.originalFocusElement&&(this.originalFocusElement.focus(),this.originalFocusElement=null)),this.shown=!1,this.redraw(this.shown),this.constructor.active=!1)},handleClick:function(e){if(0===e.button){var t=e.target.className;"foreground"!==t&&"background"!==t||this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}},handleTouchMove:function(e){for(var t=e.target,n=null,r=t;r&&r!==this.containerNode;r=r.parentNode){var s=getComputedStyle(r);if("auto"===s.overflowY||"scroll"===s.overflowY){r.scrollHeight>r.clientHeight&&(n=r);break}}n||e.preventDefault()},handleKeyDown:function(e){27===e.keyCode&&this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}})},"../../common/src/widgets/overlay.scss":function(e,t){},"../../common/src/widgets/resource-view.jsx":function(e,t,n){"use strict";function r(e){return a.startsWith(e,"json:")}function s(e){var t=e.substr(5);return JSON.parse(t)}function o(e){return e.length<6&&(e="000000".substr(e.length)+e),"#"+e}var i=function(){function e(e,t){var n=[],r=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(s)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n("../../common/node_modules/lodash/lodash.js"),c=n("../../common/node_modules/react/react.js"),l=c.PropTypes,u=n("../../common/src/media/media-loader.js"),d=(n("../../common/src/media/image-cropping.js"),n("../../common/src/transport/payload.js"),n("../../common/src/theme/theme.js")),m=n("../../common/src/media/bitmap-view.jsx"),p=n("../../common/src/media/vector-view.jsx");n("../../common/src/widgets/resource-view.scss"),e.exports=c.createClass({displayName:"ResourceView",propTypes:{clip:l.bool,animation:l.bool,mosaic:l.bool,resource:l.object,url:l.string,width:l.number,height:l.number,theme:l.instanceOf(d)},getDefaultProps:function(){return{clip:!0,animation:!1,mosaic:!1}},getInitialState:function(){return{waitingForRemoteImage:!1,remoteImageLoaded:!1}},getURL:function(e){if(e=e||this.props,e.resource){var t={};return e.animation&&"gif"===e.resource.format?t.original=!0:(e.clip||(t.clip=null),e.width&&(t.width=e.width),e.height&&(t.height=e.height)),e.theme.getImageURL(e.resource,t)}return e.url},getDimensions:function(e){e=e||this.props;var t=e.width,n=e.height;if(e.resource){var r=e.theme.getImageDimensions(e.resource,{original:!this.props.clip});t?n=Math.round(t*r.height/r.width):n?t=Math.round(n*r.width/r.height):(t=r.width,n=r.height)}return{width:t,height:n}},componentWillReceiveProps:function(e){var t=this;if(this.props.resource!==e.resource){var n=this.getURL(),s=this.getURL(e);r(n)&&!r(s)&&(this.setState({waitingForRemoteImage:!0}),u.loadImage(s).catch(function(e){}).then(function(){t.setState({waitingForRemoteImage:!1})}))}},shouldComponentUpdate:function(e,t){return!t.waitingForRemoteImage},render:function(){var e=this.getURL();if(!e)return this.props.children||null;var t=a.omit(this.props,"clip","animation","mosaic","resource","url","width","height","theme");if(r(e)){var n=s(e);return t.url=n.url,t.clippingRect=n.clip,"svg"===n.format?c.createElement(p,t):c.createElement(m,t)}var l={className:"resource-view"},u=this.getDimensions();if(t.src=e,t.width=u.width,t.height=u.height,!this.state.remoteImageLoaded&&this.props.mosaic){t.onLoad=this.handleRemoteImageLoad;var d=t.height/t.width;l.className+=" loading",l.style={paddingTop:100*d+"%"};var h=a.get(this.props.resource,"mosaic");if(this.props.clip&&16===a.size(h)){var f=a.chunk(h,4),g=a.map(f,function(e){var t=a.map(e,o),n=i(t,4),r=n[0],s=n[1],c=n[2],l=n[3];return"linear-gradient(90deg, "+r+" 0%, "+r+" 25%, "+s+" 25%, "+s+" 50%, "+c+" 50%, "+c+" 75%, "+l+" 75%, "+l+" 100%)"}),v=["0 0%","0 "+100/3+"%","0 "+200/3+"%","0 100%"];l.style.backgroundRepeat="no-repeat",l.style.backgroundSize="100% 25.5%",l.style.backgroundImage=g.join(", "),l.style.backgroundPosition=v.join(", ")}}return c.createElement("span",l,c.createElement("img",t))},handleRemoteImageLoad:function(e){this.setState({remoteImageLoaded:!0})}})},"../../common/src/widgets/resource-view.scss":function(e,t){},"../../common/src/widgets/smart-list.jsx":function(e,t,n){"use strict";function r(e){this.node=e}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/node_modules/react-dom/index.js");n("../../common/src/widgets/smart-list.scss"),e.exports=o.createClass({displayName:"SmartList",propTypes:{items:i.arrayOf(i.object),behind:i.number,ahead:i.number,anchor:i.string,offset:i.number,inverted:i.bool,transitioning:i.number,onIdentity:i.func.isRequired,onTransition:i.func,onRender:i.func.isRequired,onAnchorChange:i.func,onBeforeAnchor:i.func},getDefaultProps:function(){return{behind:5,ahead:10,offset:0,inverted:!1,transitioning:5}},getInitialState:function(){var e={};return this.updateAnchor(this.props,e),this.updateSlots(this.props,e),e},releaseAnchor:function(){this.setState({currentAnchor:null})},componentWillReceiveProps:function(e){var t=s.clone(this.state);this.props.anchor!==e.anchor&&this.updateAnchor(e,t),this.props.items!==e.items&&this.updateSlots(e,t);var n=s.shallowDiff(t,this.state);s.isEmpty(n)||this.setState(n)},updateAnchor:function(e,t){t.currentAnchor!==e.anchor&&(t.currentAnchor=e.anchor,this.anchorOffset=e.offset)},updateSlots:function(e,t){var n=this,r=e.items,o=function(t,r,s){return e.onIdentity({type:"identity",target:n,item:t,currentIndex:r,alternative:s||!1})},i=function(t,r){return!e.onTransition||e.onTransition({type:"transition",target:n,item:t,currentIndex:r})},a=s.slice(t.slots),c=s.transform(a,function(e,t){e[t.id]=t},{}),l=!s.isEmpty(a),u={};s.each(r,function(e,t){var r=o(e,t),s=c[r];if(!s){var d=o(e,t,!0);d&&(s=c[d])&&(s.id=r)}if(s)s.item=e,s.index=t,"disappearing"===s.state&&(s.state="present");else{var m="present";l&&i(e,t)&&(m="appearing"),s=n.createSlot(r,e,t,m),a.push(s)}u[r]=!0}),s.each(a,function(e){u[e.id]||(l&&n.isSlotVisible(e)?e.state="disappearing":e.state="gone")});var d=0,m=0,p=this.props.transitioning;s.each(a,function(e){"appearing"===e.state?d<p?d++:e.state="present":"disappearing"===e.state&&(m<p?m++:e.state="gone")});var h=s.remove(a,{state:"gone"});if(s.some(h,{unseen:!0})){var f=s.filter(a,{unseen:!0});this.triggerBeforeAnchorEvent(f)}t.slots=s.sortBy(a,"index")},createSlot:function(e,t,n,s){var o={id:e,key:e,index:n,state:s,item:t,transition:!1,rendering:void 0,contents:null,unseen:!1,height:void 0,node:null,setter:null};return o.setter=r.bind(o),o},render:function(){var e=this,t=this.state.slots,n=0;this.state.currentAnchor&&(n=s.findIndex(t,{id:this.state.currentAnchor}));var r=Math.max(0,n-this.props.behind),i=Math.min(s.size(t),n+this.props.ahead+1),a=this.props.onRender,c=s.map(t,function(t,n){var s,c=r<=n&&n<i;if("disappearing"!==t.state){var l={type:"render",target:e,item:t.item,needed:c,startIndex:r,currentIndex:n,endIndex:i,previousHeight:t.height,estimatedHeight:e.state.estimatedHeight};s=t.contents=a(l)}else s=t.contents;c&&(t.rendering=!0);var u,d="slot";return"appearing"===t.state?(d+=" transition in",t.transition?u={height:t.height}:d+=" hidden"):"disappearing"===t.state&&(d+=" transition out",t.transition?d+=" hidden":u={height:t.height}),o.createElement("div",{key:t.key,ref:t.setter,className:d,style:u},s)});return this.startIndex=r,this.endIndex=i,this.props.inverted&&s.reverse(c),o.createElement("div",{className:"smart-list",onTransitionEnd:this.handleTransitionEnd},c)},componentDidMount:function(){this.container=a.findDOMNode(this);for(var e=this.container.parentNode;e;e=e.parentNode){var t=getComputedStyle(e);if("auto"===t.overflowY||"scroll"===t.overflowY){this.scrollContainer=e;break}}this.scrollContainerWidth=this.scrollContainer.clientWidth,this.scrollContainer.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleWindowResize),this.maintainScrollPosition(),this.setSlotHeights()},componentDidUpdate:function(e,t){this.scrolling||this.maintainScrollPosition(),this.setSlotHeights(),this.markUnseenSlots(),this.setTransitionState()},maintainScrollPosition:function(){var e,t;if(this.state.currentAnchor?(e=s.find(this.state.slots,{id:this.state.currentAnchor}),t=this.anchorOffset):this.props.inverted&&(e=s.first(this.state.slots),t=1/0),e&&e.node&&void 0!==t){var n=this.scrollContainer.offsetTop,r=this.scrollContainer.scrollTop,o=e.node.offsetTop-n;if(this.props.inverted){var i=this.scrollContainer.scrollHeight,a=this.scrollContainer.offsetHeight,c=i-r-a,l=e.node.offsetHeight,u=i-o-l,d=u-c;if(d!==t){var m=Math.max(0,u-t),p=i-m-a;this.scrollContainer.scrollTop=p}}else{var d=o-r;if(d!==t){var p=Math.max(0,o-t);this.scrollContainer.scrollTop=p}}}},isSlotVisible:function(e){if(!e.rendering||!e.node)return!1;if(e.transition)return!0;if(this.scrollContainer){var t=this.scrollContainer.offsetHeight,n=this.scrollContainer.offsetTop,r=this.scrollContainer.scrollTop,s=r+t,o=e.node.offsetTop-n;if(r<o&&o<=s)return!0;var i=o+e.height;if(r<i&&i<=s)return!0}return!1},setSlotHeights:function(){var e=[];if(s.each(this.state.slots,function(t){if(t.rendering){var n=t.node.firstChild,r=n?n.offsetHeight:0;t.height=r,e.push(r)}}),void 0===this.state.estimatedHeight&&!s.isEmpty(e)){var t=s.sum(e)/e.length,n=Math.round(t);0!==n&&this.setState({estimatedHeight:n})}},markUnseenSlots:function(){var e=this,t=this.state.slots,n=s.findIndex(t,{id:this.state.currentAnchor}),r=!1;if(s.each(t,function(t,s){"appearing"===t.state?s<n&&(e.isSlotVisible(t)||(t.unseen=!0,r=!0)):t.unseen&&s>=n&&(t.unseen=!1,r=!0)}),r){var o=s.filter(t,{unseen:!0});this.triggerBeforeAnchorEvent(o)}},setTransitionState:function(){var e=this,t=s.clone(this.state.slots),n=!1;s.each(t,function(t){if(("appearing"===t.state||"disappearing"===t.state)&&!t.transition){var r=e.isSlotVisible(t);e.props.inverted&&("appearing"!==t.state||e.state.currentAnchor||(e.scrollPositionInterval||(e.scrollPositionInterval=setInterval(e.maintainScrollPosition,10)),e.scrollToAnchorNode=t.node,r=!0)),r?t.transition=!0:t.state="present",n=!0}}),n&&this.setState({slots:t})},componentWillUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleWindowResize)},triggerAnchorChangeEvent:function(e){this.props.onAnchorChange&&this.props.onAnchorChange({type:"anchorchange",target:this,anchor:e?e.id:null,item:e?e.item:null})},triggerBeforeAnchorEvent:function(e){this.props.onBeforeAnchor&&this.props.onBeforeAnchor({type:"beforeanchor",target:this,items:s.map(e,"item")})},findAnchorSlot:function(e){var t,n=this.scrollContainer.scrollTop,r=this.scrollContainer.offsetTop;if(this.props.inverted){var s,o=this.scrollContainer.scrollHeight,i=this.scrollContainer.offsetHeight,a=o-n-i;if(a>0)for(var c=0;c<e.length;c++){var l=e[c];t=l;var u=t.node.offsetTop-r,d=t.node.offsetHeight,s=o-u-d;if(s>a)break}this.anchorOffset=t?s-a:void 0}else{var u;if(n>0)for(var c=0;c<e.length;c++){var l=e[c];if(t=l,(u=t.node.offsetTop-r)>n)break}this.anchorOffset=t?u-n:void 0}return t},handleScroll:function(e){var t=this;if(!this.scrollPositionInterval){if(this.resizing)return void this.maintainScrollPosition();var n=this.findAnchorSlot(this.state.slots),r=n?n.id:void 0;this.state.currentAnchor!==r&&(this.setState({currentAnchor:r}),this.triggerAnchorChangeEvent(n)),this.scrolling=!0,this.scrollingEndTimeout&&clearTimeout(this.scrollingEndTimeout),this.scrollingEndTimeout=setTimeout(function(){t.scrolling=!1,t.scrollingEndTimeout=0},500)}},handleWindowResize:function(){var e=this;if(this.scrollContainerWidth!==this.scrollContainer.clientWidth){this.scrollContainerWidth=this.scrollContainer.clientWidth;var t=s.slice(this.state.slots);s.each(t,function(e){e.height=void 0}),this.setState({slots:t,estimatedHeight:void 0}),this.resizing=!0,this.resizingEndTimeout&&clearTimeout(this.resizingEndTimeout),this.resizingEndTimeout=setTimeout(function(){e.resizing=!1,e.resizingEndTimeout=0},50)}},handleTransitionEnd:function(e){var t=s.slice(this.state.slots);if("opacity"===e.propertyName){var n=s.find(t,{node:e.target});n&&"appearing"===n.state&&(n.state="present",n.transition=!1,this.setState({slots:t}),this.scrollToAnchorNode===e.target&&(this.maintainScrollPosition(),clearInterval(this.scrollPositionInterval),this.scrollPositionInterval=null,this.scrollToAnchorNode=null))}else if("height"===e.propertyName){var n=s.find(t,{node:e.target});if(n&&"disappearing"===n.state){var r=s.indexOf(t,n);t.splice(r,1);var o=this.findAnchorSlot(t),i=o?o.id:void 0;i!==this.state.currentAnchor&&this.triggerAnchorChangeEvent(o),this.setState({slots:t,currentAnchor:i})}}}})},"../../common/src/widgets/smart-list.scss":function(e,t){},"../../common/src/widgets/upload-progress.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/transport/payloads.js");n("../../common/src/widgets/upload-progress.scss"),e.exports=s.createClass({displayName:"UploadProgress",propTypes:{payloads:o.instanceOf(a).isRequired,locale:o.instanceOf(i).isRequired},render:function(){var e=this.props.locale.translate,t=this.props.payloads.uploading;if(!t)return null;var n=r.fileSize(t.bytes),o=t.files;return s.createElement("div",{className:"upload-progress"},e("upload-progress-uploading-$count-files-$size-remaining",o,n))}})},"../../common/src/widgets/upload-progress.scss":function(e,t){},"../assets/unicorn.svg":function(e,t,n){function r(e){return s.createElement("svg",e,[s.createElement("polygon",{points:"280,653 373,679 255,840",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:0}),s.createElement("polygon",{points:"102,634 298,439 373,430 297,540 447,585 387,674 281,646 285,575",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:1}),s.createElement("polygon",{points:"312,528 386,425 431,428",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:2}),s.createElement("polygon",{points:"332,520 485,397 513,414 496,435",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:3}),s.createElement("polygon",{points:"316,534 492,443 467,467 521,509 515,543 565,587 560,592 498,549",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:4}),s.createElement("polygon",{points:"318,542 496,557 555,595 548,605",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:5}),s.createElement("polygon",{points:"550,611 574,592 599,618",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:6}),s.createElement("polygon",{points:"476,466 543,399 521,500",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:7}),s.createElement("polygon",{points:"525,524 555,392 600,427",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:8}),s.createElement("polygon",{points:"522,542 605,435 597,604",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:9}),s.createElement("polygon",{points:"613,444 743,521 685,543 775,833 554,617 605,625",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:10}),s.createElement("polygon",{points:"565,318 620,318 655,457 613,434",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:11}),s.createElement("polygon",{points:"629,310 695,204 751,184 733,267 740,508 661,462",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:12}),s.createElement("polygon",{points:"757,183 869,81 776,196",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:13}),s.createElement("polygon",{points:"743,273 755,194 848,270 853,338",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:14})])}var s=n("../../common/node_modules/react/react.js");r.displayName="Unicorn",r.defaultProps={version:"1.1",viewBox:"0 0 1000 1000"},e.exports=r,r.default=r},"../node_modules/css-loader/index.js!../node_modules/less-loader/index.js!../node_modules/font-awesome-webpack/font-awesome-styles.loader.js!../node_modules/font-awesome-webpack/font-awesome.config.js":function(e,t,n){var r=n("../node_modules/css-loader/lib/url/escape.js");t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.fa-border {\n  padding: 0.2em 0.25em 0.15em;\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right {\n  margin-left: 0.3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: 0.3em;\n}\n.fa.pull-right {\n  margin-left: 0.3em;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: "\\F000";\n}\n.fa-music:before {\n  content: "\\F001";\n}\n.fa-search:before {\n  content: "\\F002";\n}\n.fa-envelope-o:before {\n  content: "\\F003";\n}\n.fa-heart:before {\n  content: "\\F004";\n}\n.fa-star:before {\n  content: "\\F005";\n}\n.fa-star-o:before {\n  content: "\\F006";\n}\n.fa-user:before {\n  content: "\\F007";\n}\n.fa-film:before {\n  content: "\\F008";\n}\n.fa-th-large:before {\n  content: "\\F009";\n}\n.fa-th:before {\n  content: "\\F00A";\n}\n.fa-th-list:before {\n  content: "\\F00B";\n}\n.fa-check:before {\n  content: "\\F00C";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: "\\F00D";\n}\n.fa-search-plus:before {\n  content: "\\F00E";\n}\n.fa-search-minus:before {\n  content: "\\F010";\n}\n.fa-power-off:before {\n  content: "\\F011";\n}\n.fa-signal:before {\n  content: "\\F012";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: "\\F013";\n}\n.fa-trash-o:before {\n  content: "\\F014";\n}\n.fa-home:before {\n  content: "\\F015";\n}\n.fa-file-o:before {\n  content: "\\F016";\n}\n.fa-clock-o:before {\n  content: "\\F017";\n}\n.fa-road:before {\n  content: "\\F018";\n}\n.fa-download:before {\n  content: "\\F019";\n}\n.fa-arrow-circle-o-down:before {\n  content: "\\F01A";\n}\n.fa-arrow-circle-o-up:before {\n  content: "\\F01B";\n}\n.fa-inbox:before {\n  content: "\\F01C";\n}\n.fa-play-circle-o:before {\n  content: "\\F01D";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: "\\F01E";\n}\n.fa-refresh:before {\n  content: "\\F021";\n}\n.fa-list-alt:before {\n  content: "\\F022";\n}\n.fa-lock:before {\n  content: "\\F023";\n}\n.fa-flag:before {\n  content: "\\F024";\n}\n.fa-headphones:before {\n  content: "\\F025";\n}\n.fa-volume-off:before {\n  content: "\\F026";\n}\n.fa-volume-down:before {\n  content: "\\F027";\n}\n.fa-volume-up:before {\n  content: "\\F028";\n}\n.fa-qrcode:before {\n  content: "\\F029";\n}\n.fa-barcode:before {\n  content: "\\F02A";\n}\n.fa-tag:before {\n  content: "\\F02B";\n}\n.fa-tags:before {\n  content: "\\F02C";\n}\n.fa-book:before {\n  content: "\\F02D";\n}\n.fa-bookmark:before {\n  content: "\\F02E";\n}\n.fa-print:before {\n  content: "\\F02F";\n}\n.fa-camera:before {\n  content: "\\F030";\n}\n.fa-font:before {\n  content: "\\F031";\n}\n.fa-bold:before {\n  content: "\\F032";\n}\n.fa-italic:before {\n  content: "\\F033";\n}\n.fa-text-height:before {\n  content: "\\F034";\n}\n.fa-text-width:before {\n  content: "\\F035";\n}\n.fa-align-left:before {\n  content: "\\F036";\n}\n.fa-align-center:before {\n  content: "\\F037";\n}\n.fa-align-right:before {\n  content: "\\F038";\n}\n.fa-align-justify:before {\n  content: "\\F039";\n}\n.fa-list:before {\n  content: "\\F03A";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: "\\F03B";\n}\n.fa-indent:before {\n  content: "\\F03C";\n}\n.fa-video-camera:before {\n  content: "\\F03D";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: "\\F03E";\n}\n.fa-pencil:before {\n  content: "\\F040";\n}\n.fa-map-marker:before {\n  content: "\\F041";\n}\n.fa-adjust:before {\n  content: "\\F042";\n}\n.fa-tint:before {\n  content: "\\F043";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: "\\F044";\n}\n.fa-share-square-o:before {\n  content: "\\F045";\n}\n.fa-check-square-o:before {\n  content: "\\F046";\n}\n.fa-arrows:before {\n  content: "\\F047";\n}\n.fa-step-backward:before {\n  content: "\\F048";\n}\n.fa-fast-backward:before {\n  content: "\\F049";\n}\n.fa-backward:before {\n  content: "\\F04A";\n}\n.fa-play:before {\n  content: "\\F04B";\n}\n.fa-pause:before {\n  content: "\\F04C";\n}\n.fa-stop:before {\n  content: "\\F04D";\n}\n.fa-forward:before {\n  content: "\\F04E";\n}\n.fa-fast-forward:before {\n  content: "\\F050";\n}\n.fa-step-forward:before {\n  content: "\\F051";\n}\n.fa-eject:before {\n  content: "\\F052";\n}\n.fa-chevron-left:before {\n  content: "\\F053";\n}\n.fa-chevron-right:before {\n  content: "\\F054";\n}\n.fa-plus-circle:before {\n  content: "\\F055";\n}\n.fa-minus-circle:before {\n  content: "\\F056";\n}\n.fa-times-circle:before {\n  content: "\\F057";\n}\n.fa-check-circle:before {\n  content: "\\F058";\n}\n.fa-question-circle:before {\n  content: "\\F059";\n}\n.fa-info-circle:before {\n  content: "\\F05A";\n}\n.fa-crosshairs:before {\n  content: "\\F05B";\n}\n.fa-times-circle-o:before {\n  content: "\\F05C";\n}\n.fa-check-circle-o:before {\n  content: "\\F05D";\n}\n.fa-ban:before {\n  content: "\\F05E";\n}\n.fa-arrow-left:before {\n  content: "\\F060";\n}\n.fa-arrow-right:before {\n  content: "\\F061";\n}\n.fa-arrow-up:before {\n  content: "\\F062";\n}\n.fa-arrow-down:before {\n  content: "\\F063";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: "\\F064";\n}\n.fa-expand:before {\n  content: "\\F065";\n}\n.fa-compress:before {\n  content: "\\F066";\n}\n.fa-plus:before {\n  content: "\\F067";\n}\n.fa-minus:before {\n  content: "\\F068";\n}\n.fa-asterisk:before {\n  content: "\\F069";\n}\n.fa-exclamation-circle:before {\n  content: "\\F06A";\n}\n.fa-gift:before {\n  content: "\\F06B";\n}\n.fa-leaf:before {\n  content: "\\F06C";\n}\n.fa-fire:before {\n  content: "\\F06D";\n}\n.fa-eye:before {\n  content: "\\F06E";\n}\n.fa-eye-slash:before {\n  content: "\\F070";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: "\\F071";\n}\n.fa-plane:before {\n  content: "\\F072";\n}\n.fa-calendar:before {\n  content: "\\F073";\n}\n.fa-random:before {\n  content: "\\F074";\n}\n.fa-comment:before {\n  content: "\\F075";\n}\n.fa-magnet:before {\n  content: "\\F076";\n}\n.fa-chevron-up:before {\n  content: "\\F077";\n}\n.fa-chevron-down:before {\n  content: "\\F078";\n}\n.fa-retweet:before {\n  content: "\\F079";\n}\n.fa-shopping-cart:before {\n  content: "\\F07A";\n}\n.fa-folder:before {\n  content: "\\F07B";\n}\n.fa-folder-open:before {\n  content: "\\F07C";\n}\n.fa-arrows-v:before {\n  content: "\\F07D";\n}\n.fa-arrows-h:before {\n  content: "\\F07E";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: "\\F080";\n}\n.fa-twitter-square:before {\n  content: "\\F081";\n}\n.fa-facebook-square:before {\n  content: "\\F082";\n}\n.fa-camera-retro:before {\n  content: "\\F083";\n}\n.fa-key:before {\n  content: "\\F084";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: "\\F085";\n}\n.fa-comments:before {\n  content: "\\F086";\n}\n.fa-thumbs-o-up:before {\n  content: "\\F087";\n}\n.fa-thumbs-o-down:before {\n  content: "\\F088";\n}\n.fa-star-half:before {\n  content: "\\F089";\n}\n.fa-heart-o:before {\n  content: "\\F08A";\n}\n.fa-sign-out:before {\n  content: "\\F08B";\n}\n.fa-linkedin-square:before {\n  content: "\\F08C";\n}\n.fa-thumb-tack:before {\n  content: "\\F08D";\n}\n.fa-external-link:before {\n  content: "\\F08E";\n}\n.fa-sign-in:before {\n  content: "\\F090";\n}\n.fa-trophy:before {\n  content: "\\F091";\n}\n.fa-github-square:before {\n  content: "\\F092";\n}\n.fa-upload:before {\n  content: "\\F093";\n}\n.fa-lemon-o:before {\n  content: "\\F094";\n}\n.fa-phone:before {\n  content: "\\F095";\n}\n.fa-square-o:before {\n  content: "\\F096";\n}\n.fa-bookmark-o:before {\n  content: "\\F097";\n}\n.fa-phone-square:before {\n  content: "\\F098";\n}\n.fa-twitter:before {\n  content: "\\F099";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: "\\F09A";\n}\n.fa-github:before {\n  content: "\\F09B";\n}\n.fa-unlock:before {\n  content: "\\F09C";\n}\n.fa-credit-card:before {\n  content: "\\F09D";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: "\\F09E";\n}\n.fa-hdd-o:before {\n  content: "\\F0A0";\n}\n.fa-bullhorn:before {\n  content: "\\F0A1";\n}\n.fa-bell:before {\n  content: "\\F0F3";\n}\n.fa-certificate:before {\n  content: "\\F0A3";\n}\n.fa-hand-o-right:before {\n  content: "\\F0A4";\n}\n.fa-hand-o-left:before {\n  content: "\\F0A5";\n}\n.fa-hand-o-up:before {\n  content: "\\F0A6";\n}\n.fa-hand-o-down:before {\n  content: "\\F0A7";\n}\n.fa-arrow-circle-left:before {\n  content: "\\F0A8";\n}\n.fa-arrow-circle-right:before {\n  content: "\\F0A9";\n}\n.fa-arrow-circle-up:before {\n  content: "\\F0AA";\n}\n.fa-arrow-circle-down:before {\n  content: "\\F0AB";\n}\n.fa-globe:before {\n  content: "\\F0AC";\n}\n.fa-wrench:before {\n  content: "\\F0AD";\n}\n.fa-tasks:before {\n  content: "\\F0AE";\n}\n.fa-filter:before {\n  content: "\\F0B0";\n}\n.fa-briefcase:before {\n  content: "\\F0B1";\n}\n.fa-arrows-alt:before {\n  content: "\\F0B2";\n}\n.fa-group:before,\n.fa-users:before {\n  content: "\\F0C0";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: "\\F0C1";\n}\n.fa-cloud:before {\n  content: "\\F0C2";\n}\n.fa-flask:before {\n  content: "\\F0C3";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: "\\F0C4";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: "\\F0C5";\n}\n.fa-paperclip:before {\n  content: "\\F0C6";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: "\\F0C7";\n}\n.fa-square:before {\n  content: "\\F0C8";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: "\\F0C9";\n}\n.fa-list-ul:before {\n  content: "\\F0CA";\n}\n.fa-list-ol:before {\n  content: "\\F0CB";\n}\n.fa-strikethrough:before {\n  content: "\\F0CC";\n}\n.fa-underline:before {\n  content: "\\F0CD";\n}\n.fa-table:before {\n  content: "\\F0CE";\n}\n.fa-magic:before {\n  content: "\\F0D0";\n}\n.fa-truck:before {\n  content: "\\F0D1";\n}\n.fa-pinterest:before {\n  content: "\\F0D2";\n}\n.fa-pinterest-square:before {\n  content: "\\F0D3";\n}\n.fa-google-plus-square:before {\n  content: "\\F0D4";\n}\n.fa-google-plus:before {\n  content: "\\F0D5";\n}\n.fa-money:before {\n  content: "\\F0D6";\n}\n.fa-caret-down:before {\n  content: "\\F0D7";\n}\n.fa-caret-up:before {\n  content: "\\F0D8";\n}\n.fa-caret-left:before {\n  content: "\\F0D9";\n}\n.fa-caret-right:before {\n  content: "\\F0DA";\n}\n.fa-columns:before {\n  content: "\\F0DB";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: "\\F0DC";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: "\\F0DD";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: "\\F0DE";\n}\n.fa-envelope:before {\n  content: "\\F0E0";\n}\n.fa-linkedin:before {\n  content: "\\F0E1";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: "\\F0E2";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: "\\F0E3";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: "\\F0E4";\n}\n.fa-comment-o:before {\n  content: "\\F0E5";\n}\n.fa-comments-o:before {\n  content: "\\F0E6";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: "\\F0E7";\n}\n.fa-sitemap:before {\n  content: "\\F0E8";\n}\n.fa-umbrella:before {\n  content: "\\F0E9";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: "\\F0EA";\n}\n.fa-lightbulb-o:before {\n  content: "\\F0EB";\n}\n.fa-exchange:before {\n  content: "\\F0EC";\n}\n.fa-cloud-download:before {\n  content: "\\F0ED";\n}\n.fa-cloud-upload:before {\n  content: "\\F0EE";\n}\n.fa-user-md:before {\n  content: "\\F0F0";\n}\n.fa-stethoscope:before {\n  content: "\\F0F1";\n}\n.fa-suitcase:before {\n  content: "\\F0F2";\n}\n.fa-bell-o:before {\n  content: "\\F0A2";\n}\n.fa-coffee:before {\n  content: "\\F0F4";\n}\n.fa-cutlery:before {\n  content: "\\F0F5";\n}\n.fa-file-text-o:before {\n  content: "\\F0F6";\n}\n.fa-building-o:before {\n  content: "\\F0F7";\n}\n.fa-hospital-o:before {\n  content: "\\F0F8";\n}\n.fa-ambulance:before {\n  content: "\\F0F9";\n}\n.fa-medkit:before {\n  content: "\\F0FA";\n}\n.fa-fighter-jet:before {\n  content: "\\F0FB";\n}\n.fa-beer:before {\n  content: "\\F0FC";\n}\n.fa-h-square:before {\n  content: "\\F0FD";\n}\n.fa-plus-square:before {\n  content: "\\F0FE";\n}\n.fa-angle-double-left:before {\n  content: "\\F100";\n}\n.fa-angle-double-right:before {\n  content: "\\F101";\n}\n.fa-angle-double-up:before {\n  content: "\\F102";\n}\n.fa-angle-double-down:before {\n  content: "\\F103";\n}\n.fa-angle-left:before {\n  content: "\\F104";\n}\n.fa-angle-right:before {\n  content: "\\F105";\n}\n.fa-angle-up:before {\n  content: "\\F106";\n}\n.fa-angle-down:before {\n  content: "\\F107";\n}\n.fa-desktop:before {\n  content: "\\F108";\n}\n.fa-laptop:before {\n  content: "\\F109";\n}\n.fa-tablet:before {\n  content: "\\F10A";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: "\\F10B";\n}\n.fa-circle-o:before {\n  content: "\\F10C";\n}\n.fa-quote-left:before {\n  content: "\\F10D";\n}\n.fa-quote-right:before {\n  content: "\\F10E";\n}\n.fa-spinner:before {\n  content: "\\F110";\n}\n.fa-circle:before {\n  content: "\\F111";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: "\\F112";\n}\n.fa-github-alt:before {\n  content: "\\F113";\n}\n.fa-folder-o:before {\n  content: "\\F114";\n}\n.fa-folder-open-o:before {\n  content: "\\F115";\n}\n.fa-smile-o:before {\n  content: "\\F118";\n}\n.fa-frown-o:before {\n  content: "\\F119";\n}\n.fa-meh-o:before {\n  content: "\\F11A";\n}\n.fa-gamepad:before {\n  content: "\\F11B";\n}\n.fa-keyboard-o:before {\n  content: "\\F11C";\n}\n.fa-flag-o:before {\n  content: "\\F11D";\n}\n.fa-flag-checkered:before {\n  content: "\\F11E";\n}\n.fa-terminal:before {\n  content: "\\F120";\n}\n.fa-code:before {\n  content: "\\F121";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: "\\F122";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: "\\F123";\n}\n.fa-location-arrow:before {\n  content: "\\F124";\n}\n.fa-crop:before {\n  content: "\\F125";\n}\n.fa-code-fork:before {\n  content: "\\F126";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: "\\F127";\n}\n.fa-question:before {\n  content: "\\F128";\n}\n.fa-info:before {\n  content: "\\F129";\n}\n.fa-exclamation:before {\n  content: "\\F12A";\n}\n.fa-superscript:before {\n  content: "\\F12B";\n}\n.fa-subscript:before {\n  content: "\\F12C";\n}\n.fa-eraser:before {\n  content: "\\F12D";\n}\n.fa-puzzle-piece:before {\n  content: "\\F12E";\n}\n.fa-microphone:before {\n  content: "\\F130";\n}\n.fa-microphone-slash:before {\n  content: "\\F131";\n}\n.fa-shield:before {\n  content: "\\F132";\n}\n.fa-calendar-o:before {\n  content: "\\F133";\n}\n.fa-fire-extinguisher:before {\n  content: "\\F134";\n}\n.fa-rocket:before {\n  content: "\\F135";\n}\n.fa-maxcdn:before {\n  content: "\\F136";\n}\n.fa-chevron-circle-left:before {\n  content: "\\F137";\n}\n.fa-chevron-circle-right:before {\n  content: "\\F138";\n}\n.fa-chevron-circle-up:before {\n  content: "\\F139";\n}\n.fa-chevron-circle-down:before {\n  content: "\\F13A";\n}\n.fa-html5:before {\n  content: "\\F13B";\n}\n.fa-css3:before {\n  content: "\\F13C";\n}\n.fa-anchor:before {\n  content: "\\F13D";\n}\n.fa-unlock-alt:before {\n  content: "\\F13E";\n}\n.fa-bullseye:before {\n  content: "\\F140";\n}\n.fa-ellipsis-h:before {\n  content: "\\F141";\n}\n.fa-ellipsis-v:before {\n  content: "\\F142";\n}\n.fa-rss-square:before {\n  content: "\\F143";\n}\n.fa-play-circle:before {\n  content: "\\F144";\n}\n.fa-ticket:before {\n  content: "\\F145";\n}\n.fa-minus-square:before {\n  content: "\\F146";\n}\n.fa-minus-square-o:before {\n  content: "\\F147";\n}\n.fa-level-up:before {\n  content: "\\F148";\n}\n.fa-level-down:before {\n  content: "\\F149";\n}\n.fa-check-square:before {\n  content: "\\F14A";\n}\n.fa-pencil-square:before {\n  content: "\\F14B";\n}\n.fa-external-link-square:before {\n  content: "\\F14C";\n}\n.fa-share-square:before {\n  content: "\\F14D";\n}\n.fa-compass:before {\n  content: "\\F14E";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: "\\F150";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: "\\F151";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: "\\F152";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: "\\F153";\n}\n.fa-gbp:before {\n  content: "\\F154";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: "\\F155";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: "\\F156";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: "\\F157";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: "\\F158";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: "\\F159";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: "\\F15A";\n}\n.fa-file:before {\n  content: "\\F15B";\n}\n.fa-file-text:before {\n  content: "\\F15C";\n}\n.fa-sort-alpha-asc:before {\n  content: "\\F15D";\n}\n.fa-sort-alpha-desc:before {\n  content: "\\F15E";\n}\n.fa-sort-amount-asc:before {\n  content: "\\F160";\n}\n.fa-sort-amount-desc:before {\n  content: "\\F161";\n}\n.fa-sort-numeric-asc:before {\n  content: "\\F162";\n}\n.fa-sort-numeric-desc:before {\n  content: "\\F163";\n}\n.fa-thumbs-up:before {\n  content: "\\F164";\n}\n.fa-thumbs-down:before {\n  content: "\\F165";\n}\n.fa-youtube-square:before {\n  content: "\\F166";\n}\n.fa-youtube:before {\n  content: "\\F167";\n}\n.fa-xing:before {\n  content: "\\F168";\n}\n.fa-xing-square:before {\n  content: "\\F169";\n}\n.fa-youtube-play:before {\n  content: "\\F16A";\n}\n.fa-dropbox:before {\n  content: "\\F16B";\n}\n.fa-stack-overflow:before {\n  content: "\\F16C";\n}\n.fa-instagram:before {\n  content: "\\F16D";\n}\n.fa-flickr:before {\n  content: "\\F16E";\n}\n.fa-adn:before {\n  content: "\\F170";\n}\n.fa-bitbucket:before {\n  content: "\\F171";\n}\n.fa-bitbucket-square:before {\n  content: "\\F172";\n}\n.fa-tumblr:before {\n  content: "\\F173";\n}\n.fa-tumblr-square:before {\n  content: "\\F174";\n}\n.fa-long-arrow-down:before {\n  content: "\\F175";\n}\n.fa-long-arrow-up:before {\n  content: "\\F176";\n}\n.fa-long-arrow-left:before {\n  content: "\\F177";\n}\n.fa-long-arrow-right:before {\n  content: "\\F178";\n}\n.fa-apple:before {\n  content: "\\F179";\n}\n.fa-windows:before {\n  content: "\\F17A";\n}\n.fa-android:before {\n  content: "\\F17B";\n}\n.fa-linux:before {\n  content: "\\F17C";\n}\n.fa-dribbble:before {\n  content: "\\F17D";\n}\n.fa-skype:before {\n  content: "\\F17E";\n}\n.fa-foursquare:before {\n  content: "\\F180";\n}\n.fa-trello:before {\n  content: "\\F181";\n}\n.fa-female:before {\n  content: "\\F182";\n}\n.fa-male:before {\n  content: "\\F183";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: "\\F184";\n}\n.fa-sun-o:before {\n  content: "\\F185";\n}\n.fa-moon-o:before {\n  content: "\\F186";\n}\n.fa-archive:before {\n  content: "\\F187";\n}\n.fa-bug:before {\n  content: "\\F188";\n}\n.fa-vk:before {\n  content: "\\F189";\n}\n.fa-weibo:before {\n  content: "\\F18A";\n}\n.fa-renren:before {\n  content: "\\F18B";\n}\n.fa-pagelines:before {\n  content: "\\F18C";\n}\n.fa-stack-exchange:before {\n  content: "\\F18D";\n}\n.fa-arrow-circle-o-right:before {\n  content: "\\F18E";\n}\n.fa-arrow-circle-o-left:before {\n  content: "\\F190";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: "\\F191";\n}\n.fa-dot-circle-o:before {\n  content: "\\F192";\n}\n.fa-wheelchair:before {\n  content: "\\F193";\n}\n.fa-vimeo-square:before {\n  content: "\\F194";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: "\\F195";\n}\n.fa-plus-square-o:before {\n  content: "\\F196";\n}\n.fa-space-shuttle:before {\n  content: "\\F197";\n}\n.fa-slack:before {\n  content: "\\F198";\n}\n.fa-envelope-square:before {\n  content: "\\F199";\n}\n.fa-wordpress:before {\n  content: "\\F19A";\n}\n.fa-openid:before {\n  content: "\\F19B";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: "\\F19C";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: "\\F19D";\n}\n.fa-yahoo:before {\n  content: "\\F19E";\n}\n.fa-google:before {\n  content: "\\F1A0";\n}\n.fa-reddit:before {\n  content: "\\F1A1";\n}\n.fa-reddit-square:before {\n  content: "\\F1A2";\n}\n.fa-stumbleupon-circle:before {\n  content: "\\F1A3";\n}\n.fa-stumbleupon:before {\n  content: "\\F1A4";\n}\n.fa-delicious:before {\n  content: "\\F1A5";\n}\n.fa-digg:before {\n  content: "\\F1A6";\n}\n.fa-pied-piper-pp:before {\n  content: "\\F1A7";\n}\n.fa-pied-piper-alt:before {\n  content: "\\F1A8";\n}\n.fa-drupal:before {\n  content: "\\F1A9";\n}\n.fa-joomla:before {\n  content: "\\F1AA";\n}\n.fa-language:before {\n  content: "\\F1AB";\n}\n.fa-fax:before {\n  content: "\\F1AC";\n}\n.fa-building:before {\n  content: "\\F1AD";\n}\n.fa-child:before {\n  content: "\\F1AE";\n}\n.fa-paw:before {\n  content: "\\F1B0";\n}\n.fa-spoon:before {\n  content: "\\F1B1";\n}\n.fa-cube:before {\n  content: "\\F1B2";\n}\n.fa-cubes:before {\n  content: "\\F1B3";\n}\n.fa-behance:before {\n  content: "\\F1B4";\n}\n.fa-behance-square:before {\n  content: "\\F1B5";\n}\n.fa-steam:before {\n  content: "\\F1B6";\n}\n.fa-steam-square:before {\n  content: "\\F1B7";\n}\n.fa-recycle:before {\n  content: "\\F1B8";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: "\\F1B9";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: "\\F1BA";\n}\n.fa-tree:before {\n  content: "\\F1BB";\n}\n.fa-spotify:before {\n  content: "\\F1BC";\n}\n.fa-deviantart:before {\n  content: "\\F1BD";\n}\n.fa-soundcloud:before {\n  content: "\\F1BE";\n}\n.fa-database:before {\n  content: "\\F1C0";\n}\n.fa-file-pdf-o:before {\n  content: "\\F1C1";\n}\n.fa-file-word-o:before {\n  content: "\\F1C2";\n}\n.fa-file-excel-o:before {\n  content: "\\F1C3";\n}\n.fa-file-powerpoint-o:before {\n  content: "\\F1C4";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: "\\F1C5";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: "\\F1C6";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: "\\F1C7";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: "\\F1C8";\n}\n.fa-file-code-o:before {\n  content: "\\F1C9";\n}\n.fa-vine:before {\n  content: "\\F1CA";\n}\n.fa-codepen:before {\n  content: "\\F1CB";\n}\n.fa-jsfiddle:before {\n  content: "\\F1CC";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: "\\F1CD";\n}\n.fa-circle-o-notch:before {\n  content: "\\F1CE";\n}\n.fa-ra:before,\n.fa-resistance:before,\n.fa-rebel:before {\n  content: "\\F1D0";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: "\\F1D1";\n}\n.fa-git-square:before {\n  content: "\\F1D2";\n}\n.fa-git:before {\n  content: "\\F1D3";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: "\\F1D4";\n}\n.fa-tencent-weibo:before {\n  content: "\\F1D5";\n}\n.fa-qq:before {\n  content: "\\F1D6";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: "\\F1D7";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: "\\F1D8";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: "\\F1D9";\n}\n.fa-history:before {\n  content: "\\F1DA";\n}\n.fa-circle-thin:before {\n  content: "\\F1DB";\n}\n.fa-header:before {\n  content: "\\F1DC";\n}\n.fa-paragraph:before {\n  content: "\\F1DD";\n}\n.fa-sliders:before {\n  content: "\\F1DE";\n}\n.fa-share-alt:before {\n  content: "\\F1E0";\n}\n.fa-share-alt-square:before {\n  content: "\\F1E1";\n}\n.fa-bomb:before {\n  content: "\\F1E2";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: "\\F1E3";\n}\n.fa-tty:before {\n  content: "\\F1E4";\n}\n.fa-binoculars:before {\n  content: "\\F1E5";\n}\n.fa-plug:before {\n  content: "\\F1E6";\n}\n.fa-slideshare:before {\n  content: "\\F1E7";\n}\n.fa-twitch:before {\n  content: "\\F1E8";\n}\n.fa-yelp:before {\n  content: "\\F1E9";\n}\n.fa-newspaper-o:before {\n  content: "\\F1EA";\n}\n.fa-wifi:before {\n  content: "\\F1EB";\n}\n.fa-calculator:before {\n  content: "\\F1EC";\n}\n.fa-paypal:before {\n  content: "\\F1ED";\n}\n.fa-google-wallet:before {\n  content: "\\F1EE";\n}\n.fa-cc-visa:before {\n  content: "\\F1F0";\n}\n.fa-cc-mastercard:before {\n  content: "\\F1F1";\n}\n.fa-cc-discover:before {\n  content: "\\F1F2";\n}\n.fa-cc-amex:before {\n  content: "\\F1F3";\n}\n.fa-cc-paypal:before {\n  content: "\\F1F4";\n}\n.fa-cc-stripe:before {\n  content: "\\F1F5";\n}\n.fa-bell-slash:before {\n  content: "\\F1F6";\n}\n.fa-bell-slash-o:before {\n  content: "\\F1F7";\n}\n.fa-trash:before {\n  content: "\\F1F8";\n}\n.fa-copyright:before {\n  content: "\\F1F9";\n}\n.fa-at:before {\n  content: "\\F1FA";\n}\n.fa-eyedropper:before {\n  content: "\\F1FB";\n}\n.fa-paint-brush:before {\n  content: "\\F1FC";\n}\n.fa-birthday-cake:before {\n  content: "\\F1FD";\n}\n.fa-area-chart:before {\n  content: "\\F1FE";\n}\n.fa-pie-chart:before {\n  content: "\\F200";\n}\n.fa-line-chart:before {\n  content: "\\F201";\n}\n.fa-lastfm:before {\n  content: "\\F202";\n}\n.fa-lastfm-square:before {\n  content: "\\F203";\n}\n.fa-toggle-off:before {\n  content: "\\F204";\n}\n.fa-toggle-on:before {\n  content: "\\F205";\n}\n.fa-bicycle:before {\n  content: "\\F206";\n}\n.fa-bus:before {\n  content: "\\F207";\n}\n.fa-ioxhost:before {\n  content: "\\F208";\n}\n.fa-angellist:before {\n  content: "\\F209";\n}\n.fa-cc:before {\n  content: "\\F20A";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: "\\F20B";\n}\n.fa-meanpath:before {\n  content: "\\F20C";\n}\n.fa-buysellads:before {\n  content: "\\F20D";\n}\n.fa-connectdevelop:before {\n  content: "\\F20E";\n}\n.fa-dashcube:before {\n  content: "\\F210";\n}\n.fa-forumbee:before {\n  content: "\\F211";\n}\n.fa-leanpub:before {\n  content: "\\F212";\n}\n.fa-sellsy:before {\n  content: "\\F213";\n}\n.fa-shirtsinbulk:before {\n  content: "\\F214";\n}\n.fa-simplybuilt:before {\n  content: "\\F215";\n}\n.fa-skyatlas:before {\n  content: "\\F216";\n}\n.fa-cart-plus:before {\n  content: "\\F217";\n}\n.fa-cart-arrow-down:before {\n  content: "\\F218";\n}\n.fa-diamond:before {\n  content: "\\F219";\n}\n.fa-ship:before {\n  content: "\\F21A";\n}\n.fa-user-secret:before {\n  content: "\\F21B";\n}\n.fa-motorcycle:before {\n  content: "\\F21C";\n}\n.fa-street-view:before {\n  content: "\\F21D";\n}\n.fa-heartbeat:before {\n  content: "\\F21E";\n}\n.fa-venus:before {\n  content: "\\F221";\n}\n.fa-mars:before {\n  content: "\\F222";\n}\n.fa-mercury:before {\n  content: "\\F223";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: "\\F224";\n}\n.fa-transgender-alt:before {\n  content: "\\F225";\n}\n.fa-venus-double:before {\n  content: "\\F226";\n}\n.fa-mars-double:before {\n  content: "\\F227";\n}\n.fa-venus-mars:before {\n  content: "\\F228";\n}\n.fa-mars-stroke:before {\n  content: "\\F229";\n}\n.fa-mars-stroke-v:before {\n  content: "\\F22A";\n}\n.fa-mars-stroke-h:before {\n  content: "\\F22B";\n}\n.fa-neuter:before {\n  content: "\\F22C";\n}\n.fa-genderless:before {\n  content: "\\F22D";\n}\n.fa-facebook-official:before {\n  content: "\\F230";\n}\n.fa-pinterest-p:before {\n  content: "\\F231";\n}\n.fa-whatsapp:before {\n  content: "\\F232";\n}\n.fa-server:before {\n  content: "\\F233";\n}\n.fa-user-plus:before {\n  content: "\\F234";\n}\n.fa-user-times:before {\n  content: "\\F235";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: "\\F236";\n}\n.fa-viacoin:before {\n  content: "\\F237";\n}\n.fa-train:before {\n  content: "\\F238";\n}\n.fa-subway:before {\n  content: "\\F239";\n}\n.fa-medium:before {\n  content: "\\F23A";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: "\\F23B";\n}\n.fa-optin-monster:before {\n  content: "\\F23C";\n}\n.fa-opencart:before {\n  content: "\\F23D";\n}\n.fa-expeditedssl:before {\n  content: "\\F23E";\n}\n.fa-battery-4:before,\n.fa-battery:before,\n.fa-battery-full:before {\n  content: "\\F240";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: "\\F241";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: "\\F242";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: "\\F243";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: "\\F244";\n}\n.fa-mouse-pointer:before {\n  content: "\\F245";\n}\n.fa-i-cursor:before {\n  content: "\\F246";\n}\n.fa-object-group:before {\n  content: "\\F247";\n}\n.fa-object-ungroup:before {\n  content: "\\F248";\n}\n.fa-sticky-note:before {\n  content: "\\F249";\n}\n.fa-sticky-note-o:before {\n  content: "\\F24A";\n}\n.fa-cc-jcb:before {\n  content: "\\F24B";\n}\n.fa-cc-diners-club:before {\n  content: "\\F24C";\n}\n.fa-clone:before {\n  content: "\\F24D";\n}\n.fa-balance-scale:before {\n  content: "\\F24E";\n}\n.fa-hourglass-o:before {\n  content: "\\F250";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: "\\F251";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: "\\F252";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: "\\F253";\n}\n.fa-hourglass:before {\n  content: "\\F254";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: "\\F255";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: "\\F256";\n}\n.fa-hand-scissors-o:before {\n  content: "\\F257";\n}\n.fa-hand-lizard-o:before {\n  content: "\\F258";\n}\n.fa-hand-spock-o:before {\n  content: "\\F259";\n}\n.fa-hand-pointer-o:before {\n  content: "\\F25A";\n}\n.fa-hand-peace-o:before {\n  content: "\\F25B";\n}\n.fa-trademark:before {\n  content: "\\F25C";\n}\n.fa-registered:before {\n  content: "\\F25D";\n}\n.fa-creative-commons:before {\n  content: "\\F25E";\n}\n.fa-gg:before {\n  content: "\\F260";\n}\n.fa-gg-circle:before {\n  content: "\\F261";\n}\n.fa-tripadvisor:before {\n  content: "\\F262";\n}\n.fa-odnoklassniki:before {\n  content: "\\F263";\n}\n.fa-odnoklassniki-square:before {\n  content: "\\F264";\n}\n.fa-get-pocket:before {\n  content: "\\F265";\n}\n.fa-wikipedia-w:before {\n  content: "\\F266";\n}\n.fa-safari:before {\n  content: "\\F267";\n}\n.fa-chrome:before {\n  content: "\\F268";\n}\n.fa-firefox:before {\n  content: "\\F269";\n}\n.fa-opera:before {\n  content: "\\F26A";\n}\n.fa-internet-explorer:before {\n  content: "\\F26B";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: "\\F26C";\n}\n.fa-contao:before {\n  content: "\\F26D";\n}\n.fa-500px:before {\n  content: "\\F26E";\n}\n.fa-amazon:before {\n  content: "\\F270";\n}\n.fa-calendar-plus-o:before {\n  content: "\\F271";\n}\n.fa-calendar-minus-o:before {\n  content: "\\F272";\n}\n.fa-calendar-times-o:before {\n  content: "\\F273";\n}\n.fa-calendar-check-o:before {\n  content: "\\F274";\n}\n.fa-industry:before {\n  content: "\\F275";\n}\n.fa-map-pin:before {\n  content: "\\F276";\n}\n.fa-map-signs:before {\n  content: "\\F277";\n}\n.fa-map-o:before {\n  content: "\\F278";\n}\n.fa-map:before {\n  content: "\\F279";\n}\n.fa-commenting:before {\n  content: "\\F27A";\n}\n.fa-commenting-o:before {\n  content: "\\F27B";\n}\n.fa-houzz:before {\n  content: "\\F27C";\n}\n.fa-vimeo:before {\n  content: "\\F27D";\n}\n.fa-black-tie:before {\n  content: "\\F27E";\n}\n.fa-fonticons:before {\n  content: "\\F280";\n}\n.fa-reddit-alien:before {\n  content: "\\F281";\n}\n.fa-edge:before {\n  content: "\\F282";\n}\n.fa-credit-card-alt:before {\n  content: "\\F283";\n}\n.fa-codiepie:before {\n  content: "\\F284";\n}\n.fa-modx:before {\n  content: "\\F285";\n}\n.fa-fort-awesome:before {\n  content: "\\F286";\n}\n.fa-usb:before {\n  content: "\\F287";\n}\n.fa-product-hunt:before {\n  content: "\\F288";\n}\n.fa-mixcloud:before {\n  content: "\\F289";\n}\n.fa-scribd:before {\n  content: "\\F28A";\n}\n.fa-pause-circle:before {\n  content: "\\F28B";\n}\n.fa-pause-circle-o:before {\n  content: "\\F28C";\n}\n.fa-stop-circle:before {\n  content: "\\F28D";\n}\n.fa-stop-circle-o:before {\n  content: "\\F28E";\n}\n.fa-shopping-bag:before {\n  content: "\\F290";\n}\n.fa-shopping-basket:before {\n  content: "\\F291";\n}\n.fa-hashtag:before {\n  content: "\\F292";\n}\n.fa-bluetooth:before {\n  content: "\\F293";\n}\n.fa-bluetooth-b:before {\n  content: "\\F294";\n}\n.fa-percent:before {\n  content: "\\F295";\n}\n.fa-gitlab:before {\n  content: "\\F296";\n}\n.fa-wpbeginner:before {\n  content: "\\F297";\n}\n.fa-wpforms:before {\n  content: "\\F298";\n}\n.fa-envira:before {\n  content: "\\F299";\n}\n.fa-universal-access:before {\n  content: "\\F29A";\n}\n.fa-wheelchair-alt:before {\n  content: "\\F29B";\n}\n.fa-question-circle-o:before {\n  content: "\\F29C";\n}\n.fa-blind:before {\n  content: "\\F29D";\n}\n.fa-audio-description:before {\n  content: "\\F29E";\n}\n.fa-volume-control-phone:before {\n  content: "\\F2A0";\n}\n.fa-braille:before {\n  content: "\\F2A1";\n}\n.fa-assistive-listening-systems:before {\n  content: "\\F2A2";\n}\n.fa-asl-interpreting:before,\n.fa-american-sign-language-interpreting:before {\n  content: "\\F2A3";\n}\n.fa-deafness:before,\n.fa-hard-of-hearing:before,\n.fa-deaf:before {\n  content: "\\F2A4";\n}\n.fa-glide:before {\n  content: "\\F2A5";\n}\n.fa-glide-g:before {\n  content: "\\F2A6";\n}\n.fa-signing:before,\n.fa-sign-language:before {\n  content: "\\F2A7";\n}\n.fa-low-vision:before {\n  content: "\\F2A8";\n}\n.fa-viadeo:before {\n  content: "\\F2A9";\n}\n.fa-viadeo-square:before {\n  content: "\\F2AA";\n}\n.fa-snapchat:before {\n  content: "\\F2AB";\n}\n.fa-snapchat-ghost:before {\n  content: "\\F2AC";\n}\n.fa-snapchat-square:before {\n  content: "\\F2AD";\n}\n.fa-pied-piper:before {\n  content: "\\F2AE";\n}\n.fa-first-order:before {\n  content: "\\F2B0";\n}\n.fa-yoast:before {\n  content: "\\F2B1";\n}\n.fa-themeisle:before {\n  content: "\\F2B2";\n}\n.fa-google-plus-circle:before,\n.fa-google-plus-official:before {\n  content: "\\F2B3";\n}\n.fa-fa:before,\n.fa-font-awesome:before {\n  content: "\\F2B4";\n}\n.fa-handshake-o:before {\n  content: "\\F2B5";\n}\n.fa-envelope-open:before {\n  content: "\\F2B6";\n}\n.fa-envelope-open-o:before {\n  content: "\\F2B7";\n}\n.fa-linode:before {\n  content: "\\F2B8";\n}\n.fa-address-book:before {\n  content: "\\F2B9";\n}\n.fa-address-book-o:before {\n  content: "\\F2BA";\n}\n.fa-vcard:before,\n.fa-address-card:before {\n  content: "\\F2BB";\n}\n.fa-vcard-o:before,\n.fa-address-card-o:before {\n  content: "\\F2BC";\n}\n.fa-user-circle:before {\n  content: "\\F2BD";\n}\n.fa-user-circle-o:before {\n  content: "\\F2BE";\n}\n.fa-user-o:before {\n  content: "\\F2C0";\n}\n.fa-id-badge:before {\n  content: "\\F2C1";\n}\n.fa-drivers-license:before,\n.fa-id-card:before {\n  content: "\\F2C2";\n}\n.fa-drivers-license-o:before,\n.fa-id-card-o:before {\n  content: "\\F2C3";\n}\n.fa-quora:before {\n  content: "\\F2C4";\n}\n.fa-free-code-camp:before {\n  content: "\\F2C5";\n}\n.fa-telegram:before {\n  content: "\\F2C6";\n}\n.fa-thermometer-4:before,\n.fa-thermometer:before,\n.fa-thermometer-full:before {\n  content: "\\F2C7";\n}\n.fa-thermometer-3:before,\n.fa-thermometer-three-quarters:before {\n  content: "\\F2C8";\n}\n.fa-thermometer-2:before,\n.fa-thermometer-half:before {\n  content: "\\F2C9";\n}\n.fa-thermometer-1:before,\n.fa-thermometer-quarter:before {\n  content: "\\F2CA";\n}\n.fa-thermometer-0:before,\n.fa-thermometer-empty:before {\n  content: "\\F2CB";\n}\n.fa-shower:before {\n  content: "\\F2CC";\n}\n.fa-bathtub:before,\n.fa-s15:before,\n.fa-bath:before {\n  content: "\\F2CD";\n}\n.fa-podcast:before {\n  content: "\\F2CE";\n}\n.fa-window-maximize:before {\n  content: "\\F2D0";\n}\n.fa-window-minimize:before {\n  content: "\\F2D1";\n}\n.fa-window-restore:before {\n  content: "\\F2D2";\n}\n.fa-times-rectangle:before,\n.fa-window-close:before {\n  content: "\\F2D3";\n}\n.fa-times-rectangle-o:before,\n.fa-window-close-o:before {\n  content: "\\F2D4";\n}\n.fa-bandcamp:before {\n  content: "\\F2D5";\n}\n.fa-grav:before {\n  content: "\\F2D6";\n}\n.fa-etsy:before {\n  content: "\\F2D7";\n}\n.fa-imdb:before {\n  content: "\\F2D8";\n}\n.fa-ravelry:before {\n  content: "\\F2D9";\n}\n.fa-eercast:before {\n  content: "\\F2DA";\n}\n.fa-microchip:before {\n  content: "\\F2DB";\n}\n.fa-snowflake-o:before {\n  content: "\\F2DC";\n}\n.fa-superpowers:before {\n  content: "\\F2DD";\n}\n.fa-wpexplorer:before {\n  content: "\\F2DE";\n}\n.fa-meetup:before {\n  content: "\\F2E0";\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: \'FontAwesome\';\n  src: url('+r(n("../node_modules/font-awesome/fonts/fontawesome-webfont.eot?v=4.7.0"))+");\n  src: url("+r(n("../node_modules/font-awesome/fonts/fontawesome-webfont.eot"))+"?#iefix&v=4.7.0) format('embedded-opentype'), url("+r(n("../node_modules/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0"))+") format('woff2'), url("+r(n("../node_modules/font-awesome/fonts/fontawesome-webfont.woff?v=4.7.0"))+") format('woff'), url("+r(n("../node_modules/font-awesome/fonts/fontawesome-webfont.ttf?v=4.7.0"))+") format('truetype'), url("+r(n("../node_modules/font-awesome/fonts/fontawesome-webfont.svg?v=4.7.0"))+'#fontawesomeregular) format(\'svg\');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #fff;\n}\n',""])},"../node_modules/css-loader/lib/css-base.js":function(e,t){function n(e,t){var n=e[1]||"",s=e[3];if(!s)return n;if(t&&"function"==typeof btoa){var o=r(s);return[n].concat(s.sources.map(function(e){return"/*# sourceURL="+s.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(r[o]=!0)}for(s=0;s<e.length;s++){var i=e[s];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},"../node_modules/css-loader/lib/url/escape.js":function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},"../node_modules/font-awesome-webpack/index.js":function(e,t,n){n("../node_modules/style-loader/index.js!../node_modules/css-loader/index.js!../node_modules/less-loader/index.js!../node_modules/font-awesome-webpack/font-awesome-styles.loader.js!../node_modules/font-awesome-webpack/font-awesome.config.js")},"../node_modules/font-awesome/fonts/fontawesome-webfont.eot":function(e,t,n){e.exports=n.p+"674f50d287a8c48dc19ba404d20fe713.eot"},"../node_modules/font-awesome/fonts/fontawesome-webfont.eot?v=4.7.0":function(e,t,n){e.exports=n.p+"674f50d287a8c48dc19ba404d20fe713.eot"},"../node_modules/font-awesome/fonts/fontawesome-webfont.svg?v=4.7.0":function(e,t,n){e.exports=n.p+"912ec66d7572ff821749319396470bde.svg"},"../node_modules/font-awesome/fonts/fontawesome-webfont.ttf?v=4.7.0":function(e,t,n){e.exports=n.p+"b06871f281fee6b241d60582ae9369b9.ttf"},"../node_modules/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0":function(e,t,n){e.exports=n.p+"af7ae505a9eed503f8b8e6982036873e.woff2"},"../node_modules/font-awesome/fonts/fontawesome-webfont.woff?v=4.7.0":function(e,t,n){e.exports=n.p+"fee66e712a8a08eef5805a46892932ad.woff"},"../node_modules/is-promise/index.js":function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n},"../node_modules/lru-queue/index.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/number/to-pos-integer.js"),s=Object.create,o=Object.prototype.hasOwnProperty;e.exports=function(e){var t,n=0,i=1,a=s(null),c=s(null),l=0;return e=r(e),{hit:function(r){var s=c[r],u=++l;if(a[u]=r,c[r]=u,!s){if(++n<=e)return;return r=a[i],t(r),r}if(delete a[s],i===s)for(;!o.call(a,++i);)continue},delete:t=function(e){var t=c[e];if(t&&(delete a[t],delete c[e],--n,i===t)){if(!n)return l=0,void(i=1);for(;!o.call(a,++i);)continue}},clear:function(){n=0,i=1,a=s(null),c=s(null),l=0}}}},"../node_modules/memoizee/ext/async.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/from/index.js"),s=n("../../common/node_modules/es5-ext/object/map.js"),o=n("../../common/node_modules/es5-ext/object/mixin.js"),i=n("../../common/node_modules/es5-ext/function/_define-length.js"),a=n("../../common/node_modules/next-tick/index.js"),c=Array.prototype.slice,l=Function.prototype.apply,u=Object.create;n("../node_modules/memoizee/lib/registered-extensions.js").async=function(e,t){var n,d,m,p=u(null),h=u(null),f=t.memoized,g=t.original;t.memoized=i(function(e){var t=arguments,r=t[t.length-1];return"function"==typeof r&&(n=r,t=c.call(t,0,-1)),f.apply(d=this,m=t)},f);try{o(t.memoized,f)}catch(e){}t.on("get",function(e){var r,s,o;if(n){if(p[e])return"function"==typeof p[e]?p[e]=[p[e],n]:p[e].push(n),void(n=null);r=n,s=d,o=m,n=d=m=null,a(function(){var i;hasOwnProperty.call(h,e)?(i=h[e],t.emit("getasync",e,o,s),l.call(r,i.context,i.args)):(n=r,d=s,m=o,f.apply(s,o))})}}),t.original=function(){var e,s,o,i;return n?(e=r(arguments),s=function e(n){var s,o,c=e.id;return null==c?void a(l.bind(e,this,arguments)):(delete e.id,s=p[c],delete p[c],s?(o=r(arguments),t.has(c)&&(n?t.delete(c):(h[c]={context:this,args:o},t.emit("setasync",c,"function"==typeof s?1:s.length))),"function"==typeof s?i=l.call(s,this,o):s.forEach(function(e){i=l.call(e,this,o)},this),i):void 0)},o=n,n=d=m=null,e.push(s),i=l.call(g,this,e),s.cb=o,n=s,i):l.call(g,this,arguments)},t.on("set",function(e){if(!n)return void t.delete(e);p[e]?"function"==typeof p[e]?p[e]=[p[e],n.cb]:p[e].push(n.cb):p[e]=n.cb,delete n.cb,n.id=e,n=null}),t.on("delete",function(e){var n;hasOwnProperty.call(p,e)||h[e]&&(n=h[e],delete h[e],t.emit("deleteasync",e,c.call(n.args,1)))}),t.on("clear",function(){var e=h;h=u(null),t.emit("clearasync",s(e,function(e){return c.call(e.args,1)}))})}},"../node_modules/memoizee/ext/dispose.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-callable.js"),s=n("../../common/node_modules/es5-ext/object/for-each.js"),o=n("../node_modules/memoizee/lib/registered-extensions.js"),i=Function.prototype.apply;o.dispose=function(e,t,n){var a;if(r(e),n.async&&o.async||n.promise&&o.promise)return t.on("deleteasync",a=function(t,n){i.call(e,null,n)}),void t.on("clearasync",function(e){s(e,function(e,t){a(t,e)})});t.on("delete",a=function(t,n){e(n)}),t.on("clear",function(e){s(e,function(e,t){a(t,e)})})}},"../node_modules/memoizee/ext/max-age.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/from/index.js"),s=n("../../common/node_modules/es5-ext/object/for-each.js"),o=n("../../common/node_modules/next-tick/index.js"),i=n("../node_modules/is-promise/index.js"),a=n("../node_modules/timers-ext/valid-timeout.js"),c=n("../node_modules/memoizee/lib/registered-extensions.js"),l=Function.prototype,u=Math.max,d=Math.min,m=Object.create;c.maxAge=function(e,t,n){var p,h,f,g;(e=a(e))&&(p=m(null),h=n.async&&c.async||n.promise&&c.promise?"async":"",t.on("set"+h,function(n){p[n]=setTimeout(function(){t.delete(n)},e),"function"==typeof p[n].unref&&p[n].unref(),g&&(g[n]&&"nextTick"!==g[n]&&clearTimeout(g[n]),g[n]=setTimeout(function(){delete g[n]},f),"function"==typeof g[n].unref&&g[n].unref())}),t.on("delete"+h,function(e){clearTimeout(p[e]),delete p[e],g&&("nextTick"!==g[e]&&clearTimeout(g[e]),delete g[e])}),n.preFetch&&(f=!0===n.preFetch||isNaN(n.preFetch)?.333:u(d(Number(n.preFetch),1),0))&&(g={},f=(1-f)*e,t.on("get"+h,function(e,s,a){g[e]||(g[e]="nextTick",o(function(){var o;"nextTick"===g[e]&&(delete g[e],t.delete(e),n.async&&(s=r(s),s.push(l)),o=t.memoized.apply(a,s),n.promise&&i(o)&&("function"==typeof o.done?o.done(l,l):o.then(l,l)))}))})),t.on("clear"+h,function(){s(p,function(e){clearTimeout(e)}),p={},g&&(s(g,function(e){"nextTick"!==e&&clearTimeout(e)}),g={})}))}},"../node_modules/memoizee/ext/max.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/number/to-pos-integer.js"),s=n("../node_modules/lru-queue/index.js"),o=n("../node_modules/memoizee/lib/registered-extensions.js");o.max=function(e,t,n){var i,a,c;(e=r(e))&&(a=s(e),i=n.async&&o.async||n.promise&&o.promise?"async":"",t.on("set"+i,c=function(e){void 0!==(e=a.hit(e))&&t.delete(e)}),t.on("get"+i,c),t.on("delete"+i,a.delete),t.on("clear"+i,a.clear))}},"../node_modules/memoizee/ext/promise.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/map.js"),s=n("../../common/node_modules/es5-ext/object/primitive-set.js"),o=n("../../common/node_modules/es5-ext/object/validate-stringifiable-value.js"),i=n("../../common/node_modules/es5-ext/to-short-string-representation.js"),a=n("../node_modules/is-promise/index.js"),c=n("../../common/node_modules/next-tick/index.js"),l=Object.create,u=s("then","then:finally","done","done:finally");n("../node_modules/memoizee/lib/registered-extensions.js").promise=function(e,t){var n=l(null),s=l(null),d=l(null);if(!0===e)e=null;else if(e=o(e),!u[e])throw new TypeError("'"+i(e)+"' is not valid promise mode");t.on("set",function(r,o,i){var l=!1;if(!a(i))return s[r]=i,void t.emit("setasync",r,1);n[r]=1,d[r]=i;var u=function(e){var o=n[r];if(l)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");o&&(delete n[r],s[r]=e,t.emit("setasync",r,o))},m=function(){l=!0,n[r]&&(delete n[r],delete d[r],t.delete(r))},p=e;if(p||(p="then"),"then"===p)i.then(function(e){c(u.bind(this,e))},function(){c(m)});else if("done"===p){if("function"!=typeof i.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");i.done(u,m)}else if("done:finally"===p){if("function"!=typeof i.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof i.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");i.done(u),i.finally(m)}}),t.on("get",function(e,r,s){var o;if(n[e])return void++n[e];o=d[e];var i=function(){t.emit("getasync",e,r,s)};a(o)?"function"==typeof o.done?o.done(i):o.then(function(){c(i)}):i()}),t.on("delete",function(e){if(delete d[e],n[e])return void delete n[e];if(hasOwnProperty.call(s,e)){var r=s[e];delete s[e],t.emit("deleteasync",e,[r])}}),t.on("clear",function(){var e=s;s=l(null),n=l(null),d=l(null),t.emit("clearasync",r(e,function(e){return[e]}))})}},"../node_modules/memoizee/ext/ref-counter.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/d/index.js"),s=n("../node_modules/memoizee/lib/registered-extensions.js"),o=Object.create,i=Object.defineProperties;s.refCounter=function(e,t,n){var a,c;a=o(null),c=n.async&&s.async||n.promise&&s.promise?"async":"",t.on("set"+c,function(e,t){a[e]=t||1}),t.on("get"+c,function(e){++a[e]}),t.on("delete"+c,function(e){delete a[e]}),t.on("clear"+c,function(){a={}}),i(t.memoized,{deleteRef:r(function(){var e=t.get(arguments);return null===e?null:a[e]?!--a[e]&&(t.delete(e),!0):null}),getRefCount:r(function(){var e=t.get(arguments);return null===e?0:a[e]?a[e]:0})})}},"../node_modules/memoizee/index.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/normalize-options.js"),s=n("../node_modules/memoizee/lib/resolve-length.js"),o=n("../node_modules/memoizee/plain.js");e.exports=function(e){var t,i=r(arguments[1]);return i.normalizer||0!==(t=i.length=s(i.length,e.length,i.async))&&(i.primitive?!1===t?i.normalizer=n("../node_modules/memoizee/normalizers/primitive.js"):t>1&&(i.normalizer=n("../node_modules/memoizee/normalizers/get-primitive-fixed.js")(t)):i.normalizer=!1===t?n("../node_modules/memoizee/normalizers/get.js")():1===t?n("../node_modules/memoizee/normalizers/get-1.js")():n("../node_modules/memoizee/normalizers/get-fixed.js")(t)),i.async&&n("../node_modules/memoizee/ext/async.js"),i.promise&&n("../node_modules/memoizee/ext/promise.js"),i.dispose&&n("../node_modules/memoizee/ext/dispose.js"),i.maxAge&&n("../node_modules/memoizee/ext/max-age.js"),i.max&&n("../node_modules/memoizee/ext/max.js"),i.refCounter&&n("../node_modules/memoizee/ext/ref-counter.js"),o(e,i)}},"../node_modules/memoizee/lib/configure-map.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/error/custom.js"),s=n("../../common/node_modules/es5-ext/function/_define-length.js"),o=n("../../common/node_modules/d/index.js"),i=n("../../common/node_modules/event-emitter/index.js").methods,a=n("../node_modules/memoizee/lib/resolve-resolve.js"),c=n("../node_modules/memoizee/lib/resolve-normalize.js"),l=Function.prototype.apply,u=Function.prototype.call,d=Object.create,m=Object.defineProperties,p=i.on,h=i.emit;e.exports=function(e,t,n){var i,f,g,v,b,y,j,w,E,C,x,_,k,S,R,F=d(null);return f=!1!==t?t:isNaN(e.length)?1:e.length,n.normalizer&&(C=c(n.normalizer),g=C.get,v=C.set,b=C.delete,y=C.clear),null!=n.resolvers&&(R=a(n.resolvers)),S=g?s(function(t){var n,s,o=arguments;if(R&&(o=R(o)),null!==(n=g(o))&&hasOwnProperty.call(F,n))return x&&i.emit("get",n,o,this),F[n];if(s=1===o.length?u.call(e,this,o[0]):l.call(e,this,o),null===n){if(null!==(n=g(o)))throw r("Circular invocation","CIRCULAR_INVOCATION");n=v(o)}else if(hasOwnProperty.call(F,n))throw r("Circular invocation","CIRCULAR_INVOCATION");return F[n]=s,_&&i.emit("set",n,null,s),s},f):0===t?function(){var t;if(hasOwnProperty.call(F,"data"))return x&&i.emit("get","data",arguments,this),F.data;if(t=arguments.length?l.call(e,this,arguments):u.call(e,this),hasOwnProperty.call(F,"data"))throw r("Circular invocation","CIRCULAR_INVOCATION");return F.data=t,_&&i.emit("set","data",null,t),t}:function(t){var n,s,o=arguments;if(R&&(o=R(arguments)),s=String(o[0]),hasOwnProperty.call(F,s))return x&&i.emit("get",s,o,this),F[s];if(n=1===o.length?u.call(e,this,o[0]):l.call(e,this,o),hasOwnProperty.call(F,s))throw r("Circular invocation","CIRCULAR_INVOCATION");return F[s]=n,_&&i.emit("set",s,null,n),n},i={original:e,memoized:S,profileName:n.profileName,get:function(e){return R&&(e=R(e)),g?g(e):String(e[0])},has:function(e){return hasOwnProperty.call(F,e)},delete:function(e){var t;hasOwnProperty.call(F,e)&&(b&&b(e),t=F[e],delete F[e],k&&i.emit("delete",e,t))},clear:function(){var e=F;y&&y(),F=d(null),i.emit("clear",e)},on:function(e,t){return"get"===e?x=!0:"set"===e?_=!0:"delete"===e&&(k=!0),p.call(this,e,t)},emit:h,updateEnv:function(){e=i.original}},j=g?s(function(e){var t,n=arguments;R&&(n=R(n)),null!==(t=g(n))&&i.delete(t)},f):0===t?function(){return i.delete("data")}:function(e){return R&&(e=R(arguments)[0]),i.delete(e)},w=s(function(){var e,n=arguments;return 0===t?F.data:(R&&(n=R(n)),e=g?g(n):String(n[0]),F[e])}),E=s(function(){var e,n=arguments;return 0===t?i.has("data"):(R&&(n=R(n)),null!==(e=g?g(n):String(n[0]))&&i.has(e))}),m(S,{__memoized__:o(!0),delete:o(j),clear:o(i.clear),_get:o(w),_has:o(E)}),i}},"../node_modules/memoizee/lib/registered-extensions.js":function(e,t,n){"use strict"},"../node_modules/memoizee/lib/resolve-length.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/number/to-pos-integer.js");e.exports=function(e,t,n){var s;return isNaN(e)?(s=t,s>=0?n&&s?s-1:s:1):!1!==e&&r(e)}},"../node_modules/memoizee/lib/resolve-normalize.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-callable.js");e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:r(e.get)},void 0!==e.set?(t.set=r(e.set),e.delete&&(t.delete=r(e.delete)),e.clear&&(t.clear=r(e.clear)),t):(t.set=t.get,t))}},"../node_modules/memoizee/lib/resolve-resolve.js":function(e,t,n){"use strict";var r,s=n("../../common/node_modules/es5-ext/array/to-array.js"),o=n("../../common/node_modules/es5-ext/object/is-value.js"),i=n("../../common/node_modules/es5-ext/object/valid-callable.js"),a=Array.prototype.slice;r=function(e){return this.map(function(t,n){return t?t(e[n]):e[n]}).concat(a.call(e,this.length))},e.exports=function(e){return e=s(e),e.forEach(function(e){o(e)&&i(e)}),r.bind(e)}},"../node_modules/memoizee/lib/weak.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/error/custom.js"),s=n("../../common/node_modules/es5-ext/function/_define-length.js"),o=n("../../common/node_modules/es5-ext/function/#/partial.js"),i=n("../../common/node_modules/es5-ext/object/copy.js"),a=n("../../common/node_modules/es5-ext/object/normalize-options.js"),c=n("../../common/node_modules/es5-ext/object/valid-callable.js"),l=n("../../common/node_modules/d/index.js"),u=n("../../common/node_modules/es6-weak-map/index.js"),d=n("../node_modules/memoizee/lib/resolve-length.js"),m=n("../node_modules/memoizee/lib/registered-extensions.js"),p=n("../node_modules/memoizee/lib/resolve-resolve.js"),h=n("../node_modules/memoizee/lib/resolve-normalize.js"),f=Array.prototype.slice,g=Object.defineProperties;e.exports=function(e){return function(t){var n,v,b,y,j,w=a(arguments[1]);return c(t),hasOwnProperty.call(t,"__memoized__")&&!w.force?t:(v=d(w.length,t.length,w.async&&m.async),w.length=v?v-1:0,n=new u,w.resolvers&&(y=p(w.resolvers)),w.normalizer&&(j=h(w.normalizer)),1!==v||j||w.async||w.dispose||w.maxAge||w.max||w.refCounter?(b=g(s(function(r){var s,a=arguments;return y&&(a=y(a),r=a[0]),s=n.get(r),s||(j&&(w=i(w),w.normalizer=i(j),w.normalizer.get=o.call(w.normalizer.get,r),w.normalizer.set=o.call(w.normalizer.set,r),w.normalizer.delete&&(w.normalizer.delete=o.call(w.normalizer.delete,r))),n.set(r,s=e(o.call(t,r),w))),s.apply(this,f.call(a,1))},v),{__memoized__:l(!0),delete:l(s(function(e){var t,r=arguments;y&&(r=y(r),e=r[0]),(t=n.get(e))&&t.delete.apply(this,f.call(r,1))},v))}),w.refCounter?(g(b,{deleteRef:l(s(function(e){var t,r=arguments;return y&&(r=y(r),e=r[0]),t=n.get(e),t?t.deleteRef.apply(this,f.call(r,1)):null},v)),getRefCount:l(s(function(e){var t,r=arguments;return y&&(r=y(r),e=r[0]),t=n.get(e),t?t.getRefCount.apply(this,f.call(r,1)):0},v))}),b):b):g(function(e){var s,o=arguments;if(y&&(o=y(o)),e=o[0],n.has(e))return n.get(e);if(s=t.apply(this,o),n.has(e))throw r("Circular invocation","CIRCULAR_INVOCATION");return n.set(e,s),s},{__memoized__:l(!0),delete:l(function(e){return y&&(e=y(arguments)[0]),n.delete(e)})}))}}},"../node_modules/memoizee/normalizers/get-1.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/#/e-index-of.js");e.exports=function(){var e=0,t=[],n=[];return{get:function(e){var s=r.call(t,e[0]);return-1===s?null:n[s]},set:function(r){return t.push(r[0]),n.push(++e),e},delete:function(e){var s=r.call(n,e);-1!==s&&(t.splice(s,1),n.splice(s,1))},clear:function(){t=[],n=[]}}}},"../node_modules/memoizee/normalizers/get-fixed.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/#/e-index-of.js"),s=Object.create;e.exports=function(e){var t=0,n=[[],[]],o=s(null);return{get:function(t){for(var s,o=0,i=n;o<e-1;){if(-1===(s=r.call(i[0],t[o])))return null;i=i[1][s],++o}return s=r.call(i[0],t[o]),-1===s?null:i[1][s]||null},set:function(s){for(var i,a=0,c=n;a<e-1;)i=r.call(c[0],s[a]),-1===i&&(i=c[0].push(s[a])-1,c[1].push([[],[]])),c=c[1][i],++a;return i=r.call(c[0],s[a]),-1===i&&(i=c[0].push(s[a])-1),c[1][i]=++t,o[t]=s,t},delete:function(t){for(var s,i=0,a=n,c=[],l=o[t];i<e-1;){if(-1===(s=r.call(a[0],l[i])))return;c.push(a,s),a=a[1][s],++i}if(-1!==(s=r.call(a[0],l[i]))){for(t=a[1][s],a[0].splice(s,1),a[1].splice(s,1);!a[0].length&&c.length;)s=c.pop(),a=c.pop(),a[0].splice(s,1),a[1].splice(s,1);delete o[t]}},clear:function(){n=[[],[]],o=s(null)}}}},"../node_modules/memoizee/normalizers/get-primitive-fixed.js":function(e,t,n){"use strict";e.exports=function(e){return e?function(t){for(var n=String(t[0]),r=0,s=e;--s;)n+=""+t[++r];return n}:function(){return""}}},"../node_modules/memoizee/normalizers/get.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/array/#/e-index-of.js"),s=Object.create;e.exports=function(){var e=0,t=[],n=s(null);return{get:function(e){var n,s=0,o=t,i=e.length;if(0===i)return o[i]||null;if(o=o[i]){for(;s<i-1;){if(-1===(n=r.call(o[0],e[s])))return null;o=o[1][n],++s}return n=r.call(o[0],e[s]),-1===n?null:o[1][n]||null}return null},set:function(s){var o,i=0,a=t,c=s.length;if(0===c)a[c]=++e;else{for(a[c]||(a[c]=[[],[]]),a=a[c];i<c-1;)o=r.call(a[0],s[i]),-1===o&&(o=a[0].push(s[i])-1,a[1].push([[],[]])),a=a[1][o],++i;o=r.call(a[0],s[i]),-1===o&&(o=a[0].push(s[i])-1),a[1][o]=++e}return n[e]=s,e},delete:function(e){var s,o=0,i=t,a=n[e],c=a.length,l=[];if(0===c)delete i[c];else if(i=i[c]){for(;o<c-1;){if(-1===(s=r.call(i[0],a[o])))return;l.push(i,s),i=i[1][s],++o}if(-1===(s=r.call(i[0],a[o])))return;for(e=i[1][s],i[0].splice(s,1),i[1].splice(s,1);!i[0].length&&l.length;)s=l.pop(),i=l.pop(),i[0].splice(s,1),i[1].splice(s,1)}delete n[e]},clear:function(){t=[],n=s(null)}}}},"../node_modules/memoizee/normalizers/primitive.js":function(e,t,n){"use strict";e.exports=function(e){var t,n,r=e.length;if(!r)return"";for(t=String(e[n=0]);--r;)t+=""+e[++n];return t}},"../node_modules/memoizee/plain.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/object/valid-callable.js"),s=n("../../common/node_modules/es5-ext/object/for-each.js"),o=n("../node_modules/memoizee/lib/registered-extensions.js"),i=n("../node_modules/memoizee/lib/configure-map.js"),a=n("../node_modules/memoizee/lib/resolve-length.js");e.exports=function e(t){var n,c,l;if(r(t),n=Object(arguments[1]),n.async&&n.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!n.force?t:(c=a(n.length,t.length,n.async&&o.async),l=i(t,c,n),s(o,function(e,t){n[t]&&e(n[t],l,n)}),e.__profiler__&&e.__profiler__(l),l.updateEnv(),l.memoized)}},"../node_modules/memoizee/weak.js":function(e,t,n){"use strict";e.exports=n("../node_modules/memoizee/lib/weak.js")(n("../node_modules/memoizee/index.js"))},"../node_modules/octicons/build/svg/file-text.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="FileText",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/git-branch.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="GitBranch",r.defaultProps={viewBox:"0 0 10 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/git-merge.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M10 7c-.73 0-1.38.41-1.73 1.02V8C7.22 7.98 6 7.64 5.14 6.98c-.75-.58-1.5-1.61-1.89-2.44A1.993 1.993 0 0 0 2 .99C.89.99 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2a1.993 1.993 0 0 0 1-3.72V7.67c.67.7 1.44 1.27 2.3 1.69.86.42 2.03.63 2.97.64v-.02c.36.61 1 1.02 1.73 1.02 1.11 0 2-.89 2-2 0-1.11-.89-2-2-2zm-6.8 6c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm8 6c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="GitMerge",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/git-pull-request.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="GitPullRequest",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/issue-closed.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M7 10h2v2H7v-2zm2-6H7v5h2V4zm1.5 1.5l-1 1L12 9l4-4.5-1-1L12 7l-1.5-1.5zM8 13.7A5.71 5.71 0 0 1 2.3 8c0-3.14 2.56-5.7 5.7-5.7 1.83 0 3.45.88 4.5 2.2l.92-.92A6.947 6.947 0 0 0 8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7l-1.52 1.52c-.66 2.41-2.86 4.19-5.48 4.19v-.01z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="IssueClosed",r.defaultProps={viewBox:"0 0 16 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/issue-opened.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="IssueOpened",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/issue-reopened.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M8 9H6V4h2v5zm-2 3h2v-2H6v2zm6.33-2H10l1.5 1.5c-1.05 1.33-2.67 2.2-4.5 2.2A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7 2.19 0 4.13-1.02 5.41-2.59L14 14v-4h-1.67zM1.67 6H4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7 0 .34-.03.67-.09 1h1.31c.05-.33.08-.66.08-1 0-3.86-3.14-7-7-7-2.19 0-4.13 1.02-5.41 2.59L0 2v4h1.67z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="IssueReopened",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/list-ordered.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M12 13c0 .59 0 1-.59 1H4.59C4 14 4 13.59 4 13c0-.59 0-1 .59-1h6.81c.59 0 .59.41.59 1H12zM4.59 4h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zm6.81 3H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1zM2 1h-.72c-.3.19-.58.25-1.03.34V2H1v2.14H.16V5H3v-.86H2V1zm.25 8.13c-.17 0-.45.03-.66.06.53-.56 1.14-1.25 1.14-1.89C2.71 6.52 2.17 6 1.37 6c-.59 0-.97.2-1.38.64l.58.58c.19-.19.38-.38.64-.38.28 0 .48.16.48.52 0 .53-.77 1.2-1.7 2.06V10h3l-.09-.88h-.66l.01.01zm-.08 3.78v-.03c.44-.19.64-.47.64-.86 0-.7-.56-1.11-1.44-1.11-.48 0-.89.19-1.28.52l.55.64c.25-.2.44-.31.69-.31.27 0 .42.13.42.36 0 .27-.2.44-.86.44v.75c.83 0 .98.17.98.47 0 .25-.23.38-.58.38-.28 0-.56-.14-.81-.38l-.48.66c.3.36.77.56 1.41.56.83 0 1.53-.41 1.53-1.16 0-.5-.31-.81-.77-.94v.01z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="ListOrdered",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/list-unordered.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M2 13c0 .59 0 1-.59 1H.59C0 14 0 13.59 0 13c0-.59 0-1 .59-1h.81c.59 0 .59.41.59 1H2zm2.59-9h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zM1.41 7H.59C0 7 0 7.41 0 8c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0-5H.59C0 2 0 2.41 0 3c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm10 5H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0 5H4.59C4 12 4 12.41 4 13c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="ListUnordered",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/milestone.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M8 2H6V0h2v2zm4 5H2c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h10l2 2-2 2zM8 4H6v2h2V4zM6 16h2V8H6v8z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="Milestone",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/note.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M3 10h4V9H3v1zm0-2h6V7H3v1zm0-2h8V5H3v1zm10 6H1V3h12v9zM1 2c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1H1z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="Note",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/person.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M12 14.002a.998.998 0 0 1-.998.998H1.001A1 1 0 0 1 0 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="Person",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/repo-push.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M4 3H3V2h1v1zM3 5h1V4H3v1zm4 0L4 9h2v7h2V9h2L7 5zm4-5H1C.45 0 0 .45 0 1v12c0 .55.45 1 1 1h4v-1H1v-2h4v-1H2V1h9.02L11 10H9v1h2v2H9v1h2c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="RepoPush",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/repo.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="Repo",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},"../node_modules/octicons/build/svg/tag.svg":function(e,t,n){function r(e){return s.createElement("svg",e,s.createElement("path",{fillRule:"evenodd",d:"M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1 3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41 0l4.59-4.59a.996.996 0 0 0 0-1.41L7.73 1.73zM2.38 7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59 1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73 4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z"}))}var s=n("../../common/node_modules/react/react.js");r.displayName="Tag",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},"../node_modules/relaks/async-rendering-interrupted.js":function(e,t){function n(){this.message="Async rendering interrupted"}var r=Object.create(Error.prototype);r.constructor=n,r.constructor.prototype=r,e.exports=r.constructor},"../node_modules/relaks/class.js":function(e,t,n){function r(e){return!(!e||"function"!=typeof e.then)}function s(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in t){var r=e[n];if(t[n]!==r)return!1}return!0}var o=n("../node_modules/relaks/async-rendering-interrupted.js"),i=n("../node_modules/relaks/meanwhile.js");e.exports=function(e){function t(){}var n=Object.create(e.Component.prototype);return n.constructor=t,n.constructor.prototype=n,n.render=function(){var e=this.relaks;if(!e)return console.warn("Relaks context is missing. Make sure you are calling componentWillMount() and componentWillUnmount() of the superclass"),null;if(e.promisedElementExpected)return e.promisedElementExpected=!1,e.progressElement=null,e.progressElementRendered=null,e.promisedElement;if(e.progressElementExpected)return e.progressElementExpected=!1,e.progressElementRendered=e.progressElement,e.progressElement;var t=e.meanwhile;if(t){e.meanwhile=null;try{t.cancel()}catch(e){console.error(e)}}e.previous=e.current,e.current={props:this.props,state:this.state||{}};var n=e.meanwhile=new i(this,t);try{var s;s=this.renderAsync.length>1?this.renderAsync(n,this.props,this.state,this.context):this.renderAsync(n),n.synchronous=!1}catch(t){return console.error(t),e.meanwhile.clear(),e.meanwhile=null,e.progressElement||e.progressElementRendered||e.promisedElement}if(r(s)){var a=this,c=function(t){n!==e.meanwhile?n.cancel():a.relaks?(n.finish(),e.promisedElement=t,e.promisedElementExpected=!0,e.meanwhile=null,a.forceUpdate()):n.cancel()},l=function(t){if(t instanceof o);else{console.error(t);var n=e.progressElement||e.promisedElement;c(n)}};s.then(c,l)}else{var u=s;e.meanwhile=null,e.promisedElement=u,e.progressElement=null,e.progressElementRendered=null}return e.promisedElement?e.promisedElement:e.progressElement&&(n.showingProgress||n.showingProgressInitially)?e.progressElement:e.progressElementRendered?e.progressElementRendered:null},n.shouldComponentUpdate=function(e,t){return!s(this.props,e)||!s(this.state,t)},n.componentWillMount=function(){this.relaks={progressElement:null,progressElementExpected:!1,promisedElement:null,promisedElementExpected:!1,progressElementRendered:null,meanwhile:null,previous:null,current:{props:{},state:{}}}},n.componentWillUnmount=function(){var e=this.relaks;e&&(e.meanwhile&&e.meanwhile.cancel(),this.relaks=void 0)},{Component:n.constructor,AsyncComponent:n.constructor,AsyncRenderingInterrupted:o,Meanwhile:i}}},"../node_modules/relaks/create-class.js":function(e,t,n){function r(e){if(e.render)throw new Error("Class definition should not contain render()");if(!e.renderAsync)throw new Error("Class definition should contain renderAsync()");var t=a.Component.prototype;return e=s(e),e.render=t.render,e.componentWillMount=o(e.componentWillMount,t.componentWillMount),e.componentWillUnmount=o(e.componentWillUnmount,t.componentWillUnmount),e.shouldComponentUpdate=e.shouldComponentUpdate||t.shouldComponentUpdate,i.createClass(e)}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function o(e,t){return e?function(){e.call(this),t.call(this)}:t}var i=n("../../common/node_modules/react/react.js"),a=n("../node_modules/relaks/index.js");e.exports=r,a.createClass=r},"../node_modules/relaks/index.js":function(e,t,n){e.exports=n("../node_modules/relaks/class.js")(n("../../common/node_modules/react/react.js"))},"../node_modules/relaks/meanwhile.js":function(e,t,n){function r(e,t){var n=e.relaks;this.component=e,this.synchronous=!0,this.showingProgress=!1,this.showingProgressInitially=!1,this.delayWhenEmpty=50,this.delayWhenRendered=1/0,this.canceled=!1,this.prior=t?t.prior:n.previous,this.previous=n.previous,this.current=n.current,this.updateTimeout=0,this.startTime=s(),this.onCancel=null,this.onComplete=null,this.onProgress=null}function s(){return new Date-a}var o=n("../node_modules/relaks/async-rendering-interrupted.js"),i=r.prototype;i.check=function(){var e=this.component.relaks;if(!e||this!==e.meanwhile)throw new o},i.show=function(e,t){var n=this.component.relaks;if(this.check(),n.progressElement=e,this.showingProgress)return this.update(),!0;if("always"===t)return this.update(!0),!0;if("initial"===t&&!n.promisedElement&&!n.progressElementRendered)return this.update(!0),!0;if(this.updateTimeout)return!1;var r;if((r=n.promisedElement?this.delayWhenRendered:this.delayWhenEmpty)>0){if(r!==1/0){var s=this;this.updateTimeout=setTimeout(function(){0!==s.updateTimeout&&s.update()},r)}return!1}return this.update(),!0},i.revising=function(){return!!this.component.relaks.promisedElement},i.delay=function(e,t){"number"==typeof e&&(this.delayWhenEmpty=e),"number"==typeof t&&(this.delayWhenRendered=t)},i.update=function(e){var t=this.component.relaks;if(e||(this.showingProgress=!0),t.promisedElement&&(t.promisedElement=null),this.synchronous)return void(e&&(this.showingProgressInitially=!0));if(this.onProgress){var n=s()-this.startTime;this.onProgress({type:"progress",target:this,elapsed:n})}t.progressElement!==t.progressElementRendered&&(t.progressElementExpected=!0,this.component.forceUpdate())},i.cancel=function(){this.clear(),this.canceled||(this.canceled=!0,this.onCancel&&this.onCancel({type:"cancel",target:this}))},i.finish=function(){if(this.clear(),this.onComplete){var e=s()-this.startTime;this.onComplete({type:"complete",target:this,elapsed:e})}},i.clear=function(){this.component.relaks;this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=0)};var a=new Date;e.exports=i.constructor},"../node_modules/style-loader/addStyles.js":function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],s=h[r.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](r.parts[o]);for(;o<r.parts.length;o++)s.parts.push(u(r.parts[o],t))}else{for(var i=[],o=0;o<r.parts.length;o++)i.push(u(r.parts[o],t));h[r.id]={id:r.id,refs:1,parts:i}}}}function s(e,t){for(var n=[],r={},s=0;s<e.length;s++){var o=e[s],i=t.base?o[0]+t.base:o[0],a=o[1],c=o[2],l=o[3],u={css:a,media:c,sourceMap:l};r[i]?r[i].parts.push(u):n.push(r[i]={id:i,parts:[u]})}return n}function o(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function a(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),o(e,t),t}function c(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),o(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function u(e,t){var n,r,s,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var l=b++;n=v||(v=a(t)),r=d.bind(null,n,l,!1),s=d.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=p.bind(null,n,t),s=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=m.bind(null,n),s=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else s()}}function d(e,t,n,r){var s=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,s);else{var o=document.createTextNode(s),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function m(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,s=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||o)&&(r=j(r)),s&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var i=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}var h={},f=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),v=null,b=0,y=[],j=n("../node_modules/style-loader/fixUrls.js");e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=f()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var n=s(e,t);return r(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var a=n[i],c=h[a.id];c.refs--,o.push(c)}if(e){r(s(e,t),t)}for(var i=0;i<o.length;i++){var c=o[i];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete h[c.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},"../node_modules/style-loader/fixUrls.js":function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(s))return e;var o;return o=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:r+s.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},"../node_modules/style-loader/index.js!../node_modules/css-loader/index.js!../node_modules/less-loader/index.js!../node_modules/font-awesome-webpack/font-awesome-styles.loader.js!../node_modules/font-awesome-webpack/font-awesome.config.js":function(e,t,n){var r=n("../node_modules/css-loader/index.js!../node_modules/less-loader/index.js!../node_modules/font-awesome-webpack/font-awesome-styles.loader.js!../node_modules/font-awesome-webpack/font-awesome.config.js");"string"==typeof r&&(r=[[e.i,r,""]]);var s={};s.transform=void 0;n("../node_modules/style-loader/addStyles.js")(r,s);r.locals&&(e.exports=r.locals)},"../node_modules/timers-ext/max-timeout.js":function(e,t,n){"use strict";e.exports=2147483647},"../node_modules/timers-ext/valid-timeout.js":function(e,t,n){"use strict";var r=n("../../common/node_modules/es5-ext/number/to-pos-integer.js"),s=n("../node_modules/timers-ext/max-timeout.js");e.exports=function(e){if((e=r(e))>s)throw new TypeError(e+" exceeds maximum possible timeout");return e}},"./application.jsx":function(e,t,n){"use strict";function r(e){for(;e&&"A"!==e.tagName;)e=e.parentNode;return e}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/node_modules/react/react.js");a.PropTypes;n("../node_modules/relaks/index.js").createClass=n("../node_modules/relaks/create-class.js");var c,l=n("../../common/src/utils/component-refs.js"),u=(n("../../common/src/errors/http-error.js"),n("../../common/src/routing/cors-rewriter.js")),d=n("../../common/src/data/remote-data-source/index.jsx"),m=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route-manager.jsx"),h=n("../../common/src/routing/route.js"),f=n("../../common/src/transport/payload-manager.jsx"),g=n("../../common/src/transport/payloads.js"),v=n("../../common/src/locale/locale-manager.jsx"),b=n("../../common/src/locale/locale.js"),y=n("../../common/src/theme/theme-manager.jsx"),j=n("../../common/src/theme/theme.js"),w=n("../../common/src/data/subscription-manager.jsx"),E=n("../../common/src/data/session-manager.jsx"),C=n("./pages/project-list-page.jsx"),x=n("./pages/project-summary-page.jsx"),_=n("./pages/member-list-page.jsx"),k=n("./pages/role-list-page.jsx"),S=n("./pages/role-summary-page.jsx"),R=n("./pages/repo-list-page.jsx"),F=n("./pages/repo-summary-page.jsx"),O=n("./pages/server-list-page.jsx"),P=n("./pages/server-summary-page.jsx"),T=n("./pages/settings-page.jsx"),N=n("./pages/start-page.jsx"),L=n("./pages/user-list-page.jsx"),I=n("./pages/user-summary-page.jsx"),A=n("./pages/sign-in-page.jsx"),M=n("./pages/error-page.jsx"),D=n("./widgets/side-navigation.jsx"),q=n("./widgets/task-alert-bar.jsx"),U=n("../../common/src/widgets/upload-progress.jsx"),B=n("../../common/src/data/indexed-db-cache.jsx"),z=n("../../common/src/data/local-storage-cache.jsx");B.isAvailable()?c=B:z.isAvailable()&&(c=z);var H=n("../../common/src/transport/websocket-notifier.jsx"),W=[C,x,_,k,S,R,F,O,P,T,N,L,I,M];n("../../common/node_modules/setimmediate/setImmediate.js"),n("../../common/src/utils/lodash-extra.js"),n("./application.scss"),n("../node_modules/font-awesome-webpack/index.js"),e.exports=a.createClass({displayName:"Application",getInitialState:function(){return this.components=l({remoteDataSource:d,routeManager:p,localeManager:v,themeManager:y,payloadManager:f,cache:c,notifier:H,subscriptionManager:w,sessionManager:E}),{database:null,payloads:null,route:null,locale:null,theme:null,canAccessServer:!1,connection:null,showingUploadProgress:!1}},isReady:function(){return!!(this.state.database&&this.state.payloads&&this.state.route&&this.state.locale&&this.state.theme)},render:function(){return a.createElement("div",{onClick:this.handleClick},this.renderUserInterface(),this.renderConfiguration())},renderUserInterface:function(){if(!this.isReady())return null;var e={database:this.state.database,route:this.state.route,locale:this.state.locale,theme:this.state.theme,disabled:!this.state.canAccessServer};return a.createElement("div",{className:"application",id:"application"},a.createElement(D,e),a.createElement("section",{className:"page-view-port"},a.createElement("div",{className:"scroll-box"},this.renderCurrentPage()),this.renderTaskAlert(),this.renderUploadProgress()))},renderCurrentPage:function(){var e=this.state.route.component,t={database:this.state.database,route:this.state.route,payloads:this.state.payloads,locale:this.state.locale,theme:this.state.theme};return this.state.canAccessServer||e!==M&&(e=A),a.createElement(e,t)},renderTaskAlert:function(){if(!this.state.canAccessServer)return null;var e={database:this.state.database,route:this.state.route,payloads:this.state.payloads,locale:this.state.locale,theme:this.state.theme};return a.createElement(q,e)},renderConfiguration:function(){var e=this.components.setters,t=this.state.route,r=t?t.parameters.address:null,o={ref:e.remoteDataSource,basePath:"/srv/admin-data",online:this.state.online,connected:!!this.state.connection||void 0,retrievalFlags:{include_ctime:!0,include_mtime:!0},discoveryFlags:{include_deleted:!0},onChange:this.handleDatabaseChange,onAuthorization:this.handleAuthorization,onExpiration:this.handleExpiration,onStupefaction:this.handleStupefaction},i={ref:e.payloadManager,online:this.state.online,database:this.state.database,route:this.state.route,onChange:this.handlePayloadsChange},l={ref:e.routeManager,pages:W,database:this.state.database,rewrite:this.rewriteURL,onChange:this.handleRouteChange,onRedirectionRequest:this.handleRedirectionRequest},u={ref:e.localeManager,database:this.state.database,directory:n("../../common/src/languages.js"),onChange:this.handleLocaleChange},m={ref:e.themeManager,database:this.state.database,modes:{"ultra-narrow":0,narrow:700,standard:1e3,wide:1400,"super-wide":1700,"ultra-wide":2e3},serverAddress:r,onChange:this.handleThemeChange},h={ref:e.cache,databaseName:"trambar-admin"},g={ref:e.notifier,serverAddress:r,online:this.state.online,locale:this.state.locale,onNotify:this.handleChangeNotification,onConnect:this.handleConnection,onDisconnect:this.handleDisconnection},b={ref:e.subscriptionManager,area:"admin",connection:this.state.connection||null,schema:"*",database:this.state.database,locale:this.state.locale},j={ref:e.sessionManager,database:this.state.database};return a.createElement("div",null,a.createElement(c,h),a.createElement(H,g),a.createElement(d,s({},o,{cache:this.components.cache})),a.createElement(f,i),a.createElement(p,l),a.createElement(v,u),a.createElement(y,m),a.createElement(w,b),a.createElement(E,j))},renderUploadProgress:function(){if(!this.state.showingUploadProgress)return null;var e={payloads:this.state.payloads,locale:this.state.locale};return a.createElement(U,e)},componentDidMount:function(){window.addEventListener("beforeunload",this.handleBeforeUnload)},componentDidUpdate:function(e,t){var n=this;!this.splashScreenHidden&&this.isReady()&&(this.splashScreenHidden=!0,setTimeout(function(){n.hideSplashScreen()},100))},componentWillUnmount:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},rewriteURL:function(e,t,n){"parse"===n?u.extract(e,t):(this.state.route&&(t=o.defaults(t,this.state.route.parameters)),u.insert(e,t))},handleDatabaseChange:function(e){var t;this.state.route&&(t={address:this.state.route.parameters.address,schema:this.state.route.parameters.schema});var n=new m(e.target,t);this.setState({database:n})},handleAuthorization:function(e){this.components.sessionManager.saveToCache(e.session);var t=this.state.route.parameters.address;e.session.address===t&&this.setState({canAccessServer:!0})},handleExpiration:function(e){this.components.sessionManager.removeFromCache(e.session);var t=this.state.route.parameters.address;e.session.address===t&&this.setState({canAccessServer:!1})},handleStupefaction:function(e){this.state.route.replace(n("./pages/error-page.jsx"),{code:404})},handlePayloadsChange:function(e){var t=new g(e.target),n=this.state.showingUploadProgress;t.uploading||(n=!1),this.setState({payloads:t,showingUploadProgress:n})},handleLocaleChange:function(e){var t=new b(e.target);this.setState({locale:t}),document.title=t.translate("app-title")},handleRouteChange:function(e){var t=this,n=new h(e.target),r=n.parameters.address,s=this.state.database;if(r!=this.state.database.context.address){var o=this.components.remoteDataSource;s=new m(o,{address:r})}s.hasAuthorization()?this.setState({route:n,database:s,canAccessServer:!0}):this.components.sessionManager.loadFromCache(r).then(function(e){e&&s.restoreSession(e),s.hasAuthorization()?t.setState({route:n,database:s,canAccessServer:!0}):t.setState({route:n,database:s,canAccessServer:!1})})},handleRedirectionRequest:function(e){var t=e.target,n=t.find(M,{code:404});return i.resolve(n)},handleClick:function(e){if(0===e.button){var t=r(e.target);if(t&&!t.target&&!t.download){var n=t.getAttribute("href")||t.getAttribute("data-url");n&&-1===n.indexOf(":")&&(this.state.route.change(n),e.preventDefault(),t.blur())}}},handleThemeChange:function(e){var t=new j(e.target);this.setState({theme:t})},handleConnection:function(e){this.setState({connection:e.connection})},handleDisconnection:function(e){this.setState({connection:null})},handleChangeNotification:function(e){this.components.remoteDataSource.invalidate(e.changes)},handleBeforeUnload:function(e){if(this.state.payloads&&this.state.payloads.uploading)return this.setState({showingUploadProgress:!0}),e.returnValue="Are you sure?"},hideSplashScreen:function(){var e=document.getElementById("splash-screen"),t=document.getElementById("splash-screen-style");e&&(e.className="transition-out",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)},1e3))}})},"./application.scss":function(e,t){},"./dialogs/confirmation-dialog-box.jsx":function(e,t,n){"use strict";var r=(n("../../common/node_modules/lodash/lodash.js"),n("../../common/node_modules/react/react.js")),s=r.PropTypes,o=n("../../common/src/locale/locale.js"),i=n("../../common/src/theme/theme.js"),a=n("../../common/src/widgets/overlay.jsx"),c=n("./widgets/push-button.jsx");n("./dialogs/confirmation-dialog-box.scss"),e.exports=r.createClass({displayName:"ConfirmationDialogBox",propTypes:{show:s.bool,dangerous:s.bool,locale:s.instanceOf(o).isRequired,theme:s.instanceOf(i).isRequired,onConfirm:s.func,onCancel:s.func},getDefaultProps:function(){return{show:!0,dangerous:!0}},render:function(){var e=this.props.locale.translate,t={show:this.props.show,onBackgroundClick:this.handleCancelClick},n={className:"cancel",onClick:this.handleCancelClick},s={className:this.props.dangerous?"danger":"emphasis",onClick:this.handleConfirmClick};return r.createElement(a,t,r.createElement("div",{className:"confirmation-dialog-box"},r.createElement("div",{className:"message"},this.props.children),r.createElement("div",{className:"buttons"},r.createElement(c,n,e("confirmation-cancel"))," ",r.createElement(c,s,e("confirmation-confirm")))))},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleConfirmClick:function(e){this.props.onConfirm&&this.props.onConfirm({type:"confirm",target:this})}})},"./dialogs/confirmation-dialog-box.scss":function(e,t){},"./dialogs/image-album-dialog-box.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/src/utils/memoize.js"),u=n("../../common/src/media/media-loader.js"),d=n("../../common/src/objects/finders/picture-finder.js"),m=n("../../common/src/data/database.js"),p=n("../../common/src/locale/locale.js"),h=n("../../common/src/theme/theme.js"),f=n("../../common/src/transport/payloads.js"),g=n("../../common/src/widgets/overlay.jsx"),v=n("./widgets/push-button.jsx"),b=n("../../common/src/widgets/resource-view.jsx");n("./dialogs/image-album-dialog-box.scss"),e.exports=c.createClass({displayName:"ImageAlbumDialogBox",propTypes:{show:a.bool,purpose:a.string.isRequired,image:a.object,database:a.instanceOf(m).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired,payloads:a.instanceOf(f).isRequired,onSelect:a.func,onCancel:a.func},getInitialState:function(){return{shown:!1}},componentWillReceiveProps:function(e){e.show&&this.setState({shown:!0})},renderAsync:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r={pictures:null,show:this.props.show,purpose:this.props.purpose,image:this.props.image,database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onSelect:this.props.onSelect,onCancel:this.props.onCancel};return n.start().then(function(e){if(t.props.show||t.state.shown)return d.findPictures(n,t.props.purpose).then(function(e){r.pictures=e})}).then(function(){return i.createElement(y,r)})}});var y=e.exports.Sync=i.createClass({displayName:"ImageAlbumDialogBox.Sync",propTypes:{show:a.bool,projects:a.arrayOf(a.object),purpose:a.string.isRequired,image:a.object,database:a.instanceOf(m).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired,payloads:a.instanceOf(f).isRequired,onSelect:a.func,onCancel:a.func},getInitialState:function(){return{managingImages:!1,selectedPictureId:null,deletionCandidateIds:[],isDropTarget:!1}},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleBackgroundClick},t={className:"image-album-dialog-box",onDragEnter:this.handleDragEnter};return i.createElement(g,e,i.createElement("div",t,this.renderPictures(),this.renderButtons(),this.renderDropIndicator()))},renderPictures:function(){var e=j(this.props.pictures);return i.createElement("div",{className:"scrollable"},s.map(e,this.renderPicture))},renderPicture:function(e,t){var n=e.details,o={className:"picture",onClick:this.handleImageClick,"data-picture-id":e.id};return this.state.managingImages?s.includes(this.state.deletionCandidateIds,e.id)&&(o.className+=" deleting"):this.state.selectedPictureId?this.state.selectedPictureId===e.id&&(o.className+=" selected"):this.props.image&&this.props.image.url===e.url&&(o.className+=" selected"),i.createElement("div",r({key:t},o),i.createElement(b,{resource:n,height:120,theme:this.props.theme}))},renderButtons:function(){var e=this.props.locale.translate;if(this.state.managingImages){var t={type:"file",value:"",accept:"image/*",multiple:!0,onChange:this.handleUploadChange},n={className:"remove",disabled:s.isEmpty(this.state.deletionCandidateIds),onClick:this.handleRemoveClick},r={className:"done",onClick:this.handleDoneClick};return i.createElement("div",{key:"manage",className:"buttons"},i.createElement("div",{className:"left"},i.createElement(v,n,e("image-album-remove"))," ",i.createElement("label",{className:"push-button"},e("image-album-upload"),i.createElement("input",t))),i.createElement("div",{className:"right"},i.createElement(v,r,e("image-album-done"))))}var o={className:"manage",onClick:this.handleManageClick},a={className:"cancel",onClick:this.handleCancelClick},c={className:"select",disabled:!this.state.selectedPictureId,onClick:this.handleSelectClick};return i.createElement("div",{key:"select",className:"buttons"},i.createElement("div",{className:"left"},i.createElement(v,o,e("image-album-manage"))),i.createElement("div",{className:"right"},i.createElement(v,a,e("image-album-cancel"))," ",i.createElement(v,c,e("image-album-select"))))},renderDropIndicator:function(){if(!this.state.isDropTarget)return null;var e={className:"drop-target",onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop};return i.createElement("div",e)},uploadPictures:function(e){var t=this;e=s.filter(e,function(e){return/^image\//.test(e.type)});var n=this.props.database.use({schema:"global",by:this});return n.start().then(function(r){return o.mapSeries(e,function(e,n){var s=t.props.payloads.add("image").attachFile(e);return u.getImageMetadata(e).then(function(e){return{purpose:t.props.purpose,user_id:r,details:{payload_token:s.token,width:e.width,height:e.height,format:e.format}}})}).then(function(e){return n.save({table:"picture"},e).each(function(e){return t.props.payloads.dispatch(e),null})})})},removePictures:function(e){var t=s.keyBy(this.props.pictures,"id"),n=s.filter(s.map(e,function(e){return t[e]}));if(!s.isEmpty(n)){var r=this.props.database.use({schema:"global",by:this});return r.start().then(function(e){var t=s.map(n,function(e){return{id:e.id,deleted:!0}});return r.save({table:"picture"},t)})}},handleImageClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-picture-id"));if(this.state.managingImages){var n=s.slice(this.state.deletionCandidateIds);s.includes(this.state.deletionCandidateIds,t)?s.pull(n,t):n.push(t),this.setState({deletionCandidateIds:n})}else{var r=t,o=s.find(this.props.pictures,{id:t});this.props.image&&o.url===this.props.image.url&&(r=null),this.setState({selectedPictureId:r})}},handleManageClick:function(e){this.setState({managingImages:!0})},handleDoneClick:function(e){this.setState({managingImages:!1,deletionCandidateIds:[]})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleSelectClick:function(e){if(this.props.onSelect){var t=this.state.selectedPictureId,n=s.find(this.props.pictures,{id:t});this.props.onSelect({type:"select",target:this,image:n.details})}},handleBackgroundClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleUploadChange:function(e){var t=e.target.files;if(t.length)return this.uploadPictures(t)},handleDragEnter:function(e){this.setState({isDropTarget:!0})},handleDragLeave:function(e){this.setState({isDropTarget:!1})},handleDragOver:function(e){e.preventDefault()},handleDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;e.dataTransfer.items;t.length>0&&this.uploadPictures(t),this.setState({isDropTarget:!1})},handleRemoveClick:function(e){var t=this,n=this.state.deletionCandidateIds;this.setState({deletionCandidateIds:[]},function(){t.removePictures(n)})}}),j=l(function(e){return s.orderBy(e,"mtime","desc")})},"./dialogs/image-album-dialog-box.scss":function(e,t){},"./dialogs/image-cropping-dialog-box.jsx":function(e,t,n){"use strict";function r(e){return o.startsWith(e,"json:")}function s(e){var t=e.substr(5);return JSON.parse(t)}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=(n("../../common/src/data/database.js"),n("../../common/src/locale/locale.js")),l=n("../../common/src/theme/theme.js"),u=n("../../common/src/widgets/overlay.jsx"),d=n("./widgets/push-button.jsx"),m=n("../../common/src/widgets/image-cropper.jsx");n("./dialogs/image-cropping-dialog-box.scss"),e.exports=i.createClass({displayName:"ImageCroppingDialogBox",propTypes:{image:a.object,desiredWidth:a.number,desiredHeight:a.number,locale:a.instanceOf(c).isRequired,theme:a.instanceOf(l).isRequired,onSelect:a.func,onCancel:a.func},getInitialState:function(){return{clippingRect:this.props.image.clip,hasChanged:!1}},zoom:function(e){var t=this.resizeClippingRect(e);this.setState({clippingRect:t})},canZoom:function(e){var t=this.resizeClippingRect(e);return!o.isEqual(t,this.state.clippingRect)},resizeClippingRect:function(e){var t=this.state.clippingRect,n=Math.round(t.width*e),r=Math.round(t.height*e),s=this.props.image.width,o=this.props.image.height,i=this.props.desiredWidth/this.props.desiredHeight;n>s&&(n=s,r=Math.round(n/i)),r>o&&(r=o,n=Math.round(r*i));var a=t.left-Math.round((n-t.width)/2),c=t.top-Math.round((r-t.height)/2);return a<0&&(a=0),c<0&&(c=0),{left:a,top:c,width:n,height:r}},render:function(){return i.createElement(u,{show:this.props.show},i.createElement("div",{className:"image-cropping-dialog-box"},this.renderImage(),this.renderButtons()))},renderImage:function(){var e=this.props.image,t=this.props.theme.getImageURL(e,{clip:null});if(r(t)){t=s(t).url}var n={url:t,clippingRect:this.state.clippingRect,vector:"svg"===e.format,onChange:this.handleChange},o={width:this.props.desiredWidth,height:this.props.desiredHeight};return i.createElement("div",{className:"image",style:o},i.createElement(m,n))},renderButtons:function(){var e=this.props.locale.translate,t={className:"zoom",disabled:!this.canZoom(1/.9),onClick:this.handleZoomOutClick},n={className:"zoom",disabled:!this.canZoom(.9),onClick:this.handleZoomInClick},r={className:"cancel",onClick:this.handleCancelClick},s={className:"select",disabled:!this.state.hasChanged,onClick:this.handleSelectClick};return i.createElement("div",{key:"select",className:"buttons"},i.createElement("div",{className:"left"},i.createElement(d,t,i.createElement("i",{className:"fa fa-search-minus"})),i.createElement(d,n,i.createElement("i",{className:"fa fa-search-plus"}))),i.createElement("div",{className:"right"},i.createElement(d,r,e("image-cropping-cancel"))," ",i.createElement(d,s,e("image-cropping-select"))))},handleChange:function(e){var t=this.props.image,n=o.mapValues(e.rect,function(e){return Math.round(e)}),r=!0;o.isEqual(n,t.rect)&&(r=!1),this.setState({clippingRect:n,hasChanged:r})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleSelectClick:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,clippingRect:this.state.clippingRect})},handleZoomInClick:function(e){this.zoom(.9)},handleZoomOutClick:function(e){this.zoom(1/.9)}})},"./dialogs/image-cropping-dialog-box.scss":function(e,t){},"./instructions lazy recursive ^\\.\\/.*$":function(e,t,n){function r(e){var t=s[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var s={"./project/project-summary.en.md":["./instructions/project/project-summary.en.md",11],"./repo/repo-summary.en.md":["./instructions/repo/repo-summary.en.md",10],"./role/role-summary.en.md":["./instructions/role/role-summary.en.md",9],"./server/dropbox-icons.zip":["./instructions/server/dropbox-icons.zip",15],"./server/facebook-icons.zip":["./instructions/server/facebook-icons.zip",14],"./server/github-icons.zip":["./instructions/server/github-icons.zip",13],"./server/icon-64x64-black.png":["./instructions/server/icon-64x64-black.png",18],"./server/icon-64x64-blue.png":["./instructions/server/icon-64x64-blue.png",17],"./server/icon-64x64.png":["./instructions/server/icon-64x64.png",16],"./server/server-summary-dropbox.en.md":["./instructions/server/server-summary-dropbox.en.md",8],"./server/server-summary-facebook.en.md":["./instructions/server/server-summary-facebook.en.md",7],"./server/server-summary-github.en.md":["./instructions/server/server-summary-github.en.md",6],"./server/server-summary-gitlab.en.md":["./instructions/server/server-summary-gitlab.en.md",5],"./server/server-summary-google.en.md":["./instructions/server/server-summary-google.en.md",4],"./server/server-summary-windows.en.md":["./instructions/server/server-summary-windows.en.md",3],"./server/server-summary.en.md":["./instructions/server/server-summary.en.md",2],"./server/windows-icons.zip":["./instructions/server/windows-icons.zip",12],"./settings/settings.en.md":["./instructions/settings/settings.en.md",1],"./user/user-summary.en.md":["./instructions/user/user-summary.en.md",0]};r.keys=function(){return Object.keys(s)},r.id="./instructions lazy recursive ^\\.\\/.*$",e.exports=r},"./instructions lazy recursive ^\\.\\/.*\\.en\\.md$":function(e,t,n){function r(e){var t=s[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var s={"./project/project-summary.en.md":["./instructions/project/project-summary.en.md",11],"./repo/repo-summary.en.md":["./instructions/repo/repo-summary.en.md",10],"./role/role-summary.en.md":["./instructions/role/role-summary.en.md",9],"./server/server-summary-dropbox.en.md":["./instructions/server/server-summary-dropbox.en.md",8],"./server/server-summary-facebook.en.md":["./instructions/server/server-summary-facebook.en.md",7],"./server/server-summary-github.en.md":["./instructions/server/server-summary-github.en.md",6],"./server/server-summary-gitlab.en.md":["./instructions/server/server-summary-gitlab.en.md",5],"./server/server-summary-google.en.md":["./instructions/server/server-summary-google.en.md",4],"./server/server-summary-windows.en.md":["./instructions/server/server-summary-windows.en.md",3],"./server/server-summary.en.md":["./instructions/server/server-summary.en.md",2],"./settings/settings.en.md":["./instructions/settings/settings.en.md",1],"./user/user-summary.en.md":["./instructions/user/user-summary.en.md",0]};r.keys=function(){return Object.keys(s)},r.id="./instructions lazy recursive ^\\.\\/.*\\.en\\.md$",e.exports=r},"./instructions lazy recursive ^\\.\\/.*\\.md$":function(e,t,n){function r(e){var t=s[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var s={"./project/project-summary.en.md":["./instructions/project/project-summary.en.md",11],"./repo/repo-summary.en.md":["./instructions/repo/repo-summary.en.md",10],"./role/role-summary.en.md":["./instructions/role/role-summary.en.md",9],"./server/server-summary-dropbox.en.md":["./instructions/server/server-summary-dropbox.en.md",8],"./server/server-summary-facebook.en.md":["./instructions/server/server-summary-facebook.en.md",7],"./server/server-summary-github.en.md":["./instructions/server/server-summary-github.en.md",6],"./server/server-summary-gitlab.en.md":["./instructions/server/server-summary-gitlab.en.md",5],"./server/server-summary-google.en.md":["./instructions/server/server-summary-google.en.md",4],"./server/server-summary-windows.en.md":["./instructions/server/server-summary-windows.en.md",3],"./server/server-summary.en.md":["./instructions/server/server-summary.en.md",2],"./settings/settings.en.md":["./instructions/settings/settings.en.md",1],"./user/user-summary.en.md":["./instructions/user/user-summary.en.md",0]};r.keys=function(){return Object.keys(s)},r.id="./instructions lazy recursive ^\\.\\/.*\\.md$",e.exports=r},"./pages/error-page.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/react/react.js"),s=r.PropTypes,o=n("../../common/src/errors/http-error.js"),i=n("../../common/src/data/database.js"),a=n("../../common/src/routing/route.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js");n("./pages/error-page.scss"),e.exports=r.createClass({displayName:"ErrorPage",propTypes:{database:s.instanceOf(i).isRequired,route:s.instanceOf(a).isRequired,locale:s.instanceOf(c).isRequired,theme:s.instanceOf(l).isRequired},statics:{parseURL:function(e,t){return a.match(e,["/error/:code"],function(e){return{code:parseInt(e.code)}})},getURL:function(e){var t=e.code;t=e.error?e.error.statusCode:e.code||400;var n="/error/"+t;return{path:n,query:void 0}},getOptions:function(e){return{}}},render:function(){var e=this.props.route.parameters,t=new o(e.code),s=n("../assets/unicorn.svg");return r.createElement("div",{className:"error-page"},r.createElement("div",null,r.createElement("div",{className:"graphic"},r.createElement(s,null)),r.createElement("div",{className:"text"},r.createElement("h1",{className:"title"},t.statusCode," ",t.message),r.createElement("p",null,"The page you're trying to reach doesn't exist. But then again, who does?"))))}})},"./pages/error-page.scss":function(e,t){},"./pages/member-list-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/moment/moment.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/src/utils/memoize.js"),u=n("../../common/src/objects/finders/project-finder.js"),d=n("../../common/src/objects/finders/role-finder.js"),m=n("../../common/src/objects/finders/user-finder.js"),p=n("../../common/src/objects/finders/statistics-finder.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/routing/route.js"),g=n("../../common/src/locale/locale.js"),v=n("../../common/src/theme/theme.js"),b=n("./widgets/push-button.jsx"),y=n("./widgets/combo-button.jsx"),j=n("./widgets/sortable-table.jsx"),w=j.TH,E=n("./widgets/profile-image.jsx"),C=n("./tooltips/activity-tooltip.jsx"),x=n("./tooltips/role-tooltip.jsx"),_=n("./widgets/action-badge.jsx"),k=n("./tooltips/modified-time-tooltip.jsx"),S=n("./widgets/data-loss-warning.jsx"),R=n("./widgets/unexpected-error.jsx");n("./pages/member-list-page.scss"),e.exports=c.createClass({displayName:"MemberListPage",propTypes:{database:a.instanceOf(h).isRequired,route:a.instanceOf(f).isRequired,locale:a.instanceOf(g).isRequired,theme:a.instanceOf(v).isRequired},statics:{parseURL:function(e,t){return f.match(e,["/projects/:project/members/?"],function(e){return{project:f.parseId(e.project),edit:!!t.edit}})},getURL:function(e){var t,n="/projects/"+e.project+"/members/";return e.edit&&(t={edit:1}),{path:n,query:t}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),r={project:null,users:null,roles:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(F,r)),n.start().then(function(e){return u.findProject(n,t.project).then(function(e){r.project=e})}).then(function(){return m.findExistingUsers(n).then(function(e){r.users=e})}).then(function(){return e.show(i.createElement(F,r)),d.findRolesOfUsers(n,r.users).then(function(e){r.roles=e})}).then(function(){e.show(i.createElement(F,r));var t=P(r.users,r.project);return p.findDailyActivitiesOfUsers(n,r.project,t).then(function(e){r.statistics=e})}).then(function(){return i.createElement(F,r)})}});var F=e.exports.Sync=i.createClass({displayName:"MemberListPage.Sync",propTypes:{project:a.object,users:a.arrayOf(a.object),roles:a.arrayOf(a.object),statistics:a.objectOf(a.object),database:a.instanceOf(h).isRequired,route:a.instanceOf(f).isRequired,locale:a.instanceOf(g).isRequired,theme:a.instanceOf(v).isRequired},getInitialState:function(){return{sortColumns:["name"],sortDirections:["asc"],removingUserIds:[],addingUserIds:[],hasChanges:!1,renderingFullList:this.isEditing(),problems:{}}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,r=s.clone(n.parameters);return r.edit=t,this.props.route.replace(e.exports,r)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,removingUserIds:[],addingUserIds:[],changes:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1,problems:{}})},500))},render:function(){var e=this.props.locale.translate;return i.createElement("div",{className:"member-list-page"},this.renderButtons(),i.createElement("h2",null,e("member-list-title")),i.createElement(R,null,this.state.problems.unexpected),this.renderTable(),i.createElement(S,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return i.createElement("div",{key:"edit",className:"buttons"},i.createElement(b,{onClick:this.handleCancelClick},e("member-list-cancel"))," ",i.createElement(b,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("member-list-save")));var t=s.get(this.props.project,"user_ids"),n=s.some(this.props.users,function(e){return!s.includes(t,e.id)}),r=n?"approve":void 0;s.isEmpty(this.props.users);return i.createElement("div",{key:"view",className:"buttons"},i.createElement(y,{preselected:r},i.createElement("option",{name:"approve",disabled:!n,onClick:this.handleApproveClick},e("member-list-approve-all")),i.createElement("option",{name:"reject",disabled:!n,onClick:this.handleRejectClick},e("member-list-reject-all")),i.createElement("option",{name:"add",separator:!0,onClick:this.handleAddClick},e("member-list-add")))," ",i.createElement(b,{className:"emphasis",onClick:this.handleEditClick},e("member-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing()),i.createElement(j,e,i.createElement("thead",null,this.renderHeadings()),i.createElement("tbody",{ref:"tbody"},this.renderRows()))},renderHeadings:function(){return i.createElement("tr",null,this.renderNameColumn(),this.renderTypeColumn(),this.renderRolesColumn(),this.renderDateRangeColumn(),this.renderLastMonthColumn(),this.renderThisMonthColumn(),this.renderToDateColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e;e=this.state.renderingFullList?this.props.users:P(this.props.users,this.props.project);var e=O(e,this.props.roles,this.props.statistics,this.props.locale,this.state.sortColumns,this.state.sortDirections);return s.map(e,this.renderRow)},renderRow:function(e){var t,n,o=this.props.locale.translate,a=[],c=s.includes(this.props.project.user_ids,e.id),l=s.includes(e.requested_project_ids,this.props.project.id);c||(l?(a.push("pending"),t=o("member-list-status-pending")):(a.push("disabled"),t=o("member-list-status-non-member"))),this.state.renderingFullList&&((c||l)&&a.push("fixed"),c?s.includes(this.state.removingUserIds,e.id)||a.push("selected"):s.includes(this.state.addingUserIds,e.id)&&a.push("selected"),n=this.handleRowClick);var u={className:a.join(" "),"data-user-id":e.id,onClick:n,title:t};return i.createElement("tr",r({key:e.id},u),this.renderNameColumn(e),this.renderTypeColumn(e),this.renderRolesColumn(e),this.renderDateRangeColumn(e),this.renderLastMonthColumn(e),this.renderThisMonthColumn(e),this.renderToDateColumn(e),this.renderModifiedTimeColumn(e))},renderNameColumn:function(e){var t=this.props.locale.translate,r=this.props.locale.pick;if(e){var o,a,c=r(e.details.name);if(this.state.renderingFullList){var l,u=s.get(this.props.project,"user_ids",[]),d=s.includes(u,e.id);l=d?!s.includes(this.state.removingUserIds,e.id):s.includes(this.state.addingUserIds,e.id),d!==l&&(a=l?i.createElement(_,{type:"add",locale:this.props.locale}):i.createElement(_,{type:"remove",locale:this.props.locale}))}else o=this.props.route.find(n("./pages/user-summary-page.jsx"),{user:e.id,project:this.props.project.id});var m=i.createElement(E,{user:e,theme:this.props.theme});return i.createElement("td",null,i.createElement("a",{href:o},m," ",c),a)}return i.createElement(w,{id:"name"},t("table-heading-name"))},renderTypeColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;return e?i.createElement("td",null,t("user-list-type-"+e.type)):i.createElement(w,{id:"type"},t("table-heading-type"))},renderRolesColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={roles:T(this.props.roles,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return i.createElement("td",null,i.createElement(x,n))}return i.createElement(w,{id:"roles"},t("table-heading-roles"))},renderEmailColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var n,r=e.details.email;return!this.state.renderingFullList&&r&&(n="mailto:"+r),i.createElement("td",null,i.createElement("a",{href:n},r))}return i.createElement(w,{id:"email"},t("table-heading-email"))},renderDateRangeColumn:function(e,t){if(this.props.theme.isBelowMode("ultra-wide"))return null;var n=this.props.locale.translate,r=this.props.locale.localeCode;if(e){var a,c,l=s.get(this.props.statistics,[e.id,"range"]);return l&&(a=o(l.start).locale(r).format("ll"),c=o(l.end).locale(r).format("ll")),i.createElement("td",null,n("date-range-$start-$end",a,c))}return i.createElement(w,{id:"range"},n("table-heading-date-range"))},renderLastMonthColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"last_month"]),locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(w,{id:"last_month"},t("table-heading-last-month"))},renderThisMonthColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"this_month"]),locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(w,{id:"this_month"},t("table-heading-this-month"))},renderToDateColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"to_date"]),locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(w,{id:"to_date"},t("table-heading-to-date"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={time:e.mtime,disabled:this.state.renderingFullList,locale:this.props.locale};return i.createElement("td",null,i.createElement(k,n))}return i.createElement(w,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleEditClick:function(e){this.setEditability(!0)},handleAddClick:function(e){var t=this.props.route,r=s.clone(t.parameters);return r.user="new",t.push(n("./pages/user-summary-page.jsx"),r)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,n=this.props.database.use({schema:"global",by:this});return n.start().then(function(e){var r=t.state.removingUserIds,o=t.state.addingUserIds,i=t.props.project.user_ids,a=s.union(s.difference(i,r),o),c={id:t.props.project.id,user_ids:a};return n.saveOne({table:"project"},c).then(function(e){return t.setState({hasChanges:!1},function(){return t.setEditability(!1)}),null}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})})},handleApproveClick:function(e){var t=this,n=this.props.database.use({schema:"global",by:this});return n.start().then(function(e){var r=t.props.project.id,o=s.filter(t.props.users,function(e){if(s.includes(e.requested_project_ids,r))return!0}),i=s.map(o,"id"),a=t.props.project.user_ids,c=s.union(a,i),l={id:t.props.project.id,user_ids:c};return n.saveOne({table:"project"},l)})},handleRejectClick:function(e){var t=this,n=this.props.database.use({schema:"global",by:this});return n.start().then(function(e){var r=t.props.project.id,o=s.filter(t.props.users,function(e){if(s.includes(e.requested_project_ids,r))return!0}),i=s.map(o,function(e){return{id:e.id,requested_project_ids:s.without(e.requested_project_ids,r)}});return n.save({table:"user"},i)})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-user-id")),n=this.props.project.user_ids,r=s.slice(this.state.addingUserIds),o=s.slice(this.state.removingUserIds);s.includes(n,t)?s.includes(o,t)?s.pull(o,t):o.push(t):s.includes(r,t)?s.pull(r,t):r.push(t);var i=!s.isEmpty(r)||!s.isEmpty(o);this.setState({addingUserIds:r,removingUserIds:o,hasChanges:i})}}),O=l(function(e,t,n,r,o,i){var a=r.pick;return o=s.map(o,function(e){switch(e){case"name":return function(e){return a(e.details.name)};case"range":return function(e){return s.get(n,[e.id,"range","start"],"")};case"last_month":return function(e){return s.get(n,[e.id,"last_month","total"],0)};case"this_month":return function(e){return s.get(n,[e.id,"this_month","total"],0)};case"to_date":return function(e){return s.get(n,[e.id,"to_date","total"],0)};default:return e}}),s.orderBy(e,o,i)}),P=l(function(e,t){if(t){var n=s.keyBy(e,"id"),r=s.filter(s.map(t.user_ids,function(e){return n[e]})),o=s.filter(e,function(e){return s.includes(e.requested_project_ids,t.id)});return s.union(r,o)}return[]}),T=l(function(e,t){var n=s.keyBy(e,"id");return s.filter(s.map(t.role_ids,function(e){return n[e]}))})},"./pages/member-list-page.scss":function(e,t){},"./pages/project-list-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=(n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/node_modules/moment/moment.js")),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/src/utils/memoize.js"),u=n("../../common/src/utils/component-refs.js"),d=n("../../common/src/objects/finders/project-finder.js"),m=n("../../common/src/objects/finders/repo-finder.js"),p=n("../../common/src/objects/finders/user-finder.js"),h=n("../../common/src/objects/finders/statistics-finder.js"),f=n("../../common/src/data/database.js"),g=n("../../common/src/routing/route.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("./widgets/push-button.jsx"),j=n("./widgets/combo-button.jsx"),w=n("./widgets/sortable-table.jsx"),E=w.TH,C=n("./tooltips/user-tooltip.jsx"),x=n("./tooltips/repository-tooltip.jsx"),_=n("./tooltips/activity-tooltip.jsx"),k=n("./tooltips/modified-time-tooltip.jsx"),S=n("./widgets/action-badge.jsx"),R=n("./widgets/action-confirmation.jsx"),F=n("./widgets/data-loss-warning.jsx"),O=n("./widgets/unexpected-error.jsx");n("./pages/project-list-page.scss"),e.exports=c.createClass({displayName:"ProjectListPage",propTypes:{database:a.instanceOf(f).isRequired,route:a.instanceOf(g).isRequired,locale:a.instanceOf(v).isRequired,theme:a.instanceOf(b).isRequired},statics:{parseURL:function(e,t){return g.match(e,["/projects/?"],function(e){return{edit:!!t.edit}})},getURL:function(e){var t;return e&&e.edit&&(t={edit:1}),{path:"/projects/",query:t}}},renderAsync:function(e){var t=this.props.database.use({schema:"global",by:this}),n={projects:null,repos:null,users:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(P,n)),t.start().then(function(e){return d.findAllProjects(t).then(function(e){n.projects=e})}).then(function(r){return e.show(i.createElement(P,n)),m.findProjectRepos(t,n.projects).then(function(e){n.repos=e})}).then(function(){return p.findProjectMembers(t,n.projects).then(function(e){n.users=e})}).then(function(){return h.findDailyActivitiesOfProjects(t,n.projects).then(function(e){n.statistics=e})}).then(function(){return i.createElement(P,n)})}});var P=e.exports.Sync=i.createClass({displayName:"ProjectListPage.Sync",propTypes:{projects:a.arrayOf(a.object),repos:a.arrayOf(a.object),users:a.arrayOf(a.object),statistics:a.objectOf(a.object),database:a.instanceOf(f).isRequired,route:a.instanceOf(g).isRequired,locale:a.instanceOf(v).isRequired,theme:a.instanceOf(b).isRequired},getInitialState:function(){return this.components=u({confirmation:R}),{sortColumns:["name"],sortDirections:["asc"],restoringProjectIds:[],archivingProjectIds:[],hasChanges:!1,renderingFullList:this.isEditing(),problems:{}}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,r=s.clone(n.parameters);return r.edit=t,this.props.route.replace(e.exports,r)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringProjectIds:[],archivingProjectIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1,problems:{}})},500))},render:function(){var e=this.props.locale.translate;return i.createElement("div",{className:"project-list-page"},this.renderButtons(),i.createElement("h2",null,e("project-list-title")),i.createElement(O,null,this.state.problems.unexpected),this.renderTable(),i.createElement(R,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),i.createElement(F,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return i.createElement("div",{className:"buttons"},i.createElement(y,{onClick:this.handleCancelClick},e("project-list-cancel"))," ",i.createElement(y,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("project-list-save")));var t=s.isEmpty(this.props.projects);return i.createElement("div",{className:"buttons"},i.createElement(j,{preselected:void 0},i.createElement("option",{name:"add",className:"separated",onClick:this.handleAddClick},e("project-list-add")))," ",i.createElement(y,{className:"emphasis",disabled:t,onClick:this.handleEditClick},e("project-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing(),e.onClick=this.handleRowClick),i.createElement(w,e,i.createElement("thead",null,this.renderHeadings()),i.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return i.createElement("tr",null,this.renderTitleColumn(),this.renderUsersColumn(),this.renderRepositoriesColumn(),this.renderDateRangeColumn(),this.renderLastMonthColumn(),this.renderThisMonthColumn(),this.renderToDateColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.projects;return this.state.renderingFullList||(e=N(e)),e=T(e,this.props.users,this.props.repos,this.props.statistics,this.props.locale,this.state.sortColumns,this.state.sortDirections),s.map(e,this.renderRow)},renderRow:function(e){var t,n,o=this.props.locale.translate,a=[];e.deleted?(a.push("deleted"),n=o("project-list-status-deleted")):e.archived&&(a.push("disabled"),n=o("project-list-status-archived")),this.state.renderingFullList&&(e.deleted||e.archived?s.includes(this.state.restoringProjectIds,e.id)&&a.push("selected"):(a.push("fixed"),s.includes(this.state.archivingProjectIds,e.id)||a.push("selected")),t=this.handleRowClick);var c={className:a.join(" "),"data-project-id":e.id,title:n,onClick:t};return i.createElement("tr",r({key:e.id},c),this.renderTitleColumn(e),this.renderUsersColumn(e),this.renderRepositoriesColumn(e),this.renderDateRangeColumn(e),this.renderLastMonthColumn(e),this.renderThisMonthColumn(e),this.renderToDateColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var r,o,a=this.props.locale.pick,c=a(e.details.title)||e.name;if(this.state.renderingFullList){var l,u;e.deleted||e.archived?(l=!1,u=s.includes(this.state.restoringProjectIds,e.id)):(l=!0,u=!s.includes(this.state.archivingProjectIds,e.id)),l!==u&&(o=u?i.createElement(S,{type:"restore",locale:this.props.locale}):i.createElement(S,{type:"archive",locale:this.props.locale}))}else{var d=this.props.route,m={project:e.id};r=d.find(n("./pages/project-summary-page.jsx"),m)}return i.createElement("td",null,i.createElement("a",{href:r},c),o)}return i.createElement(E,{id:"title"},t("table-heading-name"))},renderUsersColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var n={users:I(this.props.users,e),project:e,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(E,{id:"users"},t("table-heading-users"))},renderRepositoriesColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var n={repos:L(this.props.repos,e),project:e,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(x,n))}return i.createElement(E,{id:"repos"},t("table-heading-repositories"))},renderDateRangeColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate,n=this.props.locale.localeCode;if(e){if(e.deleted)return i.createElement("td",null,t("project-list-deleted"));var r,a,c=s.get(this.props.statistics,[e.id,"range"]);return c&&(r=o(c.start).locale(n).format("ll"),a=o(c.end).locale(n).format("ll")),i.createElement("td",null,t("date-range-$start-$end",r,a))}return i.createElement(E,{id:"range"},t("table-heading-date-range"))},renderLastMonthColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"last_month"]),locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(_,n))}return i.createElement(E,{id:"last_month"},t("table-heading-last-month"))},renderThisMonthColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"this_month"]),locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(_,n))}return i.createElement(E,{id:"this_month"},t("table-heading-this-month"))},renderToDateColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"to_date"]),locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(_,n))}return i.createElement(E,{id:"to_date"},t("table-heading-to-date"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={time:e.mtime,locale:this.props.locale};return i.createElement("td",null,i.createElement(k,n))}return i.createElement(E,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){return this.props.route.push(n("./pages/project-summary-page.jsx"),{project:"new"})},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,n=this.props.locale.translate,r=this.state.archivingProjectIds,o=this.state.restoringProjectIds,i=[n("project-list-confirm-archive-$count",r.length),n("project-list-confirm-restore-$count",o.length)],a=[s.isEmpty(r)||void 0,s.isEmpty(o)||void 0];return this.components.confirmation.askSeries(i,a).then(function(e){if(e){t.setState({problems:{}});var n=t.props.database.use({schema:"global",by:t});return n.start().then(function(e){var i=[];return s.each(t.props.projects,function(e){var t={};if(s.includes(r,e.id))t.archived=!0;else{if(!s.includes(o,e.id))return;t.archived=t.deleted=!1}var n=s.assign({},e,t);i.push(n)}),n.save({table:"project"},i).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-project-id")),n=s.find(this.props.projects,{id:t}),r=s.slice(this.state.restoringProjectIds),o=s.slice(this.state.archivingProjectIds);n.deleted||n.archived?s.includes(r,n.id)?s.pull(r,n.id):r.push(n.id):s.includes(o,n.id)?s.pull(o,n.id):o.push(n.id);var i=!s.isEmpty(r)||!s.isEmpty(o);this.setState({restoringProjectIds:r,archivingProjectIds:o,hasChanges:i})}}),T=l(function(e,t,n,r,o,i,a){var c=this;return i=s.map(i,function(e){switch(e){case"title":return function(e){return o.pick(e.details.title)};case"users":return function(e){return s.size(I(t,e))};case"repos":return function(e){return s.size(I(n,e))};case"range":return function(e){return s.get(c.props.statistics,[e.id,"range","start"],"")};case"last_month":return function(e){return s.get(c.props.statistics,[e.id,"last_month","total"],0)};case"this_month":return function(e){return s.get(c.props.statistics,[e.id,"this_month","total"],0)};case"to_date":return function(e){return s.get(c.props.statistics,[e.id,"to_date","total"],0)};default:return e}}),s.orderBy(e,i,a)}),N=l(function(e){return s.filter(e,function(e){return!e.deleted&&!e.archived})}),L=l(function(e,t){var n=s.keyBy(e,"id");return s.filter(s.map(t.repo_ids,function(e){return n[e]}))}),I=l(function(e,t){var n=s.keyBy(e,"id");return s.filter(s.map(t.user_ids,function(e){return n[e]}))})},"./pages/project-list-page.scss":function(e,t){},"./pages/project-summary-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/component-refs.js"),l=n("../../common/src/objects/finders/project-finder.js"),u=n("../../common/src/objects/settings/project-settings.js"),d=n("../../common/src/objects/finders/statistics-finder.js"),m=n("../../common/src/objects/finders/system-finder.js"),p=n("../../common/src/utils/slug-generator.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/routing/route.js"),g=n("../../common/src/locale/locale.js"),v=n("../../common/src/theme/theme.js"),b=n("../../common/src/transport/payloads.js"),y=n("./widgets/push-button.jsx"),j=n("./widgets/combo-button.jsx"),w=n("./widgets/instruction-block.jsx"),E=n("./widgets/text-field.jsx"),C=n("./widgets/multilingual-text-field.jsx"),x=n("./widgets/option-list.jsx"),_=n("./widgets/image-selector.jsx"),k=n("./widgets/activity-chart.jsx"),S=n("./widgets/input-error.jsx"),R=n("./widgets/action-confirmation.jsx"),F=n("./widgets/data-loss-warning.jsx"),O=n("./widgets/unexpected-error.jsx");n("./pages/project-summary-page.scss"),e.exports=a.createClass({displayName:"ProjectSummaryPage",propTypes:{database:i.instanceOf(h).isRequired,route:i.instanceOf(f).isRequired,locale:i.instanceOf(g).isRequired,theme:i.instanceOf(v).isRequired,payloads:i.instanceOf(b).isRequired},statics:{parseURL:function(e,t){return f.match(e,["/projects/:project/?"],function(e){return{project:"new"===e.project?"new":f.parseId(e.project),edit:!!t.edit}})},getURL:function(e){var t,n="/projects/"+e.project+"/";return e.edit&&(t={edit:1}),{path:n,query:t}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),r={system:null,project:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads};return e.show(o.createElement(P,r)),n.start().then(function(e){return m.findSystem(n).then(function(e){r.system=e})}).then(function(){if("new"!==t.project)return l.findProject(n,t.project).then(function(e){r.project=e})}).then(function(){if("new"!==t.project)return e.show(o.createElement(P,r)),d.findDailyActivitiesOfProject(n,r.project).then(function(e){r.statistics=e})}).then(function(){return o.createElement(P,r)})}});var P=e.exports.Sync=o.createClass({displayName:"ProjectSummaryPage.Sync",propTypes:{system:i.object,project:i.object,statistics:i.object,database:i.instanceOf(h).isRequired,route:i.instanceOf(f).isRequired,locale:i.instanceOf(g).isRequired,theme:i.instanceOf(v).isRequired,payloads:i.instanceOf(b).isRequired},getInitialState:function(){return this.components=c({confirmation:R}),{newProject:null,saving:!1,adding:!1,problems:{}}},getProject:function(e){return!this.isEditing()||e&&"current"!==e?this.props.project||T:this.state.newProject||this.props.project||T},getProjectProperty:function(e,t){var n=this.getProject(t);return s.get(n,e)},setProjectProperty:function(e,t){var n=this.getProject("current"),r=s.decoupleSet(n,e,t);if("details.title"===e&&!n.id){var o=p.fromTitle(n.details.title),i=p.fromTitle(r.details.title);n.name&&n.name!==o||(r.name=i)}s.size(r.name)>128&&(r.name=r.name.substr(0,128));var a=!0;s.isEqual(r,this.props.project)&&(r=null,a=!1),this.setState({newProject:r,hasChanges:a})},findProblems:function(){var e={},t=this.getProject(),n=s.toLower(s.trim(t.name)),r=["global","admin","public","srv"];return n?s.includes(r,n)&&(e.name="validation-illegal-project-name"):e.name="validation-required",e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.project},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.parameters.edit},setEditability:function(t,n){var r=this;if(!this.isCreating()||t||n){var o=this.props.route,i=s.clone(o.parameters);return i.edit=t,n&&(i.project=n.id),o.replace(e.exports,i).then(function(e){e&&r.setState({problems:{}})})}this.returnToList()},returnToList:function(){return this.props.route.push(n("./pages/project-list-page.jsx"))},startNew:function(){var t=this.props.route,n=s.clone(t.parameters);return n.project="new",t.replace(e.exports,n)},getInputLanguages:function(){return s.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newProject:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getProject(),r=t(n.details.title)||n.name;return o.createElement("div",{className:"project-summary-page"},this.renderButtons(),o.createElement("h2",null,e("project-summary-$title",r)),o.createElement(O,null,this.state.problems.unexpected),this.renderForm(),this.renderInstructions(),this.renderChart(),o.createElement(R,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),o.createElement(F,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return o.createElement("div",{key:"edit",className:"buttons"},o.createElement(y,{onClick:this.handleCancelClick},e("project-summary-cancel"))," ",o.createElement(y,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("project-summary-save")));var t,n=this.props.project,r=!n||!n.deleted&&!n.archived;return t=r?this.state.adding?"add":"return":"restore",o.createElement("div",{key:"view",className:"buttons"},o.createElement(j,{preselected:t},o.createElement("option",{name:"return",onClick:this.handleReturnClick},e("project-summary-return")),o.createElement("option",{name:"add",onClick:this.handleAddClick},e("project-summary-add")),o.createElement("option",{name:"archive",disabled:!r,separator:!0,onClick:this.handleArchiveClick},e("project-summary-archive")),o.createElement("option",{name:"delete",disabled:!r,onClick:this.handleDeleteClick},e("project-summary-delete")),o.createElement("option",{name:"restore",hidden:r,onClick:this.handleRestoreClick},e("project-summary-restore")))," ",o.createElement(y,{className:"emphasis",onClick:this.handleEditClick},e("project-summary-edit")))},renderForm:function(){return o.createElement("div",{className:"form"},this.renderTitleInput(),this.renderNameInput(),this.renderDescriptionInput(),this.renderEmblemSelector(),this.renderMembershipOptions(),this.renderAccessControlOptions())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getProjectProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return o.createElement(C,t,e("project-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getProjectProperty("name"),locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems;return o.createElement(E,t,e("project-summary-name"),o.createElement(S,null,e(n.name)))},renderDescriptionInput:function(){var e=this.props.locale.translate,t={id:"description",value:this.getProjectProperty("details.description"),availableLanguageCodes:this.getInputLanguages(),type:"textarea",locale:this.props.locale,onChange:this.handleDescriptionChange,readOnly:!this.isEditing()};return o.createElement(C,t,e("project-summary-description"))},renderEmblemSelector:function(){var e=this.props.locale.translate,t={purpose:"project-emblem",desiredWidth:500,desiredHeight:500,resources:this.getProjectProperty("details.resources"),database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleEmblemChange,readOnly:!this.isEditing()};return o.createElement(_,t,e("project-summary-emblem"))},renderMembershipOptions:function(){var e=this.props.locale.translate,t=this.getProjectProperty("settings.membership","current")||{},n=this.getProjectProperty("settings.membership","original")||{},i=!!this.getProjectProperty("id"),a=[{name:"manual",selected:!s.some(t),previous:i?!s.some(n):void 0,children:e("project-summary-new-members-manual")},{name:"allow_user_request",selected:t.allow_user_request,previous:n.allow_user_request,children:e("project-summary-new-members-join-user")},{name:"approve_user_request",selected:t.approve_user_request,previous:n.approve_user_request,hidden:!t.allow_user_request,children:e("project-summary-new-members-auto-accept-user")},{name:"allow_guest_request",selected:t.allow_guest_request,previous:n.allow_guest_request,children:e("project-summary-new-members-join-guest")},{name:"approve_guest_request",selected:t.approve_guest_request,previous:n.approve_guest_request,hidden:!t.allow_guest_request,children:e("project-summary-new-members-auto-accept-guest")}],c={onOptionClick:this.handleMembershipOptionClick,readOnly:!this.isEditing()};return o.createElement(x,c,o.createElement("label",null,e("project-summary-new-members")),s.map(a,function(e,t){return o.createElement("option",r({key:t},e))}))},renderAccessControlOptions:function(){var e=this.props.locale.translate,t=this.getProjectProperty("settings.access_control","current")||{},n=this.getProjectProperty("settings.access_control","original")||{},i=!!this.getProjectProperty("id"),a=[{name:"members_only",selected:!s.some(t),previous:i?!s.some(n):void 0,children:e("project-summary-access-control-member-only")},{name:"grant_view_access",selected:t.grant_view_access,previous:n.grant_view_access,children:e("project-summary-access-control-non-member-view")},{name:"grant_comment_access",selected:t.grant_comment_access,previous:n.grant_comment_access,hidden:!t.grant_view_access,children:e("project-summary-access-control-non-member-comment")}],c={onOptionClick:this.handleAccessControlOptionClick,readOnly:!this.isEditing()};return o.createElement(x,c,o.createElement("label",null,e("project-summary-access-control")),s.map(a,function(e,t){return o.createElement("option",r({key:t},e))}))},renderInstructions:function(){var e={folder:"project",topic:"project-summary",hidden:!this.isEditing(),locale:this.props.locale};return o.createElement("div",{className:"instructions"},o.createElement(w,e))},renderChart:function(){if(this.isCreating())return null;var e=this.props.locale.translate,t={statistics:this.props.statistics,locale:this.props.locale,theme:this.props.theme};return o.createElement("div",{className:"statistics"},o.createElement(k,t,e("project-summary-statistics")))},changeFlags:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r=s.assign({},this.props.project,e);return n.saveOne({table:"project"},r).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})},handleArchiveClick:function(e){var t=this,n=this.props.locale.translate,r=n("project-summary-confirm-archive");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({archived:!0}).then(function(e){if(e)return t.returnToList()})})},handleDeleteClick:function(e){var t=this,n=this.props.locale.translate,r=n("project-summary-confirm-delete");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(e){if(e)return t.returnToList()})})},handleRestoreClick:function(e){var t=this,n=this.props.locale.translate,r=n("project-summary-confirm-restore");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({archived:!1,deleted:!1})})},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var n=this.findProblems();if(s.some(n))return void this.setState({problems:n});var r=s.omit(this.getProject(),"user_ids","repo_ids");this.setState({saving:!0,adding:!r.id,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t});return e.start().then(function(n){return e.saveOne({table:"project"},r).then(function(e){return t.props.payloads.dispatch(e),t.setState({hasChanges:!1,saving:!1},function(){t.setEditability(!1,e)}),null})}).catch(function(e){var n={};n=409===e.statusCode?{name:"validation-duplicate-project-name"}:{unexpected:e.message},t.setState({problems:n,saving:!1})})})}},handleTitleChange:function(e){this.setProjectProperty("details.title",e.target.value)},handleNameChange:function(e){var t=s.toLower(e.target.value).replace(/\W+/g,"");this.setProjectProperty("name",t)},handleDescriptionChange:function(e){this.setProjectProperty("details.description",e.target.value)},handleEmblemChange:function(e){this.setProjectProperty("details.resources",e.target.value)},handleMembershipOptionClick:function(e){var t=s.clone(this.getProjectProperty("settings.membership"))||{};switch(e.name){case"manual":t={};break;case"allow_user_request":t.allow_user_request?(delete t.allow_user_request,delete t.approve_user_request):t.allow_user_request=!0;break;case"approve_user_request":t.approve_user_request?delete t.approve_user_request:t.approve_user_request=!0;break;case"allow_guest_request":t.allow_guest_request?(delete t.allow_guest_request,delete t.approve_guest_request):t.allow_guest_request=!0;break;case"approve_guest_request":t.approve_guest_request?delete t.approve_guest_request:t.approve_guest_request=!0}this.setProjectProperty("settings.membership",t)},handleAccessControlOptionClick:function(e){var t=s.clone(this.getProjectProperty("settings.access_control"))||{};switch(e.name){case"members_only":t={};break;case"grant_view_access":t.grant_view_access?delete t.grant_view_access:t.grant_view_access=!0;break;case"grant_comment_access":t.grant_comment_access?delete t.grant_comment_access:t.grant_comment_access=!0}this.setProjectProperty("settings.access_control",t)}}),T={details:{},settings:u.default}},"./pages/project-summary-page.scss":function(e,t){},"./pages/repo-list-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/moment/moment.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/src/utils/memoize.js"),u=n("../../common/src/utils/component-refs.js"),d=n("../../common/src/objects/utils/external-data-utils.js"),m=n("../../common/src/objects/finders/project-finder.js"),p=n("../../common/src/objects/finders/repo-finder.js"),h=n("../../common/src/objects/finders/server-finder.js"),f=n("../../common/src/objects/finders/statistics-finder.js"),g=n("../../common/src/data/database.js"),v=n("../../common/src/routing/route.js"),b=n("../../common/src/locale/locale.js"),y=n("../../common/src/theme/theme.js"),j=n("./widgets/push-button.jsx"),w=n("./widgets/sortable-table.jsx"),E=w.TH,C=n("./tooltips/activity-tooltip.jsx"),x=n("./tooltips/modified-time-tooltip.jsx"),_=n("./widgets/action-badge.jsx"),k=n("./widgets/action-confirmation.jsx"),S=n("./widgets/data-loss-warning.jsx"),R=n("./widgets/unexpected-error.jsx");n("./pages/repo-list-page.scss"),e.exports=c.createClass({displayName:"RepoListPage",propTypes:{database:a.instanceOf(g).isRequired,route:a.instanceOf(v).isRequired,locale:a.instanceOf(b).isRequired,theme:a.instanceOf(y).isRequired},statics:{parseURL:function(e,t){return v.match(e,["/projects/:project/repos/?"],function(e){return{project:v.parseId(e.project),edit:!!t.edit}})},getURL:function(e){var t,n="/projects/"+e.project+"/repos/";return e.edit&&(t={edit:1}),{path:n,query:t}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),r={project:null,repos:null,servers:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(F,r)),n.start().then(function(e){return m.findProject(n,t.project).then(function(e){r.project=e})}).then(function(){return p.findExistingRepos(n).then(function(e){r.repos=e})}).then(function(){return e.show(i.createElement(F,r)),h.findServersOfRepos(n,r.repos).then(function(e){r.servers=e})}).then(function(){e.show(i.createElement(F,r));var t=T(r.repos,r.project);return f.findDailyActivitiesOfRepos(n,r.project,t).then(function(e){r.statistics=e})}).then(function(){return i.createElement(F,r)})}});var F=e.exports.Sync=i.createClass({displayName:"RepoListPage.Sync",propTypes:{repos:a.arrayOf(a.object),project:a.object,servers:a.arrayOf(a.object),statistics:a.objectOf(a.object),database:a.instanceOf(g).isRequired,route:a.instanceOf(v).isRequired,locale:a.instanceOf(b).isRequired,theme:a.instanceOf(y).isRequired},getInitialState:function(){return this.components=u({confirmation:k}),{sortColumns:["name"],sortDirections:["asc"],selectedRepoIds:[],hasChanges:!1,renderingFullList:this.isEditing(),problems:{}}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,r=s.clone(n.parameters);return r.edit=t,this.props.route.replace(e.exports,r)},componentWillReceiveProps:function(e){var t=this;if(this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,selectedRepoIds:s.get(e.project,"repo_ids",[]),hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1,problems:{}})},500)),this.props.project!==e.project&&e.project){var n=this.state.selectedRepoIds,r=s.get(this.props.project,"repo_ids",[]),o=s.get(e.project,"repo_ids",[]);n===r?n=o:s.isEqual(r,o)||(n=s.union(n,o)),this.setState({selectedRepoIds:n})}},render:function(){var e=this.props.locale.translate;return i.createElement("div",{className:"repo-list-page"},this.renderButtons(),i.createElement("h2",null,e("repo-list-title")),i.createElement(R,null,this.state.problems.unexpected),this.renderTable(),i.createElement(k,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),i.createElement(S,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return i.createElement("div",{className:"buttons"},i.createElement(j,{onClick:this.handleCancelClick},e("repo-list-cancel"))," ",i.createElement(j,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("repo-list-save")));var t=s.isEmpty(this.props.repos);return i.createElement("div",{className:"buttons"},i.createElement(j,{className:"emphasis",disabled:t,onClick:this.handleEditClick},e("repo-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing()),i.createElement(w,e,i.createElement("thead",null,this.renderHeadings()),i.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return i.createElement("tr",null,this.renderTitleColumn(),this.renderServerColumn(),this.renderIssueTrackerColumn(),this.renderDateRangeColumn(),this.renderLastMonthColumn(),this.renderThisMonthColumn(),this.renderToDateColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.repos;return this.state.renderingFullList||(e=T(e,this.props.project)),e=O(e,this.props.servers,this.props.statistics,this.props.locale,this.state.sortColumns,this.state.sortDirections),s.map(e,this.renderRow)},renderRow:function(e,t){var n={};if(this.state.renderingFullList){var o=s.get(this.props.project,"repo_ids",[]);s.includes(o,e.id)&&(n.className="fixed"),s.includes(this.state.selectedRepoIds,e.id)&&(n.className+=" selected"),n.onClick=this.handleRowClick,n["data-repo-id"]=e.id}return i.createElement("tr",r({key:e.id},n),this.renderTitleColumn(e),this.renderServerColumn(e),this.renderIssueTrackerColumn(e),this.renderDateRangeColumn(e),this.renderLastMonthColumn(e),this.renderThisMonthColumn(e),this.renderToDateColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var r,o,a=this.props.locale.pick,c=a(e.details.title)||e.name;if(this.state.renderingFullList){var l=s.get(this.props.project,"repo_ids",[]),u=s.includes(l,e.id),d=s.includes(this.state.selectedRepoIds,e.id);u!==d&&(o=d?i.createElement(_,{type:"add",locale:this.props.locale}):i.createElement(_,{type:"remove",locale:this.props.locale}))}else{var m=this.props.route,p=s.clone(m.parameters);p.repo=e.id,r=m.find(n("./pages/repo-summary-page.jsx"),p)}return i.createElement("td",null,i.createElement("a",{href:r},c),o)}return i.createElement(E,{id:"title"},t("table-heading-title"))},renderServerColumn:function(e){var t=this.props.locale.translate;if(e){var r,s=this.props.locale.pick,o=P(this.props.servers,e);if(o){var a=s(o.details.title)||t("server-type-"+o.type),c=this.props.route,l={server:o.id},u=c.find(n("./pages/server-summary-page.jsx"),l);r=i.createElement("a",{href:u},i.createElement("i",{className:"fa fa-"+o.type+" fa-fw"})," ",a)}return i.createElement("td",null,r)}return i.createElement(E,{id:"server"},t("table-heading-server"))},renderIssueTrackerColumn:function(e){if(this.props.theme.isBelowMode("ultra-wide"))return null;var t=this.props.locale.translate;if(e){var n=(this.props.locale.pick,!!e.details.issues_enabled);return i.createElement("td",null,t("repo-list-issue-tracker-enabled-"+n))}return i.createElement(E,{id:"issue_tracker"},t("table-heading-issue-tracker"))},renderDateRangeColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate,n=this.props.locale.localeCode;if(e){var r,a,c=s.get(this.props.statistics,[e.id,"range"]);return c&&(r=o(c.start).locale(n).format("ll"),a=o(c.end).locale(n).format("ll")),i.createElement("td",null,t("date-range-$start-$end",r,a))}return i.createElement(E,{id:"range"},t("table-heading-date-range"))},renderLastMonthColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"last_month"]),locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(E,{id:"last_month"},t("table-heading-last-month"))},renderThisMonthColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"this_month"]),locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(E,{id:"this_month"},t("table-heading-this-month"))},renderToDateColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={statistics:s.get(this.props.statistics,[e.id,"to_date"]),locale:this.props.locale,theme:this.props.theme};return i.createElement("td",null,i.createElement(C,n))}return i.createElement(E,{id:"to_date"},t("table-heading-to-date"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={time:e.mtime,locale:this.props.locale};return i.createElement("td",null,i.createElement(x,n))}return i.createElement(E,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,n=this.props.locale.translate,r=s.get(this.props.project,"repo_ids",[]),o=s.difference(r,this.state.selectedRepoIds),i=n("repo-list-confirm-remove-$count",o.length);return this.components.confirmation.ask(i,s.isEmpty(o)||void 0).then(function(e){if(e){t.setState({problems:{}});var n=t.props.database.use({schema:"global",by:t});return n.start().then(function(e){var r=s.map(t.props.repos,"id"),o={id:t.props.project.id,repo_ids:s.intersection(t.state.selectedRepoIds,r)};return n.saveOne({table:"project"},o).then(function(e){t.setState({hasChanges:!1},function(){t.setEditability(!1)})}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-repo-id")),n=this.props.project.repo_ids,r=s.slice(this.state.selectedRepoIds),o=!0;s.includes(r,t)?s.pull(r,t):r.push(t),r.length===n.length&&0===s.difference(r,n).length&&(r=n,o=!1),this.setState({selectedRepoIds:r,hasChanges:o})}}),O=l(function(e,t,n,r,o,i){var a=r.translate,c=r.pick;return o=s.map(o,function(e){switch(e){case"title":return function(e){return c(e.details.title)||e.name};case"server":return function(e){var n=P(t,e);return n?c(n.details.title)||a("server-type-"+n.type):""};case"issue_tracker":return"details.issues_enabled";case"range":return function(e){return s.get(n,[e.id,"range","start"],"")};case"last_month":return function(e){return s.get(n,[e.id,"last_month","total"],0)};case"this_month":return function(e){return s.get(n,[e.id,"this_month","total"],0)};case"to_date":return function(e){return s.get(n,[e.id,"to_date","total"],0)};default:return e}}),s.orderBy(e,o,i)}),P=l(function(e,t){return s.find(e,function(e){return!!d.findLink(t,e)})}),T=l(function(e,t){if(t){var n=s.keyBy(e,"id");return s.filter(s.map(t.repo_ids,function(e){return n[e]}))}return[]})},"./pages/repo-list-page.scss":function(e,t){},"./pages/repo-summary-page.jsx":function(e,t,n){"use strict";var r=(Object.assign,n("../../common/node_modules/lodash/lodash.js")),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/utils/component-refs.js"),c=n("../../common/src/objects/finders/project-finder.js"),l=n("../../common/src/objects/finders/repo-finder.js"),u=n("../../common/src/objects/finders/statistics-finder.js"),d=n("../../common/src/objects/finders/system-finder.js"),m=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),h=n("../../common/src/locale/locale.js"),f=n("../../common/src/theme/theme.js"),g=n("./widgets/push-button.jsx"),v=n("./widgets/combo-button.jsx"),b=n("./widgets/instruction-block.jsx"),y=n("./widgets/text-field.jsx"),j=n("./widgets/multilingual-text-field.jsx"),w=(n("./widgets/option-list.jsx"),n("./widgets/activity-chart.jsx")),E=n("./widgets/action-confirmation.jsx"),C=n("./widgets/data-loss-warning.jsx"),x=n("./widgets/unexpected-error.jsx");n("./pages/repo-summary-page.scss"),e.exports=i.createClass({displayName:"RepoSummaryPage",propTypes:{database:o.instanceOf(m).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(f).isRequired},statics:{parseURL:function(e,t){return p.match(e,["/projects/:project/repos/:repo/?"],function(e){return{project:p.parseId(e.project),repo:p.parseId(e.repo),edit:!!t.edit}})},getURL:function(e){var t,n="/projects/"+e.project+"/repos/"+e.repo+"/";return e.edit&&(t={edit:1}),{path:n,query:t}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),r={system:null,project:null,repo:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(s.createElement(_,r)),n.start().then(function(e){return d.findSystem(n).then(function(e){r.system=e})}).then(function(){return l.findRepo(n,t.repo).then(function(e){r.repo=e})}).then(function(){return e.show(s.createElement(_,r)),c.findProject(n,t.project).then(function(e){r.project=e})}).then(function(){return e.show(s.createElement(_,r)),u.findDailyActivitiesOfRepo(n,r.project,r.repo).then(function(e){r.statistics=e})}).then(function(){return s.createElement(_,r)})}});var _=e.exports.Sync=s.createClass({displayName:"RepoSummaryPage.Sync",propTypes:{system:o.object,repo:o.object,project:o.object,database:o.instanceOf(m).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(f).isRequired},getInitialState:function(){return this.components=a({confirmation:E}),{newRepo:null,saving:!1,problems:{}}},getRepo:function(e){return!this.isEditing()||e&&"current"!==e?this.props.repo||k:this.state.newRepo||this.props.repo||k},getRepoProperty:function(e,t){var n=this.getRepo(t);return r.get(n,e)},setRepoProperty:function(e,t){var n=this.getRepo(),s=r.decoupleSet(n,e,t),o=!0;r.isEqual(s,this.props.repo)&&(s=null,o=!1),this.setState({newRepo:s,hasChanges:o})},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,s=r.clone(n.parameters);return s.edit=t,n.replace(e.exports,s)},returnToList:function(){var e=this.props.route,t={project:e.parameters.project};return e.push(n("./pages/repo-list-page.jsx"),t)},getInputLanguages:function(){return r.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newRepo:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getRepo(),o=t(r.get(n,"details.title"))||n.name;return s.createElement("div",{className:"repo-summary-page"},this.renderButtons(),s.createElement("h2",null,e("repo-summary-$title",o)),s.createElement(x,null,this.state.problems.unexpected),this.renderForm(),this.renderInstructions(),this.renderChart(),s.createElement(E,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),s.createElement(C,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return s.createElement("div",{key:"edit",className:"buttons"},s.createElement(g,{onClick:this.handleCancelClick},e("repo-summary-cancel"))," ",s.createElement(g,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("repo-summary-save")));var t=this.props.route.parameters.repo,n=this.props.project,o=!n||r.includes(n.repo_ids,t),i=o?void 0:"restore";return s.createElement("div",{key:"view",className:"buttons"},s.createElement(v,{preselected:i},s.createElement("option",{name:"return",onClick:this.handleReturnClick},e("repo-summary-return")),s.createElement("option",{name:"remove",disabled:!o,onClick:this.handleRemoveClick},e("repo-summary-remove")),s.createElement("option",{name:"restore",hidden:o,onClick:this.handleRestoreClick},e("repo-summary-restore")))," ",s.createElement(g,{className:"emphasis",onClick:this.handleEditClick},e("repo-summary-edit")))},renderForm:function(){return s.createElement("div",{className:"form"},this.renderTitleInput(),this.renderNameInput(),this.renderIssueTrackingStatus())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getRepoProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return s.createElement(j,t,e("repo-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getRepoProperty("name"),locale:this.props.locale,readOnly:!0};return s.createElement(y,t,e("repo-summary-gitlab-name"))},renderIssueTrackingStatus:function(){var e,t=this.props.locale.translate;e=t(this.getRepoProperty("details.issues_enabled")?"repo-summary-issue-tracker-enabled":"repo-summary-issue-tracker-disabled");var n={id:"issue-tracker",value:e,locale:this.props.locale,readOnly:!0};return s.createElement(y,n,t("repo-summary-issue-tracker"))},renderInstructions:function(){var e={folder:"repo",topic:"repo-summary",hidden:!this.isEditing(),locale:this.props.locale};return s.createElement("div",{className:"instructions"},s.createElement(b,e))},renderChart:function(){var e=this.props.locale.translate,t={statistics:this.props.statistics,locale:this.props.locale,theme:this.props.theme};return s.createElement("div",{className:"statistics"},s.createElement(w,t,e("repo-summary-statistics")))},changeInclusion:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),s=this.props.repo,o=this.props.project.repo_ids;o=e?r.union(o,[s.id]):r.difference(o,[s.id]);var i=r.assign({},this.props.project,{repo_ids:o});return n.saveOne({table:"project"},i).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})},handleRemoveClick:function(e){var t=this,n=this.props.locale.translate,r=n("repo-summary-confirm-remove");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeInclusion(!1).then(function(e){if(e)return t.returnToList()})})},handleRestoreClick:function(e){var t=this,n=this.props.locale.translate,r=n("repo-summary-confirm-restore");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeInclusion(!0)})},handleReturnClick:function(e){return this.returnToList()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var n=this.props.database.use({schema:"global",by:this}),r=this.getRepo();this.setState({saving:!0,problems:{}},function(){return n.start().then(function(e){return n.saveOne({table:"repo"},r).then(function(e){t.setState({hasChanges:!1,saving:!1},function(){t.setEditability(!1)})})}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n,saving:!1})})})}},handleTitleChange:function(e){this.setRepoProperty("details.title",e.target.value)}}),k={details:{}}},"./pages/repo-summary-page.scss":function(e,t){},"./pages/role-list-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/memoize.js"),l=n("../../common/src/utils/component-refs.js"),u=n("../../common/src/objects/finders/role-finder.js"),d=n("../../common/src/objects/finders/user-finder.js"),m=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),h=n("../../common/src/locale/locale.js"),f=n("../../common/src/theme/theme.js"),g=n("./widgets/push-button.jsx"),v=n("./widgets/combo-button.jsx"),b=n("./widgets/sortable-table.jsx"),y=b.TH,j=n("./tooltips/user-tooltip.jsx"),w=n("./tooltips/modified-time-tooltip.jsx"),E=n("./widgets/action-badge.jsx"),C=n("./widgets/action-confirmation.jsx"),x=n("./widgets/data-loss-warning.jsx"),_=n("./widgets/unexpected-error.jsx");n("./pages/role-list-page.scss"),e.exports=a.createClass({displayName:"RolesPage",propTypes:{database:i.instanceOf(m).isRequired,route:i.instanceOf(p).isRequired,locale:i.instanceOf(h).isRequired,theme:i.instanceOf(f).isRequired},statics:{parseURL:function(e,t){return p.match(e,["/roles/?"],function(e){return{edit:!!t.edit}})},getURL:function(e){var t;return e.edit&&(t={edit:1}),{path:"/roles/",query:t}}},renderAsync:function(e){var t=this.props.database.use({schema:"global",by:this}),n={roles:null,users:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(k,n)),t.start().then(function(e){return u.findAllRoles(t).then(function(e){n.roles=e})}).then(function(){return e.show(o.createElement(k,n)),d.findUsersWithRoles(t,n.roles).then(function(e){n.users=e})}).then(function(e){return o.createElement(k,n)})}});var k=e.exports.Sync=o.createClass({displayName:"RoleListPage.Sync",propTypes:{roles:i.arrayOf(i.object),users:i.arrayOf(i.object),database:i.instanceOf(m).isRequired,route:i.instanceOf(p).isRequired,locale:i.instanceOf(h).isRequired,theme:i.instanceOf(f).isRequired},getInitialState:function(){return this.components=l({confirmation:C}),{sortColumns:["name"],sortDirections:["asc"],restoringRoleIds:[],disablingRoleIds:[],hasChanges:!1,renderingFullList:this.isEditing(),problems:{}}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,r=s.clone(n.parameters);return r.edit=t,this.props.route.replace(e.exports,r)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringRoleIds:[],disablingRoleIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1,problems:{}})},500))},render:function(){var e=this.props.locale.translate;return o.createElement("div",{className:"role-list-page"},this.renderButtons(),o.createElement("h2",null,e("role-list-title")),o.createElement(_,null,this.state.problems.unexpected),this.renderTable(),o.createElement(C,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),o.createElement(x,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return o.createElement("div",{className:"buttons"},o.createElement(g,{onClick:this.handleCancelClick},e("role-list-cancel"))," ",o.createElement(g,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("role-list-save")));var t=s.isEmpty(this.props.roles);return o.createElement("div",{className:"buttons"},o.createElement(v,{preselected:"add"},o.createElement("option",{name:"add",onClick:this.handleAddClick},e("role-list-add")))," ",o.createElement(g,{className:"emphasis",disabled:t,onClick:this.handleEditClick},e("role-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing(),e.onClick=this.handleRowClick),o.createElement(b,e,o.createElement("thead",null,this.renderHeadings()),o.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return o.createElement("tr",null,this.renderTitleColumn(),this.renderUsersColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.roles;return this.state.renderingFullList||(e=S(e)),e=R(e,this.props.users,this.props.locale,this.state.sortColumns,this.state.sortDirections),s.map(e,this.renderRow)},renderRow:function(e){var t,n,i=this.props.locale.translate,a=[];e.deleted?(a.push("deleted"),n=i("role-list-status-deleted")):e.disabled&&(a.push("disabled"),n=i("role-list-status-disabled")),this.state.renderingFullList&&(e.deleted||e.disabled?s.includes(this.state.restoringRoleIds,e.id)&&a.push("selected"):(a.push("fixed"),s.includes(this.state.disablingRoleIds,e.id)||a.push("selected")),t=this.handleRowClick);var c={className:a.join(" "),"data-role-id":e.id,title:n,onClick:t};return o.createElement("tr",r({key:e.id},c),this.renderTitleColumn(e),this.renderUsersColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var r,i,a=this.props.locale.pick,c=a(e.details.title)||"-";if(this.state.renderingFullList){var l,u;e.deleted||e.disabled?(l=!1,u=s.includes(this.state.restoringRoleIds,e.id)):(l=!0,u=!s.includes(this.state.disablingRoleIds,e.id)),l!==u&&(i=u?o.createElement(E,{type:"reactivate",locale:this.props.locale}):o.createElement(E,{type:"disable",locale:this.props.locale}))}else{var d=this.props.route,m={role:e.id};r=d.find(n("./pages/role-summary-page.jsx"),m)}return o.createElement("td",null,o.createElement("a",{href:r},c)," ",i)}return o.createElement(y,{id:"title"},t("table-heading-title"))},renderUsersColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){var n={users:F(this.props.users,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement("td",null,o.createElement(j,n))}return o.createElement(y,{id:"users"},t("table-heading-users"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={time:e.mtime,locale:this.props.locale};return o.createElement("td",null,o.createElement(w,n))}return o.createElement(y,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){var t=this.props.route,r={role:"new"};return t.push(n("./pages/role-summary-page.jsx"),r)},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,n=this.props.locale.translate,r=this.state.disablingRoleIds,o=this.state.restoringRoleIds,i=[n("role-list-confirm-disable-$count",r.length),n("role-list-confirm-reactivate-$count",o.length)],a=[s.isEmpty(r)||void 0,s.isEmpty(o)||void 0];return this.components.confirmation.askSeries(i,a).then(function(e){if(e){t.setState({problems:{}});var n=t.props.database.use({schema:"global",by:t});return n.start().then(function(e){var i=[];return s.each(t.props.roles,function(e){var t={};if(s.includes(r,e.id))t.disabled=!0;else{if(!s.includes(o,e.id))return;t.disabled=t.deleted=!1}var n=s.assign({},e,t);i.push(n)}),n.save({table:"role"},i).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-role-id")),n=s.find(this.props.roles,{id:t}),r=s.slice(this.state.restoringRoleIds),o=s.slice(this.state.disablingRoleIds);n.deleted||n.disabled?s.includes(r,n.id)?s.pull(r,n.id):r.push(n.id):s.includes(o,n.id)?s.pull(o,n.id):o.push(n.id);var i=!s.isEmpty(r)||!s.isEmpty(o);this.setState({restoringRoleIds:r,disablingRoleIds:o,hasChanges:i})}}),S=c(function(e){return s.filter(e,function(e){return!e.deleted&&!e.disabled})}),R=c(function(e,t,n,r,o){return r=s.map(r,function(e){switch(e){case"title":return function(e){return n.pick(e.details.title)};default:return e}}),s.orderBy(e,r,o)}),F=c(function(e,t){return s.filter(e,function(e){return s.includes(e.role_ids,t.id)})})},"./pages/role-list-page.scss":function(e,t){},"./pages/role-summary-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/memoize.js"),l=n("../../common/src/utils/component-refs.js"),u=n("../../common/src/objects/finders/role-finder.js"),d=n("../../common/src/objects/finders/system-finder.js"),m=n("../../common/src/objects/finders/user-finder.js"),p=n("../../common/src/data/database.js"),h=n("../../common/src/routing/route.js"),f=n("../../common/src/locale/locale.js"),g=n("../../common/src/theme/theme.js"),v=n("../../common/src/utils/slug-generator.js"),b=n("./widgets/push-button.jsx"),y=n("./widgets/combo-button.jsx"),j=n("./widgets/instruction-block.jsx"),w=n("./widgets/text-field.jsx"),E=n("./widgets/multilingual-text-field.jsx"),C=n("./widgets/option-list.jsx"),x=n("./widgets/input-error.jsx"),_=n("./widgets/action-confirmation.jsx"),k=n("./widgets/data-loss-warning.jsx"),S=n("./widgets/unexpected-error.jsx");n("./pages/role-summary-page.scss"),e.exports=a.createClass({displayName:"RoleSummaryPage",propTypes:{database:i.instanceOf(p).isRequired,route:i.instanceOf(h).isRequired,locale:i.instanceOf(f).isRequired,theme:i.instanceOf(g).isRequired},statics:{parseURL:function(e,t){return h.match(e,["/roles/:role/?"],function(e){return{role:"new"===e.role?"new":h.parseId(e.role),edit:!!t.edit}})},getURL:function(e){var t,n="/roles/"+e.role+"/";return e.edit&&(t={edit:1}),{path:n,query:t}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({by:this}),r={system:null,role:null,users:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(R,r)),n.start().then(function(e){return d.findSystem(n).then(function(e){r.system=e})}).then(function(){if("new"!==t.role)return u.findRole(n,t.role).then(function(e){r.role=e})}).then(function(){return e.show(o.createElement(R,r)),m.findActiveUsers(n).then(function(e){r.users=e})}).then(function(){return o.createElement(R,r)})}});var R=e.exports.Sync=o.createClass({displayName:"RoleSummaryPage.Sync",propTypes:{system:i.object,role:i.object,users:i.arrayOf(i.object),database:i.instanceOf(p).isRequired,route:i.instanceOf(h).isRequired,locale:i.instanceOf(f).isRequired,theme:i.instanceOf(g).isRequired},getInitialState:function(){return this.components=l({confirmation:_}),{newRole:null,hasChanges:!1,saving:!1,adding:!1,removeList:[],addList:[],problems:{}}},getRole:function(e){return!this.isEditing()||e&&"current"!==e?this.props.role||O:this.state.newRole||this.props.role||O},getRoleProperty:function(e,t){var n=this.getRole(t);return s.get(n,e)},setRoleProperty:function(e,t){var n=this.getRole("current"),r=s.decoupleSet(n,e,t);if("details.title"===e){var o=v.fromTitle(n.details.title),i=v.fromTitle(r.details.title);n.name&&n.name!==o||(r.name=i)}s.size(r.name)>128&&(r.name=r.name.substr(0,128));var a=!0;s.isEqual(r,this.props.role)&&(r=null,a=!s.isEmpty(this.state.addList)||!s.isEmpty(this.state.removeList)),this.setState({newRole:r,hasChanges:a})},findProblems:function(){var e={};return this.getRole().name||(e.name="validation-required"),e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.role},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.parameters.edit},setEditability:function(t,n){if(!this.isCreating()||t||n){var r=this.props.route,o=s.clone(r.parameters);return o.edit=t,n&&(o.role=n.id),r.replace(e.exports,o)}return this.returnToList()},returnToList:function(){return this.props.route.push(n("./pages/role-list-page.jsx"))},startNew:function(){var t=this.props.route,n=s.clone(t.parameters);return n.role="new",t.replace(e.exports,n)},getInputLanguages:function(){return s.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newRole:null,hasChanges:!1,addList:[],removeList:[]}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getRole(),r=t(s.get(n,"details.title"))||n.name;return o.createElement("div",{className:"role-summary-page"},this.renderButtons(),o.createElement("h2",null,e("role-summary-$title",r)),o.createElement(S,null,this.state.problems.unexpected),this.renderForm(),this.renderInstructions(),o.createElement(_,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),o.createElement(k,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return o.createElement("div",{className:"buttons"},o.createElement(b,{onClick:this.handleCancelClick},e("role-summary-cancel"))," ",o.createElement(b,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("role-summary-save")));var t,n=this.props.role,r=!n||!n.deleted&&!n.disabled;return t=r?this.state.adding?"add":"return":"reactivate",o.createElement("div",{className:"buttons"},o.createElement(y,{preselected:t},o.createElement("option",{name:"return",onClick:this.handleReturnClick},e("role-summary-return")),o.createElement("option",{name:"add",onClick:this.handleAddClick},e("role-summary-add")),o.createElement("option",{name:"archive",disabled:!r,separator:!0,onClick:this.handleDisableClick},e("role-summary-disable")),o.createElement("option",{name:"delete",disabled:!r,onClick:this.handleDeleteClick},e("role-summary-delete")),o.createElement("option",{name:"reactivate",hidden:r,onClick:this.handleReactivateClick},e("role-summary-reactivate")))," ",o.createElement(b,{className:"emphasis",onClick:this.handleEditClick},e("role-summary-edit")))},renderForm:function(){return o.createElement("div",{className:"form"},this.renderTitleInput(),this.renderNameInput(),this.renderDescriptionInput(),this.renderRatingSelector(),this.renderUserSelector())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getRoleProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return o.createElement(E,t,e("role-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getRoleProperty("name"),locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems;return o.createElement(w,t,e("role-summary-name"),o.createElement(x,null,e(n.name)))},renderDescriptionInput:function(){var e=this.props.locale.translate,t={id:"description",value:this.getRoleProperty("details.description"),availableLanguageCodes:this.getInputLanguages(),type:"textarea",locale:this.props.locale,onChange:this.handleDescriptionChange,readOnly:!this.isEditing()};return o.createElement(E,t,e("role-summary-description"))},renderRatingSelector:function(){var e=this.props.locale.translate,t=this.getRoleProperty("settings.rating","current")||0,n=(this.getRoleProperty("settings.rating","original"),s.map(P,function(n,r){return{name:r,selected:t===n,previous:t===n,children:e("role-summary-rating-"+r)}})),i={onOptionClick:this.handleRatingOptionClick,readOnly:!this.isEditing()};return o.createElement(C,i,o.createElement("label",null,e("role-summary-rating")),s.map(n,function(e,t){return o.createElement("option",r({key:t},e))}))},renderUserSelector:function(){var e=this,t=this.props.locale.translate,n=this.props.locale.pick,i=this.getRoleProperty("id"),a=F(this.props.users,this.props.locale),c=s.map(a,function(t){var r,o=s.includes(t.role_ids,i);return r=o?!s.includes(e.state.removeList,t.id):s.includes(e.state.addList,t.id),{name:String(t.id),selected:r,previous:o,children:n(t.details.name)||n.username}}),l={onOptionClick:this.handleUserOptionClick,readOnly:!this.isEditing()};return o.createElement(C,l,o.createElement("label",null,t("role-summary-users")),s.map(c,function(e,t){return o.createElement("option",r({key:t},e))}))},renderInstructions:function(){var e={folder:"role",topic:"role-summary",hidden:!this.isEditing(),locale:this.props.locale};return o.createElement("div",{className:"instructions"},o.createElement(j,e))},changeFlags:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r=s.assign({},this.props.role,e);return n.saveOne({table:"role"},r).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})},handleDisableClick:function(e){var t=this,n=this.props.locale.translate,r=n("role-summary-confirm-disable");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({disabled:!0}).then(function(e){if(e)return t.returnToList()})})},handleDeleteClick:function(e){var t=this,n=this.props.locale.translate,r=n("role-summary-confirm-delete");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(e){if(e)return t.returnToList()})})},handleReactivateClick:function(e){var t=this,n=this.props.locale.translate,r=n("role-summary-confirm-reactivate");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({disabled:!1,deleted:!1})})},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var n=this.findProblems();if(s.some(n))return void this.setState({problems:n});var r=this.getRole();this.setState({saving:!0,adding:!r.id,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t});return e.start().then(function(n){return e.saveOne({table:"role"},r).then(function(n){var r=[];return s.each(t.state.addList,function(e){var o=s.find(t.props.users,{id:e});r.push({id:o.id,role_ids:s.union(o.role_ids,[n.id])})}),s.each(t.state.removeList,function(e){var o=s.find(t.props.users,{id:e});r.push({id:o.id,role_ids:s.difference(o.role_ids,[n.id])})}),s.isEmpty(r)?n:e.save({table:"user"},r).return(n)}).then(function(e){return t.setState({hasChanges:!1,saving:!1},function(){return t.setEditability(!1,e)}),null})}).catch(function(e){var n;n=409===e.statusCode?{name:"validation-duplicate-role-name"}:{unexpected:e.message},t.setState({problems:n,saving:!1})})})}},handleTitleChange:function(e){this.setRoleProperty("details.title",e.target.value)},handleNameChange:function(e){var t=s.toLower(e.target.value).replace(/\W+/g,"");this.setRoleProperty("name",t)},handleDescriptionChange:function(e){this.setRoleProperty("details.description",e.target.value)},handleRatingOptionClick:function(e){var t=e.name,n=P[t];this.setRoleProperty("settings.rating",n)},handleUserOptionClick:function(e){var t=parseInt(e.name),n=s.find(this.props.users,{id:t}),r=this.getRoleProperty("id"),o=s.slice(this.state.addList),i=s.slice(this.state.removeList);s.includes(n.role_ids,r)?s.includes(i,n.id)?s.pull(i,n.id):i.push(n.id):s.includes(o,n.id)?s.pull(o,n.id):o.push(n.id);var a=!0;this.state.newRole||(a=!s.isEmpty(o)||!s.isEmpty(i)),this.setState({addList:o,removeList:i,hasChanges:a})}}),F=c(function(e,t){var n=t.pick,r=function(e){return n(e.details.name)||e.username};return s.sortBy(e,r)}),O={details:{}},P={"very-high":50,high:20,normal:0,low:-20,"very-low":-50}},"./pages/role-summary-page.scss":function(e,t){},"./pages/server-list-page.jsx":function(e,t,n){"use strict";function r(e){switch(e){case"facebook":return"facebook-official";default:return e}}function s(e){var t=e.settings.oauth;return!!(t&&t.client_id&&t.client_secret)}function o(e){var t=e.settings.api;return!(!t||!t.access_token)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("../../common/node_modules/lodash/lodash.js"),c=(n("../../common/node_modules/moment/moment.js"),n("../../common/node_modules/react/react.js")),l=c.PropTypes,u=n("../node_modules/relaks/index.js"),d=n("../../common/src/utils/memoize.js"),m=n("../../common/src/utils/component-refs.js"),p=n("../../common/src/objects/finders/server-finder.js"),h=n("../../common/src/objects/finders/user-finder.js"),f=n("../../common/src/data/database.js"),g=n("../../common/src/routing/route.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("./widgets/push-button.jsx"),j=n("./widgets/combo-button.jsx"),w=n("./widgets/sortable-table.jsx"),E=w.TH,C=n("./tooltips/user-tooltip.jsx"),x=n("./tooltips/modified-time-tooltip.jsx"),_=n("./widgets/action-badge.jsx"),k=n("./widgets/action-confirmation.jsx"),S=n("./widgets/data-loss-warning.jsx"),R=n("./widgets/unexpected-error.jsx");n("./pages/server-list-page.scss"),e.exports=u.createClass({displayName:"ServerListPage",propTypes:{database:l.instanceOf(f).isRequired,route:l.instanceOf(g).isRequired,locale:l.instanceOf(v).isRequired,theme:l.instanceOf(b).isRequired},statics:{parseURL:function(e,t){return g.match(e,["/servers/?"],function(e){return{edit:!!t.edit}})},getURL:function(e){var t;return e.edit&&(t={edit:1}),{path:"/servers/",query:t}}},renderAsync:function(e){var t=this.props.database.use({schema:"global",by:this}),n={servers:null,users:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(c.createElement(F,n)),t.start().then(function(e){return p.findAllServers(t).then(function(e){n.servers=e})}).then(function(){return e.show(c.createElement(F,n)),h.findActiveUsers(t).then(function(e){n.users=e})}).then(function(){return c.createElement(F,n)})}});var F=e.exports.Sync=c.createClass({displayName:"ServerListPage.Sync",propTypes:{servers:l.arrayOf(l.object),users:l.arrayOf(l.object),database:l.instanceOf(f).isRequired,route:l.instanceOf(g).isRequired,locale:l.instanceOf(v).isRequired,theme:l.instanceOf(b).isRequired},getInitialState:function(){return this.components=m({confirmation:k}),{sortColumns:["name"],sortDirections:["asc"],restoringServerIds:[],disablingServerIds:[],hasChanges:!1,renderingFullList:this.isEditing(),problems:{}}},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,r=a.clone(n.parameters);return r.edit=t,this.props.route.replace(e.exports,r)},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringServerIds:[],disablingServerIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1,problems:{}})},500))},render:function(){var e=this.props.locale.translate;return c.createElement("div",{className:"server-list-page"},this.renderButtons(),c.createElement("h2",null,e("server-list-title")),c.createElement(R,null,this.state.problems.unexpected),this.renderTable(),c.createElement(k,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),c.createElement(S,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return c.createElement("div",{className:"buttons"},c.createElement(y,{onClick:this.handleCancelClick},e("server-list-cancel"))," ",c.createElement(y,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("server-list-save")));var t=a.isEmpty(this.props.servers);return c.createElement("div",{className:"buttons"},c.createElement(j,{preselected:"add"},c.createElement("option",{name:"add",onClick:this.handleAddClick},e("server-list-add")))," ",c.createElement(y,{name:"edit",className:"emphasis",disabled:t,onClick:this.handleEditClick},e("server-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expandable=!0,e.selectable=!0,e.expanded=this.isEditing(),e.onClick=this.handleRowClick),c.createElement(w,e,c.createElement("thead",null,this.renderHeadings()),c.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return c.createElement("tr",null,this.renderTitleColumn(),this.renderTypeColumn(),this.renderOAuthColumn(),this.renderAPIColumn(),this.renderUsersColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.servers;return this.state.renderingFullList||(e=O(e)),e=P(e,this.props.users,this.props.locale,this.state.sortColumns,this.state.sortDirections),a.map(e,this.renderRow)},renderRow:function(e){var t,n,r=this.props.locale.translate,s=[];e.deleted?(s.push("deleted"),n=r("server-list-status-deleted")):e.disabled&&(s.push("disabled"),n=r("server-list-status-disabled")),this.state.renderingFullList&&(e.deleted||e.disabled?a.includes(this.state.restoringServerIds,e.id)&&s.push("selected"):(s.push("fixed"),a.includes(this.state.disablingServerIds,e.id)||s.push("selected")),t=this.handleRowClick);var o={className:s.join(" "),"data-server-id":e.id,title:n,onClick:t};return c.createElement("tr",i({key:e.id},o),this.renderTitleColumn(e),this.renderTypeColumn(e),this.renderOAuthColumn(e),this.renderAPIColumn(e),this.renderUsersColumn(e),this.renderModifiedTimeColumn(e))},renderTitleColumn:function(e){var t=this.props.locale.translate;if(e){var s,o,i=this.props.locale.pick,l=i(e.details.title)||t("server-type-"+e.type);if(this.state.renderingFullList){var u,d;e.deleted||e.disabled?(u=!1,d=a.includes(this.state.restoringServerIds,e.id)):(u=!0,d=!a.includes(this.state.disablingServerIds,e.id)),u!==d&&(o=d?c.createElement(_,{type:"reactivate",locale:this.props.locale}):c.createElement(_,{type:"disable",locale:this.props.locale}))}else{var m=this.props.route,p={server:e.id};s=m.find(n("./pages/server-summary-page.jsx"),p)}var h=r(e.type),f=c.createElement("i",{className:"fa fa-"+h+" fa-fw"});return c.createElement("td",null,c.createElement("a",{href:s},f," ",l),o)}return c.createElement(E,{id:"title"},t("table-heading-title"))},renderTypeColumn:function(e){var t=this.props.locale.translate;return e?c.createElement("td",null,t("server-type-"+e.type)):c.createElement(E,{id:"type"},t("table-heading-type"))},renderOAuthColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var n=s(e);return c.createElement("td",null,t("server-list-oauth-"+n))}return c.createElement(E,{id:"oauth"},t("table-heading-oauth"))},renderAPIColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var n=o(e);return c.createElement("td",null,t("server-list-api-access-"+n))}return c.createElement(E,{id:"api"},t("table-heading-api-access"))},renderUsersColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={users:T(this.props.users,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme};return c.createElement("td",null,c.createElement(C,n))}return c.createElement(E,{id:"users"},t("table-heading-users"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={time:e.mtime,locale:this.props.locale};return c.createElement("td",null,c.createElement(x,n))}return c.createElement(E,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){return this.props.route.push(n("./pages/server-summary-page.jsx"),{server:"new"})},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,n=this.props.locale.translate,r=this.state.disablingServerIds,s=this.state.restoringServerIds,o=[n("server-list-confirm-disable-$count",r.length),n("server-list-confirm-reactivate-$count",s.length)],i=[a.isEmpty(r)||void 0,a.isEmpty(s)||void 0];return this.components.confirmation.askSeries(o,i).then(function(e){if(e){t.setState({problems:{}});var n=t.props.database.use({schema:"global",by:t});return n.start().then(function(e){var o=[];return a.each(t.props.servers,function(e){var t={};if(a.includes(r,e.id))t.disabled=!0;else{if(!a.includes(s,e.id))return;t.disabled=t.deleted=!1}var n=a.assign({},e,t);o.push(n)}),n.save({table:"server"},o).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-server-id")),n=a.find(this.props.servers,{id:t}),r=a.slice(this.state.restoringServerIds),s=a.slice(this.state.disablingServerIds);n.deleted||n.disabled?a.includes(r,n.id)?a.pull(r,n.id):r.push(n.id):a.includes(s,n.id)?a.pull(s,n.id):s.push(n.id);var o=!a.isEmpty(r)||!a.isEmpty(s);this.setState({restoringServerIds:r,disablingServerIds:s,hasChanges:o})}}),O=d(function(e){return a.filter(e,function(e){return!e.deleted&&!e.disabled})}),P=d(function(e,t,n,r,s){var o=n.translate,i=n.pick;return r=a.map(r,function(e){switch(e){case"title":return function(e){return i(e.details.title)||o("server-type-"+e.type)};case"type":return function(e){return o("server-type-"+e.type)};case"users":return function(e){return a.size(T(t,e))};default:return e}}),a.orderBy(e,r,s)}),T=d(function(e,t){return a.filter(e,function(e){return a.some(e.external,function(e){if(e.server_id===t.id)return!0})})})},"./pages/server-list-page.scss":function(e,t){},"./pages/server-summary-page.jsx":function(e,t,n){"use strict";function r(e){switch(e){case"facebook":return"facebook-official";default:return e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=(n("../../common/node_modules/react-dom/index.js"),n("../node_modules/relaks/index.js")),l=n("../../common/src/utils/memoize.js"),u=n("../../common/src/utils/component-refs.js"),d=n("../../common/src/objects/finders/role-finder.js"),m=n("../../common/src/objects/finders/server-finder.js"),p=n("../../common/src/objects/types/server-types.js"),h=n("../../common/src/objects/settings/server-settings.js"),f=n("../../common/src/objects/finders/system-finder.js"),g=n("../../common/src/data/database.js"),v=n("../../common/src/routing/route.js"),b=n("../../common/src/locale/locale.js"),y=n("../../common/src/theme/theme.js"),j=n("../../common/src/utils/slug-generator.js"),w=n("./widgets/push-button.jsx"),E=n("./widgets/combo-button.jsx"),C=n("./widgets/instruction-block.jsx"),x=n("./widgets/text-field.jsx"),_=n("./widgets/multilingual-text-field.jsx"),k=n("./widgets/option-list.jsx"),S=n("../../common/src/widgets/collapsible-container.jsx"),R=n("./widgets/task-list.jsx"),F=n("./widgets/input-error.jsx"),O=n("./widgets/action-confirmation.jsx"),P=n("./widgets/data-loss-warning.jsx"),T=n("./widgets/unexpected-error.jsx");n("./pages/server-summary-page.scss"),e.exports=c.createClass({displayName:"ServerSummaryPage",propTypes:{database:a.instanceOf(g).isRequired,route:a.instanceOf(v).isRequired,locale:a.instanceOf(b).isRequired,theme:a.instanceOf(y).isRequired},statics:{parseURL:function(e,t){return v.match(e,["/servers/:server/?"],function(e){return{server:"new"===e.server?"new":v.parseId(e.server),edit:!!t.edit}})},getURL:function(e){var t,n="/servers/"+e.server+"/";return e.edit&&(t={edit:1}),{path:n,query:t}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),r={system:null,server:null,roles:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(N,r)),n.start().then(function(e){return f.findSystem(n).then(function(e){r.system=e||void 0})}).then(function(){if("new"!==t.server)return m.findServer(n,t.server).then(function(e){r.server=e})}).then(function(){return e.show(i.createElement(N,r)),d.findActiveRoles(n).then(function(e){r.roles=e})}).then(function(){return i.createElement(N,r)})}});var N=e.exports.Sync=i.createClass({displayName:"ServerSummaryPage.Sync",propTypes:{system:a.object,server:a.object,roles:a.arrayOf(a.object),database:a.instanceOf(g).isRequired,route:a.instanceOf(v).isRequired,locale:a.instanceOf(b).isRequired,theme:a.instanceOf(y).isRequired},getInitialState:function(){return this.components=u({confirmation:O}),{newServer:null,hasChanges:!1,saving:!1,adding:!1,credentialsChanged:!1,problems:{}}},getServer:function(e){return!this.isEditing()||e&&"current"!==e?this.props.server||L:this.state.newServer||this.props.server||L},getServerProperty:function(e,t){var n=this.getServer(t);return o.get(n,e)},setServerProperty:function(e,t){var n=this.getServer(),r=o.decoupleSet(n,e,t);if("type"===e){var s=this.props.locale.translate,i=this.props.locale.pick,a=s("server-type-"+n.type),c=s("server-type-"+r.type),l=i(n.details.title);if(!l||l===a){var u=this.props.locale.languageCode;r=o.decoupleSet(r,"details.title."+u,c)}}if("details.title"===e||"type"===e){var d=j.fromTitle(n.details.title),m=j.fromTitle(r.details.title);n.name&&n.name!==d||(r.name=m)}"settings.user.type"===e&&(t||(r=o.decoupleSet(r,"settings.user.role_ids",void 0))),o.size(r.name)>128&&(r.name=r.name.substr(0,128));var p=!0;o.isEqual(r,this.props.server)&&(r=null,p=!1),this.setState({newServer:r,hasChanges:p})},findProblems:function(){var e={},t=this.getServer();t.name||(e.name="validation-required"),t.type||(e.type="validation-required");var n=t.settings.oauth;return n&&(n.client_id&&!n.client_secret&&(e.client_secret="validation-required"),!n.client_id&&n.client_secret&&(e.client_id="validation-required"),!n.client_id&&!n.client_secret||n.base_url||"gitlab"===t.type&&(e.base_url="validation-required")),e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.server},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.parameters.edit},setEditability:function(t,n){if(!this.isCreating()||t||n){var r=this.props.route,s=o.clone(r.parameters);return s.edit=t,n&&(s.server=n.id),r.replace(e.exports,s)}return this.returnToList()},returnToList:function(){return this.props.route.push(n("./pages/server-list-page.jsx"))},startNew:function(){var t=this.props.route,n=o.clone(t.parameters);return n.server="new",t.replace(e.exports,n)},getInputLanguages:function(){return o.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newServer:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getServer(),r=t(o.get(n,"details.title"));return!r&&n.type&&(r=e("server-type-"+n.type)),i.createElement("div",{className:"server-summary-page"},this.renderButtons(),i.createElement("h2",null,e("server-summary-member-$name",r)),i.createElement(T,null,this.state.problems.unexpected),this.renderForm(),this.renderInstructions(),this.renderTaskList(),i.createElement(O,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),i.createElement(P,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return i.createElement("div",{key:"edit",className:"buttons"},i.createElement(w,{onClick:this.handleCancelClick},e("server-summary-cancel"))," ",i.createElement(w,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("server-summary-save")));var t,n,r=this.getServer(),s=!r.deleted&&!r.disabled,a=o.includes(p.integrated,r.type),c=!!o.get(r,"settings.api.access_token"),l=!(!o.get(r,"settings.oauth.client_id")||!o.get(r,"settings.oauth.client_secret")),u=this.state.credentialsChanged;return s?a&&!c?(t="acquire",n=!0):t=l&&u?"test":this.state.adding?"add":"return":t="reactivate",i.createElement("div",{key:"view",className:"buttons"},i.createElement(E,{preselected:t,alert:n},i.createElement("option",{name:"return",onClick:this.handleReturnClick},e("server-summary-return")),i.createElement("option",{name:"add",onClick:this.handleAddClick},e("server-summary-add")),i.createElement("option",{name:"acquire",disabled:!s||!a,separator:!0,onClick:this.handleAcquireClick},e("server-summary-acquire")),i.createElement("option",{name:"test",disabled:!s||!l,onClick:this.handleTestClick},e("server-summary-test-oauth")),i.createElement("option",{name:"disable",disabled:!s,separator:!0,onClick:this.handleDisableClick},e("server-summary-disable")),i.createElement("option",{name:"delete",disabled:!s,onClick:this.handleDeleteClick},e("server-summary-delete")),i.createElement("option",{name:"reactivate",hidden:s,onClick:this.handleReactivateClick},e("server-summary-reactivate")))," ",i.createElement(w,{className:"emphasis",onClick:this.handleEditClick},e("server-summary-edit")))},renderForm:function(){return i.createElement("div",{className:"form"},this.renderTypeSelector(),this.renderTitleInput(),this.renderNameInput(),this.renderUserOptions(),this.renderWhitelist(),this.renderRoleSelector(),this.renderSiteURL(),this.renderOAuthCallbackURL(),this.renderDeauthorizeCallbackURL(),this.renderPrivacyPolicyURL(),this.renderTermsAndConditionsURL(),this.renderGitlabURLInput(),this.renderOAuthClientIdInput(),this.renderOAuthClientSecretInput(),this.renderAPIStatus())},renderTypeSelector:function(){var e=this.props.locale.translate,t=this.getServerProperty("type","current"),n=this.getServerProperty("type","original"),a=o.map(p,function(s){var o=r(s);return{name:s,selected:t===s,previous:n===s,children:[i.createElement("i",{className:"fa fa-"+o+" fa-fw",key:0})," ",e("server-type-"+s)]}}),c={onOptionClick:this.handleTypeOptionClick,readOnly:!this.isEditing()},l=this.state.problems;return i.createElement(k,c,i.createElement("label",null,e("server-summary-type"),i.createElement(F,null,e(l.type))),o.map(a,function(e,t){return i.createElement("option",s({key:t},e))}))},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getServerProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return i.createElement(_,t,e("server-summary-title"))},renderNameInput:function(){var e=this.props.locale.translate,t={id:"name",value:this.getServerProperty("name"),locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems;return i.createElement(x,t,e("server-summary-name"),i.createElement(F,null,e(n.name)))},renderUserOptions:function(){switch(this.getServerProperty("type")){case"gitlab":return this.renderGitlabUserOptions();default:return this.renderOAuthUserOptions()}},renderGitlabUserOptions:function(){var e=this.props.locale.translate,t=this.getServerProperty("settings.user","current")||{},n=this.getServerProperty("settings.user","original")||{},r=!!this.getServerProperty("id"),a=[{name:"import-admin-disabled",selected:!o.get(t,"mapping.admin"),previous:r?!o.get(n,"mapping.admin"):void 0,children:e("server-summary-user-import-gitlab-admin-disabled")},{name:"import-admin-as-admin",selected:"admin"===o.get(t,"mapping.admin"),previous:"admin"===o.get(n,"mapping.admin"),children:i.createElement("span",null,e("server-summary-gitlab-admin")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-admin"))},{name:"import-admin-as-moderator",selected:"moderator"===o.get(t,"mapping.admin"),previous:"moderator"===o.get(n,"mapping.admin"),children:i.createElement("span",null,e("server-summary-gitlab-admin")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-moderator"))},{name:"import-admin-as-regular-user",selected:"regular"===o.get(t,"mapping.admin"),previous:"regular"===o.get(n,"mapping.admin"),children:i.createElement("span",null,e("server-summary-gitlab-admin")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))},{name:"import-user-disabled",selected:!o.get(t,"mapping.user"),previous:r?!o.get(n,"mapping.user"):void 0,children:e("server-summary-user-import-gitlab-user-disabled")},{name:"import-user-as-moderator",selected:"moderator"===o.get(t,"mapping.user"),previous:"moderator"===o.get(n,"mapping.user"),children:i.createElement("span",null,e("server-summary-gitlab-regular-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-moderator"))},{name:"import-user-as-regular-user",selected:"regular"===o.get(t,"mapping.user"),previous:"regular"===o.get(n,"mapping.user"),children:i.createElement("span",null,e("server-summary-gitlab-regular-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))},{name:"import-user-as-guest",selected:"guest"===o.get(t,"mapping.user"),previous:"guest"===o.get(n,"mapping.user"),children:i.createElement("span",null,e("server-summary-gitlab-regular-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-guest"))},{name:"import-external-user-disabled",selected:!o.get(t,"mapping.external_user"),previous:r?!o.get(n,"mapping.external_user"):void 0,children:e("server-summary-user-import-gitlab-external-user-disabled")},{name:"import-external-user-as-regular-user",selected:"regular"===o.get(t,"mapping.external_user"),previous:"regular"===o.get(n,"mapping.external_user"),children:i.createElement("span",null,e("server-summary-gitlab-external-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))},{name:"import-external-user-as-guest",selected:"guest"===o.get(t,"mapping.external_user"),previous:"guest"===o.get(n,"mapping.external_user"),children:i.createElement("span",null,e("server-summary-gitlab-external-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-guest"))}],c={onOptionClick:this.handleGitlabUserOptionClick,readOnly:!this.isEditing()};return i.createElement(k,c,i.createElement("label",null,e("server-summary-new-users")),o.map(a,function(e,t){return i.createElement("option",s({key:t},e))}))},renderOAuthUserOptions:function(){var e=this.props.locale.translate,t=this.getServerProperty("settings.user","current")||{},n=this.getServerProperty("settings.user","original")||{},r=!!this.getServerProperty("id"),a=[{name:"import-disabled",selected:!t.type,previous:r?!n.type:void 0,children:e("server-summary-user-import-disabled")},{name:"import-user-as-guest",selected:"guest"===t.type,previous:"guest"===n.type,children:i.createElement("span",null,e("server-summary-new-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-guest"))},{name:"import-user-as-regular-user",selected:"regular"===t.type,previous:"regular"===n.type,children:i.createElement("span",null,e("server-summary-new-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",e("server-summary-user-type-regular"))}],c={onOptionClick:this.handleOAuthUserOptionClick,readOnly:!this.isEditing()};return i.createElement(k,c,i.createElement("label",null,e("server-summary-new-users")),o.map(a,function(e,t){return i.createElement("option",s({key:t},e))}))},renderWhitelist:function(){if("gitlab"===this.getServerProperty("type"))return null;if(!(this.getServerProperty("settings.user","current")||{}).type)return null;var e=this.props.locale.translate,t={id:"whitelist",value:this.getServerProperty("settings.user.whitelist"),locale:this.props.locale,onChange:this.handleWhitelistChange,readOnly:!this.isEditing(),type:"textarea",spellCheck:!1};this.state.problems;return i.createElement(x,t,e("server-summary-whitelist"))},renderRoleSelector:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getServerProperty("settings.user.role_ids","current")||[],r=this.getServerProperty("settings.user.role_ids","original")||[],a=!!this.getServerProperty("id"),c=I(this.props.roles,this.props.locale),l=o.concat({name:"none",selected:o.isEmpty(n),previous:a?o.isEmpty(r):void 0,children:e("server-summary-role-none")},o.map(c,function(s){var a=t(s.details.title)||t.name;return{name:String(s.id),selected:o.includes(n,s.id),previous:o.includes(r,s.id),children:i.createElement("span",null,e("server-summary-new-user")," ",i.createElement("i",{className:"fa fa-arrow-right"})," ",a)}})),u={onOptionClick:this.handleRoleOptionClick,readOnly:!this.isEditing()};return i.createElement(k,u,i.createElement("label",null,e("server-summary-roles")),o.map(l,function(e,t){return i.createElement("option",s({key:t},e))}))},renderSiteURL:function(){var e,t=this.props.locale.translate,n=o.get(this.props.system,"settings.address");n||(void 0===this.props.system&&(e=t("server-summary-system-address-missing")),n=window.location.origin);var r={id:"oauth_callback",value:n,locale:this.props.locale,readOnly:!0};return i.createElement(x,r,t("server-summary-oauth-site-url"),i.createElement(F,{type:"warning"},e))},renderOAuthCallbackURL:function(){var e=this.props.locale.translate,t=this.getServerProperty("type"),n=o.get(this.props.system,"settings.address");n||(n=window.location.origin);var r=n+"/srv/session/"+(t||"...")+"/callback/",s={id:"oauth_callback",value:r,locale:this.props.locale,readOnly:!0},a=(this.state.problems,"server-summary-oauth-callback-url");switch(t){case"dropbox":case"facebook":a="server-summary-oauth-redirect-uri";break;case"github":a="server-summary-oauth-callback-url";break;case"gitlab":case"google":a="server-summary-oauth-redirect-uri";break;case"windows":a="server-summary-oauth-redirect-url"}return i.createElement(x,s,e(a))},renderDeauthorizeCallbackURL:function(){var e=this.props.locale.translate,t=this.getServerProperty("type"),n=["facebook"];if(!o.includes(n,t))return null;var r=o.get(this.props.system,"settings.address");r||(r=window.location.origin);var s=r+"/srv/session/"+(t||"...")+"/deauthorize/",a={id:"deauthize_callback",value:s,locale:this.props.locale,readOnly:!0};return i.createElement(x,a,e("server-summary-oauth-deauthorize-callback-url"))},renderPrivacyPolicyURL:function(){var e=this.props.locale.translate,t=this.getServerProperty("type"),n=["facebook","google","windows"];if(!o.includes(n,t))return null;var r,r,s=o.get(this.props.system,"settings.address");s||(r=e("server-summary-system-address-missing"),s=window.location.origin);var a=s+"/srv/session/privacy/",c={id:"oauth_privacy",value:a,locale:this.props.locale,readOnly:!0};return i.createElement(x,c,e("server-summary-privacy-policy-url"),i.createElement(F,{type:"warning"},r))},renderTermsAndConditionsURL:function(){var e=this.props.locale.translate,t=this.getServerProperty("type"),n=["facebook","google","windows"];if(!o.includes(n,t))return null;var r,r,s=o.get(this.props.system,"settings.address");s||(r=e("server-summary-system-address-missing"),s=window.location.origin);var a=s+"/srv/session/terms/",c={id:"oauth_terms",value:a,locale:this.props.locale,readOnly:!0};return i.createElement(x,c,e("server-summary-terms-and-conditions-url"),i.createElement(F,{type:"warning"},r))},renderGitlabURLInput:function(){var e=this.props.locale.translate,t=this.getServerProperty("type"),n={id:"oauth_token",type:"url",value:this.getServerProperty("settings.oauth.base_url"),locale:this.props.locale,onChange:this.handleOAuthURLChange,readOnly:!this.isEditing(),spellCheck:!1},r=this.state.problems;return i.createElement(S,{open:"gitlab"===t},i.createElement(x,n,e("server-summary-oauth-gitlab-url"),i.createElement(F,null,e(r.base_url))))},renderOAuthClientIdInput:function(){var e=this.props.locale.translate,t={id:"oauth_id",value:this.getServerProperty("settings.oauth.client_id"),locale:this.props.locale,onChange:this.handleOAuthIdChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems,r="server-summary-oauth-client-id";switch(this.getServerProperty("type")){case"dropbox":r="server-summary-oauth-app-key";break;case"facebook":r="server-summary-oauth-app-id";break;case"github":r="server-summary-oauth-client-id";break;case"gitlab":r="server-summary-oauth-application-id";break;case"google":r="server-summary-oauth-client-id";break;case"windows":r="server-summary-oauth-application-id"}return i.createElement(x,t,e(r),i.createElement(F,null,e(n.client_id)))},renderOAuthClientSecretInput:function(){var e=this.props.locale.translate,t={id:"oauth_secret",value:this.getServerProperty("settings.oauth.client_secret"),locale:this.props.locale,onChange:this.handleOAuthSecretChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems,r="server-summary-oauth-client-secret";switch(this.getServerProperty("type")){case"dropbox":case"facebook":r="server-summary-oauth-app-secret";break;case"github":r="server-summary-oauth-client-secret";break;case"gitlab":r="server-summary-oauth-application-secret";break;case"google":r="server-summary-oauth-client-secret";break;case"windows":r="server-summary-oauth-application-secret"}return i.createElement(x,t,e(r),i.createElement(F,null,e(n.client_secret)))},renderAPIStatus:function(){var e,t=this.props.locale.translate,n=this.getServerProperty("type");if(o.includes(p.integrated,n)){e=t(this.getServerProperty("settings.api.access_token")?"server-summary-api-access-acquired":"server-summary-api-access-pending")}else e=t("server-summary-api-access-not-applicable");var r={id:"access",value:e,locale:this.props.locale,readOnly:!0};return i.createElement(x,r,t("server-summary-api-access"))},renderInstructions:function(){var e={folder:"server",topic:"server-summary",hidden:!this.isEditing(),locale:this.props.locale},t=this.getServerProperty("type");return t&&(e.topic+="-"+t),i.createElement("div",{className:"instructions"},i.createElement(C,e))},renderTaskList:function(){if(!this.props.server)return null;var e=this.props.locale.translate,t=(this.props.route.parameters,{server:this.props.server,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.handleTaskSelectionClear});return i.createElement("div",{className:"task-history"},i.createElement("h2",null,e("server-summary-activities")),i.createElement(R,t))},changeFlags:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r=o.assign({},this.props.server,e);return n.saveOne({table:"server"},r).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})},handleDisableClick:function(e){var t=this,n=this.props.locale.translate,r=n("server-summary-confirm-disable");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({disabled:!0}).then(function(e){if(e)return t.returnToList()})})},handleDeleteClick:function(e){var t=this,n=this.props.locale.translate,r=n("server-summary-confirm-delete");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(e){if(e)return t.returnToList()})})},handleReactivateClick:function(e){var t=this,n=this.props.locale.translate,r=n("server-summary-confirm-reactivate");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({disabled:!1,deleted:!1})})},openOAuthPopup:function(e){var t=this.props.database.use({by:this}),n=this.getServer(),r=t.getOAuthURL(n,e),s={width:800,height:600,left:window.screenLeft+Math.round((window.outerWidth-800)/2),top:window.screenTop+Math.round((window.outerHeight-600)/2),toolbar:"no",menubar:"no",status:"no"},i=o.map(s,function(e,t){return t+"="+e});window.open(r,"api-access-oauth",i.join(","))},handleAcquireClick:function(e){this.openOAuthPopup("activation")},handleTestClick:function(e){this.openOAuthPopup("test")},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var n=this.findProblems();if(o.some(n))return void this.setState({problems:n});var r=this.getServer(),s=this.getServerProperty("settings.oauth","original"),i=this.getServerProperty("settings.oauth","current"),a=!o.isEqual(s,i);this.setState({saving:!0,adding:!r.id,credentialsChanged:a,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t});return e.start().then(function(n){return e.saveOne({table:"server"},r).then(function(e){return t.setState({hasChanges:!1,saving:!1},function(){return t.setEditability(!1,e)}),null})}).catch(function(e){var n;n=409===e.statusCode?{name:"validation-duplicate-server-name"}:{unexpected:e.message},t.setState({problems:n,saving:!1})})})}},handleTitleChange:function(e){this.setServerProperty("details.title",e.target.value)},handleNameChange:function(e){var t=o.toLower(e.target.value).replace(/\W+/g,"");this.setServerProperty("name",t)},handleTypeOptionClick:function(e){this.setServerProperty("type",e.name)},handleWhitelistChange:function(e){var t=e.target.value.replace(/\s*[;,]\s*/g,"\n");this.setServerProperty("settings.user.whitelist",t)},handleApiTokenChange:function(e){this.setServerProperty("settings.api.token",e.target.value)},handleOAuthURLChange:function(e){var t=e.target.value;this.setServerProperty("settings.oauth.base_url",t);var n=o.clone(this.state);/https?:\/\/localhost\b/.test(t)?n.base_url="validation-localhost-is-wrong":delete n.base_url,this.setState({problems:n})},handleOAuthIdChange:function(e){this.setServerProperty("settings.oauth.client_id",e.target.value)},handleOAuthSecretChange:function(e){this.setServerProperty("settings.oauth.client_secret",e.target.value)},handleGitlabUserOptionClick:function(e){var t=this.getServerProperty("settings.user.mapping")||{};switch(e.name){case"import-admin-disabled":t.admin=void 0;break;case"import-admin-as-regular-user":t.admin="regular"!==t.admin?"regular":void 0;break;case"import-admin-as-moderator":t.admin="moderator"!==t.admin?"moderator":void 0;break;case"import-admin-as-admin":t.admin="admin"!==t.admin?"admin":void 0;break;case"import-user-disabled":t.user=void 0;break;case"import-user-as-guest":t.user="guest"!==t.user?"guest":void 0;break;case"import-user-as-regular-user":t.user="regular"!==t.user?"regular":void 0;break;case"import-user-as-moderator":t.user="moderator"!==t.user?"moderator":void 0;break;case"import-external-user-disabled":t.external_user=void 0;break;case"import-external-user-as-guest":t.external_user="guest"!==t.external_user?"guest":void 0;break;case"import-external-user-as-regular-user":t.external_user="regular"!==t.external_user?"regular":void 0}this.setServerProperty("settings.user.mapping",t)},handleOAuthUserOptionClick:function(e){var t=this.getServerProperty("settings.user.type");switch(e.name){case"import-disabled":t=void 0;break;case"import-user-as-guest":t="guest"!==t?"guest":void 0;break;case"import-user-as-regular-user":t="regular"!==t?"regular":void 0}this.setServerProperty("settings.user.type",t)},handleRoleOptionClick:function(e){var t=this.getServer(),n=o.slice(o.get(t,"settings.user.role_ids",[]));if("none"===e.name)n=[];else{var r=parseInt(e.name);o.includes(n,r)?o.pull(n,r):n.push(r)}this.setServerProperty("settings.user.role_ids",n)},handleTaskSelectionClear:function(){this.props.route.unanchor()}}),L={details:{},settings:h.default},I=l(function(e,t){var n=t.pick,r=function(e){return n(e.details.title)||e.name};return o.sortBy(e,r)})},"./pages/server-summary-page.scss":function(e,t){},"./pages/settings-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/objects/finders/system-finder.js"),l=n("../../common/src/objects/settings/system-settings.js"),u=n("../../common/src/data/database.js"),d=n("../../common/src/routing/route.js"),m=n("../../common/src/locale/locale.js"),p=n("../../common/src/theme/theme.js"),h=n("../../common/src/transport/payloads.js"),f=n("./widgets/push-button.jsx"),g=n("./widgets/instruction-block.jsx"),v=n("./widgets/text-field.jsx"),b=n("./widgets/multilingual-text-field.jsx"),y=n("./widgets/option-list.jsx"),j=n("./widgets/image-selector.jsx"),w=n("./widgets/data-loss-warning.jsx"),E=n("./widgets/unexpected-error.jsx");n("./pages/settings-page.scss"),e.exports=a.createClass({displayName:"SettingsPage",propTypes:{database:i.instanceOf(u).isRequired,route:i.instanceOf(d).isRequired,locale:i.instanceOf(m).isRequired,theme:i.instanceOf(p).isRequired,payloads:i.instanceOf(h).isRequired},statics:{parseURL:function(e,t){return d.match(e,["/settings/?"],function(e){return{edit:!!t.edit}})},getURL:function(e){var t;return e&&e.edit&&(t={edit:1}),{path:"/settings/",query:t}}},renderAsync:function(e){var t=(this.props.route.parameters,this.props.database.use({schema:"global",by:this})),n={system:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads};return e.show(o.createElement(x,n)),t.start().then(function(e){return c.findSystem(t).then(function(e){n.system=s.isEmpty(e)?null:e})}).then(function(){return o.createElement(x,n)})}});var C,x=e.exports.Sync=o.createClass({displayName:"SettingsPage.Sync",propTypes:{system:i.object,database:i.instanceOf(u).isRequired,route:i.instanceOf(d).isRequired,locale:i.instanceOf(m).isRequired,theme:i.instanceOf(p).isRequired,payloads:i.instanceOf(h).isRequired},getInitialState:function(){return{newSystem:null,saving:!1,problems:{}}},getSystem:function(e){return!this.isEditing()||e&&"current"!==e?this.props.system||S:this.state.newSystem||this.props.system||k},getSystemProperty:function(e,t){var n=this.getSystem(t);return s.get(n,e)},setSystemProperty:function(e,t){var n=this.getSystem("current"),r=s.decoupleSet(n,e,t),o=!0;s.isEqual(r,this.props.system)&&(r=null,o=!1),this.setState({newSystem:r,hasChanges:o})},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},setEditability:function(t){var n=this.props.route,r=s.clone(n.parameters);return r.edit=t,n.replace(e.exports,r)},getInputLanguages:function(){var e=this.getSystem();return s.get(e,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newSystem:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate;return o.createElement("div",{className:"settings-page"},this.renderButtons(),o.createElement("h2",null,e("settings-title")),o.createElement(E,null,this.state.problems.unexpected),this.renderForm(),this.renderInstructions())},renderButtons:function(){var e=this.props.locale.translate;return this.isEditing()?o.createElement("div",{key:"edit",className:"buttons"},o.createElement(f,{onClick:this.handleCancelClick},e("settings-cancel"))," ",o.createElement(f,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("settings-save")),o.createElement(w,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route})):o.createElement("div",{key:"view",className:"buttons"},o.createElement(f,{className:"emphasis",onClick:this.handleEditClick},e("settings-edit")))},renderForm:function(){return o.createElement("div",{className:"form"},this.renderTitleInput(),this.renderCompanyNameInput(),this.renderDescriptionInput(),this.renderSiteAddressInput(),this.renderPushRelayInput(),this.renderBackgroundSelector(),this.renderInputLanguageSelector())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getSystemProperty("details.title"),availableLanguageCodes:this.getInputLanguages(),locale:this.props.locale,onChange:this.handleTitleChange,readOnly:!this.isEditing()};return o.createElement(b,t,e("settings-site-title"))},renderCompanyNameInput:function(){var e=this.props.locale.translate,t={id:"company_name",value:this.getSystemProperty("details.company_name"),locale:this.props.locale,onChange:this.handleCompanyNameChange,readOnly:!this.isEditing()};return o.createElement(v,t,e("settings-company-name"))},renderDescriptionInput:function(){var e=this.props.locale.translate,t={id:"description",value:this.getSystemProperty("details.description"),availableLanguageCodes:this.getInputLanguages(),type:"textarea",locale:this.props.locale,onChange:this.handleDescriptionChange,readOnly:!this.isEditing()};return o.createElement(b,t,e("settings-site-description"))},renderSiteAddressInput:function(){var e=this.props.locale.translate,t={id:"address",type:"url",value:this.getSystemProperty("settings.address"),locale:this.props.locale,placeholder:"https://",onChange:this.handleAddressChange,readOnly:!this.isEditing(),spellCheck:!1};return o.createElement(v,t,e("settings-site-address"))},renderPushRelayInput:function(){var e=this.props.locale.translate,t={id:"relay",type:"url",value:this.getSystemProperty("settings.push_relay"),locale:this.props.locale,placeholder:"https://",onChange:this.handlePushRelayChange,readOnly:!this.isEditing(),spellCheck:!1};return o.createElement(v,t,e("settings-push-relay"))},renderBackgroundSelector:function(){var e=this.props.locale.translate,t={purpose:"background",resources:this.getSystemProperty("details.resources"),database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleBackgroundImageChange,readOnly:!this.isEditing()};return o.createElement(j,t,e("settings-background-image"))},renderInputLanguageSelector:function(){var e=this.props.locale.translate,t=this.props.locale.directory,n=this.getSystemProperty("settings.input_languages","current")||[],i=this.getSystemProperty("settings.input_languages","original")||[],a=s.map(t,function(e){var t,r=s.indexOf(n,e.code);return-1!==r&&(t=o.createElement("span",{className:"pos"},r+1)),{name:e.code,selected:s.includes(n,e.code),previous:s.includes(i,e.code),children:o.createElement("span",null,e.name," ",t)}}),c={onOptionClick:this.handleLanguageOptionClick,readOnly:!this.isEditing()};return o.createElement(y,c,o.createElement("label",null,e("settings-input-languages")),s.map(a,function(e,t){return o.createElement("option",r({key:t},e))}))},renderInstructions:function(){var e={folder:"settings",topic:"settings",hidden:!this.isEditing(),locale:this.props.locale};return o.createElement("div",{className:"instructions"},o.createElement(g,e))},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;this.state.saving||this.setState({saving:!0},function(){var e=t.props.database.use({schema:"global",by:t}),n=t.getSystem();return e.start().then(function(r){return e.saveOne({table:"system"},n).then(function(e){return t.props.payloads.dispatch(e),t.setState({hasChanges:!1,saving:!1,problems:{}},function(){t.setEditability(!1)}),null})}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n,saving:!1})})})},handleTitleChange:function(e){this.setSystemProperty("details.title",e.target.value)},handleCompanyNameChange:function(e){this.setSystemProperty("details.company_name",e.target.value)},handleAddressChange:function(e){this.setSystemProperty("settings.address",e.target.value)},handlePushRelayChange:function(e){this.setSystemProperty("settings.push_relay",e.target.value)},handleDescriptionChange:function(e){this.setSystemProperty("details.description",e.target.value)},handleBackgroundImageChange:function(e){this.setSystemProperty("details.resources",e.target.value)},handleLanguageOptionClick:function(e){var t=this.getSystem(),n=s.slice(t.settings.input_languages),r=e.name;s.includes(n,r)?s.pull(n,r):n.push(r),this.setSystemProperty("settings.input_languages",n)}}),_=(new Date).getTimezoneOffset()/60;C=-5<=_&&_<=0?"https://eu-west-1.push.trambar.io":"https://us-east-1.push.trambar.io";var k={details:{},settings:{address:window.location.protocol+"//"+window.location.host,push_relay:C}},S={details:{},settings:l.default}},"./pages/settings-page.scss":function(e,t){},"./pages/sign-in-page.jsx":function(e,t,n){"use strict";function r(e){switch(e){case"facebook":return"facebook-official";default:return e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/node_modules/moment/moment.js"),u=(n("../../common/src/transport/http-request.js"),n("../../common/src/data/database.js")),d=n("../../common/src/routing/route.js"),m=n("../../common/src/locale/locale.js"),p=n("../../common/src/theme/theme.js"),h=n("./widgets/push-button.jsx"),f=n("./widgets/text-field.jsx");n("./pages/sign-in-page.scss"),e.exports=c.createClass({displayName:"SignInPage",propTypes:{database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(m).isRequired,theme:a.instanceOf(p).isRequired},renderAsync:function(e){var t=this.props.database.use({by:this}),n={system:null,servers:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(g,n)),t.beginSession("admin").then(function(e){return n.system=e.system,n.servers=e.servers,i.createElement(g,n)})}});var g=e.exports.Sync=i.createClass({displayName:"SignInPage.Sync",propTypes:{system:a.object,servers:a.arrayOf(a.object),database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(m).isRequired,theme:a.instanceOf(p).isRequired},getInitialState:function(){return{username:"",password:"",savedCredentials:!1,submitting:!1,problem:null,errors:{}}},canSubmitForm:function(){return!!o.trim(this.state.username)&&!!o.trim(this.state.password)},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.system,r=t(o.get(n,"details.title"));return i.createElement("div",{className:"sign-in-page"},i.createElement("h2",null,e("sign-in-$title",r)),i.createElement("section",null,this.renderForm()),i.createElement("h2",null,e("sign-in-oauth")),i.createElement("section",null,this.renderOAuthButtons()))},renderForm:function(){var e=this.props.locale.translate,t=this.canSubmitForm(),n={id:"username",type:"text",value:this.state.username,disabled:this.state.submitting,locale:this.props.locale,onChange:this.handleUsernameChange},r={id:"password",type:"password",value:this.state.password,disabled:this.state.submitting,locale:this.props.locale,onChange:this.handlePasswordChange},s=!t;return this.state.savedCredentials&&(s=!1),this.state.submitting&&(s=!0),i.createElement("form",{onSubmit:this.handleFormSubmit},this.renderProblem(),i.createElement(f,n,e("sign-in-username")),i.createElement(f,r,e("sign-in-password")),i.createElement("div",{className:"button-row"},i.createElement(h,{disabled:s},e("sign-in-submit"))))},renderProblem:function(){if(!this.state.problem)return null;var e=this.props.locale.translate;return i.createElement("div",{className:"error"},i.createElement("i",{className:"fa fa-exclamation-circle"})," ",e("sign-in-problem-"+this.state.problem))},renderOAuthButtons:function(){var e=(this.props.locale.translate,o.sortBy(this.props.servers,["type"]));return i.createElement("div",{className:"oauth-buttons"},o.map(e,this.renderOAuthButton))},renderOAuthButton:function(e,t){var n=this.props.locale.translate,o=this.props.locale.pick,a=o(e.details.title)||n("server-type-"+e.type),c=r(e.type),l=this.props.database.getOAuthURL(e),u={className:"oauth-button",href:l,onClick:this.handleOAuthButtonClick,"data-id":e.id},d=this.state.errors[e.id];if(d){var n=this.props.locale.translate,m=n("sign-in-error-"+d.reason);return u.className+=" error",i.createElement("a",s({key:t},u),i.createElement("span",{className:"icon"},i.createElement("i",{className:"fa fa-fw fa-"+c})),i.createElement("span",{className:"error"},m))}return i.createElement("a",s({key:t},u),i.createElement("span",{className:"icon"},i.createElement("i",{className:"fa fa-fw fa-"+c})),i.createElement("span",{className:"label"},a))},componentDidMount:function(){this.mountTime=l()},openPopUpWindow:function(e){return new Promise(function(t,n){var r={width:800,height:600,left:window.screenLeft+Math.round((window.outerWidth-800)/2),top:window.screenTop+Math.round((window.outerHeight-600)/2),toolbar:"no",menubar:"no",status:"no"},s=o.map(r,function(e,t){return t+"="+e}),i=window.open(e,"sign-in",s.join(","));if(i){i.location=e;var a=setInterval(function(){i.closed&&(clearInterval(a),t())},50)}else n(new Error("Unable to open popup"))})},handleOAuthButtonClick:function(e){var t=this,n=e.currentTarget.getAttribute("href"),r=parseInt(e.currentTarget.getAttribute("data-id"));return e.preventDefault(),this.openPopUpWindow(n).then(function(){return t.props.database.use({by:t}).checkSession().catch(function(e){var n=o.clone(t.state.errors);n[r]=e,t.setState({errors:n})})})},handleUsernameChange:function(e){var t=l(),n=e.target.value,r=!1;n.length>3&&t-this.mountTime<500&&(r=!0),this.setState({username:n,savedCredentials:r})},handlePasswordChange:function(e){var t=e.target.value;this.setState({password:t,savedCredentials:!1})},handleFormSubmit:function(e){var t=this;e.preventDefault(),this.canSubmitForm()&&this.setState({submitting:!0},function(){t.props.database.use({by:t}).submitPassword(t.state.username,t.state.password).catch(function(e){var n;switch(e.statusCode){case 401:n="incorrect-username-password";break;case 403:n="no-support-for-username-password";break;default:n="unexpected-error"}t.setState({problem:n,submitting:!1})})})}})},"./pages/sign-in-page.scss":function(e,t){},"./pages/start-page.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=(n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/node_modules/react/react.js")),o=s.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/objects/finders/system-finder.js"),c=n("../../common/src/data/database.js"),l=n("../../common/src/routing/route.js"),u=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js");n("./pages/start-page.scss"),e.exports=i.createClass({displayName:"StartPage",propTypes:{database:o.instanceOf(c).isRequired,route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,theme:o.instanceOf(d).isRequired},statics:{parseURL:function(e,t){return l.match(e,["/:extra?"],function(e){return r.trimEnd(e.extra,"/")?null:e})},getURL:function(e){return{path:"/",query:void 0}}},renderAsync:function(e){var t=this,o=this.props.database.use({by:this}),i={locale:this.props.locale};return o.start().then(function(e){return a.findSystem(o).then(function(e){if(!r.isEmpty(e))return t.props.route.replace(n("./pages/project-list-page.jsx"));t.redirectTimeout||(t.redirectTimeout=setTimeout(function(){t.props.route.replace(n("./pages/settings-page.jsx"),{edit:!0})},2500))})}).then(function(e){return s.createElement(m,i)}).catch(function(e){return null})}});var m=e.exports.Sync=s.createClass({displayName:"StartPage.Sync",propType:{locale:o.instanceOf(u).isRequired},render:function(){var e=this.props.locale.translate;return s.createElement("div",{className:"start-page "+this.props.stage},s.createElement("h2",null,e("welcome")))}})},"./pages/start-page.scss":function(e,t){},"./pages/user-list-page.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=(n("../../common/node_modules/moment/moment.js"),n("../../common/node_modules/react/react.js")),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/memoize.js"),l=n("../../common/src/utils/component-refs.js"),u=n("../../common/src/objects/finders/project-finder.js"),d=n("../../common/src/objects/finders/role-finder.js"),m=n("../../common/src/objects/finders/user-finder.js"),p=n("../../common/src/objects/types/user-types.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/routing/route.js"),g=n("../../common/src/locale/locale.js"),v=n("../../common/src/theme/theme.js"),b=n("./widgets/push-button.jsx"),y=n("./widgets/combo-button.jsx"),j=n("./widgets/sortable-table.jsx"),w=j.TH,E=n("./widgets/profile-image.jsx"),C=n("./tooltips/project-tooltip.jsx"),x=n("./tooltips/role-tooltip.jsx"),_=n("./tooltips/modified-time-tooltip.jsx"),k=n("./widgets/action-badge.jsx"),S=n("./widgets/action-confirmation.jsx"),R=n("./widgets/data-loss-warning.jsx"),F=n("./widgets/unexpected-error.jsx");n("./pages/user-list-page.scss"),e.exports=a.createClass({displayName:"UserListPage",propTypes:{database:i.instanceOf(h).isRequired,route:i.instanceOf(f).isRequired,locale:i.instanceOf(g).isRequired,theme:i.instanceOf(v).isRequired},statics:{parseURL:function(e,t){return f.match(e,["/users/?"],function(e){return{edit:!!t.edit}})},getURL:function(e){var t;return e&&e.edit&&(t={edit:1}),{path:"/users/",query:t}}},renderAsync:function(e){var t=(this.props.route.parameters,this.props.database.use({schema:"global",by:this})),n={users:null,projects:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(O,n)),t.start().then(function(e){return m.findAllUsers(t).then(function(e){n.users=e})}).then(function(){return e.show(o.createElement(O,n)),u.findProjectsWithMembers(t,n.users).then(function(e){n.projects=e})}).then(function(){return e.show(o.createElement(O,n)),d.findRolesOfUsers(t,n.users).then(function(e){n.roles=e})}).then(function(e){return o.createElement(O,n)})}});var O=e.exports.Sync=o.createClass({displayName:"UserListPage.Sync",propTypes:{users:i.arrayOf(i.object),projects:i.arrayOf(i.object),roles:i.arrayOf(i.object),database:i.instanceOf(h).isRequired,route:i.instanceOf(f).isRequired,locale:i.instanceOf(g).isRequired,theme:i.instanceOf(v).isRequired},getInitialState:function(){return this.components=l({confirmation:S}),{sortColumns:["name"],sortDirections:["asc"],restoringUserIds:[],disablingUserIds:[],hasChanges:!1,renderingFullList:this.isEditing(),problems:{}}},setEditability:function(t){var n=this.props.route,r={edit:t};return n.replace(e.exports,r)},isEditing:function(e){return e=e||this.props,e.route.parameters.edit},componentWillReceiveProps:function(e){var t=this;this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({renderingFullList:!0,restoringUserIds:[],disablingUserIds:[],hasChanges:!1}):setTimeout(function(){t.isEditing()||t.setState({renderingFullList:!1,problems:{}})},500))},render:function(){var e=this.props.locale.translate;return o.createElement("div",{className:"user-list-page"},this.renderButtons(),o.createElement("h2",null,e("user-list-title")),o.createElement(F,null,this.state.problems.unexpected),this.renderTable(),o.createElement(S,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),o.createElement(R,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate;if(this.isEditing())return o.createElement("div",{className:"buttons"},o.createElement(b,{onClick:this.handleCancelClick},e("user-list-cancel"))," ",o.createElement(b,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e("user-list-save")));var t=s.isEmpty(this.props.users);return o.createElement("div",{className:"buttons"},o.createElement(y,null,o.createElement("option",{name:"add",onClick:this.handleAddClick},e("user-list-add")))," ",o.createElement(b,{className:"emphasis",disabled:t,onClick:this.handleEditClick},e("user-list-edit")))},renderTable:function(){var e={sortColumns:this.state.sortColumns,sortDirections:this.state.sortDirections,onSort:this.handleSort};return this.state.renderingFullList&&(e.expanded=this.isEditing(),e.expandable=!0,e.selectable=!0),o.createElement(j,e,o.createElement("thead",null,this.renderHeadings()),o.createElement("tbody",null,this.renderRows()))},renderHeadings:function(){return o.createElement("tr",null,this.renderNameColumn(),this.renderUsernameColumn(),this.renderTypeColumn(),this.renderRolesColumn(),this.renderProjectsColumn(),this.renderEmailColumn(),this.renderModifiedTimeColumn())},renderRows:function(){var e=this.props.users;return this.state.renderingFullList||(e=T(e)),e=P(e,this.props.roles,this.props.projects,this.props.locale,this.state.sortColumns,this.state.sortDirections),s.map(e,this.renderRow)},renderRow:function(e){var t,n,i=this.props.locale.translate,a=[];e.deleted?(a.push("deleted"),n=i("user-list-status-deleted")):e.disabled&&(a.push("disabled"),n=i("user-list-status-disabled")),this.state.renderingFullList&&(e.deleted||e.disabled?s.includes(this.state.restoringUserIds,e.id)&&a.push("selected"):(a.push("fixed"),s.includes(this.state.disablingUserIds,e.id)||a.push("selected")),t=this.handleRowClick);var c={className:a.join(" "),"data-user-id":e.id,title:n,onClick:t};return o.createElement("tr",r({key:e.id},c),this.renderNameColumn(e),this.renderUsernameColumn(e),this.renderTypeColumn(e),this.renderRolesColumn(e),this.renderProjectsColumn(e),this.renderEmailColumn(e),this.renderModifiedTimeColumn(e))},renderNameColumn:function(e){var t=this.props.locale.translate,r=this.props.locale.pick;if(e){var i,a,c=r(e.details.name);if(this.state.renderingFullList){var l,u;e.deleted||e.disabled?(l=!1,u=s.includes(this.state.restoringUserIds,e.id)):(l=!0,u=!s.includes(this.state.disablingUserIds,e.id)),l!==u&&(a=u?o.createElement(k,{type:"reactivate",locale:this.props.locale}):o.createElement(k,{type:"disable",locale:this.props.locale}))}else{var d=this.props.route,m={user:e.id};i=d.find(n("./pages/user-summary-page.jsx"),m)}var p=o.createElement(E,{user:e,theme:this.props.theme});return o.createElement("td",null,o.createElement("a",{href:i},p," ",c),a)}return o.createElement(w,{id:"name"},t("table-heading-name"))},renderUsernameColumn:function(e){if(this.props.theme.isBelowMode("narrow"))return null;var t=this.props.locale.translate;if(e){e.username;return o.createElement("td",null,e.username)}return o.createElement(w,{id:"username"},t("table-heading-username"))},renderTypeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;return e?o.createElement("td",null,t("user-list-type-"+e.type)):o.createElement(w,{id:"type"},t("table-heading-type"))},renderProjectsColumn:function(e){if(this.props.theme.isBelowMode("super-wide"))return null;var t=this.props.locale.translate;if(e){var n={projects:N(this.props.projects,e),omit:1,route:this.props.route,locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return o.createElement("td",null,o.createElement(C,n))}return o.createElement(w,{id:"projects"},t("table-heading-projects"))},renderRolesColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var n={roles:L(this.props.roles,e),route:this.props.route,locale:this.props.locale,theme:this.props.theme,disabled:this.state.renderingFullList};return o.createElement("td",null,o.createElement(x,n))}return o.createElement(w,{id:"roles"},t("table-heading-roles"))},renderEmailColumn:function(e){if(this.props.theme.isBelowMode("wide"))return null;var t=this.props.locale.translate;if(e){var n="-",r=e.details.email;if(r){var s;this.state.renderingFullList||(s="mailto:"+r),n=o.createElement("a",{href:s},r)}return o.createElement("td",{className:"email"},n)}return o.createElement(w,{id:"email"},t("table-heading-email"))},renderModifiedTimeColumn:function(e){if(this.props.theme.isBelowMode("standard"))return null;var t=this.props.locale.translate;if(e){var n={time:e.mtime,disabled:this.state.renderingFullList,locale:this.props.locale};return o.createElement("td",null,o.createElement(_,n))}return o.createElement(w,{id:"mtime"},t("table-heading-last-modified"))},handleSort:function(e){this.setState({sortColumns:e.columns,sortDirections:e.directions})},handleAddClick:function(e){var t=this.props.route,r={user:"new"};return t.push(n("./pages/user-summary-page.jsx"),r)},handleEditClick:function(e){this.setEditability(!0)},handleCancelClick:function(e){this.setEditability(!1)},handleSaveClick:function(e){var t=this,n=this.props.locale.translate,r=this.state.disablingUserIds,o=this.state.restoringUserIds,i=[n("user-list-confirm-disable-$count",r.length),n("user-list-confirm-reactivate-$count",o.length)],a=[s.isEmpty(r)||void 0,s.isEmpty(o)||void 0];return this.components.confirmation.askSeries(i,a).then(function(e){if(e){t.setState({problems:{}});var n=t.props.database.use({schema:"global",by:t});return n.start().then(function(e){var i=[];return s.each(t.props.users,function(e){var t={};if(s.includes(r,e.id))t.disabled=!0;else{if(!s.includes(o,e.id))return;t.disabled=t.deleted=!1}var n=s.assign({},e,t);i.push(n)}),n.save({table:"user"},i).then(function(e){return t.setState({hasChanges:!1},function(){t.setEditability(!1)}),null}).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})})}})},handleRowClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-user-id")),n=s.find(this.props.users,{id:t}),r=s.slice(this.state.restoringUserIds),o=s.slice(this.state.disablingUserIds);n.deleted||n.disabled?s.includes(r,n.id)?s.pull(r,n.id):r.push(n.id):s.includes(o,n.id)?s.pull(o,n.id):o.push(n.id);var i=!s.isEmpty(r)||!s.isEmpty(o);this.setState({restoringUserIds:r,disablingUserIds:o,hasChanges:i})}}),P=c(function(e,t,n,r,o,i){var a=r.pick;return o=s.map(o,function(e){switch(e){case"name":return function(e){return a(e.details.name)};case"username":return function(e){return s.toLower(e.username)};case"type":return function(e){return s.indexOf(p,e.type)};case"roles":return function(e){var n=s.first(L(t,e));return n?a(n.details.title)||n.name:""};case"projects":return function(e){var t=s.first(N(n,e));return t?a(t.details.title)||t.name:""};case"email":return"details.email";default:return e}}),s.orderBy(e,o,i)}),T=c(function(e){return s.filter(e,function(e){return!0!==e.disabled&&!0!==e.deleted})}),N=c(function(e,t){return s.filter(e,function(e){return s.includes(e.user_ids,t.id)})}),L=c(function(e,t){var n=s.keyBy(e,"id");return s.filter(s.map(t.role_ids,function(e){return n[e]}))})},"./pages/user-list-page.scss":function(e,t){},"./pages/user-summary-page.jsx":function(e,t,n){"use strict";function r(e,t){if(/https?:/.test(e)){e=o.trim(e.replace(/\?.*/,""));var n=o.filter(e.split("/"));return n[n.length-1]}return e}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/src/utils/memoize.js"),u=n("../../common/src/utils/component-refs.js"),d=n("../../common/src/objects/finders/project-finder.js"),m=n("../../common/src/objects/finders/role-finder.js"),p=n("../../common/src/objects/finders/user-finder.js"),h=n("../../common/src/objects/types/user-types.js"),f=n("../../common/src/objects/settings/user-settings.js"),g=n("../../common/src/objects/finders/statistics-finder.js"),v=n("../../common/src/objects/finders/system-finder.js"),b=n("../../common/src/utils/slug-generator.js"),y=n("../../common/src/data/database.js"),j=n("../../common/src/routing/route.js"),w=n("../../common/src/locale/locale.js"),E=n("../../common/src/theme/theme.js"),C=n("../../common/src/transport/payloads.js"),x=n("./widgets/push-button.jsx"),_=n("./widgets/combo-button.jsx"),k=n("./widgets/instruction-block.jsx"),S=n("./widgets/text-field.jsx"),R=(n("./widgets/multilingual-text-field.jsx"),n("./widgets/option-list.jsx")),F=n("./widgets/image-selector.jsx"),O=n("../../common/src/widgets/collapsible-container.jsx"),P=n("./widgets/activity-chart.jsx"),T=n("./widgets/input-error.jsx"),N=n("./widgets/action-confirmation.jsx"),L=n("./widgets/data-loss-warning.jsx"),I=n("./widgets/unexpected-error.jsx");n("./pages/user-summary-page.scss"),e.exports=c.createClass({displayName:"UserSummaryPage",propTypes:{database:a.instanceOf(y).isRequired,route:a.instanceOf(j).isRequired,locale:a.instanceOf(w).isRequired,theme:a.instanceOf(E).isRequired,payloads:a.instanceOf(C).isRequired},statics:{parseURL:function(e,t){return j.match(e,["/users/:user/","/projects/:project/members/:user/?"],function(e){return{user:"new"===e.user?"new":j.parseId(e.user),project:j.parseId(e.project),edit:!!t.edit}})},getURL:function(e){var t,n;return t=e.project?"/projects/"+e.project+"/members/"+e.user+"/":"/users/"+e.user+"/",e.edit&&(n={edit:1}),{path:t,query:n}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),r={system:null,user:null,roles:null,project:null,statistics:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads};return e.show(i.createElement(A,r)),n.start().then(function(e){return v.findSystem(n).then(function(e){r.system=e})}).then(function(){if("new"!==t.user)return p.findUser(n,t.user).then(function(e){r.user=e})}).then(function(){return e.show(i.createElement(A,r)),m.findActiveRoles(n).then(function(e){r.roles=e})}).then(function(){if(t.project)return e.show(i.createElement(A,r)),d.findProject(n,t.project).then(function(e){r.project=e})}).then(function(){if(e.show(i.createElement(A,r)),r.project&&r.user)return g.findDailyActivitiesOfUser(n,r.project,r.user).then(function(e){r.statistics=e})}).then(function(){return i.createElement(A,r)})}});var A=e.exports.Sync=i.createClass({displayName:"UserSummaryPage.Sync",propTypes:{system:a.object,user:a.object,roles:a.arrayOf(a.object),project:a.object,statistics:a.object,database:a.instanceOf(y).isRequired,route:a.instanceOf(j).isRequired,locale:a.instanceOf(w).isRequired,theme:a.instanceOf(E).isRequired,payloads:a.instanceOf(C).isRequired},getInitialState:function(){return this.components=u({confirmation:N}),{newUser:null,hasChanges:!1,showingSocialLinks:!1,saving:!1,adding:!1,problems:{}}},getUser:function(e){return!this.isEditing()||e&&"current"!==e?this.props.user||M:this.state.newUser||this.props.user||M},getUserProperty:function(e,t){var n=this.getUser(t);return o.get(n,e)},setUserProperty:function(e,t){var n=this.getUser("current"),r=o.decoupleSet(n,e,t);if("details.name"===e){var s=b.fromPersonalName(n.details.name),i=b.fromPersonalName(r.details.name);n.username&&n.username!==s||(r.username=i)}o.size(r.username)>128&&(r.username=r.username.substr(0,128));var a=!0;o.isEqual(r,this.props.user)&&(r=null,a=!1),this.setState({newUser:r,hasChanges:a})},findProblems:function(){var e={},t=this.getUser();return t.username||(e.username="validation-required"),t.type||(e.type="validation-required"),e},isCreating:function(e){return e=e||this.props,"new"===e.route.parameters.user},isEditing:function(e){return e=e||this.props,this.isCreating(e)||e.route.parameters.edit},isProjectMember:function(e){return e=e||this.props,!!e.route.parameters.project},setEditability:function(t,n){var r=this.props.route;if(!this.isCreating()||t||n){var s=o.clone(r.parameters);return s.edit=t,n&&(s.user=n.id),r.replace(e.exports,s)}return this.returnToList()},returnToList:function(){var e=this.props.route;if(e.parameters.project){var t={project:e.parameters.project};return e.push(n("./pages/member-list-page.jsx"),t)}return e.push(n("./pages/user-list-page.jsx"))},startNew:function(){var t=this.props.route,n=o.clone(t.parameters);return n.user="new",t.replace(e.exports,n)},getInputLanguages:function(){return o.get(this.props.system,"settings.input_languages",[])},componentWillReceiveProps:function(e){this.isEditing()!==this.isEditing(e)&&(this.isEditing(e)?this.setState({newUser:null,hasChanges:!1}):this.setState({problems:{}}))},render:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.isProjectMember(),r=this.getUser(),s=t(r.details.name);return i.createElement("div",{className:"user-summary-page"},this.renderButtons(),i.createElement("h2",null,e(n?"user-summary-member-$name":"user-summary-$name",s)),i.createElement(I,null,this.state.problems.unexpected),this.renderForm(),this.renderSocialLinksToggle(),this.renderSocialLinksForm(),this.renderInstructions(),this.renderChart(),i.createElement(N,{ref:this.components.setters.confirmation,locale:this.props.locale,theme:this.props.theme}),i.createElement(L,{changes:this.state.hasChanges,locale:this.props.locale,theme:this.props.theme,route:this.props.route}))},renderButtons:function(){var e=this.props.locale.translate,t=this.isProjectMember();if(this.isEditing())return i.createElement("div",{className:"buttons"},i.createElement(x,{onClick:this.handleCancelClick},e("user-summary-cancel"))," ",i.createElement(x,{className:"emphasis",disabled:!this.state.hasChanges,onClick:this.handleSaveClick},e(t?"user-summary-member-save":"user-summary-save")));var n,r=this.props.user,s=!r||!r.deleted&&!r.disabled;return n=s?this.state.adding?"add":"return":"reactivate",i.createElement("div",{className:"buttons"},i.createElement(_,{preselected:n},i.createElement("option",{name:"return",onClick:this.handleReturnClick},e(t?"user-summary-member-return":"user-summary-return")),i.createElement("option",{name:"add",onClick:this.handleAddClick},e("user-summary-add")),i.createElement("option",{name:"disable",disabled:!s,separator:!0,onClick:this.handleDisableClick},e("user-summary-disable")),i.createElement("option",{name:"delete",disabled:!s,onClick:this.handleDeleteClick},e("user-summary-delete")),i.createElement("option",{name:"reactivate",hidden:s,onClick:this.handleReactivateClick},e("user-summary-reactivate")))," ",i.createElement(x,{className:"emphasis",onClick:this.handleEditClick},e(t?"user-summary-member-edit":"user-summary-edit")))},renderForm:function(){return i.createElement("div",{className:"form"},this.renderNameInput(),this.renderUsernameInput(),this.renderEmailInput(),this.renderPhoneInput(),this.renderProfileImageSelector(),this.renderTypeSelector(),this.renderRoleSelector())},renderNameInput:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=t(this.getUserProperty("details.name")),r={id:"name",value:n,locale:this.props.locale,onChange:this.handleNameChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,r,e("user-summary-name"))},renderUsernameInput:function(){var e=this.props.locale.translate,t={id:"username",value:this.getUserProperty("username"),locale:this.props.locale,onChange:this.handleUsernameChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems;return i.createElement(S,t,e("user-summary-username"),i.createElement(T,null,e(n.username)))},renderEmailInput:function(){var e=this.props.locale.translate,t={id:"email",type:"email",value:this.getUserProperty("details.email"),locale:this.props.locale,onChange:this.handleEmailChange,readOnly:!this.isEditing(),spellCheck:!1},n=this.state.problems;return i.createElement(S,t,e("user-summary-email"),i.createElement(T,null,e(n.email)))},renderPhoneInput:function(){var e=this.props.locale.translate,t={id:"phone",type:"tel",value:this.getUserProperty("details.phone"),locale:this.props.locale,onChange:this.handlePhoneChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-phone"))},renderProfileImageSelector:function(){var e=this.props.locale.translate,t={purpose:"profile-image",desiredWidth:500,desiredHeight:500,resources:this.getUserProperty("details.resources"),database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleProfileImageChange,readOnly:!this.isEditing()};return i.createElement(F,t,e("user-summary-profile-image"))},renderTypeSelector:function(){var e=this.props.locale.translate,t=this.getUserProperty("type","current"),n=this.getUserProperty("type","original"),r=o.map(h,function(r){return{name:r,selected:t===r,previous:n===r,children:e("user-summary-type-"+r)}}),a={onOptionClick:this.handleTypeOptionClick,readOnly:!this.isEditing()},c=this.state.problems;return i.createElement(R,a,i.createElement("label",null,e("user-summary-type"),i.createElement(T,null,e(c.type))),o.map(r,function(e,t){return i.createElement("option",s({key:t},e))}))},renderRoleSelector:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getUserProperty("role_ids","current")||[],r=this.getUserProperty("role_ids","original")||[],a=!!this.getUserProperty("id"),c=D(this.props.roles,this.props.locale),l=o.concat({name:"none",selected:o.isEmpty(n),previous:a?o.isEmpty(r):void 0,children:e("user-summary-role-none")},o.map(c,function(e){return{name:String(e.id),selected:o.includes(n,e.id),previous:o.includes(r,e.id),children:t(e.details.title)||t.name}})),u={onOptionClick:this.handleRoleOptionClick,readOnly:!this.isEditing()};return i.createElement(R,u,i.createElement("label",null,e("user-summary-roles")),o.map(l,function(e,t){return i.createElement("option",s({key:t},e))}))},renderSocialLinksToggle:function(){var e=this.props.locale.translate,t=this.state.showingSocialLinks?"angle-double-up":"angle-double-down";return i.createElement("h2",{className:"social-toggle",onClick:this.handleSocialLinksToggleClick},e("user-summary-social-links")," ",i.createElement("i",{className:"fa fa-"+t}))},renderSocialLinksForm:function(){this.props.locale.translate,this.getUser(),this.isEditing();return i.createElement("div",{className:"form social"},i.createElement(O,{open:this.state.showingSocialLinks},this.renderSkypeNameInput(),this.renderIChatInput(),this.renderTwitterInput(),this.renderGithubURLInput(),this.renderGitlabURLInput(),this.renderLinkedInURLInput(),this.renderStackoverflowURLInput()))},renderSkypeNameInput:function(){var e=this.props.locale.translate,t={id:"skype",value:this.getUserProperty("details.skype_username"),locale:this.props.locale,onChange:this.handleSkypeUsernameChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-skype"))},renderIChatInput:function(){var e=this.props.locale.translate,t={id:"ichat",value:this.getUserProperty("details.ichat_username"),locale:this.props.locale,onChange:this.handleIchatUsernameChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-ichat"))},renderTwitterInput:function(){var e=this.props.locale.translate,t={id:"twitter",value:this.getUserProperty("details.twitter_username"),locale:this.props.locale,onChange:this.handleTwitterUsernameChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-twitter"))},renderGithubURLInput:function(){var e=this.props.locale.translate,t={id:"github",type:"url",value:this.getUserProperty("details.github_url"),locale:this.props.locale,onChange:this.handleGitHubURLChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-github"))},renderGitlabURLInput:function(){var e=this.props.locale.translate,t={id:"github",type:"url",value:this.getUserProperty("details.gitlab_url"),locale:this.props.locale,onChange:this.handleGitlabURLChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-gitlab"))},renderLinkedInURLInput:function(){var e=this.props.locale.translate,t={id:"linkedin",type:"url",value:this.getUserProperty("details.linkedin_url"),locale:this.props.locale,onChange:this.handleLinkedinURLChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-linkedin"))},renderStackoverflowURLInput:function(){var e=this.props.locale.translate,t={id:"stackoverflow",type:"url",value:this.getUserProperty("details.stackoverflow_url"),locale:this.props.locale,onChange:this.handleStackoverflowURLChange,readOnly:!this.isEditing(),spellCheck:!1};return i.createElement(S,t,e("user-summary-stackoverflow"))},renderInstructions:function(){var e={folder:"user",topic:"user-summary",hidden:!this.isEditing(),locale:this.props.locale};return i.createElement("div",{className:"instructions"},i.createElement(k,e))},renderChart:function(){if(!this.isProjectMember())return null;if(this.isCreating())return null;var e=this.props.locale.translate,t={statistics:this.props.statistics,locale:this.props.locale,theme:this.props.theme};return i.createElement("div",{className:"statistics"},i.createElement(P,t,e("user-summary-statistics")))},changeFlags:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r=o.assign({},this.props.user,e);return n.saveOne({table:"user"},r).catch(function(e){var n={unexpected:e.message};t.setState({problems:n})})},handleDisableClick:function(e){var t=this,n=this.props.locale.translate,r=n("user-summary-confirm-disable");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({disabled:!0}).then(function(e){if(e)return t.returnToList()})})},handleDeleteClick:function(e){var t=this,n=this.props.locale.translate,r=n("user-summary-confirm-delete");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({deleted:!0}).then(function(e){if(e)return t.returnToList()})})},handleReactivateClick:function(e){var t=this,n=this.props.locale.translate,r=n("user-summary-confirm-reactivate");return this.components.confirmation.ask(r).then(function(e){if(e)return t.changeFlags({disabled:!1,deleted:!1})})},handleReturnClick:function(e){return this.returnToList()},handleAddClick:function(e){return this.startNew()},handleEditClick:function(e){return this.setEditability(!0)},handleCancelClick:function(e){return this.setEditability(!1)},handleSaveClick:function(e){var t=this;if(!this.state.saving){var n=this.findProblems();if(o.some(n))return void this.setState({problems:n});var r=this.getUser();this.setState({saving:!0,adding:!r.id,problems:{}},function(){var e=t.props.database.use({schema:"global",by:t});return e.start().then(function(n){return e.saveOne({table:"user"},r).then(function(n){if(t.props.payloads.dispatch(n),t.setState({hasChanges:!1,saving:!1},function(){return t.setEditability(!1,n)}),t.props.project){var r=t.props.project.user_ids;if(!o.includes(r,n.id)){var s=o.union(r,[n.id]),i={id:t.props.project.id,user_ids:s};return e.saveOne({table:"project"},i)}}return null})}).catch(function(e){var n;n=409===e.statusCode?{username:"validation-duplicate-user-name"}:{unexpected:e.message},t.setState({problems:n,saving:!1})})})}},handleNameChange:function(e){this.setUserProperty("details.name",e.target.value)},handleUsernameChange:function(e){var t=o.toLower(e.target.value).replace(/\W+/g,"");this.setUserProperty("username",t)},handleEmailChange:function(e){this.setUserProperty("details.email",e.target.value)},handlePhoneChange:function(e){this.setUserProperty("details.phone",e.target.value)},handleProfileImageChange:function(e){this.setUserProperty("details.resources",e.target.value)},handleTypeOptionClick:function(e){this.setUserProperty("type",e.name)},handleRoleOptionClick:function(e){var t=this.getUser(),n=o.slice(t.role_ids);if("none"===e.name)n=[];else{var r=parseInt(e.name);o.includes(n,r)?o.pull(n,r):n.push(r)}this.setUserProperty("role_ids",n)},handleSocialLinksToggleClick:function(e){this.setState({showingSocialLinks:!this.state.showingSocialLinks})},handleSkypeUsernameChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.skype_username",t)},handleIchatUsernameChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.ichat_username",t)},handleTwitterUsernameChange:function(e){var t=r(e.target.value);this.setUserProperty("details.twitter_username",t)},handleLinkedinURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.linkedin_url",t)},handleGitHubURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.github_url",t)},handleGitlabURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.gitlab_url",t)},handleStackoverflowURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.stackoverflow_url",t)}}),M={details:{},settings:f.default},D=l(function(e,t){var n=t.pick,r=function(e){return n(e.details.title)||e.name};return o.sortBy(e,r)});l(function(e,t){if(t.role_ids){var n=o.keyBy(e,"id");return o.filter(o.map(t.role_ids,function(e){return n[e]}))}})},"./pages/user-summary-page.scss":function(e,t){},"./tooltips/activity-tooltip.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/objects/types/story-types.js"),l=n("../../common/src/mixins/update-check.js"),u=n("./widgets/tooltip.jsx");n("./tooltips/activity-tooltip.scss"),e.exports=s.createClass({displayName:"ActivityTooltip",mixins:[l],propTypes:{statistics:o.object,locale:o.instanceOf(i),theme:o.instanceOf(a)},render:function(){var e=this;if(null==this.props.statistics)return null;var t=this.props.locale.translate,n=t("activity-tooltip-$count",this.props.statistics.total);void 0===this.props.statistics.total&&(n="-");var o=[];return r.each(c,function(n,r){var i=e.props.statistics[n];if(i){var a=c.icons[n];o.push(s.createElement("div",{className:"item",key:r},s.createElement(a,{className:"icon"})," ",t("activity-tooltip-$count-"+n,i)))}}),s.createElement(u,{className:"activity",disabled:this.props.disabled},s.createElement("inline",null,n),s.createElement("window",null,o))}})},"./tooltips/activity-tooltip.scss":function(e,t){},"./tooltips/modified-time-tooltip.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/node_modules/moment/moment.js"),a=n("../../common/src/locale/locale.js"),c=(n("../../common/src/mixins/update-check.js"),n("./widgets/tooltip.jsx"));e.exports=s.createClass({displayName:"ModifiedTimeTooltip",propTypes:{time:o.string,disabled:o.bool,locale:o.instanceOf(a).isRequired},componentWillMount:function(){this.updateLabels()},componentWillReceiveProps:function(e){this.updateLabels(e)},updateLabels:function(e){e=e||this.props;var t;e.time&&(t=i(e.time),t.locale(e.locale.localeCode));var n={relativeTime:t?t.fromNow():null,absoluteTime:t?t.format("lll"):null};r.isEqual(n,this.state)||this.setState(n)},render:function(){return s.createElement(c,{disabled:this.props.disabled},s.createElement("inline",null,this.state.relativeTime),s.createElement("window",null,this.state.absoluteTime))},componentDidMount:function(){l.push(this)},componentWillUnmount:function(){r.pull(l,this)}});var l=[];setInterval(function(){r.each(l,function(e){e.updateLabels()})},3e4)},"./tooltips/project-tooltip.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/routing/route.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/theme/theme.js"),l=n("../../common/src/mixins/update-check.js"),u=n("./widgets/tooltip.jsx");n("./tooltips/project-tooltip.scss"),e.exports=s.createClass({displayName:"ProjectTooltip",mixins:[l],propTypes:{projects:o.arrayOf(o.object),route:o.instanceOf(i).isRequired,locale:o.instanceOf(a).isRequired,theme:o.instanceOf(c).isRequired},render:function(){if(null==this.props.projects)return null;var e=this.props.locale.translate,t=this.props.locale.pick,o=this.props.route,i=this.props.projects,a="-";if(i.length>0){var c,l=i[0];this.props.disabled||(c=o.find(n("./pages/project-summary-page.jsx"),{project:l.id}));var d=t(l.details.title)||l.name,a=s.createElement("a",{href:c,key:0},d);i=r.slice(i,1)}var m;if(i.length>0){var p,h=e("project-tooltip-$count-others",i.length);i.length>10&&(i=r.slice(i,0,10),p=s.createElement("div",{className:"ellipsis"},s.createElement("i",{className:"fa fa-ellipsis-v"})));var f=r.map(i,function(e,r){var i=o.find(n("./pages/project-summary-page.jsx"),{project:e.id}),a=t(e.details.title)||e.name;return s.createElement("div",{className:"item",key:r},s.createElement("a",{href:i},a))}),g=o.find(n("./pages/project-list-page.jsx"),{});m=e("tooltip-$first-and-$tooltip",a,s.createElement(u,{className:"project",disabled:this.props.disabled||0===f.length,key:1},s.createElement("inline",null,h),s.createElement("window",null,f,p,s.createElement("div",{className:"bottom"},s.createElement("a",{href:g},e("tooltip-more"))))))}else m=a;return s.createElement("span",null,m)}})},"./tooltips/project-tooltip.scss":function(e,t){},"./tooltips/repository-tooltip.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=(n("../../common/src/routing/route.js"),n("../../common/src/locale/locale.js")),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/mixins/update-check.js"),l=n("./widgets/tooltip.jsx");n("./tooltips/repository-tooltip.scss"),e.exports=s.createClass({displayName:"RepositoryTooltip",mixins:[c],propTypes:{repos:o.arrayOf(o.object),project:o.object.isRequired,route:o.object.isRequired,locale:o.instanceOf(i).isRequired,theme:o.instanceOf(a).isRequired,disabled:o.bool},render:function(){var e=this;if(null==this.props.repos)return null;var t=this.props.locale.translate,o=this.props.locale.pick,i=this.props.route,a=t("repository-tooltip-$count",this.props.repos.length),c=r.map(this.props.repos,function(r,a){var c=i.find(n("./pages/repo-summary-page.jsx"),{project:e.props.project.id,repo:r.id}),l=r.type,u=o(r.details.title)||t("server-type-"+r.type);return s.createElement("div",{className:"item",key:a},s.createElement("a",{href:c},s.createElement("i",{className:"fa fa-"+l})," ",u))}),u=i.find(n("./pages/repo-list-page.jsx"),{project:this.props.project.id});return s.createElement(l,{className:"repository",disabled:this.props.disabled||0===c.length},s.createElement("inline",null,a),s.createElement("window",null,c,s.createElement("div",{className:"bottom"},s.createElement("a",{href:u},t("tooltip-more")))))}})},"./tooltips/repository-tooltip.scss":function(e,t){},"./tooltips/role-tooltip.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=(n("../../common/src/routing/route.js"),n("../../common/src/locale/locale.js")),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/mixins/update-check.js"),l=n("./widgets/tooltip.jsx");n("./tooltips/role-tooltip.scss"),e.exports=s.createClass({displayName:"RoleTooltip",mixins:[c],propTypes:{roles:o.arrayOf(o.object),disabled:o.bool,route:o.object.isRequired,locale:o.instanceOf(i).isRequired,theme:o.instanceOf(a).isRequired},render:function(){if(null==this.props.roles)return null;var e=this.props.locale.translate,t=this.props.locale.pick,o=this.props.route,i=this.props.roles,a="-";if(i.length>0){var c,u=i[0];this.props.disabled||(c=o.find(n("./pages/role-summary-page.jsx"),{role:u.id}));var d=t(u.details.title)||u.name,a=s.createElement("a",{href:c,key:0},d);i=r.slice(i,1)}var m;if(i.length>0){var p,h=e("role-tooltip-$count-others",i.length);i.length>10&&(i=r.slice(i,0,10),p=s.createElement("div",{className:"ellipsis"},s.createElement("i",{className:"fa fa-ellipsis-v"})));var f=r.map(i,function(e,r){var i=o.find(n("./pages/role-summary-page.jsx"),{role:e.id}),a=t(e.details.title)||e.name;return s.createElement("div",{className:"item",key:r},s.createElement("a",{href:i},a))}),g=o.find(n("./pages/role-list-page.jsx"));m=e("tooltip-$first-and-$tooltip",a,s.createElement(l,{className:"role",disabled:this.props.disabled||0===f.length,key:1},s.createElement("inline",null,h),s.createElement("window",null,f,p,s.createElement("div",{className:"bottom"},s.createElement("a",{href:g},e("tooltip-more"))))))}else m=a;return s.createElement("span",null,m)}})},"./tooltips/role-tooltip.scss":function(e,t){},"./tooltips/user-tooltip.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/routing/route.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/theme/theme.js"),l=n("../../common/src/mixins/update-check.js"),u=n("./widgets/tooltip.jsx"),d=n("./widgets/profile-image.jsx");n("./tooltips/user-tooltip.scss"),e.exports=s.createClass({displayName:"UserTooltip",mixins:[l],propTypes:{users:o.arrayOf(o.object),project:o.object,route:o.instanceOf(i).isRequired,locale:o.instanceOf(a).isRequired,theme:o.instanceOf(c).isRequired,disabled:o.bool},render:function(){var e=this;if(null==this.props.users)return null;var t,o=this.props.locale.translate,i=this.props.route,a=o("user-tooltip-$count",this.props.users.length),c=this.props.users;c.length>10&&(c=r.slice(c,0,10),t=s.createElement("div",{className:"ellipsis"},s.createElement("i",{className:"fa fa-ellipsis-v"})));var l,m=r.map(c,function(t,r){var o;return o=e.props.project?i.find(n("./pages/user-summary-page.jsx"),{project:e.props.project.id,user:t.id}):i.find(n("./pages/user-summary-page.jsx"),{user:t.id}),s.createElement("div",{className:"item",key:r},s.createElement("a",{href:o},s.createElement(d,{user:t,theme:e.props.theme})," ",t.details.name))});return l=this.props.project?i.find(n("./pages/member-list-page.jsx"),{project:this.props.project.id}):i.find(n("./pages/user-list-page.jsx")),s.createElement(u,{className:"user",disabled:0===m.length},s.createElement("inline",null,a),s.createElement("window",null,m,t,s.createElement("div",{className:"bottom"},s.createElement("a",{href:l},o("tooltip-more")))))}})},"./tooltips/user-tooltip.scss":function(e,t){},"./widgets/action-badge.jsx":function(e,t,n){"use strict";function r(e){var t,n=e.locale.translate,r="action-badge";switch(e.type){case"add":case"approve":case"restore":case"reactivate":r+=" add",t="plus";break;case"remove":case"archive":case"disable":r+=" remove",t="times"}var o=n("action-badge-"+e.type);return s.createElement("div",{className:r},s.createElement("i",{className:"fa fa-"+t})," ",o)}var s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/locale/locale.js");e.exports=r,n("./widgets/action-badge.scss"),r.propTypes={type:o.string.isRequired,locale:o.instanceOf(i).isRequired}},"./widgets/action-badge.scss":function(e,t){},"./widgets/action-confirmation.jsx":function(e,t,n){"use strict";var r=(n("../../common/node_modules/lodash/lodash.js"),n("../../common/node_modules/bluebird/js/browser/bluebird.js")),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/mixins/update-check.js"),l=n("./dialogs/confirmation-dialog-box.jsx");e.exports=s.createClass({displayName:"ActionConfirmation",mixins:[c],propTypes:{locale:o.instanceOf(i).isRequired,theme:o.instanceOf(a).isRequired},getInitialState:function(){return{showing:!1,rendering:!1,message:null,resolve:null,promise:null}},render:function(){if(!this.state.rendering)return null;var e=(this.props.locale.translate,{show:this.state.showing,dangerous:!0,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleConfirm,onCancel:this.handleCancel});return s.createElement(l,e,this.state.message)},ask:function(e,t){if("boolean"==typeof t){if(this.state.promise){var n=this.state.promise;return t?this.handleConfirm():this.handleCancel(),n}return r.resolve(t)}if(!this.state.promise){var s,n=new r(function(e){s=e});return this.setState({showing:!0,rendering:!0,message:e,resolve:s,promise:n}),n}this.setState({message:e})},askSeries:function(e,t){var n=this;return r.reduce(e,function(e,r,s){return!!e&&n.ask(r,t?t[s]:void 0)},!0)},handleConfirm:function(e){var t=this.state.resolve;this.setState({showing:!1,rendering:!1,resolve:null,promise:null},function(){t&&t(!0)})},handleCancel:function(e){var t=this,n=this.state.resolve;this.setState({showing:!1,resolve:null,promise:null},function(){n&&n(!1),setTimeout(function(){t.state.showing||t.setState({rendering:!1})})})}})},"./widgets/activity-chart.jsx":function(e,t,n){"use strict";function r(e){return parseInt(e.substr(8))}function s(e){return a.createElement("div",{className:"item"},a.createElement("svg",{className:"ct-chart-bar",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{className:"ct-series ct-series-"+e.series},a.createElement("line",{className:"ct-bar",x1:0,y1:5,x2:10,y2:5}))),a.createElement("span",{className:"label"},e.label))}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("../../common/node_modules/lodash/lodash.js"),a=(n("../../common/node_modules/promise/index.js"),n("../../common/node_modules/react/react.js")),c=a.PropTypes,l=n("../../common/src/widgets/chartist.jsx"),u=n("../../common/node_modules/moment/moment.js"),d=n("../../common/src/utils/date-tracker.js"),m=n("../../common/src/utils/memoize.js"),p=n("../../common/src/locale/locale.js"),h=n("../../common/src/theme/theme.js"),f=n("../../common/src/objects/types/story-types.js");n("./widgets/activity-chart.scss"),e.exports=a.createClass({displayName:"ActivityChart",propTypes:{statistics:c.object,locale:c.instanceOf(p),theme:c.instanceOf(h)},render:function(){return a.createElement("div",{className:"activity-chart"},a.createElement("h2",null,this.props.children),this.renderLegend(),this.renderChart())},renderChart:function(){if(!this.props.statistics)return a.createElement("div",{className:"scroll-container"},a.createElement("div",{className:"contents no-data"}));var e=u(d.today),t=u(this.props.statistics.range.start),n=u(this.props.statistics.range.end),s=e.clone().endOf("month"),o=t.clone().startOf("month"),i=n.clone().endOf("month");s.diff(i,"month")<=1?i=s:i.add(1,"month");var c=g(o,i),m=v(this.props.statistics.daily,c),p=b(m,!0),h=g(o,i),f={type:"bar",data:{labels:h,series:m},options:{fullWidth:!0,height:200,chartPadding:{left:-25,right:30},stackBars:!0,high:p,low:0,axisX:{labelInterpolationFnc:function(e){var t=r(e);return 1===t?e:t>10&&e==d.today?"Today":""}}},onDraw:this.handleDraw},y=Math.round(.75*h.length)+"em";return a.createElement("div",{className:"scroll-container"},a.createElement("div",{className:"contents",style:{width:y}},a.createElement(l,f)))},renderLegend:function(){if(!this.props.statistics)return null;var e=this.props.locale.translate,t=this.props.statistics.to_date,n={};i.each(f,function(e,r){t[e]>0&&(n[e]=r)});var r=i.map(n,function(t,n){var r={series:String.fromCharCode("a".charCodeAt(0)+t),label:e("activity-chart-legend-"+n)};return a.createElement(s,o({key:t},r))});return i.isEmpty(r)&&(r="Â "),a.createElement("div",{className:"legend"},r)},handleDraw:function(e){if("label"===e.type&&"y"===e.axis.units.pos&&e.element.attr({x:e.axis.chartRect.width()+20}),"grid"===e.type&&"x"===e.axis.units.pos){var t=e.axis.ticks[e.index];1===r(t)?e.element.addClass("month-start"):t===d.today&&e.element.addClass("today")}}});var g=m(function(e,t){for(var n=[],r=e.clone();r<=t;r.add(1,"day"))n.push(r.format("YYYY-MM-DD"));return n}),v=(m(function(e,t){for(var n=[],r=e.clone();r<=t;r.add(1,"month")){n.push(r.format("ll"));for(var s=r.daysInMonth(),o=1;o<s;o++)n.push(null)}return n}),m(function(e,t){return i.map(f,function(n){var r=!0,s=i.map(t,function(t){var s=i.get(e,[t,n],0);return s&&(r=!1),s});return r?[]:s})})),b=m(function(e,t){var n=0;if(t){var r=[];i.each(e,function(e){i.each(e,function(e,t){r[t]=r[t]?r[t]+e:e})}),i.isEmpty(r)||(n=i.max(r))}else i.each(e,function(e){var t=i.max(e);t>n&&(n=t)});return n<=20?20:n<=50?50:100*Math.ceil(n/100)})},"./widgets/activity-chart.scss":function(e,t){},"./widgets/chartist.scss":function(e,t){},"./widgets/combo-button.jsx":function(e,t,n){"use strict";function r(e,t){for(var n=e;n!==document.body.parentNode;n=n.parentNode)if(n===t)return!0;return!1}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/node_modules/react-dom/index.js");n("./widgets/combo-button.scss"),e.exports=i.createClass({displayName:"ComboButton",propType:{preselected:a.string,alert:a.bool},getDefaultProps:function(){return{preselected:void 0,alert:!1}},getInitialState:function(){return{open:!1,selected:this.props.preselected}},componentWillReceiveProps:function(e){this.props.preselected!==e.preselected&&this.setState({selected:e.preselected})},render:function(){return i.createElement("div",{className:"combo-button"},this.renderMainButton(),this.renderSideButton(),this.renderMenu())},renderMainButton:function(){var e=this,t=i.Children.toArray(this.props.children),n=o.find(t,function(t){return t.props.name===e.state.selected});n||(n=o.first(t));var r=o.omit(n.props,"separator");return r.className=r.className?"main "+r.className:"main",this.props.alert&&(r.className+=" alert"),r.onClick||(r.onClick=this.handleSideButtonClick),i.createElement("button",r,n.props.children)},renderSideButton:function(){return i.createElement("button",{className:"side",onClick:this.handleSideButtonClick},i.createElement("i",{className:"fa fa-angle-down"}))},renderMenu:function(){if(!this.state.open)return null;var e=i.Children.toArray(this.props.children);return i.createElement("div",{className:"container"},i.createElement("div",{className:"menu"},o.map(e,this.renderOption)))},renderOption:function(e,t){if(!e.props.name||e.props.hidden)return null;var n={"data-name":e.props.name,className:"option",onClick:this.handleItemClick},r=o.omit(e.props,"name","separator","disabled");return e.props.disabled&&(n.className+=" disabled",n.onClick=null,r.onClick=null),e.props.separator&&(n.className+=" separator"),i.createElement("div",s({key:t},n),i.createElement("div",r,e.props.children))},componentDidUpdate:function(e,t){var n=document.getElementById("app-container");!t.open&&this.state.open?n.addEventListener("mousedown",this.handleBodyMouseDown):t.open&&!this.state.open&&n.removeEventListener("mousedown",this.handleBodyMouseDown)},handleSideButtonClick:function(e){this.setState({open:!this.state.open})},handleItemClick:function(e){var t=e.currentTarget.getAttribute("data-name");this.setState({selected:t,open:!1})},handleBodyMouseDown:function(e){var t=c.findDOMNode(this);r(e.target,t)||this.setState({open:!1})}})},"./widgets/combo-button.scss":function(e,t){},"./widgets/data-loss-warning.jsx":function(e,t,n){"use strict";var r=(n("../../common/node_modules/lodash/lodash.js"),n("../../common/node_modules/react/react.js")),s=r.PropTypes,o=n("../../common/src/utils/component-refs.js"),i=n("../../common/src/routing/route.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/theme/theme.js"),l=n("../../common/src/mixins/update-check.js"),u=n("./widgets/action-confirmation.jsx");e.exports=r.createClass({displayName:"DataLossWarning",mixins:[l],propTypes:{route:s.instanceOf(i).isRequired,locale:s.instanceOf(a).isRequired,theme:s.instanceOf(c).isRequired,changes:s.bool},getInitialState:function(){return this.components=o({confirmation:u}),{}},componentWillReceiveProps:function(e){this.props.changes!==e.changes&&(e.changes?e.route.keep(this.confirmRouteChange):e.route.free(this.confirmRouteChange))},render:function(){var e=this.components.setters,t={ref:e.confirmation,locale:this.props.locale,theme:this.props.theme};return r.createElement(u,t)},confirmRouteChange:function(){var e=this.props.locale.translate,t=e("confirmation-data-loss");return this.components.confirmation.ask(t)}})},"./widgets/image-selector.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/react/react.js"),o=s.PropTypes,i=n("../../common/src/media/media-loader.js"),a=n("../../common/src/data/database.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js"),u=n("../../common/src/transport/payloads.js"),d=n("./dialogs/image-cropping-dialog-box.jsx"),m=n("./dialogs/image-album-dialog-box.jsx"),p=n("../../common/src/widgets/resource-view.jsx");n("./widgets/image-selector.scss"),e.exports=s.createClass({displayName:"ImageSelector",propTypes:{purpose:o.string,desiredWidth:o.number,desiredHeight:o.number,resources:o.arrayOf(o.object),readOnly:o.bool,database:o.instanceOf(a).isRequired,locale:o.instanceOf(c).isRequired,theme:o.instanceOf(l).isRequired,payloads:o.instanceOf(u).isRequired,onChange:o.func},getDefaultProps:function(){return{resources:[],readOnly:!1}},getInitialState:function(){return{showingCroppingDialogBox:!1,renderingCroppingDialogBox:!1,showingAlbumDialogBox:!1,renderingAlbumDialogBox:!1}},getImage:function(){return r.find(this.props.resources,{type:"image"})},setImage:function(e){if(this.props.desiredWidth&&this.props.desiredHeight&&!e.clip){var t=this.props.desiredWidth/this.props.desiredHeight,n=e.width,s=Math.round(n/t),o=0,i=Math.round((e.height-s)/2);i<0&&(s=e.height,n=Math.round(s*t),o=Math.round((e.width-n)/2),i=0),e=r.clone(e),e.clip={left:o,top:i,width:n,height:s}}var a=r.slice(this.props.resources),c=r.findIndex(a,{type:"image"});-1!==c?e?a[c]=e:a.splice(c,1):a.push(e),this.props.onChange&&(this.value=a,this.props.onChange({type:"change",target:this}))},render:function(){var e=["image-selector"];return this.props.readOnly&&e.push("readonly"),s.createElement("div",{className:e.join(" ")},s.createElement("label",null,this.props.children),s.createElement("div",{className:"contents"},this.renderImage(),this.renderOptions()),this.renderDialogBox())},renderImage:function(){var e,t=this.getImage();if(t){var n=this.props.theme.getImageURL(t,{clip:null,remote:!0}),r={href:n,target:"_blank","data-width":t.width,"data-height":t.height,onClick:this.handleImageClick},o={resource:t,clip:!(!this.props.desiredWidth||!this.props.desiredHeight),height:120,theme:this.props.theme};return s.createElement("div",{className:"image"},s.createElement("a",r,s.createElement(p,o)))}return e=this.props.desiredWidth&&this.props.desiredHeight?Math.round(120*this.props.desiredWidth/this.props.desiredHeight):160,s.createElement("div",{className:"image"},s.createElement("div",{className:"placeholder",style:{width:e,height:120}},s.createElement("i",{className:"fa fa-photo"})))},renderOptions:function(){return s.createElement("div",{className:"options"},this.renderChooseOption(),this.renderUploadOption(),this.renderResizeOption())},renderResizeOption:function(){if(!this.props.desiredWidth||!this.props.desiredHeight)return null;var e=this.props.locale.translate,t={className:"option"};return this.props.readOnly||(t.onClick=this.handleCropClick),this.getImage()||(t.className+=" disabled"),s.createElement("div",t,s.createElement("i",{className:"fa fa-crop"})," ",e("image-selector-crop-image"))},renderChooseOption:function(){if(!this.props.purpose)return null;var e=this.props.locale.translate,t={className:"option"};return this.props.readOnly||(t.onClick=this.handleChooseClick),s.createElement("div",t,s.createElement("i",{className:"fa fa-th"})," ",e("image-selector-choose-from-album"))},renderUploadOption:function(){var e={type:"file",value:"",accept:"image/*",disabled:this.props.readOnly,onChange:this.handleUploadChange},t=this.props.locale.translate;return s.createElement("label",{className:"option"},s.createElement("i",{className:"fa fa-upload"})," ",t("image-selector-upload-file"),s.createElement("input",e))},renderDialogBox:function(){var e=this.getImage();if(this.state.renderingAlbumDialogBox){var t={show:this.state.showingAlbumDialogBox,purpose:this.props.purpose,image:e,database:this.props.database,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onSelect:this.handleImageSelect,onCancel:this.handleDialogCancel};return s.createElement(m,t)}if(this.state.renderingCroppingDialogBox){var t={show:this.state.showingCroppingDialogBox,image:e,desiredWidth:this.props.desiredWidth,desiredHeight:this.props.desiredHeight,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleImageSectionSelect,onCancel:this.handleDialogCancel};return s.createElement(d,t)}return null},handleChooseClick:function(e){this.setState({showingAlbumDialogBox:!0,renderingAlbumDialogBox:!0})},handleCropClick:function(e){this.setState({showingCroppingDialogBox:!0,renderingCroppingDialogBox:!0})},handleImageSelect:function(e){var t=r.clone(e.image);t.type="image",this.setImage(t),this.handleDialogCancel()},handleImageSectionSelect:function(e){var t=r.clone(this.getImage());t.clip=e.clippingRect,this.setImage(t),this.handleDialogCancel()},handleUploadChange:function(e){var t=this,n=e.target.files[0];if(n){var r=this.props.payloads.add("image").attachFile(n);return i.getImageMetadata(n).then(function(e){var n={payload_token:r.token,width:e.width,height:e.height,format:e.format,type:"image"};return t.setImage(n)})}},handleDialogCancel:function(e){var t=this;this.state.showingAlbumDialogBox&&(this.setState({showingAlbumDialogBox:!1}),setTimeout(function(){t.state.showingAlbumDialogBox||t.setState({renderingAlbumDialogBox:!1})},500)),this.state.showingCroppingDialogBox&&(this.setState({showingCroppingDialogBox:!1}),setTimeout(function(){t.state.showingCroppingDialogBox||t.setState({renderingCroppingDialogBox:!1})},500))},handleImageClick:function(e){var t=e.currentTarget.href;if(t){var n=parseInt(e.currentTarget.getAttribute("data-width")),r=parseInt(e.currentTarget.getAttribute("data-height")),s=n,o=r,i=screen.width-100,a=screen.height-100;s>i&&(s=i,o=Math.round(s*r/n)),o>a&&(o=a,s=Math.round(o*n/r));var c=Math.round((screen.width-o)/3),l=Math.round((screen.height-o)/3),u=["left="+c,"top="+l,"width="+s,"height="+o];window.open(t,"_blank",u.join(",")),e.preventDefault()}}})},"./widgets/image-selector.scss":function(e,t){},"./widgets/input-error.jsx":function(e,t,n){"use strict";function r(e){if(!e.children)return null;var t="input-error",n="exclamation-circle";return"warning"===e.type&&(t+=" warning",n="exclamation-triangle"),s.createElement("div",{className:t},s.createElement("i",{className:"fa fa-"+n})," ",e.children)}var s=n("../../common/node_modules/react/react.js");s.PropTypes,n("../../common/src/locale/locale.js");e.exports=r,n("./widgets/input-error.scss")},"./widgets/input-error.scss":function(e,t){},"./widgets/instruction-block.jsx":function(e,t,n){"use strict";function r(e,t,n){return s(e,t,n).then(function(t){return o(u.parse(t),e)})}function s(e,t,r){return n("./instructions lazy recursive ^\\.\\/.*\\.md$")("./"+e+"/"+t+"."+r+".md").catch(function(){return n("./instructions lazy recursive ^\\.\\/.*\\.en\\.md$")("./"+e+"/"+t+".en.md")})}function o(e,t){if("string"==typeof e)return e;if(e instanceof Array)return a.map(e,function(e){return o(e,t)});if("img"===e.type){var r=e.props.src;return r&&!/^\w+:/.test(r)?n("./instructions lazy recursive ^\\.\\/.*$")("./"+t+"/"+r).then(function(t){return c.cloneElement(e,{src:t})}).catch(function(t){return e}):e}if("a"===e.type){var r=e.props.href;return r&&!/^\w+:/.test(r)?n("./instructions lazy recursive ^\\.\\/.*$")("./"+t+"/"+r).then(function(t){var n={href:t};return/\.html$/.test(t)?n.target="_blank":n.download=t,c.cloneElement(e,n)}).catch(function(t){return e}):c.cloneElement(e,{target:"_blank"})}return e.props&&!i.isEmpty(e.props.children)?a.map(e.props.children,function(e){return o(e,t)}).then(function(t){return c.cloneElement(e,{},t)}):e}var i=n("../../common/node_modules/lodash/lodash.js"),a=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),c=n("../../common/node_modules/react/react.js"),l=c.PropTypes,u=n("../../common/node_modules/mark-gor/react.js"),d=n("../../common/src/locale/locale.js"),m=n("../../common/src/mixins/update-check.js"),p=n("../../common/src/widgets/collapsible-container.jsx");n("./widgets/instruction-block.scss"),e.exports=c.createClass({displayName:"InstructionBlock",mixins:[m],propTypes:{folder:l.string.isRequired,topic:l.string.isRequired,hidden:l.bool,locale:l.instanceOf(d).isRequired},getDefaultProps:function(){return{hidden:!1}},getInitialState:function(){return{contents:null}},componentWillMount:function(){var e=this;if(this.props.topic){r(this.props.folder,this.props.topic,this.props.locale.languageCode).then(function(t){e.setState({contents:t})})}},componentWillReceiveProps:function(e){var t=this;if(this.props.topic!==e.topic||this.props.locale!==e.locale){r(e.folder,e.topic,e.locale.languageCode).then(function(e){t.setState({contents:e})})}},render:function(){if(!this.state.contents)return null;var e=["instruction-block"];return this.props.hidden&&e.push("hidden"),c.createElement("div",{className:e.join(" ")},c.createElement(p,{open:!this.props.hidden},c.createElement("div",{className:"contents"},this.state.contents)))}})},"./widgets/instruction-block.scss":function(e,t){},"./widgets/multilingual-text-field.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/src/locale/locale.js"),c=n("../../common/src/widgets/autosize-text-area.jsx");n("./widgets/multilingual-text-field.scss"),e.exports=o.createClass({displayName:"MultilingualTextField",propTypes:{type:i.string,value:i.oneOfType([i.object,i.string]),availableLanguageCodes:i.arrayOf(i.string),locale:i.instanceOf(a).isRequired,onChange:i.func},getDefaultProps:function(){return{type:"text",value:{},availableLanguageCodes:[]}},getInitialState:function(){var e,t=s.keys(this.props.value),n=this.props.availableLanguageCodes,r=this.props.locale.languageCode;return e=s.includes(t,r)?r:s.isEmpty(t)?s.includes(n,r)?r:s.isEmpty(n)?r:n[0]:t[0],{selectedLanguageCode:e,hoverLanguageCode:null,expandedByMouseOver:!1,expandedByTouch:!1,arrowPosition:0}},getLanguages:function(){var e=s.keys(this.props.value),t=this.props.availableLanguageCodes,n=s.union(t,e);0===n.length&&n.push(this.props.locale.languageCode);var r=s.keyBy(this.props.locale.directory,"code");return s.filter(s.map(n,function(e){return r[e]}))},componentWillReceiveProps:function(e){if(this.props.locale!==e.locale){var t=e.locale.languageCode,n=this.props.availableLanguageCodes;s.includes(n,t)&&this.setState({selectedLanguageCode:t})}},render:function(){var e=["multilingual-text-field"],t="input",n=s.omit(this.props,"children","availableLanguageCodes","locale");if("textarea"===this.props.type&&(t=c,n=s.omit(n,"type")),this.props.readOnly){e.push("readonly"),this.state.expandedByMouseOver||this.state.expandedByTouch||e.push("collapsed");var r=this.props.locale.translate;n.placeholder=r("text-field-placeholder-none"),n.spellCheck=!1}return this.getLanguages().length>1&&e.push("multiple-languages"),this.props.value instanceof Object?n.value=this.props.value[this.state.selectedLanguageCode]||"":"string"==typeof this.props.value?n.value=this.props.value:n.value="",n.value&&!1===n.spellCheck&&(n.value+="\ufeff"),n.lang=this.state.selectedLangaugeCode,n.onChange=this.handleTextChange,o.createElement("div",{className:e.join(" ")},o.createElement("label",{htmlFor:this.props.id},this.props.children),o.createElement(t,n),this.renderTabs())},renderTabs:function(){var e=this.getLanguages();return e.length<=1?null:o.createElement("div",{className:"tabs"},s.map(e,this.renderTab),this.renderPopup())},renderTab:function(e,t){var n={className:"tab",lang:e.code,onClick:this.handleLanguageClick,onMouseOver:this.handleLanguageMouseOver,onMouseOut:this.handleLanguageMouseOut};return e.code===this.state.selectedLanguageCode&&(n.className+=" selected",n.onClick=n.onMouseOver=n.onMouseOut=null),o.createElement("div",r({key:t},n),e.name)},renderPopup:function(){if(!this.state.hoverLanguageCode||this.props.readOnly)return null;var e=this.props.value[this.state.hoverLanguageCode];return s.trim(e)?o.createElement("div",{className:"bubble"},o.createElement("div",{className:"arrow",style:{left:this.state.arrowPosition}}),o.createElement("div",{className:"box"},e)):null},handleTextChange:function(e){var t=this,n=e.target.value,r=this.state.selectedLanguageCode;if(n)this.props.value instanceof Object?this.value=s.clone(this.props.value):"string"==typeof this.props.value?this.value=s.transform(this.props.availableLanguageCodes,function(e,n){e[n]=t.props.value},{}):this.value={},this.value[r]=n;else if(this.value=s.omit(this.props.value,r),!s.includes(this.props.availableLanguageCodes,r)){var o=s.first(this.getLanguages());o&&this.setState({selectedLanguageCode:o.code})}this.props.onChange&&this.props.onChange({type:"change",target:this})},handleLanguageClick:function(e){var t=e.currentTarget.lang;this.setState({selectedLanguageCode:t,hoverLanguageCode:null})},handleLanguageMouseOver:function(e){var t=e.currentTarget,n=t.parentNode,r=n.getBoundingClientRect(),s=t.getBoundingClientRect(),o=s.left+s.width/2-r.left,i=t.lang;this.setState({hoverLanguageCode:i,arrowPosition:o})},handleLanguageMouseOut:function(e){e.currentTarget.lang===this.state.hoverLanguageCode&&this.setState({hoverLanguageCode:null})}})},"./widgets/multilingual-text-field.scss":function(e,t){},"./widgets/navigation-tree.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/objects/finders/project-finder.js"),l=n("../../common/src/objects/finders/repo-finder.js"),u=n("../../common/src/objects/finders/role-finder.js"),d=n("../../common/src/objects/finders/server-finder.js"),m=n("../../common/src/objects/finders/user-finder.js"),p=n("../../common/src/utils/component-refs.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/routing/route.js"),g=n("../../common/src/locale/locale.js"),v=n("../../common/src/theme/theme.js"),b=n("../../common/src/widgets/collapsible-container.jsx");n("./widgets/navigation-tree.scss"),e.exports=a.createClass({displayName:"NavigationTree",propTypes:{disabled:i.bool,database:i.instanceOf(h).isRequired,route:i.instanceOf(f).isRequired,locale:i.instanceOf(g).isRequired,theme:i.instanceOf(v).isRequired},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:"global",by:this}),i={project:null,user:null,role:null,repo:null,server:null,disabled:this.props.disabled,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(y,i)),n.start().then(function(e){var o={};return"number"==typeof t.project&&(o.project=c.findProject(n,t.project)),"number"==typeof t.user&&(o.user=m.findUser(n,t.user)),"number"==typeof t.role&&(o.role=u.findRole(n,t.role)),"number"==typeof t.repo&&(o.repo=l.findRepo(n,t.repo)),"number"==typeof t.server&&(o.server=d.findServer(n,t.server)),s.props(o).then(function(e){r.assign(i,e)}).catch(function(e){})}).then(function(){return o.createElement(y,i)}).catch(function(e){if(401===e.statusCode)return o.createElement(y,i);throw e})}});var y=e.exports.Sync=o.createClass({displayName:"NavigationTree.Sync",propTypes:{disabled:i.bool,project:i.object,user:i.object,role:i.object,repo:i.object,server:i.object,route:i.instanceOf(f).isRequired,locale:i.instanceOf(g).isRequired,theme:i.instanceOf(v).isRequired},getInitialState:function(){return this.components=p({activeLink:HTMLAnchorElement,container:HTMLElement,arrow:HTMLElement}),{arrowPosition:0,arrowCount:0,arrowAction:"",project:this.props.project||j,user:this.props.user||j,role:this.props.role||j,repo:this.props.repo||j,server:this.props.server||j}},componentWillReceiveProps:function(e){var t=r.keys(this.state),n=r.pickBy(r.pick(e,t),Boolean);r.isEmpty(n)||this.setState(n)},render:function(){var e=this.components.setters,t=["navigation-tree"];this.props.disabled&&t.push("disabled");var n=this.getRootNodes();return o.createElement("div",{ref:e.container,className:t.join(" ")},r.map(n,this.renderRootNode),this.renderArrow())},renderRootNode:function(e,t){return this.renderNode(e,1,t)},renderNode:function(e,t,n){if(e){var r;this.isActive(e)&&(r=this.components.setters.activeLink);var s;this.props.disabled||(s=e.url);return o.createElement("div",{key:n,className:"level"+t},o.createElement("a",{ref:r,href:s},e.label),this.renderChildNodes(e,t+1))}},renderChildNodes:function(e,t){var n=this;if(r.isEmpty(e.children))return null;var s={open:e.showChildren||this.hasActiveChild(e),children:r.map(e.children,function(e,r){return n.renderNode(e,t,r)})};return o.createElement(b,s)},renderArrow:function(){var e=["zero","one","two","three","four"],t={ref:this.components.setters.arrow,className:"arrow "+e[this.state.arrowCount]+" "+this.state.arrowAction,style:{top:this.state.arrowPosition}};return o.createElement("div",t,o.createElement("i",{className:"fa fa-play first"}),o.createElement("i",{className:"fa fa-play second"}),o.createElement("i",{className:"fa fa-play third"}),o.createElement("i",{className:"fa fa-play fourth"}))},componentDidMount:function(){var e=this;setTimeout(function(){e.repositionArrow()},100)},componentDidUpdate:function(e,t){e.route!==this.props.route&&this.repositionArrow()},isActive:function(e){return e.url===this.props.route.path},hasActiveChild:function(e){var t=this;return r.some(e.children,function(e){return t.isActive(e)||t.hasActiveChild(e)})},getRootNodes:function(){return[this.getProjectListNode(),this.getUserListNode(),this.getRoleListNode(),this.getServerListNode(),this.getSettingsNode()]},getProjectListNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-projects"),url:t.find(n("./pages/project-list-page.jsx")),children:[this.getProjectNode()]}},getProjectNode:function(){var e,t=this.props.locale.translate,r=this.props.locale.pick,s=this.props.route,i=s.parameters,a=this.state.project;e="new"===i.project?o.createElement("i",null,t("nav-project-new")):r(a.details.title)||a.name||"-";var c=s.find(n("./pages/project-summary-page.jsx"),{project:i.project}),l="number"==typeof i.project;return{label:e,url:c,children:[this.getMemberListNode(),this.getRepoListNode()],showChildren:l}},getMemberListNode:function(){var e,t=this.props.locale.translate,r=this.props.route,s=r.parameters,o=t("nav-members");return"number"==typeof s.project&&(e=r.find(n("./pages/member-list-page.jsx"),{project:s.project})),{label:o,url:e,children:[this.getMemberNode()]}},getMemberNode:function(){var e,t,r=this.props.locale.translate,s=this.props.locale.pick,i=this.props.route,a=i.parameters,c=this.state.user;return e="new"===a.user?o.createElement("i",null,r("nav-member-new")):s(c.details.name)||c.username||"-","number"==typeof a.project&&(t=i.find(n("./pages/user-summary-page.jsx"),{project:a.project,user:a.user})),{label:e,url:t}},getRepoListNode:function(){var e,t=this.props.locale.translate,r=this.props.route,s=r.parameters,o=t("nav-repositories");return"number"==typeof s.project&&(e=r.find(n("./pages/repo-list-page.jsx"),{project:s.project})),{label:o,url:e,children:[this.getRepoNode()]}},getRepoNode:function(){var e,t=(this.props.locale.translate,this.props.locale.pick),r=this.props.route,s=r.parameters,o=this.state.repo,i=t(o.details.title)||o.name||"-";return s.project&&s.repo&&(e=r.find(n("./pages/repo-summary-page.jsx"),{project:s.project,repo:s.repo})),{label:i,url:e}},getUserListNode:function(){return{label:(0,this.props.locale.translate)("nav-users"),url:this.props.route.find(n("./pages/user-list-page.jsx")),children:[this.getUserNode()]}},getUserNode:function(){var e,t,r=this.props.locale.translate,s=this.props.locale.pick,i=this.props.route,a=i.parameters,c=this.state.user;return e="new"===a.user?o.createElement("i",null,r("nav-user-new")):s(c.details.name)||c.username||"-",a.user&&(t=i.find(n("./pages/user-summary-page.jsx"),{user:a.user})),{label:e,url:t}},getRoleListNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-roles"),url:t.find(n("./pages/role-list-page.jsx")),children:[this.getRoleNode()]}},getRoleNode:function(){var e,t,r=this.props.locale.translate,s=this.props.locale.pick,i=this.props.route,a=i.parameters,c=this.state.role;return e="new"===a.role?o.createElement("i",null,r("nav-role-new")):s(c.details.title)||c.name||"-",a.role&&(t=i.find(n("./pages/role-summary-page.jsx"),{role:a.role})),{label:e,url:t}},getServerListNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-servers"),url:t.find(n("./pages/server-list-page.jsx")),children:[this.getServerNode()]}},getServerNode:function(){var e,t,r=this.props.locale.translate,s=this.props.locale.pick,i=this.props.route,a=i.parameters,c=this.state.server;return"new"===a.server?e=o.createElement("i",null,r("nav-server-new")):(e=s(c.details.title))||(e=c.type?r("server-type-"+c.type):"-"),a.server&&(t=i.find(n("./pages/server-summary-page.jsx"),{server:a.server})),{label:e,url:t}},getSettingsNode:function(){var e=this.props.locale.translate,t=this.props.route;return{label:e("nav-settings"),url:t.find(n("./pages/settings-page.jsx"))}},repositionArrow:function(){var e=this;setTimeout(function(){var t=0,n=e.components.activeLink;if(n)for(var r=n;r;r=r.parentNode){var s;if(s=/level(\d)/.exec(r.className)){t=parseInt(s[1]);break}}var o="";t>e.state.arrowCount?o="extending":t<e.state.arrowCount&&(o="retracting"),e.setState({arrowAction:o,arrowCount:t})},50);var t=this.components.arrow,n=this.components.container,r=setInterval(function(){var s=0,o=e.components.activeLink;if(o){var i=t.getBoundingClientRect(),a=o.getBoundingClientRect(),c=n.getBoundingClientRect();s=Math.floor(a.top+(a.height-i.height)/2-c.top)+1}s!==e.state.arrowPosition?e.setState({arrowPosition:s}):clearInterval(r)},50)}}),j={details:{}}},"./widgets/navigation-tree.scss":function(e,t){},"./widgets/option-list.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("./widgets/sortable-table.jsx");n("./widgets/option-list.scss"),e.exports=o.createClass({displayName:"OptionList",propTypes:{readOnly:i.bool,onOptionClick:i.func},render:function(){var e=o.Children.toArray(this.props.children),t=s.filter(e,{type:"option"}),n=s.find(e,{type:"label"}),r=["option-list"];this.props.readOnly&&r.push("readonly");var i={expandable:!0,selectable:!this.props.readOnly,expanded:!this.props.readOnly,sortColumns:[]};return o.createElement("div",{className:r.join(" ")},o.createElement("label",null,n?n.props.children:null),o.createElement("div",{className:"container"},o.createElement(a,i,o.createElement("tbody",null,s.map(t,this.renderRow)))))},renderRow:function(e,t){if(e.props.hidden)return null;var n=["option"];e.props.selected&&(n.push("fixed"),this.props.readOnly||n.push("selected"));var s;this.props.readOnly||(e.props.selected&&!e.props.previous?s=o.createElement("i",{className:"fa fa-check-circle-o badge add"}):!e.props.selected&&e.props.previous&&(s=o.createElement("i",{className:"fa fa-times-circle-o badge remove"})));var i={className:n.join(" "),"data-name":e.props.name,onClick:this.handleClick};return this.props.readOnly&&(i.onClick=void 0),o.createElement("tr",r({key:t},i),o.createElement("td",null,e.props.children,s))},handleClick:function(e){var t=e.currentTarget.getAttribute("data-name");this.props.onOptionClick&&this.props.onOptionClick({type:"optionclick",target:this,name:t})}})},"./widgets/option-list.scss":function(e,t){},"./widgets/profile-image.jsx":function(e,t,n){"use strict";function r(e){var t=["profile-image",e.size];if(e.user){var r=s.get(e.user,"details.resources"),i=s.find(r,{type:"image"});if(i){var a=l[e.size],e={className:t.join(" "),resource:i,width:a,height:a,theme:e.theme};return o.createElement(c,e)}}var u=n("../node_modules/octicons/build/svg/person.svg");return o.createElement(u,{className:t.join(" ")})}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/src/theme/theme.js"),c=n("../../common/src/widgets/resource-view.jsx");e.exports=r,n("./widgets/profile-image.scss"),r.propTypes={user:i.object,size:i.oneOf(["small","large"]),theme:i.instanceOf(a)},r.defaultProps={size:"small"};var l={small:24,large:96}},"./widgets/profile-image.scss":function(e,t){},"./widgets/push-button.jsx":function(e,t,n){"use strict";function r(e){return e=s.clone(e),e.className?e.className="push-button "+e.className:e.className="push-button",o.createElement("button",e,e.children)}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js");e.exports=r,n("./widgets/push-button.scss"),r.defaultProps={className:"submit"}},"./widgets/push-button.scss":function(e,t){},"./widgets/side-navigation.jsx":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/src/data/database.js"),c=n("../../common/src/routing/route.js"),l=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),d=n("./widgets/navigation-tree.jsx"),m=n("./widgets/tooltip.jsx"),p=n("./widgets/sign-off-menu.jsx");n("./widgets/side-navigation.scss"),e.exports=o.createClass({displayName:"SideNavigation",propTypes:{disabled:i.bool,database:i.instanceOf(a).isRequired,route:i.instanceOf(c).isRequired,locale:i.instanceOf(l).isRequired,theme:i.instanceOf(u).isRequired},getDefaultProps:function(){return{disabled:!1}},getInitialState:function(){return{ready:!1}},getLanguage:function(e){e||(e=this.props.locale.languageCode);var t=this.props.locale.directory;return s.find(t,{code:e})},render:function(){var e="side-navigation";return this.state.ready||(e+=" hidden"),o.createElement("nav",{className:e},this.renderHeader(),this.renderNavTree(),this.renderBottomButtons())},renderNavTree:function(){var e={disabled:this.props.disabled,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(d,e)},renderBottomButtons:function(){return o.createElement("div",{className:"bottom-buttons"},this.renderLanguageButton(),this.renderCountryButton(),this.renderUserButton())},renderLanguageButton:function(){var e=this,t=this.getLanguage(this.props.locale.languageCode),n=s.filter(this.props.locale.directory,function(e){return!!e.module}),i=s.map(n,function(n,s){var i={className:"item","data-code":n.code,onClick:e.handleLanguageClick};return n===t&&(i.className+=" selected",i.onClick=null),o.createElement("div",r({key:s},i),o.createElement("i",{className:"fa fa-check-circle-o"})," ",n.name)});return o.createElement("div",{className:"button language"},o.createElement(m,{upward:!0},o.createElement("inline",null,o.createElement("i",{className:"fa fa-language"})," ",t.name),o.createElement("window",null,i)))},renderCountryButton:function(){var e=this,t=this.getLanguage();if(s.size(t.countries)<=1)return null;var n=this.props.locale.countryCode;n||(n=t.defaultCountry);var i=t.countries[n],a=s.map(t.countries,function(t,s){var i={className:"item","data-code":s,onClick:e.handleCountryClick};return s===n&&(i.className+=" selected",i.onClick=null),o.createElement("div",r({key:s},i),o.createElement("i",{className:"fa fa-check-circle-o"})," ",t)});return o.createElement("div",{className:"button country"},o.createElement(m,{upward:!0},o.createElement("inline",null,i),o.createElement("window",null,a)))},renderUserButton:function(){var e=(this.props.locale.translate,{database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme});return o.createElement("div",{className:"button user"},o.createElement(m,{upward:!0,leftward:!0,disabled:this.props.disabled},o.createElement("inline",null,o.createElement("i",{className:"fa fa-user-circle-o"})),o.createElement("window",null,o.createElement(p,e))))},renderHeader:function(){return o.createElement("header",null,this.renderLogo(),this.renderAppName())},renderAppName:function(){var e=this.props.locale.translate;return o.createElement("h2",{className:"app-name"},e("app-name"))},renderLogo:function(){return o.createElement("svg",{className:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"1000 1000 5080 6299",preserveAspectRatio:"xMidYMid",style:{strokeLinejoin:"round",strokeWidth:30}},o.createElement("defs",{className:"ClipPathGroup"},o.createElement("clipPath",{clipPathUnits:"userSpaceOnUse"},o.createElement("rect",{x:"1000",y:"1000",width:"5080",height:"6299"}))),o.createElement("defs",{className:"TextShapeIndex"}),o.createElement("defs",{className:"EmbeddedBulletChars"},o.createElement("path",{d:"M0.3-0.6L0.6-0.3 0.3 0 0-0.3 0.3-0.6Z"}),o.createElement("path",{d:"M0-0.6L0.6-0.6 0.6 0 0 0 0-0.6Z"}),o.createElement("path",{d:"M0.1 0L0.3-0.4 0.1-0.7 0.7-0.4 0.1 0ZM1358 739L309 1346 659 739 1358 739Z"}),o.createElement("path",{d:"M1-0.4L0.6 0 0.4 0 0.6-0.3 0.1-0.3 0.1-0.5 0.6-0.5 0.4-0.7 0.6-0.7 1-0.4Z"}),o.createElement("path",{d:"M0 0C0 0 0 0 0 0L0.2-0.3C0.1-0.4 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5L0.2-0.5 0.2-0.4 0.4-0.5 0.4-0.5 0.4-0.5C0.4-0.5 0.4-0.5 0.5-0.5 0.4-0.5 0.4-0.4 0.4-0.4 0.4-0.4 0.3-0.3 0.3-0.3L0.4-0.1C0.4-0.1 0.4-0.1 0.3-0.1L0.4-0.1C0.4 0 0.3 0 0.3 0 0.3 0 0.3-0.1 0.2-0.2L0.1 0C0.1 0.1 0.1 0.1 0 0.1 0 0.1 0 0.1 0 0 0 0 0 0 0 0 0 0 0 0 0 0Z"}),o.createElement("path",{d:"M0.1 0C0.1 0 0.1 0 0-0.1 0-0.1 0-0.2 0-0.2 0-0.3 0-0.3 0-0.3 0.1-0.4 0.1-0.4 0.1-0.4 0.1-0.4 0.2-0.4 0.2-0.3L0.2-0.2C0.2-0.2 0.2-0.2 0.2-0.2L0.6-0.5C0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.5 0.6-0.5L0.6-0.5C0.6-0.5 0.6-0.4 0.6-0.4L0.2 0C0.2 0 0.2 0 0.1 0Z"}),o.createElement("path",{d:"M0.4 0C0.3 0 0.2 0 0.2-0.1 0.1-0.1 0.1-0.2 0.1-0.3 0.1-0.4 0.1-0.4 0.2-0.5 0.2-0.6 0.3-0.6 0.4-0.6 0.5-0.6 0.6-0.6 0.6-0.5 0.7-0.4 0.7-0.4 0.7-0.3 0.7-0.2 0.7-0.1 0.6-0.1 0.6 0 0.5 0 0.4 0Z"}),o.createElement("path",{d:"M0.2-0.2C0.1-0.2 0.1-0.2 0.1-0.3 0-0.3 0-0.3 0-0.4 0-0.4 0-0.4 0.1-0.4 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.3 0.3-0.3 0.3-0.3 0.2-0.2 0.2-0.2 0.2-0.2Z"}),o.createElement("path",{d:"M0-0.2L0.6-0.2 0.6-0.3 0-0.3 0-0.2Z"})),o.createElement("defs",{className:"TextEmbeddedBitmaps"}),o.createElement("g",{className:"SlideGroup"},o.createElement("g",{className:"Slide",clipPath:"url(#presentation_clip_path)"},o.createElement("g",{className:"Page"},o.createElement("g",{className:"com.sun.star.drawing.ClosedBezierShape"},o.createElement("rect",{className:"BoundingBox",x:"1000",y:"1000",width:"5082",height:"6301",fill:"none"}),o.createElement("path",{d:"M1655 2259L5444 2259 6080 2890 6080 3520 5233 3520 5233 3099 1847 3099 1847 3918 1847 4758 1847 5619 1847 6459 5233 6459 5233 5619 4809 5619 4809 4989 6080 4989 6080 6669 5444 7299 1635 7299 1000 6669 1000 2890 1655 2259ZM3116 6459L3116 4569 3963 4569 3963 6459 3116 6459ZM3540 3520C3780 3520 3963 3701 3963 3939 3963 4178 3780 4360 3540 4360 3300 4360 3116 4178 3116 3939 3116 3701 3300 3520 3540 3520ZM3116 3520L3116 3520ZM3964 4361L3964 4361ZM3328 2259L3328 1419 2693 1419 2693 1000 4387 1000 4387 1419 3752 1419 3752 2259 3328 2259Z",fill:"rgb(255,255,255)"}))))))},componentDidMount:function(){var e=this;setTimeout(function(){e.setState({ready:!0})},100)},handleLanguageClick:function(e){var t=e.currentTarget.getAttribute("data-code"),n=this.getLanguage(t);return this.props.locale.change(n.code+"-"+n.defaultCountry)},handleCountryClick:function(e){var t=e.currentTarget.getAttribute("data-code"),n=this.getLanguage();return this.props.locale.change(n.code+"-"+t)}})},"./widgets/side-navigation.scss":function(e,t){},"./widgets/sign-off-menu.jsx":function(e,t,n){"use strict";var r=(n("../../common/node_modules/lodash/lodash.js"),n("../../common/node_modules/bluebird/js/browser/bluebird.js"),n("../../common/node_modules/react/react.js")),s=r.PropTypes,o=n("../node_modules/relaks/index.js"),i=n("../../common/src/objects/finders/user-finder.js"),a=n("../../common/src/data/database.js"),c=n("../../common/src/routing/route.js"),l=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),d=n("./widgets/profile-image.jsx");n("./widgets/sign-off-menu.scss"),e.exports=o.createClass({displayName:"SignOffMenu",propTypes:{database:s.instanceOf(a).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(l).isRequired,theme:s.instanceOf(u).isRequired},renderAsync:function(e){var t=this,s=this.props.database.use({schema:"global",by:this});return e.show(r.createElement("div",{className:"sign-off-menu"})),s.start().then(function(e){return i.findUser(s,e).then(function(e){var s=t.props.locale.translate,o=t.props.locale.pick,i=n("./pages/user-summary-page.jsx").getURL({userId:e.id});return r.createElement("div",{className:"sign-off-menu"},r.createElement("a",{href:i},r.createElement(d,{user:e,theme:t.props.theme,size:"large"}),r.createElement("div",{className:"name"},o(e.details.name))),r.createElement("div",{className:"sign-off",onClick:t.handleSignOffClick},s("sign-off-menu-sign-off")))})})},handleSignOffClick:function(){var e=this;this.props.database.use({by:this}).endSession().then(function(){e.props.route.push(n("./pages/start-page.jsx"))})}})},"./widgets/sign-off-menu.scss":function(e,t){},"./widgets/sortable-table.jsx":function(e,t,n){"use strict";(function(t){function r(e,t){return e=a.Children.toArray(e),i.find(e,{type:t})}function s(e){return a.createElement("th",e,e.children,a.createElement("i",{className:"fa fa-chevron-down arrow down"}),a.createElement("i",{className:"fa fa-chevron-up arrow up"}))}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("../../common/node_modules/lodash/lodash.js"),a=n("../../common/node_modules/react/react.js"),c=a.PropTypes,l=n("../../common/src/widgets/collapsible-container.jsx");n("./widgets/sortable-table.scss"),e.exports=a.createClass({displayName:"SortableTable",propTypes:{sortColumns:c.arrayOf(c.string).isRequired,sortDirections:c.arrayOf(c.oneOf(["asc","desc"])),expanded:c.bool,expandable:c.bool,selectable:c.bool,onSort:c.func},getInitialState:function(){return{action:null}},componentWillReceiveProps:function(e){this.props.expanded!==e.expanded&&(e.expanded?this.setState({action:"expanding"}):this.setState({action:"collapsing"}))},render:function(){var e=r(this.props.children,"thead"),t=r(this.props.children,"tbody");e&&(e=this.highlightHeading(e)),t&&null!=this.props.expanded&&(t=this.wrapUnselectedRows(t));var n=i.omit(this.props,["sortColumns","sortDirections","expandable","selectable","expanded","onSort"]);return n.onClick=this.handleClick,n.className="sortable-table",this.props.expandable&&(n.className+=" expandable",this.props.expanded?n.className+=" expanded":n.className+=" collapsed"),this.props.selectable&&(n.className+=" selectable"),this.props.className&&(n.className+=" "+this.props.className),a.createElement("table",o({ref:"table"},n),e,t)},highlightHeading:function(e){var t=i.get(this.props.sortColumns,0),n=i.get(this.props.sortDirections,0,"asc"),s=r(e.props.children,"tr"),o=a.Children.toArray(s.props.children);return o=i.map(o,function(e){if(e.props.id===t){var r=e.props.className||"";r&&(r+=" "),r+=n,e=a.cloneElement(e,{className:r})}return e}),s=a.cloneElement(s,{},o),e=a.cloneElement(e,{},[s])},wrapUnselectedRows:function(e){var t=this,n=(this.state.cellHeights,e.props.children);return n=i.map(n,function(e,n){if(!e)return null;if(/\bfixed\b/.test(e.props.className))return e;var r,s=a.Children.toArray(e.props.children),o=e.props.className;return r="expanding"!==t.state.action&&("collapsing"===t.state.action||t.props.expanded),o?o+=" ":o="",o+=r?"expanded":"collapsed",s=i.map(s,function(e,t){var n=a.createElement(l,{open:r},e.props.children);return a.cloneElement(e,{},n)}),a.cloneElement(e,{className:o},s)}),e=a.cloneElement(e,{},n)},componentDidUpdate:function(e,n){var r=this;this.state.action&&t(function(){r.setState({action:null})})},handleClick:function(e){for(var t=(e.target,e.target);t&&"TABLE"!==t.tagName;t=t.parentNode)if("TH"===t.tagName){var n=t.id;if(!n)return;var r=i.slice(this.props.sortColumns),s=i.slice(this.props.sortDirections),o=i.indexOf(r,n);-1!==o&&(r.splice(o,1),s.splice(o,1));var a="asc";0===o&&"asc"===this.props.sortDirections[0]&&(a="desc"),r.unshift(n),s.unshift(a),this.props.onSort&&this.props.onSort({type:"sort",target:this,columns:r,directions:s})}}}),e.exports.TH=s}).call(t,n("../node_modules/timers-browserify/main.js").setImmediate)},"./widgets/sortable-table.scss":function(e,t){},"./widgets/task-alert-bar.jsx":function(e,t,n){"use strict";var r=n("../../common/node_modules/lodash/lodash.js"),s=n("../../common/node_modules/moment/moment.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../node_modules/relaks/index.js"),c=(n("../../common/src/data/session-start-time.js"),n("../../common/src/objects/finders/task-finder.js")),l=n("../../common/src/data/database.js"),u=n("../../common/src/routing/route.js"),d=n("../../common/src/locale/locale.js"),m=n("../../common/src/theme/theme.js");n("./widgets/task-alert-bar.scss"),e.exports=a.createClass({displayName:"TaskAlertBar",propTypes:{database:i.instanceOf(l).isRequired,route:i.instanceOf(u).isRequired,locale:i.instanceOf(d).isRequired,theme:i.instanceOf(m).isRequired},getInitialState:function(){return{searchStartTime:this.getSearchStartTime()}},getSearchStartTime:function(){return s().subtract(8,"hour").startOf("hour").toISOString()},renderAsync:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r={tasks:null,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(p,r)),n.start().then(function(e){return c.findActiveTasks(n,t.state.searchStartTime).then(function(e){r.tasks=e})}).then(function(){return o.createElement(p,r)}).catch(function(e){if(401!==e.statusCode)throw e})},componentDidMount:function(){var e=this;this.hourChangeTimeout=setInterval(function(){var t=e.getSearchStartTime();e.state.searchStartTime!==t&&e.setState({searchStartTime:t})},3e5)},componentWillUnmount:function(){clearInterval(this.hourChangeInterval)}});var p=e.exports.Sync=o.createClass({displayName:"TaskAlertBar.Sync",propTypes:{tasks:i.arrayOf(i.object),route:i.instanceOf(u).isRequired,locale:i.instanceOf(d).isRequired,theme:i.instanceOf(m).isRequired},getInitialState:function(){return{showing:!1,rendering:!1,hidden:!0,selectedTask:null,highestTaskId:0}},getMessage:function(){var e=this.props.locale.translate,t=this.state.selectedTask;switch(t.action){case"gitlab-repo-import":return e("task-importing-repos");case"gitlab-user-import":return e("task-importing-users");case"gitlab-hook-install":return e("task-installing-hooks");case"gitlab-hook-remove":return e("task-removing-hooks");case"gitlab-event-import":var n=t.options.repo;return e("task-importing-events-from-$repo",n);case"gitlab-push-import":var n=t.options.repo;return e("task-importing-push-from-$repo",n);case"gitlab-commit-comment-import":var n=t.options.repo;return e("task-importing-commit-comments-from-$repo",n);case"gitlab-issue-comment-import":var n=t.options.repo;return e("task-importing-issue-comments-from-$repo",n);case"gitlab-merge-request-comment-import":var n=t.options.repo;return e("task-importing-merge-request-comments-from-$repo",n);default:return""}},getURL:function(){var e=this.state.selectedTask,t=null,s=r.get(e,"options.server_id");if(s){var o=this.props.route,i=[n("./pages/server-summary-page.jsx"),n("./widgets/task-list.jsx")],a={server:s,task:e.id};t=o.find(i,a)}return t},componentWillReceiveProps:function(e){var t=this;if(this.props.tasks!==e.tasks){var n=this.state.highestTaskId,s=r.sortBy(r.filter(e.tasks,{failed:!1}),"ctime"),o=r.first(s);if(o)o.id>n&&(n=o.id);else{var i=r.sortBy(r.filter(e.tasks,{failed:!0},"ctime"));o=r.find(i,function(e){if(e.id>=n)return!0})}if(o)this.setState({selectedTask:o,highestTaskId:n,showing:!0});else{var a=this.state.selectedTask;setTimeout(function(){a===t.state.selectedTask&&t.setState({showing:!1})},5e3)}}},render:function(){if(!this.state.rendering)return null;var e="task-alert-bar";return this.state.hidden&&(e+=" hidden"),this.state.selectedTask.failed&&(e+=" failure"),o.createElement("div",{className:e},this.renderMessage(),this.renderProgressBar())},renderMessage:function(){var e=this.getMessage(this.state.selectedTask),t=this.getURL(this.state.selectedTask);return o.createElement("a",{href:t},e)},renderProgressBar:function(){var e=this.state.selectedTask,t=e.completion+"%";return o.createElement("div",{className:"progress-bar-frame"},o.createElement("div",{className:"bar",style:{width:t}}))},componentDidUpdate:function(e,t){var n=this;if(!t.showing&&this.state.showing)this.state.rendering||this.setState({rendering:!0,hidden:!0});else if(t.showing&&!this.state.showing)this.setState({hidden:!0}),setTimeout(function(){n.state.showing||n.setState({rendering:!1})},500);else if(!t.rendering&&this.state.rendering){s().subtract(2,"second").toISOString(),setTimeout(function(){!1!==n.mounted&&n.setState({hidden:!1})},10)}},componentWillUnmount:function(){this.mounted=!1}})},"./widgets/task-alert-bar.scss":function(e,t){},"./widgets/task-list.jsx":function(e,t,n){"use strict";function r(e){var t=[];return o.each(e.deleted,function(e){s(t,e,"item deleted")}),o.each(e.modified,function(e){s(t,e,"item modified")}),o.each(e.added,function(e){s(t,e,"item added")}),t}function s(e,t,n){var r=e.length;e.push(a.createElement("span",{className:n,key:r},t))}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/moment/moment.js"),a=n("../../common/node_modules/react/react.js"),c=a.PropTypes,l=n("../node_modules/relaks/index.js"),u=n("../../common/src/utils/memoize.js"),d=n("../../common/src/objects/finders/task-finder.js"),m=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),h=n("../../common/src/locale/locale.js"),f=n("../../common/src/theme/theme.js"),g=n("../../common/src/widgets/smart-list.jsx");n("./widgets/task-list.scss"),e.exports=l.createClass({displayName:"TaskList",propTypes:{server:c.object,database:c.instanceOf(m).isRequired,route:c.instanceOf(p).isRequired,locale:c.instanceOf(h).isRequired,theme:c.instanceOf(f).isRequired},statics:{parseHash:function(e){return{task:p.parseId(e,/t(\d+)/)}},getHash:function(e){return e.task?"t"+e.task:""}},renderAsync:function(e){var t=this,n=this.props.database.use({schema:"global",by:this}),r={tasks:null,server:this.props.server,locale:this.props.locale,route:this.props.route,theme:this.props.theme};return e.show(a.createElement(v,r)),n.start().then(function(e){if(t.props.server)return d.findServerTasks(n,r.server).then(function(e){r.tasks=e})}).then(function(){return a.createElement(v,r)})}});var v=e.exports.Sync=a.createClass({displayName:"TaskList.Sync",propTypes:{tasks:c.arrayOf(c.object),route:c.instanceOf(p).isRequired,locale:c.instanceOf(h).isRequired,theme:c.instanceOf(f).isRequired},getInitialState:function(){var t=e.exports.parseHash(this.props.route.hash);return{expandedTaskIds:t.task?[t.task]:[]}},getMessage:function(e){var t=this.props.locale.translate;if(100===e.completion)switch(e.action){case"gitlab-repo-import":var n=o.size(e.details.added),r=o.size(e.details.deleted),s=o.size(e.details.modified);if(n)return t("task-imported-$count-repos",n);if(r)return t("task-removed-$count-repos",r);if(s)return t("task-updated-$count-repos",s);break;case"gitlab-user-import":var n=o.size(e.details.added),r=o.size(e.details.deleted),s=o.size(e.details.modified);if(n)return t("task-imported-$count-users",n);if(r)return t("task-removed-$count-users",r);if(s)return t("task-updated-$count-users",s);break;case"gitlab-hook-install":var n=o.size(e.details.added);return t("task-installed-$count-hooks",n);case"gitlab-hook-remove":var r=o.size(e.details.deleted);return t("task-removed-$count-hooks",r);case"gitlab-event-import":var n=o.size(e.details.added),i=e.options.repo;return t("task-imported-$count-events-from-$repo",n,i);case"gitlab-push-import":var n=o.size(e.details.added),i=e.options.repo;return t("task-imported-push-with-$count-commits-from-$repo-$branch",n,i,e.options.branch);case"gitlab-commit-comment-import":var n=o.size(e.details.added),i=e.options.repo;return t("task-imported-$count-commit-comments-from-$repo",n,i);case"gitlab-issue-comment-import":var n=o.size(e.details.added),i=e.options.repo;return t("task-imported-$count-issue-comments-from-$repo",n,i);case"gitlab-merge-request-comment-import":var n=o.size(e.details.added),i=e.options.repo;return t("task-imported-$count-merge-request-comments-from-$repo",n,i)}else switch(e.action){case"gitlab-repo-import":return t("task-importing-repos");case"gitlab-user-import":return t("task-importing-users");case"gitlab-hook-install":return t("task-installing-hooks");case"gitlab-hook-remove":return t("task-removing-hooks");case"gitlab-event-import":var i=e.options.repo;return t("task-importing-events-from-$repo",i);case"gitlab-push-import":var i=e.options.repo;return t("task-importing-push-from-$repo",i);case"gitlab-commit-comment-import":var i=e.options.repo;return t("task-importing-commit-comments-from-$repo",i);case"gitlab-issue-comment-import":var i=e.options.repo;return t("task-importing-issue-comments-from-$repo",i);case"gitlab-merge-request-comment-import":var i=e.options.repo;return t("task-importing-merge-request-comments-from-$repo",i)}},getDetails:function(e){this.props.locale.translate;switch(e.action){case"gitlab-repo-import":case"gitlab-user-import":case"gitlab-hook-install":case"gitlab-hook-remove":case"gitlab-event-import":case"gitlab-push-import":case"gitlab-commit-comment-import":case"gitlab-issue-comment-import":case"gitlab-merge-request-comment-import":return r(e.details);default:return""}},setContainerNode:function(e){this.containerNode=e},render:function(){var t,n=e.exports.parseHash(this.props.route.hash);n.task&&(t="task-"+n.task);var r={items:b(this.props.tasks),offset:5,behind:20,ahead:20,anchor:t,onIdentity:this.handleTaskIdentity,onRender:this.handleTaskRender,onAnchorChange:this.handleAnchorChange};return a.createElement("div",{className:"task-list",ref:this.setContainerNode},a.createElement(g,r))},renderTask:function(e){var t="task";return e.failed&&(t+=" failure"),o.includes(this.state.expandedTaskIds,e.id)&&(t+=" expanded"),a.createElement("div",{className:t},a.createElement("div",{className:"summary","data-task-id":e.id,onClick:this.handleTaskClick},this.renderStartTime(e),this.renderMessage(e),this.renderProgress(e)),this.renderDetails(e))},renderStartTime:function(e){var t=i(e.ctime).format("YYYY-MM-DD HH:mm:ss");return a.createElement("div",{className:"start-time"},t)},renderMessage:function(e){var t,n=this.getMessage(e);return n||(n=e.action+" (noop)"),e.failed&&(t=a.createElement("i",{className:"fa fa-exclamation-triangle"})),a.createElement("div",{className:"message"},n,t)},renderProgress:function(e){if(100===e.completion&&e.etime){var t=this.props.locale.translate,n=i(e.etime)-i(e.ctime),r=Math.ceil(n/1e3);return a.createElement("div",{className:"duration"},t("task-$seconds",r))}var s=e.completion+"%";return a.createElement("div",{className:"progress-bar-frame"},a.createElement("div",{className:"bar",style:{width:s}}))},renderDetails:function(e){if(!o.includes(this.state.expandedTaskIds,e.id))return null;var t=this.getDetails(e);return a.createElement("div",null,a.createElement("div",{className:"details"},t),this.renderError(e))},renderError:function(e){if(!e.failed)return null;var t=o.get(e,"details.error.stack");return t||(t=o.get(e,"details.error.message")),a.createElement("div",{className:"error"},t)},componentDidMount:function(){e.exports.parseHash(this.props.route.hash).task&&this.containerNode&&this.containerNode.scrollIntoView()},handleTaskIdentity:function(e){return"task-"+e.item.id},handleTaskRender:function(e){return e.needed?this.renderTask(e.item):a.createElement("div",{className:"task"})},handleTaskClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-task-id")),n=o.slice(this.state.expandedTaskIds);o.includes(n,t)?o.pull(n,t):n.push(t),this.setState({expandedTaskIds:n})},handleAnchorChange:function(e){this.props.route.reanchor("")}}),b=u(function(e){return o.orderBy(e,"id","desc")})},"./widgets/task-list.scss":function(e,t){},"./widgets/text-field.jsx":function(e,t,n){"use strict";function r(e){var t=["text-field"],n="input",r=s.omit(e,"children","locale");if("textarea"===e.type&&(n=c,r=s.omit(r,"type")),e.readOnly){t.push("readonly");var i=e.locale.translate;r.placeholder=i("text-field-placeholder-none"),r.spellCheck=!1}return r.value=r.value||"",o.createElement("div",{className:t.join(" ")},o.createElement("label",{htmlFor:e.id},e.children),o.createElement(n,r))}var s=n("../../common/node_modules/lodash/lodash.js"),o=n("../../common/node_modules/react/react.js"),i=o.PropTypes,a=n("../../common/src/locale/locale.js"),c=n("../../common/src/widgets/autosize-text-area.jsx");n("./widgets/text-field.scss"),e.exports=r,r.defaultProps={type:"text"},r.propTypes={locale:i.instanceOf(a).isRequired}},"./widgets/text-field.scss":function(e,t){},"./widgets/tooltip.jsx":function(e,t,n){"use strict";function r(e){var t=i.Children.toArray(e.children),n=o.find(t,{type:"window"});return!!(n&&i.Children.count(n.props.children)>0)}function s(e,t){for(var n=e;n;n=n.parentNode)if(n===t)return!0;return!1}var o=n("../../common/node_modules/lodash/lodash.js"),i=n("../../common/node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/utils/component-refs.js");n("./widgets/tooltip.scss"),e.exports=i.createClass({displayName:"Tooltip",propTypes:{upward:a.bool,leftward:a.bool,disabled:a.bool},getInitialState:function(){return this.components=c({container:HTMLElement}),{open:!1,live:r(this.props)}},componentWillReceiveProps:function(e){var t=r(e);if(this.state.live!==t||this.props.disabled!==e.disabled){var n=this.state.open&&t&&!e.disabled;this.setState({live:t,open:n})}},render:function(){var e=this.components.setters,t="tooltip";return this.state.live&&!this.props.disabled&&(t+=" live"),this.props.upward&&(t+=" upward"),this.props.leftward&&(t+=" leftward"),this.props.className&&(t+=" "+this.props.className),i.createElement("div",{ref:e.container,className:t},this.renderLabel(),this.renderWindow())},renderLabel:function(){var e=this.findElement("inline");return i.createElement("span",{className:"label",onClick:this.handleLabelClick},e.props.children)},renderWindow:function(){if(!this.state.open)return null;var e=this.findElement("window");return i.createElement("div",{className:"window-container",onClick:this.handleWindowClick},i.createElement("div",{className:"window"},e.props.children))},componentDidUpdate:function(e,t){t.open!==this.state.open&&(this.state.open?(document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("keydown",this.handleKeyDown)):(document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("keydown",this.handleKeyDown)))},componentWillUnmount:function(){this.state.open&&(document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("keydown",this.handleKeyDown))},findElement:function(e){var t=i.Children.toArray(this.props.children);return o.find(t,{type:e})},handleLabelClick:function(e){this.state.live&&!this.props.disabled&&this.setState({open:!this.state.open})},handleMouseDown:function(e){s(e.target,this.components.container)||this.setState({open:!1})},handleKeyDown:function(e){27===e.keyCode&&this.setState({open:!1})}})},"./widgets/tooltip.scss":function(e,t){},"./widgets/unexpected-error.jsx":function(e,t,n){"use strict";function r(e){if(!e.children)return null;var t="unexpected-error",n="exclamation-circle";return"warning"===e.type&&(t+=" warning",n="exclamation-triangle"),s.createElement("div",{className:t},s.createElement("i",{className:"fa fa-"+n})," ",e.children)}var s=n("../../common/node_modules/react/react.js");s.PropTypes;e.exports=r,n("./widgets/unexpected-error.scss")},"./widgets/unexpected-error.scss":function(e,t){}});