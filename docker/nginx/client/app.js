webpackJsonp([12],[,,function(e,t,n){"use strict";function r(e){for(;e&&"A"!==e.tagName;)e=e.parentNode;return e}var i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(5),a=(n(6),n(4)),c=(a.PropTypes,n(33)),l=(n(76),n(375)),u=n(365),d=n(22),p=n(377),h=n(23),f=n(380),m=n(32),g=n(379),v=n(371),y=n(18),b=n(378),x=n(19),w=n(369),k=n(366),C=n(376),E=n(108),R=n(72),S=n(204),N=n(62),O=n(139),T=n(138),P=n(73),j=n(325),_=n(361),I=n(345),D=n(386),A=n(206),U=n(363),L=n(368),M=n(364);U.isAvailable()?i=U:L.isAvailable()?i=L:M.isAvailable()&&(i=M);var q=n(381),B=q||null,z=[E,R,S,N,O,T,P,j];n(384),n(721),n(11),e.exports=a.createClass({displayName:"Application",getInitialState:function(){return this.components=c({remoteDataSource:u,routeManager:p,localeManager:v,themeManager:b,payloadManager:f,subscriptionManager:w,sessionManager:k,linkManager:C,cache:i,notifier:B}),{database:null,payloads:null,route:null,locale:null,theme:null,canAccessServer:!1,canAccessSchema:!1,connection:null,searching:!1,paused:!1,pushRelay:null,renderingStartPage:!1,showingUploadProgress:!1,online:!0,networkType:"unknown"}},isReady:function(){return!!(this.state.database&&this.state.payloads&&this.state.route&&this.state.locale&&this.state.theme)},isShowingStartPage:function(){return this.state.route.component===E||this.state.route.component!==j&&(!this.state.canAccessServer||!this.state.canAccessSchema)},render:function(){return a.createElement("div",{onClick:this.handleClick},this.renderUserInterface(),this.renderConfiguration())},renderUserInterface:function(){if(!this.isReady())return null;var e=this.state.route.component.configureUI(this.state.route),t={settings:e,database:this.state.database,payloads:this.state.payloads,hasConnection:this.state.online,searching:this.state.searching,route:this.state.route,locale:this.state.locale,theme:this.state.theme},n={settings:e,database:this.state.database,route:this.state.route,locale:this.state.locale,theme:this.state.theme};this.isShowingStartPage()&&(s.set(e,"navigation.top",!1),s.set(e,"navigation.bottom",!1));var r="application "+this.state.theme.mode;return a.createElement("div",{className:r,id:"application"},a.createElement(_,t),a.createElement("section",{className:"page-view-port",id:"page-view-port"},a.createElement("div",{className:"scroll-box",id:"scroll-box"},a.createElement("div",{className:"contents"},this.renderCurrentPage()))),a.createElement(I,n),this.renderStartPage(),this.renderUploadProgress())},renderCurrentPage:function(){var e=this.state.route.component;if(this.isShowingStartPage())return null;var t={database:this.state.database,route:this.state.route,payloads:this.state.payloads,locale:this.state.locale,theme:this.state.theme};return a.createElement(e,t)},renderStartPage:function(){if(!this.isShowingStartPage()&&!this.state.renderingStartPage)return null;var e={canAccessServer:this.state.canAccessServer,canAccessSchema:this.state.canAccessSchema,database:this.state.database,route:this.state.route,locale:this.state.locale,theme:this.state.theme,onEntry:this.handleStartPageEntry,onExit:this.handleStartPageExit,onAvailableSchemas:this.handleAvailableSchemas};return a.createElement(E,e)},renderConfiguration:function(){var e=this.components.setters,t=this.state.route,r=t?t.parameters.address:null,c=t?t.parameters.schema:null,l={ref:e.remoteDataSource,inForeground:!this.state.paused,hasConnection:this.state.online,locale:this.state.locale,onChange:this.handleDatabaseChange,onSearch:this.handleDatabaseSearch,onAuthorization:this.handleAuthorization,onExpiration:this.handleExpiration,onViolation:this.handleViolation,onStupefaction:this.handleStupefaction},d={ref:e.payloadManager,hasConnection:this.state.online,database:this.state.database,route:this.state.route,onChange:this.handlePayloadsChange},h={ref:e.routeManager,pages:z,database:this.state.database,rewrite:this.rewriteURL,onChange:this.handleRouteChange,onRedirectionRequest:this.handleRedirectionRequest},m={ref:e.localeManager,database:this.state.database,directory:n(370),onChange:this.handleLocaleChange},y={ref:e.themeManager,database:this.state.database,modes:{"single-col":0,"double-col":700,"triple-col":1300},serverAddress:r,onChange:this.handleThemeChange},x={ref:e.cache,databaseName:"trambar"},E={onChange:this.handleConnectivityChange},R={ref:e.notifier,serverAddress:r,hasConnection:this.state.online,onConnect:this.handleConnection,onDisconnect:this.handleDisconnection,onNotify:this.handleChangeNotification,onAlertClick:this.handleAlertClick};B===q?s.assign(R,{locale:this.state.locale,defaultProfileImage:n(562)}):null===B&&this.state.pushRelay&&s.assign(R,{relayAddress:this.state.pushRelay.url,searching:this.state.searching}),c&&this.state.canAccessSchema||(c="global");var S={ref:e.subscriptionManager,area:"client",connection:this.state.connection,schema:c,database:this.state.database,locale:this.state.locale},N={ref:e.sessionManager,database:this.state.database},O={ref:e.linkManager,database:this.state.database,route:this.state.route};return a.createElement("div",null,a.createElement(i,x),a.createElement(B,R),a.createElement(u,o({},l,{cache:this.components.cache})),a.createElement(f,d),a.createElement(p,h),a.createElement(v,m),a.createElement(b,y),a.createElement(w,S),a.createElement(k,N),a.createElement(C,O),a.createElement(g,E))},renderUploadProgress:function(){if(!this.state.showingUploadProgress)return null;var e={payloads:this.state.payloads,locale:this.state.locale};return a.createElement(D,e)},componentDidMount:function(){window.addEventListener("beforeunload",this.handleBeforeUnload)},componentDidUpdate:function(e,t){var n=this;!this.splashScreenHidden&&this.isReady()&&(this.splashScreenHidden=!0,setTimeout(function(){n.hideSplashScreen()},100))},componentWillUnmount:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},discoverPushRelay:function(){return},rewriteURL:function(e,t,n){"parse"===n?l.extract(e,t):(this.state.route&&(t=s.defaults(t,this.state.route.parameters)),l.insert(e,t))},handleDatabaseChange:function(e){var t;this.state.route&&(t={address:this.state.route.parameters.address,schema:this.state.route.parameters.schema});var n=new d(e.target,t,this.state.online);this.setState({database:n})},handleDatabaseSearch:function(e){this.setState({searching:e.searching})},handleAuthorization:function(e){this.components.sessionManager.saveToCache(e.session);var t=this.state.route.parameters.address;e.session.address===t&&this.setState({canAccessServer:!0,canAccessSchema:!0})},handleExpiration:function(e){this.components.sessionManager.removeFromCache(e.session);var t=this.state.route.parameters.address;e.session.address===t&&this.setState({canAccessServer:!1,canAccessSchema:!1})},handleViolation:function(e){var t=this.state.route.parameters.address,n=this.state.route.parameters.schema;e.address===t&&e.schema===n&&this.setState({canAccessSchema:!1})},handleStupefaction:function(e){var t=this.state.route,n=t.url,r=t.parameters.schema;r&&"project"===e.query.table&&e.query.criteria.name===r&&(r=null);var i=t.find(j,{code:404,schema:r});t.change(i,!0,n)},handlePayloadsChange:function(e){var t=new m(e.target),n=this.state.showingUploadProgress;t.uploading||(n=!1),this.setState({payloads:t,showingUploadProgress:n})},handleLocaleChange:function(e){var t=new y(e.target);this.setState({locale:t}),document.title=t.translate("app-name")},handleRouteChange:function(e){var t=this,n=new h(e.target),r=this.components.remoteDataSource,i=this.state.database,o=n.parameters.address;if(o!=i.context.address&&(i=new d(r,{address:o},this.state.online)),this.state.route){var s=this.state.route.parameters.schema,a=n.parameters.schema;o==i.context.address&&s===a||r.clear(o,s)}var c=function(e){t.setState({route:n,database:i,canAccessServer:e,canAccessSchema:e},function(){e&&null===B&&t.discoverPushRelay()})};i.hasAuthorization()?c(!0):this.components.sessionManager.loadFromCache(o).then(function(e){e&&i.restoreSession(e),c(i.hasAuthorization(o)?!0:!1)})},handleAvailableSchemas:function(e){var t=this.state.route.parameters.schema;s.includes(e.schemas,t)&&this.setState({canAccessSchema:!0})},handleStartPageEntry:function(e){this.setState({renderingStartPage:!0})},handleStartPageExit:function(e){this.setState({renderingStartPage:!1})},handleRedirectionRequest:function(e){var t=e.target,n=e.url,r=e.replacing,i=t.find(j,{code:404});return t.change(i,r,n)},handleClick:function(e){var t=this;if(0===e.button){var n=r(e.target);if(n){var i=n.getAttribute("href")||n.getAttribute("data-url");i&&-1===i.indexOf(":")&&(this.state.route.change(i).then(function(){if(!t.state.route.hash){document.getElementById("scroll-box").scrollTop=0}}),e.preventDefault(),n.blur())}}},handleThemeChange:function(e){var t=new x(e.target);this.setState({theme:t})},handleConnection:function(e){this.setState({connection:e.connection})},handleDisconnection:function(e){this.setState({connection:null})},handleChangeNotification:function(e){this.components.remoteDataSource.invalidate(e.address,e.changes),s.forIn(e.changes,function(e,t){console.log("Change notification: ",t,e)})},handleAlertClick:function(e){var t=e.alert,n={id:t.notification_id,type:t.type,user_id:t.user_id,reaction_id:t.reaction_id,story_id:t.story_id},r=A.getNotificationURL(n,this.state.route),i=A.getNotificationTarget(n);if(i){var o=document.createElement("A");o.href=r,o.target=i,o.click()}else this.state.route.change(r),window.focus();var s=this.state.route.parameters,a=this.state.database.use({schema:s.schema,by:this});a.start().then(function(e){var n={id:t.notification_id,seen:!0};return a.saveOne({table:"notification"},n)})},handleBeforeUnload:function(e){if(this.state.payloads&&this.state.payloads.uploading)return this.setState({showingUploadProgress:!0}),e.returnValue="Are you sure?"},handlePause:function(e){},handleResume:function(e){return},handleConnectivityChange:function(e){var t={online:e.online,networkType:e.type},n=this.state.database;n&&(t.database=new d(n.remoteDataSource,n.context,e.online)),this.setState(t)},hideSplashScreen:function(){var e=document.getElementById("splash-screen"),t=document.getElementById("splash-screen-style");e&&(e.className="transition-out",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)},1e3))}})},,,,,,,,,,,,,,function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=f[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(u(r.parts[o],t));f[r.id]={id:r.id,refs:1,parts:s}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a=o[1],c=o[2],l=o[3],u={css:a,media:c,sourceMap:l};r[s]?r[s].parts.push(u):n.push(r[s]={id:s,parts:[u]})}return n}function o(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),o(e,t),t}function c(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),o(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function u(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var l=y++;n=v||(v=a(t)),r=d.bind(null,n,l,!1),i=d.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=h.bind(null,n,t),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=p.bind(null,n),i=function(){s(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function d(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=x(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}var f={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),v=null,y=0,b=[],x=n(720);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=m()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],c=f[a.id];c.refs--,o.push(c)}if(e){r(i(e,t),t)}for(var s=0;s<o.length;s++){var c=o[s];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete f[c.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){this.localeManager=e,this.directory=this.localeManager.getDirectory(),this.localeCode=this.localeManager.getLocaleCode();var t=_.split(this.localeCode,"-");this.languageCode=t[0],this.countryCode=t[1],this.translate=this.translate.bind(this),this.pick=this.pick.bind(this),this.name=this.name.bind(this),this.change=this.change.bind(this)}e.exports=r,r.prototype.translate=function(e){return e instanceof Object?this.localeManager.pick(e):this.localeManager.translate.apply(this.localeManager,arguments)},r.prototype.pick=function(e,t){return this.localeManager.pick(e,t)},r.prototype.name=function(e,t,n){var r=this.localeManager.pick(e,n),i=new String(r||"");return i.gender=t,i},r.prototype.change=function(e){return this.localeManager.change(e)}},function(e,t,n){"use strict";function r(e){this.themeManager=e,this.mode=this.themeManager.getMode(),this.modes=this.themeManager.getModes(),this.details=this.themeManager.getDetails()}var i=n(5);e.exports=r,r.prototype.change=function(e){return this.themeManager.change(e)},r.prototype.isAboveMode=function(e){var t=i.indexOf(this.modes,e);return i.indexOf(this.modes,this.mode)>=t},r.prototype.isBelowMode=function(e){return!this.isAboveMode(e)},r.prototype.getImageURL=function(e,t){return this.themeManager.getImageURL(e,t)},r.prototype.getImageFile=function(e){return this.themeManager.getImageFile(e)},r.prototype.getVideoURL=function(e,t){return this.themeManager.getVideoURL(e,t)},r.prototype.getAudioURL=function(e,t){return this.themeManager.getAudioURL(e,t)},r.prototype.getURL=function(e,t){return this.themeManager.getURL(e,t)}},,function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in t){var r=e[n];if(t[n]!==r)return!1}return!0}e.exports={shouldComponentUpdate:function(e,t){return!r(this.props,e)||!r(this.state,t)}}},function(e,t,n){"use strict";function r(e,t,n){this.context=t||{},this.remoteDataSource=e,this.online=n}function i(e,t){return o.assign({},e,t)}var o=n(5);n(6),n(76);e.exports=r,r.prototype.find=function(e){return e=i(this.context,e),this.remoteDataSource.find(e)},r.prototype.findOne=function(e){return e=o.extend({expected:1},e),this.find(e).then(function(e){return e[0]||null})},r.prototype.save=function(e,t){return e=i(this.context,e),this.remoteDataSource.save(e,t)},r.prototype.saveOne=function(e,t){return this.save(e,[t]).then(function(e){return e.length>0?e[0]:null})},r.prototype.remove=function(e,t){return e=i(this.context,e),this.remoteDataSource.remove(e,t)},r.prototype.removeOne=function(e,t){return this.remove(e,[t]).then(function(e){return e.length>0?e[0]:null})},r.prototype.use=function(){var e={};o.assign(e,this.context);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return o.each(n,function(t){o.assign(e,t)}),new r(this.remoteDataSource,e)},r.prototype.start=function(e){return e=i(this.context,e),this.remoteDataSource.start(e)},r.prototype.beginSession=function(e){return this.remoteDataSource.beginSession(this.context,e)},r.prototype.checkSession=function(){return this.remoteDataSource.checkSession(this.context)},r.prototype.hasAuthorization=function(){return this.remoteDataSource.hasAuthorization(this.context)},r.prototype.restoreSession=function(e){this.remoteDataSource.restoreSession(e)},r.prototype.submitPassword=function(e,t){return this.remoteDataSource.submitPassword(this.context,e,t)},r.prototype.endSession=function(){return this.remoteDataSource.endSession(this.context)},r.prototype.beginMobileSession=function(e){return this.remoteDataSource.beginMobileSession(this.context,e)},r.prototype.acquireMobileSession=function(e){return this.remoteDataSource.acquireMobileSession(this.context,e)},r.prototype.releaseMobileSession=function(){return this.remoteDataSource.releaseMobileSession(this.context)},r.prototype.endMobileSession=function(e){return this.remoteDataSource.endMobileSession(this.context,e)},r.prototype.getOAuthURL=function(e,t){return this.remoteDataSource.getOAuthURL(this.context,e,t)}},function(e,t,n){"use strict";function r(e){this.routeManager=e,this.url=this.routeManager.getURL(),this.path=o.replace(this.url,/[?#].*/,""),this.component=this.routeManager.getComponent(),this.parameters=this.routeManager.getParameters(),this.query=this.routeManager.getQuery(),this.hash=this.routeManager.getHash(),this.callbacks=[]}function i(e){var t=a[e];if(!t){var n=[],r=e.replace(/(:\w+)/g,function(e){return n.push(e),"([^\\/]+)"});t=a[e]=new RegExp("^"+r),t.names=n}return t}var o=("function"==typeof Symbol&&Symbol.iterator,n(5)),s=n(6);e.exports=r,r.prototype.change=function(e,t,n){var r=this;if("string"!=typeof e)throw new Error("Invalid argument");return this.ask(e,!0).then(function(i){return!!i&&r.routeManager.change(e,t,n)})},r.prototype.find=function(e,t){return this.routeManager.find(e,t)},r.prototype.push=function(e,t){var n=this.routeManager.find(e,t);return this.change(n,!1)},r.prototype.replace=function(e,t){var n=this.routeManager.find(e,t);return this.change(n,!0)},r.prototype.loosen=function(){this.routeManager.loosen()},r.prototype.ask=function(e,t){return t?s.reduce(this.callbacks,function(t,n){try{if(!t)return!1;var r=n(e,!0);return s.resolve(r)}catch(e){return console.error(e),!0}},!0).then(function(e){return e}):o.reduce(this.callbacks,function(e,t){try{if(!e)return!1;var n=t(!1);if("boolean"!=typeof n)throw new Error("Callback passed to keep() should return a boolean when interactive (2nd argument) is true");return n}catch(e){return console.error(e),!0}},!0)},r.prototype.keep=function(e){this.callbacks.push(e)},r.prototype.free=function(e){o.pull(this.callbacks,e)},r.prototype.toString=function(){return this.url},r.match=function(e,t,n){for(var r=0;r<t.length;r++){var s=i(t[r]),a=s.exec(e);if(a){var c={};return o.each(s.names,function(e,t){c[e.substr(1)]=a[t+1]}),n&&(c=n(c)),c&&(c.match=a[0]),c}}},r.parseIdList=function(e){if(void 0!=e){if(e){var t=o.split(e,"+");return o.map(t,o.strictParseInt)}return[]}},r.parseId=function(e,t){if(void 0!=e){if(t instanceof RegExp){var n=t.exec(e);if(!n)return;e=n[1]}return o.strictParseInt(e)}},r.parseDate=function(e){if(void 0!=e)return/\d{4}-\d{2}-\d{2}/.test(e)?e:""};var a={}},,,,,,function(e,t,n){"use strict";function r(e){if(e.hidden)return null;var t=["push-button"];return e.emphasized&&t.push("emphasized"),o.createElement("button",{className:t.join(" "),disabled:e.disabled,onClick:e.onClick},e.label)}function i(e){if(e.hidden)return null;var t={type:"file",value:"",disabled:e.disabled,multiple:e.multiple,onChange:e.onChange},n=["push-button"];return e.emphasized&&n.push("emphasized"),o.createElement("label",{className:n.join(" "),disabled:e.disabled,onClick:e.onClick},e.label,o.createElement("input",t))}var o=n(4),s=o.PropTypes;n(799),e.exports=r,e.exports.File=i,i.propTypes={label:s.string,icon:s.string,hidden:s.bool,disabled:s.bool,multiple:s.bool,onChange:s.func}},function(e,t,n){function r(){}function i(e){this.component=e,this.synchronous=!0,this.showingProgress=!1,this.updateTimeout=0,this.startTime=d(),this.canceled=!1,this.onCancel=null,this.onComplete=null,this.onProgress=null}function o(){this.message="Async rendering interrupted"}function s(e){if(e.render)throw new Error("Class definition should not contain render()");if(!e.renderAsync)throw new Error("Class definition should contain renderAsync()");var t=r.prototype;return e=c(e),e.render=t.render,e.componentWillMount=u(e.componentWillMount,t.componentWillMount),e.componentWillUnmount=u(e.componentWillUnmount,t.componentWillUnmount),e.shouldComponentUpdate=e.shouldComponentUpdate||t.shouldComponentUpdate,p.createClass(e)}function a(e){return!(!e||"function"!=typeof e.then)}function c(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in t){var r=e[n];if(t[n]!==r)return!1}return!0}function u(e,t){return e?function(){e.call(this),t.call(this)}:t}function d(){return new Date-h}var p=n(4);t.Component=r,t.createClass=s,t.AsyncRenderingInterrupted=o,t.Meanwhile=i,r.prototype=Object.create(p.Component.prototype),r.prototype.constructor=r,r.prototype.render=function(){var e=this.relaks;if(!e)return console.warn("Relaks context is missing. Make sure you are calling componentWillMount() and componentWillUnmount() of the superclass"),null;if(e.promisedElementExpected)return e.promisedElementExpected=!1,e.promisedElement;if(e.progressElementExpected)return e.progressElementExpected=!1,e.progressElement;if(e.meanwhile){var t=e.meanwhile;e.meanwhile=null;try{t.cancel()}catch(e){console.error(e)}}var n=e.meanwhile=new i(this),r=e.prevProps,s=e.prevState;try{var c=this.renderAsync(n,r,s);n.synchronous=!1}catch(t){return console.error(t),e.meanwhile.clear(),e.meanwhile=null,e.progressElement||e.promisedElement}if(a(c)){var l=this,u=function(t){n!==e.meanwhile?n.cancel():l.relaks?(n.finish(),e.promisedElement=t,e.promisedElementExpected=!0,e.progressElement=null,e.meanwhile=null,l.forceUpdate()):n.cancel()},d=function(t){if(t instanceof o);else{console.error(t);var n=e.progressElement||e.promisedElement;u(n)}};c.then(u,d)}else{var p=c;e.meanwhile=null,e.promisedElement=p,e.progressElement=null}return e.promisedElement?e.promisedElement:e.progressElement?(n.clear(),e.progressElement):null},r.prototype.shouldComponentUpdate=function(e,t){if(!l(this.props,e)||!l(this.state,t)){var n=this.relaks;return n.prevProps=this.props,n.prevState=this.state,!0}return!1},r.prototype.componentWillMount=function(){this.relaks={progressElement:null,progressElementExpected:!1,promisedElement:null,promisedElementExpected:!1,meanwhile:null,prevProps:{},prevState:this.state?{}:void 0}},r.prototype.componentWillUnmount=function(){var e=this.relaks;e&&(e.meanwhile&&e.meanwhile.cancel(),this.relaks=void 0)},i.prototype.check=function(){var e=this.component.relaks;if(!e||this!==e.meanwhile)throw new o},i.prototype.show=function(e,t){var n=this.component.relaks;if(this.check(),n.progressElement=e,this.showingProgress)return this.update(),!0;if(this.updateTimeout){if(void 0===t)return!1;if(clearTimeout(this.updateTimeout),this.updateTimeout=0,t>0){t-=d()-this.startTime}}if(t>0){if(t!==1/0){var r=this;this.updateTimeout=setTimeout(function(){r.update()},t)}return!1}return t<=0?(this.update(),!0):!!n.promisedElement},i.prototype.update=function(){var e=this.component.relaks;if(this.showingProgress=!0,e.promisedElement=null,!this.synchronous&&this.updateTimeout){if(this.onProgress){var t=d()-this.startTime;this.onProgress({type:"progress",target:this,elapsed:t})}e.progressElementExpected=!0,this.component.forceUpdate()}},i.prototype.cancel=function(){this.clear(),this.canceled||(this.canceled=!0,this.onCancel&&this.onCancel({type:"cancel",target:this}))},i.prototype.finish=function(){if(this.clear(),this.onComplete){var e=d()-this.startTime;this.onComplete({type:"complete",target:this,elapsed:e})}},i.prototype.clear=function(){this.component.relaks;this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=0)},o.prototype=Object.create(Error.prototype);var h=new Date},,function(e,t,n){"use strict";function r(e){this.payloadManager=e,this.uploading=this.payloadManager.getUploadProgress()}var i=n(5),o=n(6);e.exports=r,r.prototype.queue=function(e,t){return this.payloadManager.queue(e,t)},r.prototype.find=function(e,t){return this.payloadManager.find(e,t)},r.prototype.send=function(e,t){return this.payloadManager.send(e,t)},r.prototype.stream=function(e){return this.payloadManager.stream(e)},r.prototype.prepare=function(e,t,n){var r=this,s=i.get(t,"details.resources",[]);return o.each(s,function(t){if(!t.payload_id){var o=i.get(n,t.type);return r.queue(e,t,o).then(function(e){e&&(t.payload_id=e)})}})},r.prototype.dispatch=function(e,t){var n=this,r=i.get(t,"details.resources",[]),s=i.filter(i.map(r,"payload_id"));return o.each(s,function(t){return n.send(e,t),null})},r.prototype.inquire=function(e,t){var n=this,r=i.get(t,"details.resources",[]),o=[];if(i.each(r,function(t){if(t.payload_id){var r=n.find(e,{payload_id:t.payload_id});r&&o.push(r)}}),i.isEmpty(o))return null;var s=0,a=0,c={},l={};i.each(o,function(e){var t=e.payload_id,n=0,r=0;i.each(e.transferProgress,function(e,t){n+=e.total,r+=e.loaded}),c[t]=n,l[t]=r,s+=n,a+=r});var u=Math.round(a/s*100)||0,d="uploading";if(u>=100){var p=i.filter(o,function(e){return/transcode/.test(e.action)});if(i.isEmpty(p))return null;var h=i.sum(i.map(p,function(e){return c[e.payload_id]})),f=i.sum(i.map(p,function(e){var t=c[e.payload_id],n=t/h;return e.backendProgress*n}));u=Math.round(f),d="transcoding"}return{action:d,progress:u}}},function(e,t,n){"use strict";function r(e){if(!this)return new r(e);var t=this,n={};i.forIn(e,function(e,r){var i=function(e){if(!(arguments.length>0))return t[r];t[r]=e};n[r]=i}),this.setters=n,i.forIn(e,function(e,n){t[n]=null})}var i=n(5);e.exports=r},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=null);var n=i(e);return function(){return null!=arguments[0]?n.apply(null,arguments):t}}var i=n(590);e.exports=r},function(e,t,n){"use strict";function r(e){var t=["overlay",e.show?"show":"hide"];return e.className&&t.push(e.className),i.createElement("div",{className:t.join(" "),onClick:e.onClick},i.createElement("div",{className:"background"}),i.createElement("div",{className:"foreground"},e.children))}var i=n(4),o=i.PropTypes,s=n(8);n(19);n(817),e.exports=i.createClass({displayName:"OverlayProxy",propTypes:{className:o.string,show:o.bool,onBackgroundClick:o.func},statics:{active:!1},getDefaultProps:function(){return{show:!1}},render:function(){return null},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(e){e.show!==this.props.show?this.props.show?this.show():this.hide():e.children!==this.props.children&&this.props.show&&this.redraw()},componentWillUnmount:function(){this.hide()},show:function(){var e=this;if(this.containerNode)this.containerRemovalTimeout&&(clearTimeout(this.containerRemovalTimeout),this.containerRemovalTimeout=0);else{var t=document.getElementById("application");this.containerNode=document.createElement("DIV"),t.appendChild(this.containerNode),t.addEventListener("keydown",this.handleKeyDown)}var n={show:!1,onClick:this.handleClick,children:this.props.children};s.render(i.createElement(r,n),this.containerNode),this.shown=!1,setTimeout(function(){e.shown=!0,e.redraw()},10),this.constructor.active=!0},redraw:function(){var e={show:this.shown,onClick:this.handleClick,children:this.props.children};s.render(i.createElement(r,e),this.containerNode)},hide:function(){var e=this;this.containerNode&&(this.containerRemovalTimeout||(this.containerRemovalTimeout=setTimeout(function(){var t=document.getElementById("application");s.unmountComponentAtNode(e.containerNode),t.removeChild(e.containerNode),t.removeEventListener("keydown",e.handleKeyDown),e.containerNode=null,e.containerRemovalTimeout=0},1e3)),this.shown=!1,this.redraw(),this.constructor.active=!1)},handleClick:function(e){if(0===e.button){var t=e.target.className;"foreground"!==t&&"background"!==t||this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}},handleKeyDown:function(e){27===e.keyCode&&this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}})},,,function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},,,function(e,t,n){"use strict";var r=n(64);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},,,,function(e,t,n){"use strict";function r(e){return e.hidden?null:a.createElement("label",{className:o(e),onClick:e.disabled?null:e.onClick},a.createElement("i",{className:s(e)}),a.createElement("span",{className:"label"},e.label))}function i(e){if(e.hidden)return null;var t={type:"file",value:"",disabled:e.disabled,multiple:e.multiple,onChange:e.onChange};return a.createElement("label",{className:o(e)},a.createElement("i",{className:s(e)}),a.createElement("span",{className:"label"},e.label),a.createElement("input",t))}function o(e){var t=["header-button"];return e.className&&t.push(e.className),e.highlighted&&t.push("highlighted"),e.disabled&&t.push("disabled"),t.join(" ")}function s(e){var t=[];return e.icon&&t.push("fa","fa-"+e.icon),t.join(" ")}var a=n(4),c=a.PropTypes;e.exports=r,e.exports.File=i,n(789),r.propTypes={label:c.string,icon:c.string,hidden:c.bool,highlighted:c.bool,disabled:c.bool,onClick:c.func},i.propTypes={label:c.string,icon:c.string,hidden:c.bool,highlighted:c.bool,disabled:c.bool,multiple:c.bool,onChange:c.func}},function(e,t,n){"use strict";function r(e){var t,r="profile-image "+e.size;if(e.user){var s,l=i.get(e.user,"details.resources"),d=i.find(l,{type:"image"});if(d){var p=u[e.size],s=e.theme.getImageURL(d,{width:p,height:p});if(s)t=o.createElement("img",{src:s});else{var h=d.file,f=d.clip;a.get(h)&&(t=o.createElement(c,{url:h,clippingRect:f}))}}}if(!t){var m=n(197);t=o.createElement("div",{className:"placeholder"},o.createElement(m,null))}return e.href?o.createElement("a",{className:r,href:e.href},t):o.createElement("span",{className:r},t)}var i=n(5),o=n(4),s=o.PropTypes,a=n(50),c=n(112),l=n(19);e.exports=r,n(798),r.propTypes={user:s.object,size:s.oneOf(["small","medium","large"]),theme:s.instanceOf(l).isRequired},r.defaultProps={size:"small"};var u={small:24,medium:48,large:96}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4);o.PropTypes;n(807),e.exports=o.createClass({displayName:"SettingsPanel",propTypes:{},render:function(){var e="settings-panel";return this.props.className&&(e+=" "+this.props.className),o.createElement("div",{className:e},this.renderPart("header"),this.renderPart("subheader"),this.renderPart("body"),this.renderPart("footer"))},renderPart:function(e){var t=o.Children.toArray(this.props.children),n=i.find(t,{type:e});return n?o.createElement("div",r({className:e},n.props),n.props.children):null}})},,function(e,t,n){"use strict";function r(e){if(e.hidden)return null;var t={id:e.id,href:e.url,target:e.target,className:i(e),onClick:e.disabled?null:e.onClick};return s.createElement("a",t,s.createElement("i",{className:o(e)}),s.createElement("span",{className:"label"},e.label))}function i(e){var t=["option-button"];return e.className&&t.push(e.className),e.selected&&t.push("selected"),e.disabled&&t.push("disabled"),t.join(" ")}function o(e){var t=["fa"];return e.icon?t.push("fa-"+e.icon):e.selected?t.push("fa-"+e.iconOn):t.push("fa-"+e.iconOff),t.join(" ")}var s=n(4),a=s.PropTypes;e.exports=r,n(796),r.propTypes={label:a.node,id:a.string,icon:a.string,iconOn:a.string,iconOff:a.string,url:a.string,target:a.string,hidden:a.bool,selected:a.bool,disabled:a.bool,onClick:a.func},r.defaultProps={iconOn:"check-circle",iconOff:"circle-o"}},function(e,t,n){"use strict";function r(e){var t,n=new Date;return t=URL.createObjectURL(e),h.push({blob:e,localURL:t,remoteURL:void 0,atime:n}),t}function i(e){var t=u.find(h,{localURL:e});return t||(t=u.find(h,{remoteURL:e})),t?(t.atime=new Date,t.localURL):null}function o(e){var t=u.find(h,{localURL:e});return t?t.blob:null}function s(e,t){var n;return!!(n="string"==typeof e?u.find(h,{localURL:e}):u.find(h,{blob:e}))&&(n.remoteURL=t,!0)}function a(e){if(o(e))return d.resolve(e);var t=i(e);if(t)return d.resolve(t);var n={responseType:"blob"};return p.fetch("GET",e,null,n).then(function(t){var n=r(t);return s(n,e),n})}function c(e){var t=u.findIndex(h,{localURL:e});if(-1!==t){var n=h[t];h.splice(t,1),URL.revokeObjectURL(n.localURL)}}function l(){var e=new Date;u.remove(h,function(t){if(t.remoteURL){if(e-t.atime>3e5)return!0}})}var u=n(5),d=n(6),p=n(91);e.exports={manage:r,find:i,get:o,associate:s,fetch:a,remove:c};var h=[];setInterval(l,6e4)},,function(e,t,n){"use strict";function r(e){var t="scrollable";return e.className&&(t+=" "+e.className),e=i.clone(e),e.className=t,o.createElement("div",e,e.children)}var i=n(5),o=n(4);e.exports=r,n(805)},function(e,t,n){"use strict";function r(e,t){"change"===e&&t&&h.push(t)}function i(e,t){"change"===e&&t&&u.pull(h,t)}function o(e){f=e,a(d())&&l()}function s(e){return e.format("YYYY-MM-DD")}function a(e){var n=!1;return u.each(p,function(r,i){var o=r(e.clone()),a=t[i];if(o){var c=s(o);a!==c&&(t[i]=c,t[i+"ISO"]=o.toISOString(),n=!0)}}),n}function c(){var e=d();s(e)!==t.today&&(a(e),l())}function l(){var e={type:"change",target:t};u.each(h,function(t){t(e)})}var u=n(5),d=n(7);e.exports=t={addEventListener:r,removeEventListener:i,setLocale:o,today:void 0};var p={today:function(e){return e.startOf("day")},yesterday:function(e){return e.subtract(1,"day").startOf("day")},oneWeekAgo:function(e){return e.subtract(7,"day").startOf("day")},twoWeeksAgo:function(e){return e.subtract(14,"day").startOf("day")},oneMonthAgo:function(e){return e.subtract(1,"month").startOf("day")},twoMonthsAgo:function(e){return e.subtract(2,"month").startOf("day")},startOfWeek:function(e){if(f)return e.locale(f).startOf("week")},endOfWeek:function(e){if(f)return e.locale(f).endOf("week")},startOfMonth:function(e){return e.startOf("month")},endOfMonth:function(e){return e.endOf("month")},startOfLastMonth:function(e){return e.subtract(1,"month").startOf("month")},endOfLastMonth:function(e){return e.subtract(1,"month").endOf("month")},startOfYear:function(e){return e.startOf("year")},endOfYear:function(e){return e.endOf("year")}},h=[],f="";setInterval(c,1e3),c()},function(e,t,n){"use strict";(function(t){function r(n){var r=n.type,i=n.children;return s[r]=i,c||(c=t(function(){c=0,_.each(a,function(t){t({type:"change",target:e.exports})})})),null}var i=n(4),o=i.PropTypes,s={},a=[],c=0;e.exports=r,r.propTypes={type:o.string.isRequired},r.get=function(e){return s[e]},r.addListener=function(e){e&&a.push(e)},r.removeListener=function(e){_.pull(a,e)}}).call(t,n(130).setImmediate)},function(e,t,n){"use strict";var r,i=n(119),o=n(121),s=n(153),a=n(229);r=e.exports=function(e,t){var n,r,s,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=s=!0,r=!1):(n=a.call(e,"c"),r=a.call(e,"e"),s=a.call(e,"w")),l={value:t,configurable:n,enumerable:r,writable:s},c?i(o(c),l):l},r.gs=function(e,t,n){var r,c,l,u;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(r=!0,c=!1):(r=a.call(e,"c"),c=a.call(e,"e")),u={get:t,set:n,configurable:r,enumerable:c},l?i(o(l),u):u}},,,,function(e,t,n){"use strict";var r=n(4),i=r.PropTypes,o=n(151);e.exports=r.createClass({displayName:"DiagnosticsSection",propTypes:{label:i.string,hidden:i.bool},getInitialState:function(){return{open:!1}},render:function(){if(this.props.hidden)return null;var e="diagnostics-section";return this.state.open&&(e+=" open"),r.createElement("div",{className:e},r.createElement("div",{className:"title",onClick:this.handleLabelClick},this.props.label),r.createElement(o,{open:this.state.open},this.props.children))},handleLabelClick:function(e){var t=!this.state.open;this.setState({open:t})}})},function(e,t,n){"use strict"},,function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(7),a=n(30),c=n(53),l=n(78),u=n(144),d=n(22),p=n(32),h=n(23),f=n(18),m=n(19),g=n(21),v=n(203),y=n(208),b=n(75),x=n(74);n(291),e.exports=a.createClass({displayName:"PersonPage",propTypes:{database:o.instanceOf(d).isRequired,payloads:o.instanceOf(p).isRequired,route:o.instanceOf(h).isRequired,locale:o.instanceOf(f).isRequired,theme:o.instanceOf(m).isRequired},statics:{parseURL:function(e,t,n){return h.match(e,["/:schema/people/:user/?"],function(e){return{schema:e.schema,user:h.parseId(e.user),search:t.search,date:h.parseDate(t.date),story:h.parseId(n,/S(\d+)/i),reaction:h.parseId(n,/R(\d+)/i)}})},getURL:function(e){var t,n="/"+e.schema+"/people/"+e.user+"/",r={};return void 0!=e.date&&(r.date=e.date),void 0!=e.search&&(r.search=e.search),e.story&&(t="S"+e.story,e.reaction&&(t+="R"+e.reaction)),{path:n,query:r,hash:t}},configureUI:function(e){var t={parameters:r.pick(e.parameters,"schema","user")},n={type:"daily-activities",filters:{user_ids:[t.parameters.user]}};return{calendar:{route:t,statistics:n},search:{route:t,statistics:n},navigation:{route:t,section:"people"}}}},getInitialState:function(){return{today:c.today}},renderAsync:function(e,t){var o=this,a=this.props.route.parameters,c=this.props.database.use({schema:a.schema,by:this}),u=(this.props.route,t.route,{stories:null,user:null,roles:null,dailyActivities:null,currentUser:null,project:null,selectedDate:a.date,today:this.state.today,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme});return e.show(i.createElement(w,u),250),c.start().then(function(e){var t={id:e};return c.findOne({schema:"global",table:"user",criteria:t,required:!0})}).then(function(t){return u.currentUser=t,e.show(i.createElement(w,u))}).then(function(){var e={name:a.schema};return c.findOne({schema:"global",table:"project",criteria:e,required:!0})}).then(function(t){return u.project=t,e.show(i.createElement(w,u))}).then(function(){var e={id:a.user};return c.findOne({schema:"global",table:"user",criteria:e,required:!0})}).then(function(t){return u.user=t,e.show(i.createElement(w,u))}).then(function(){var e={id:u.user.role_ids};return c.find({schema:"global",table:"role",criteria:e})}).then(function(t){return u.roles=t,e.show(i.createElement(w,u))}).then(function(){if(a.date||a.search){var e={user_ids:[a.user]};return a.date&&(e.time_range=l.getDayRange(a.date)),a.search?(e.search={lang:o.props.locale.languageCode,text:a.search},e.limit=100):e.limit=500,c.find({table:"story",criteria:e})}var e={type:"news",target_user_id:u.currentUser.id,filters:{user_ids:[a.user]}};return c.findOne({table:"listing",criteria:e}).then(function(e){if(!e)return[];var t={};return t.id=e.story_ids,c.find({table:"story",criteria:t})}).then(function(e){if(a.story&&!r.find(e,{id:a.story})){var t={id:a.story};return c.findOne({table:"story",criteria:t}).then(function(t){return t?o.props.route.replace(n(62),{date:s(t.ptime).format("YYYY-MM-DD"),user:a.user,story:a.story}).return([]):e})}return e})}).then(function(t){return u.stories=t,e.show(i.createElement(w,u))}).then(function(){var e;e=u.selectedDate?s(u.selectedDate).add(6,"day"):s(o.state.today);var t=e.clone().subtract(14,"day"),n=l.getMonthRanges(t,e),i=[];r.each(n,function(e){i.push({user_ids:[u.user.id],time_range:e})});var a={type:"daily-activities",filters:i};return c.findOne({table:"statistics",criteria:a})}).then(function(e){return u.dailyActivities=e,i.createElement(w,u)})},componentDidMount:function(){c.addEventListener("change",this.handleDateChange)},componentWillUnmount:function(){c.removeEventListener("change",this.handleDateChange)},handleDateChange:function(){this.setState({today:c.today})}});var w=e.exports.Sync=i.createClass({displayName:"PersonPage.Sync",mixins:[g],propTypes:{stories:o.arrayOf(o.object),user:o.object,roles:o.arrayOf(o.object),dailyActivities:o.object,currentUser:o.object,project:o.object,selectedDate:o.string,today:o.string,database:o.instanceOf(d).isRequired,payloads:o.instanceOf(p).isRequired,route:o.instanceOf(h).isRequired,locale:o.instanceOf(f).isRequired,theme:o.instanceOf(m).isRequired},getInitialState:function(){return{chartType:void 0}},getAccessLevel:function(){var e=this.props,t=e.project,n=e.currentUser;return u.getUserAccessLevel(t,n)||"read-only"},render:function(){return i.createElement("div",{className:"person-page"},this.renderUserView(),this.renderList(),this.renderEmptyMessage())},renderUserView:function(){var e={user:this.props.user,roles:this.props.roles,dailyActivities:this.props.dailyActivities,currentUser:this.props.currentUser,chartType:this.state.chartType,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,selectedDate:this.props.selectedDate,today:this.props.today,onChartSelect:this.handleChartSelect};return i.createElement(y,e)},renderList:function(){var e=this.props.route.parameters,t={access:this.getAccessLevel(),stories:this.props.stories,currentUser:this.props.currentUser,project:this.props.project,selectedStoryId:e.story,selectedReactionId:e.reaction,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.handleSelectionClear};return i.createElement(v,t)},renderEmptyMessage:function(){var e=this.props.stories;if(!r.isEmpty(e))return null;if(e){var t,n=this.props.route.parameters;t=n.date?"person-no-stories-on-date":n.search?"person-no-stories-found":"person-no-stories-yet";var o={locale:this.props.locale,online:this.props.database.online,phrase:t};return i.createElement(x,o)}return i.createElement(b,null)},handleSelectionClear:function(e){this.props.route.loosen()},handleChartSelect:function(e){var t=e.chart;this.setState({chartType:t})}})},function(e,t,n){"use strict";var r=n(501),i=Math.max;e.exports=function(e){return i(0,r(e))}},function(e,t,n){"use strict";var r=n(224)();e.exports=function(e){return e!==r&&null!==e}},,,,,,,,function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=(n(8),n(7)),a=n(30),c=n(53),l=n(78),u=n(144),d=n(22),p=n(32),h=n(23),f=n(18),m=n(19),g=n(21),v=n(203),y=n(75),b=n(74);n(291),e.exports=a.createClass({displayName:"NewsPage",propTypes:{database:o.instanceOf(d).isRequired,payloads:o.instanceOf(p).isRequired,route:o.instanceOf(h).isRequired,locale:o.instanceOf(f).isRequired,theme:o.instanceOf(m).isRequired},statics:{parseURL:function(e,t,n){return h.match(e,["/:schema/news/?"],function(e){return{schema:e.schema,roles:h.parseIdList(t.roles),search:t.search,date:h.parseDate(t.date),story:h.parseId(n,/S(\d+)/i),reaction:h.parseId(n,/R(\d+)/i)}})},getURL:function(e){var t,n="/"+e.schema+"/news/",r={};return void 0!=e.date&&(r.date=e.date),void 0!=e.roles&&(r.roles=e.roles.join("+")),void 0!=e.search&&(r.search=e.search),void 0!=e.story&&(t="S"+e.story,void 0!=e.reaction&&(t+="R"+e.reaction)),{path:n,query:r,hash:t}},configureUI:function(e){var t={parameters:r.pick(e.parameters,"schema")},n={type:"daily-activities",filters:{}};return{calendar:{route:t,statistics:n},filter:{route:t},search:{route:t,statistics:n},navigation:{route:t,section:"news"}}}},renderAsync:function(e,t){var o=this,a=this.props.route.parameters,u=!(!a.date&&r.isEmpty(a.roles)&&!a.search),d=this.props.database.use({schema:a.schema,by:this}),p=this.props.route!==t.route?100:1e3,h={listing:null,stories:null,draftStories:null,pendingStories:null,currentUser:null,project:null,acceptNewStory:!u,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(x,h),p),d.start().then(function(e){var t={id:e};return d.findOne({schema:"global",table:"user",criteria:t,required:!0})}).then(function(t){return h.currentUser=t,e.show(i.createElement(x,h))}).then(function(){var e={name:a.schema};return d.findOne({schema:"global",table:"project",criteria:e,required:!0})}).then(function(t){return h.project=t,e.show(i.createElement(x,h))}).then(function(){if(u){var e,t={published:!0,ready:!0};return a.date&&(t.time_range=l.getDayRange(a.date)),r.isEmpty(a.roles)||(t.role_ids=a.roles),a.search?(t.search={lang:o.props.locale.languageCode,text:a.search},t.limit=100,e=!0):t.limit=500,"guest"===h.currentUser.type&&(t.public=!0),d.find({table:"story",criteria:t,remote:e})}var t={type:"news",target_user_id:h.currentUser.id,filters:{}};return r.isEmpty(a.roles)||(t.filters.role_ids=a.roles),"guest"===h.currentUser.type&&(t.filters.public=!0),d.findOne({table:"listing",criteria:t}).then(function(e){if(!e)return[];h.listing=e;var t={id:e.story_ids};return"guest"===h.currentUser.type&&(t.public=!0),d.find({table:"story",criteria:t})}).then(function(e){if(a.story&&!r.find(e,{id:a.story})){var t={id:a.story};return d.findOne({table:"story",criteria:t}).then(function(t){var i=!1;if(t&&t.ptime&&t.published&&!1!==t.ready){s()-s(t.ptime)>6e4&&(i=!0)}if(i){var c=r.clone(a);return c.date=s(t.ptime).format("YYYY-MM-DD"),o.props.route.replace(n(72),c).then(function(){return[]})}return e})}return e})}).then(function(t){return h.stories=t,e.show(i.createElement(x,h))}).then(function(){if(!u){var e={published:!1,user_ids:[h.currentUser.id]};return d.find({table:"story",criteria:e})}}).then(function(t){if(t)return h.draftStories=t,e.show(i.createElement(x,h))}).then(function(){if(!u){var e=r.filter(h.stories,function(e){if(r.includes(e.user_ids,h.currentUser.id)&&e.ptime>c.yesterdayISO)return!0}),t=r.map(e,"id"),n={published:!0,exclude:t,user_ids:[h.currentUser.id],newer_than:c.yesterdayISO};return d.find({table:"story",criteria:n})}}).then(function(e){return e&&(h.pendingStories=e),i.createElement(x,h)})}});var x=e.exports.Sync=i.createClass({displayName:"NewsPage.Sync",mixins:[g],propTypes:{acceptNewStory:o.bool,listing:o.object,stories:o.arrayOf(o.object),draftStories:o.arrayOf(o.object),pendingStories:o.arrayOf(o.object),currentUser:o.object,project:o.object,database:o.instanceOf(d).isRequired,payloads:o.instanceOf(p).isRequired,route:o.instanceOf(h).isRequired,locale:o.instanceOf(f).isRequired,theme:o.instanceOf(m).isRequired},getAccessLevel:function(){var e=this.props,t=e.project,n=e.currentUser;return u.getUserAccessLevel(t,n)||"read-only"},render:function(){return i.createElement("div",{className:"news-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){var e=this.getAccessLevel(),t=this.props.route.parameters,n={access:e,acceptNewStory:this.props.acceptNewStory&&"read-write"===e,stories:this.props.stories,draftStories:this.props.draftStories,pendingStories:this.props.pendingStories,currentUser:this.props.currentUser,project:this.props.project,selectedStoryId:t.story,selectedReactionId:t.reaction,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.handleSelectionClear};return i.createElement(v,n)},renderEmptyMessage:function(){var e=this.props.stories;if(!r.isEmpty(e))return null;if(e){var t,n=this.props.route.parameters;t=n.date?"news-no-stories-on-date":r.isEmpty(n.roles)?n.search?"news-no-stories-found":"news-no-stories-yet":"news-no-stories-by-role";var o={locale:this.props.locale,online:this.props.database.online,phrase:t};return i.createElement(b,o)}return i.createElement(y,null)},handleSelectionClear:function(){this.props.route.loosen()}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(30),a=n(383),c=n(22),l=n(32),u=n(23),d=n(18),p=n(19),h=n(328),f=n(332),m=n(326),g=n(335),v=n(334),y=n(331),b=n(336),x=n(330),w=n(333),k=n(329),C=n(327);n(753),e.exports=s.createClass({displayName:"SettingsPage",propTypes:{database:o.instanceOf(c).isRequired,payloads:o.instanceOf(l).isRequired,route:o.instanceOf(u).isRequired,locale:o.instanceOf(d).isRequired,theme:o.instanceOf(p).isRequired},statics:{parseURL:function(e,t,n){return u.match(e,["/global/settings/?","/:schema/settings/?"],function(e){return{schema:e.schema,diagnostics:!!t.diagnostics}})},getURL:function(e){var t="/"+(e.schema||"global")+"/settings/",n={};return e.diagnostics&&(n.diagnostics=1),{path:t,query:n,hash:void 0}},configureUI:function(e){return{navigation:{route:{parameters:r.pick(e.parameters,"schema","user")},section:"settings"}}}},renderAsync:function(e,t){var n=this.props.route.parameters,r=this.props.database.use({schema:n.schema,by:this}),o=this.props.route!==t.route?100:1e3,s={currentUser:null,currentProject:null,projectLinks:null,system:null,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(E,s),o),r.start().then(function(e){var t={id:e};return r.findOne({schema:"global",table:"user",criteria:t,required:!0})}).then(function(t){return s.currentUser=t,e.show(i.createElement(E,s))}).then(function(){var e={};return r.find({schema:"local",table:"project_link",criteria:e})}).then(function(t){return s.projectLinks=t,e.show(i.createElement(E,s))}).then(function(){var e={name:n.schema};return r.findOne({schema:"global",table:"project",criteria:e,required:!0})}).then(function(t){return s.currentProject=t,e.show(i.createElement(E,s))}).then(function(){var e={user_id:s.currentUser.id};return r.find({schema:"global",table:"device",criteria:e})}).then(function(t){return s.devices=t,e.show(i.createElement(E,s))}).then(function(){var e={};return r.findOne({schema:"global",table:"system",criteria:e})}).then(function(e){return s.system=e,i.createElement(E,s)})}});var E=e.exports.Sync=i.createClass({displayName:"SettingsPage.Sync",propTypes:{currentUser:o.object,currentProject:o.object,projectLinks:o.arrayOf(o.object),devices:o.arrayOf(o.object),system:o.object,database:o.instanceOf(c).isRequired,payloads:o.instanceOf(l).isRequired,route:o.instanceOf(u).isRequired,locale:o.instanceOf(d).isRequired,theme:o.instanceOf(p).isRequired},getInitialState:function(){return{user:null}},getUser:function(){return this.state.user||this.props.currentUser},componentWillReceiveProps:function(e){this.props.currentUser!==e.currentUser&&this.setState({user:null})},render:function(){return this.props.route.parameters.diagnostics?this.renderDiagnostics():this.renderSettings()},renderSettings:function(){return i.createElement("div",{className:"settings-page"},i.createElement("div",{className:"panels"},this.renderDiagnosticsPanel(),this.renderProjectPanel(),this.renderDevicePanel(),this.renderUserInfoPanel(),this.renderUserImagePanel(),this.renderSocialNetworkPanel(),this.renderLanguagePanel(),this.renderNotificationPanel(),this.renderWebAlertPanel(),this.renderMobileAlertPanel()))},renderDiagnostics:function(){return i.createElement("div",{className:"settings-page"},i.createElement("div",{className:"panels diagnostics"},i.createElement(C,{type:"connectivity-monitor",title:"Network"}),i.createElement(C,{type:"websocket-notifier",title:"Web Socket"}),i.createElement(C,{type:"push-notifier",title:"Push Notification"}),i.createElement(C,{type:"subscription-manager",title:"Data Subscription"}),i.createElement(C,{type:"session-manager",title:"Sessions"}),i.createElement(C,{type:"link-manager",title:"Project Links"}),i.createElement(C,{type:"indexed-db-cache",title:"IndexedDB Cache"}),i.createElement(C,{type:"sqlite-cache",title:"SQLite Cache"}),i.createElement(C,{type:"locale-manager",title:"Locale Manager"})))},renderDiagnosticsPanel:function(){var e=this.getUser();if(!r.get(e,"settings.diagnostics.show_panel"))return null;var t={currentUser:e,route:this.props.route,locale:this.props.locale,onChange:this.handleChange};return i.createElement(h,t)},renderProjectPanel:function(){var e={system:this.props.system,currentProject:this.props.currentProject,projectLinks:this.props.projectLinks,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(f,e)},renderDevicePanel:function(){if(r.isEmpty(this.props.devices))return null;var e={devices:this.props.devices,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(m,e)},renderUserInfoPanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return i.createElement(g,e)},renderUserImagePanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,theme:this.props.theme,onChange:this.handleChange};return i.createElement(v,e)},renderSocialNetworkPanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return i.createElement(w,e)},renderNotificationPanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return i.createElement(y,e)},renderWebAlertPanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return i.createElement(b,e)},renderMobileAlertPanel:function(){if(r.isEmpty(this.props.devices))return null;var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return i.createElement(x,e)},renderLanguagePanel:function(){var e={locale:this.props.locale};return i.createElement(k,e)},componentDidMount:function(){a.addListener(this.handleKonamiCode)},componentWillUnmount:function(){this.autosaveTimeout&&this.state.user&&(clearTimeout(this.autosaveTimeout),this.saveUser(this.state.user)),a.removeListener(this.handleKonamiCode)},autosaveUser:function(e){var t=this;this.autosaveTimeout&&clearTimeout(this.autosaveTimeout),this.autosaveTimeout=setTimeout(function(){t.saveUser(e),t.autosaveTimeout=null},2e3)},saveUser:function(e){var t=this,n=this.props.payloads;return n.prepare("global",e).then(function(){return t.props.database.use({schema:"global",by:t}).saveOne({table:"user"},e).then(function(e){return n.dispatch("global",e).return(e)})})},handleChange:function(e){var t=this,n=e.user;this.setState({user:n},function(){t.autosaveUser(n)})},handleKonamiCode:function(e){var t=this,n=r.decoupleSet(this.getUser(),"settings.diagnostics.show_panel",!0);this.setState({user:n},function(){t.autosaveUser(n)})}})},function(e,t,n){"use strict";function r(e){var t=e.locale.translate,n=e.phrase;return e.online||(n="empty-currently-offline"),i.createElement("div",{className:"empty-message"},i.createElement("div",{className:"text"},t(n)))}var i=n(4),o=i.PropTypes,s=n(18);e.exports=r,n(788),r.propTypes={locale:o.instanceOf(s).isRequired,online:o.bool,phrase:o.string.isRequired},r.defaultProps={online:!0}},function(e,t,n){"use strict";function r(e){return i.createElement("div",{className:"loading-animation"},i.createElement("div",{className:"first dot"}),i.createElement("div",{className:"second dot"}),i.createElement("div",{className:"third dot"}),i.createElement("div",{className:"fourth dot"}))}var i=n(4);e.exports=r,n(790)},function(e,t,n){"use strict";function r(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if("number"==typeof t)this.statusCode=t;else if("string"==typeof t)this.message=t;else if("object"===(void 0===t?"undefined":i(t)))for(var n in t)this[n]=t[n]}this.statusCode||(this.statusCode=500),this.hasOwnProperty("name")||(this.name=o[this.statusCode]),this.hasOwnProperty("message")||(this.message=this.name)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=r;var o={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"};r.prototype=Object.create(Error.prototype)},function(e,t,n){"use strict";(function(e){function t(e){return e?a.filter(l,{kind:e}):l}function r(e){return t(e).length>0}function i(e,t){"change"===e&&u.push(t)}function o(e,t){"change"===e&&(u=a.pull(u,t))}function s(){return c.try(function(){return navigator.mediaDevices.enumerateDevices()}).then(function(t){l=t,a.each(u,function(t){t.call(e,{type:"change",target:e})})}).catch(function(e){})}var a=n(5),c=n(6);e.exports={getDevices:t,hasDevice:r,addEventListener:i,removeEventListener:o};var l=[],u=[];s().then(function(){navigator.mediaDevices.addEventListener("devicechange",s)})}).call(t,n(87)(e))},function(e,t,n){"use strict";function r(e){var t=e instanceof a?e:a(e),n=t.clone().endOf("day");return"["+t.toISOString()+","+n.toISOString()+"]"}function i(e,t){for(var n=e instanceof a?e:a(e),r=t instanceof a?t:a(t),i=n.startOf("month"),o=r.endOf("month"),s=[],c=i.clone();c<=o;c.add(1,"month")){var l=c.toISOString(),u=c.clone().endOf("month").toISOString(),d="["+l+","+u+"]";s.push(d)}return s}function o(e,t){for(var n=startTime instanceof a?startTime:a(startTime),r=t instanceof a?t:a(t),i=n.startOf("day"),o=r.endOf("day"),s=[],c=i.clone();c<=o;c.add(1,"day")){var l=c.format("YYYY-MM-DD");s.push(l)}return s}function s(){return a().utcOffset()}var a=n(7);n(53);e.exports={getDayRange:r,getMonthRanges:i,getTimeZoneOffset:s,getDates:o}},,function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return v=e,y}}function o(e,t){try{return e(t)}catch(e){return v=e,y}}function s(e,t,n){try{e(t,n)}catch(e){return v=e,y}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==r&&m(e,this)}function c(e,t,n){return new e.constructor(function(i,o){var s=new a(r);s.then(i,o),l(e,new f(t,n,s))})}function l(e,t){for(;3===e._65;)e=e._55;if(a._37&&a._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);u(e,t)}function u(e,t){g(function(){var n=1===e._65?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._65?d(t.promise,e._55):p(t.promise,e._55));var r=o(n,e._55);r===y?p(t.promise,v):d(t.promise,r)})}function d(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return p(e,v);if(n===e.then&&t instanceof a)return e._65=3,e._55=t,void h(e);if("function"==typeof n)return void m(n.bind(t),e)}e._65=1,e._55=t,h(e)}function p(e,t){e._65=2,e._55=t,a._87&&a._87(e,t),h(e)}function h(e){if(1===e._40&&(l(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)l(e,e._72[t]);e._72=null}}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=s(e,function(e){n||(n=!0,d(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==y||(n=!0,p(t,v))}var g=n(198),v=null,y={};e.exports=a,a._37=null,a._87=null,a._61=r,a.prototype.then=function(e,t){if(this.constructor!==a)return c(this,e,t);var n=new a(r);return l(this,new f(e,t,n)),n}},,,,,,,,function(e,t,n){"use strict";function r(e){if("number"!=typeof e)return"";var t=String(Math.floor(e/36e5)),n=String(Math.floor(e/6e4)%60),r=String(Math.round(e/1e3)%60);return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),t+":"+n+":"+r}var i=n(4),o=i.PropTypes,s=n(21);n(787),e.exports=i.createClass({displayName:"DurationIndicator",mixins:[s],propTypes:{duration:o.number,startTime:o.instanceOf(Date)},calculateDuration:function(){var e=this.props.duration;if(this.props.startTime){e+=new Date-this.props.startTime}return e},componentWillMount:function(){this.props.startTime&&this.startTimer()},componentWillReceiveProps:function(e){!this.props.startTime&&e.startTime?this.startTimer():this.props.startTime&&!e.startTime&&this.stopTimer()},render:function(){var e=this.calculateDuration(),t="icon";return this.props.startTime&&(t+=" blinking"),i.createElement("div",{className:"duration-indiactor"},i.createElement("span",{className:t},i.createElement("i",{className:"fa fa-circle"})),i.createElement("span",{className:"duration"},r(e)))},componentWillUnmount:function(){this.stopTimer()},startTimer:function(){var e=this;this.interval||(this.interval=setInterval(function(){e.forceUpdate()},500))},stopTimer:function(){this.interval&&(clearInterval(this.interval),this.interval=null)}}),e.exports.format=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&!!v.includes(t.user_ids,e.id)}function i(e){return!!e&&("admin"===e.type||"moderator"===e.type)}function o(e,t,n){if("read-write"!==n)return!1;if(y.isEditable(t)){if(i(t)&&y.wasPublishedWithin(t,14,"day"))return!0;if(r(e,t)&&y.wasPublishedWithin(t,3,"day"))return!0}return!1}function s(e,t,n){return"read-write"===n&&(!!i(e)||!(!r(e,t)||"guest"===e.type))}function a(e,t,n){if("read-write"!==n)return!1;if(i(e)){if(y.wasPublishedWithin(t,14,"day"))return!0}else if(r(e,t)&&y.wasPublishedWithin(t,3,"day"))return!0;return!1}function c(e,t,n){return"read-write"===n&&!(!i(e)&&!r(e,t)||y.wasBumpedWithin(t,1,"day"))}function l(e,t,n,o){return!!e&&("read-write"===o&&(!(!y.isTrackable(t)||!i(e)&&!r(e,t))&&v.some(n,function(t){if(v.includes(t.user_ids,e.id)&&t.details.issues_enabled)return!0})))}function u(e,t){return!(!e||!t)&&!(!v.includes(t.user_ids,e.id)||!t.details.web_url)}function d(e,t,n){return!!e&&"read-write"===n}function p(e,t,n){return"guest"!==e.type&&d(e,t)}function h(e,t){return!(!e||!t)&&t.user_id===e.id}function f(e,t,n,r){return!!e&&!(!b.isEditable(n)||!h(e,n)||"read-write"!==r&&"read-comment"!==r||!b.wasPublishedWithin(n,3,"day"))}function m(e,t,n,o){return!(!i(e)||"read-write"!==o)||(!(!h(e,n)||"read-write"!==o&&"read-comment"!==o||!b.wasPublishedWithin(n,3,"day"))||!(!r(e,t)||"read-write"!==o||!b.wasPublishedWithin(n,7,"day")))}function g(e,t,n,o){return!(!i(e)||"read-write"!==o)||!(!r(e,t)||"guest"===e.type||"read-write"!==o)}var v=n(5),y=(n(7),n(147)),b=n(219);e.exports={isAuthor:r,isRespondent:h,canModerate:i,canEditStory:o,canHideStory:s,canRemoveStory:a,canBumpStory:c,canAddIssue:l,canAccessRepo:u,canCreateBookmark:d,canSendBookmarks:p,canEditReaction:f,canHideReaction:g,canRemoveReaction:m}},function(e,t,n){"use strict";function r(){this.parts=[],this.closed=!1,this.error=null,this.pullResult=null,this.waitResult=null,this.id=null,this.size=0,this.onProgress=null}function i(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var o=n(5);e.exports=r,r.prototype.toBlob=function(){var e=o.map(this.parts,"blob");if(e.length>1){var t=e[0].type;return new Blob(e,{type:t})}return 1===e.length?e[0]:new Blob},r.prototype.toJSON=function(){return this.id},r.prototype.push=function(e){this.parts.push({blob:e,sent:!1}),this.size+=e.size,this.pullResult&&(this.pullResult.resolve(e),this.pullResult=null)},r.prototype.close=function(){this.closed=!0,o.find(this.parts,{sent:!1})||(this.pullResult&&(this.pullResult.resolve(null),this.pullResult=null),this.waitResult&&(this.waitResult.resolve(),this.waitResult=null))},r.prototype.pull=function(){var e=o.find(this.parts,{sent:!1});return e?Promise.resolve(e.blob):this.closed?Promise.resolve(null):(this.pullResult||(this.pullResult=i()),this.pullResult.promise)},r.prototype.finalize=function(e){var t=o.find(this.parts,{blob:e});if(t&&(t.sent=!0),this.waitResult){!o.find(this.parts,{sent:!1})&&this.closed&&this.waitResult.resolve()}},r.prototype.abandon=function(e){this.error=e,this.waitResult&&this.waitResult.reject(e)},r.prototype.wait=function(){if(this.closed){if(this.error)return Promise.reject(this.error);if(!o.find(this.parts,{sent:!1}))return Promise.resolve()}return this.waitResult||(this.waitResult=i()),this.waitResult.promise},r.prototype.pipe=function(e,t){t||(t=1048576);for(var n=e.size,r=e.type,i=0;i<n;i+=t){var o=Math.min(t,n-i),s=e.slice(i,i+o,r);this.push(s)}this.close()},r.prototype.report=function(e){this.onProgress&&this.onProgress({type:"progress",target:this,loaded:e,total:this.size})}},function(e,t,n){"use strict";function r(e,t,n,r){var c=new XMLHttpRequest,l=new s(function(s,l){var u=o.get(r,"username",null),d=o.get(r,"password",null),p=o.get(r,"contentType",null);if("GET"===(e=o.toUpper(e))&&!o.isEmpty(n)){var h=[];o.forIn(n,function(e,t){t=encodeURIComponent(t),void 0!==(e=encodeURIComponent(e))&&h.push(t+"="+e)}),-1===o.indexOf(t,"?")?t+="?":t+="&",t+=o.join(h,"&"),n=null}"json"===p&&(p="application/json"),"application/json"===p&&o.isObject(n)&&(n=JSON.stringify(n,i)),c.timeout=o.get(r,"timeout"),c.withCredentials=o.get(r,"crossSite",!1),c.responseType=o.get(r,"responseType",""),c.attributes=o.get(r,"attributes"),c.attributes&&c.upload&&(c.upload.attributes=c.attributes),c.open(e,t,!0,u,d),p&&c.setRequestHeader("Content-Type",p),c.onload=function(e){if(c.status>=400){var t=new a(c.status,c.response);l(t)}else{var n=c.response;s(n)}},c.ontimeout=function(e){l(new Error("Request timed out"))},c.onerror=function(e){l(new Error(e.message))},c.onabort=function(e){l(new Error("Transfer aborted: "+t))};var f=o.get(r,"onDownloadProgress"),m=o.get(r,"onUploadProgress");c.onprogress=function(e){f&&f(e)},c.upload.onprogress=function(e){m&&m(e)},c.send(n)});return l.cancel=function(){c.abort()},l}function i(e,t){if(!(t instanceof Blob))return t}var o=n(5),s=n(6),a=n(76);e.exports={fetch:r}},function(e,t,n){"use strict";(function(t){var r=n(5),i=n(4),o=i.PropTypes,s=n(8);e.exports=i.createClass({displayName:"SmartList",propTypes:{items:o.arrayOf(o.object),fresh:o.bool,behind:o.number,ahead:o.number,anchor:o.string,offset:o.number,inverted:o.bool,onIdentity:o.func.isRequired,onRender:o.func.isRequired,onAnchorChange:o.func,onBeforeAnchor:o.func},getDefaultProps:function(){return{fresh:!1,behind:5,ahead:10,offset:0,inverted:!1}},getInitialState:function(){return this.itemHeights={},this.itemNodes={},this.anchorOffset=this.props.offset,{currentAnchor:this.props.anchor,estimatedHeight:void 0}},componentWillReceiveProps:function(e){this.props.anchor!==e.anchor&&(this.setState({currentAnchor:e.anchor}),this.anchorOffset=e.offset),this.props.fresh&&(this.stillFresh=!0,this.setState({currentAnchor:e.anchor}),this.anchorOffset=e.offset,e.anchor||this.scrollContainer&&this.scrollContainer.scrollTop>0&&(this.scrollContainer.scrollTop=0))},render:function(){var e=this,n=this.props.items,o=this.props.onIdentity,s=r.map(n,function(t,n){return o({type:"identity",target:e,item:t,currentIndex:n})}),a=this.state.currentAnchor?r.indexOf(s,this.state.currentAnchor):0;if(-1===a&&n){for(var c=r.keys(this.itemNodes),l=r.indexOf(c,this.state.currentAnchor),u=l+1;u<c.length;u++){var d=r.indexOf(s,c[u]);if(-1!==d){a=d,this.state.currentAnchor=s[d],t(function(){e.triggerAnchorChangeEvent(s[d])});break}}-1===a&&(this.state.currentAnchor=void 0,t(function(){e.triggerAnchorChangeEvent(void 0)}))}var p=Math.max(0,a-this.props.behind),h=Math.min(r.size(n),a+this.props.ahead+1),f=this.props.onRender,m=r.map(this.props.items,function(t,n){var r=s[n],o={type:"render",target:e,item:t,needed:p<=n&&n<h,startIndex:p,currentIndex:n,endIndex:h,previousHeight:e.itemHeights[r],estimatedHeight:e.state.estimatedHeight},a=f(o);return i.createElement("div",{key:r,id:r},a)});return this.startIndex=p,this.endIndex=h,this.props.inverted&&r.reverse(m),i.createElement("div",{className:"smart-list"},m)},componentDidMount:function(){this.container=s.findDOMNode(this);for(var e=this.container.parentNode;e;e=e.parentNode){var t=getComputedStyle(e);if("auto"===t.overflowY||"scroll"===t.overflowY){this.scrollContainer=e;break}}this.scrollContainerWidth=this.scrollContainer.clientWidth,this.scrollContainer.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleWindowResize),this.scanItemNodes()},componentDidUpdate:function(e,t){var n=this;if(!this.stillFresh){var i=!r.isEmpty(this.itemNodes),o=this.scanItemNodes();if(this.state.currentAnchor&&i){var s=r.keys(this.itemNodes),a=r.indexOf(s,this.state.currentAnchor),c=r.transform(o,function(e,t){t<a&&e.push(n.props.items[t])},[]);r.isEmpty(c)||this.triggerBeforeAnchorEvent(c)}}this.stillFresh=!1},componentWillUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleWindowResize)},scanItemNodes:function(){var e=this.startIndex,t=this.endIndex,n=0,i=this.itemNodes,o=[];this.itemNodes={};for(var s=this.container.firstChild;s;s=s.nextSibling){var a=s.id;this.itemNodes[a]=s,e<=n&&n<t&&(this.itemHeights[a]=s.offsetHeight),i[a]||o.push(n),n++}if(void 0===this.state.estimatedHeight){var c=r.values(this.itemHeights);if(!r.isEmpty(c)){var l=r.sum(c)/c.length,u=Math.round(l);this.setState({estimatedHeight:u})}}else if(!this.scrolling){var d,p;if(this.state.currentAnchor?(d=this.itemNodes[this.state.currentAnchor],p=this.anchorOffset):this.props.inverted&&(d=this.container.lastChild,p=1/0),d&&d&&void 0!==p){var h=this.scrollContainer.offsetTop,f=this.scrollContainer.scrollTop,m=d.offsetTop-h;if(this.props.inverted){var g=this.scrollContainer.scrollHeight,v=this.scrollContainer.offsetHeight,y=g-f-v,b=d.offsetHeight,x=g-m-b,w=x-y;if(w!==p){var k=Math.max(0,x-p),C=g-k-v;this.scrollContainer.scrollTop=C}}else{var w=m-f;if(w!==p){var C=Math.max(0,m-p);this.scrollContainer.scrollTop=C}}}}return o},resetHeights:function(){this.itemHeights={},this.setState({estimatedHeight:void 0})},triggerAnchorChangeEvent:function(e){if(this.props.onAnchorChange){var t=r.keys(this.itemNodes),n=r.indexOf(t,this.state.currentAnchor),i=this.props.items[n];this.props.onAnchorChange({type:"anchorchange",target:this,anchor:e,item:i})}},triggerBeforeAnchorEvent:function(e){this.props.onBeforeAnchor&&this.props.onBeforeAnchor({type:"beforeanchor",target:this,items:e})},handleScroll:function(e){var t,n=this,i=this.scrollContainer.scrollTop,o=this.scrollContainer.offsetTop;if(this.props.inverted){var s,a=this.scrollContainer.scrollHeight,c=this.scrollContainer.offsetHeight,l=a-i-c;if(l>0)for(var u=r.keys(this.itemNodes),d=u.length-1;d>=0;d--){var p=u[d];t=this.itemNodes[p];var h=t.offsetTop-o,f=t.offsetHeight,s=a-h-f;if(s>l)break}this.anchorOffset=t?s-l:void 0}else{var h;if(i>0)for(var u=r.keys(this.itemNodes),d=0;d<u.length;d++){var p=u[d];if(t=this.itemNodes[p],(h=t.offsetTop-o)>i)break}this.anchorOffset=t?h-i:void 0}var m=t?t.id:void 0;this.state.currentAnchor!==m&&(this.setState({currentAnchor:m}),this.triggerAnchorChangeEvent(m)),this.scrolling=!0,this.scrollingEndTimeout&&clearTimeout(this.scrollingEndTimeout),this.scrollingEndTimeout=setTimeout(function(){n.scrolling=!1,n.scrollingEndTimeout=0},500)},handleWindowResize:function(){this.scrollContainerWidth!==this.scrollContainer.clientWidth&&(this.scrollContainerWidth=this.scrollContainer.clientWidth,this.resetHeights())}})}).call(t,n(130).setImmediate)},function(e,t,n){"use strict";function r(e){return e.format("YYYY-MM-DD")}function i(){o.each(d,function(e){e.update()})}var o=n(5),s=n(4),a=s.PropTypes,c=n(7),l=n(53),u=n(18);e.exports=s.createClass({displayName:"Time",propTypes:{locale:a.instanceOf(u).isRequired,time:a.string},getInitialState:function(){var e=c(this.props.time),t={time:e,date:r(e)};return this.updateClassName(t),this.updateText(t),t},updateClassName:function(e){var t;t=e.time.isValid()?e.date===l.today?"today":e.date===l.yesterday?"yesterday":"older":"invalid",e.className=t},updateText:function(e){var t,n=this.props.locale.languageCode,r=e.time.clone().locale(n);if("today"===e.className)t=o.capitalize(r.fromNow());else if("yesterday"===e.className){var i=this.props.locale.translate;t=i("time-yesterday")}else t="older"===e.className?r.format("ll"):"";e.text=t},update:function(){var e=o.clone(this.state);this.updateClassName(e),this.updateText(e);var t=o.shallowDiff(e,this.state);o.isEmpty(t)||this.setState(t)},componentWillReceiveProps:function(e){var t=o.clone(this.state),n=c(e.time);t.time=n,t.date=r(n),this.updateClassName(t),this.updateText(t);var i=o.shallowDiff(t,this.state);o.isEmpty(i)||this.setState(i)},render:function(){return s.createElement("span",{className:"time "+this.state.className},this.state.text)},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(e,t){"today"===this.state.className||"yesterday"===this.state.className?o.includes(d,this)||d.push(this):o.pull(d,this)},componentWillUnmount:function(){o.pull(d,this)}});var d=[];setInterval(i,15e3)},function(e,t,n){"use strict";e.exports=n(490)()?Array.from:n(491)},function(e,t,n){"use strict";e.exports=n(523)()?Symbol:n(525)},,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(303)},function(e,t,n){"use strict";function r(e){switch(e){case"facebook":return"facebook-official";default:return e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=n(6),a=n(4),c=a.PropTypes,l=n(30),u=(n(91),n(34)),d=(n(220),n(22)),p=n(23),h=n(18),f=n(19),m=n(52),g=(n(29),n(46),n(301)),v=n(75),y=n(74);n(754);var b=e.exports=l.createClass({displayName:"StartPage",propTypes:{canAccessServer:c.bool,canAccessSchema:c.bool,database:c.instanceOf(d).isRequired,route:c.instanceOf(p).isRequired,locale:c.instanceOf(h).isRequired,theme:c.instanceOf(f).isRequired,onEntry:c.func,onExit:c.func,onAvailableSchemas:c.func},statics:{parseURL:function(e,t,n){return p.match(e,["/:extra?"],function(e){return o.trimEnd(e.extra,"/")?null:{add:!!t.add,activationCode:t.ac,schema:t.p}})},getURL:function(e){var t={};return e&&(e.add&&(t.add=1),e.activationCode&&(t.ac=e.activationCode),e.schema&&(t.p=e.schema)),{path:"/",query:t,hash:void 0}},configureUI:function(e){return{navigation:{top:!1,bottom:!1}}}},renderAsync:function(e,t){var n=(this.props.route.parameters,this.props.database.use({schema:"global",by:this})),r=this.props.route!==t.route?100:1e3,i={currentUser:null,system:null,servers:null,projects:null,projectLinks:null,canAccessServer:this.props.canAccessServer,canAccessSchema:this.props.canAccessSchema,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onEntry:this.props.onEntry,onExit:this.props.onExit,onAvailableSchemas:this.props.onAvailableSchemas};return this.props.canAccessServer?(e.show(a.createElement(x,i)),n.start().then(function(e){var t={id:e};return n.findOne({table:"user",criteria:t})}).then(function(e){i.currentUser=e}).then(function(){var e={};return n.findOne({table:"system",criteria:e,required:!0})}).then(function(t){return i.system=t,e.show(a.createElement(x,i))}).then(function(){var e={archived:!1};return n.find({table:"project",criteria:e})}).then(function(t){return i.projects=t,e.show(a.createElement(x,i))}).then(function(){var e={};return n.find({schema:"local",table:"project_link",criteria:e})}).then(function(e){return i.projectLinks=e,a.createElement(x,i)})):(e.show(a.createElement(x,i),r),n.beginSession("client").then(function(e){return i.system=e.system,i.servers=e.servers,a.createElement(x,i)}))}}),x=e.exports.Sync=a.createClass({displayName:"StartPage.Sync",propTypes:{currentUser:c.object,system:c.object,servers:c.arrayOf(c.object),projects:c.arrayOf(c.object),projectLinks:c.arrayOf(c.object),canAccessServer:c.bool,canAccessSchema:c.bool,error:c.instanceOf(Error),database:c.instanceOf(d).isRequired,route:c.instanceOf(p).isRequired,locale:c.instanceOf(h).isRequired,theme:c.instanceOf(f).isRequired,onEntry:c.func,onExit:c.func,onAvailableSchemas:c.func},getInitialState:function(){return{transition:null,selectedProjectId:0,oauthErrors:{}}},isMember:function(e){var t=this.props.currentUser;return!!t&&o.includes(e.user_ids,t.id)},isPendingMember:function(e){var t=this.props.currentUser;return!!t&&o.includes(t.requested_project_ids,e.id)},hasReadAccess:function(e){return!!this.isMember(e)||("admin"===this.props.currentUser.type||o.get(e,"settings.access_control.grant_view_access"))},getTargetPage:function(){return n(this.props.route.parameters.add?73:72)},componentWillReceiveProps:function(e){if(this.props.route!==e.route||this.props.canAccessServer!==e.canAccessServer||this.props.canAccessSchema!==e.canAccessSchema){e.route.component!==b&&e.canAccessSchema&&e.canAccessServer&&this.transitionOut(e.route)}},render:function(){return this.renderForBrowser()},renderForBrowser:function(){var e,t=this.props.locale.translate;if(this.props.system){var n=o.get(this.props.system,"details.resources"),r=o.find(n,{type:"image"});if(r){e={backgroundImage:"url("+this.props.theme.getImageURL(r,{width:1024,quality:40})+")"}}}var i="start-page browser";return this.state.transition&&(i+=" "+this.state.transition),a.createElement("div",{className:i,style:e},a.createElement("div",{className:"bar"},a.createElement("h1",{className:"welcome"},t("start-welcome")),a.createElement("div",{className:"content-area"},this.renderDescription(),this.renderChoices())),this.renderProjectDialog())},renderForCordova:function(){return},renderDescription:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.system;if(!n)return null;var r=t(n.details.title)||e("start-system-title-default"),i=t(n.details.description);return a.createElement("div",{className:"section description"},a.createElement("h2",null,r),a.createElement(m,null,a.createElement("p",null,i)))},renderTitle:function(){return},renderMobileGreeting:function(){return},renderActivationControls:function(){return a.createElement("div",null,this.renderActivationInstructions(),this.renderActivationButtons(),this.renderQRScannerDialogBox(),this.renderActivationDialogBox())},renderActivationInstructions:function(){return},renderActivationButtons:function(){return},renderActivationSelector:function(){return},renderChoices:function(){return this.props.canAccessServer?this.renderProjectButtons():this.renderOAuthButtons()},renderEmptyMessage:function(){if(this.props.canAccessServer){var e=this.props.projects;if(!o.isEmpty(e))return null;if(e){var t={locale:this.props.locale,online:this.props.database.online,phrase:"start-no-projects"};return a.createElement(y,t)}return a.createElement(v,null)}var n=this.props.servers;if(!o.isEmpty(n))return null;if(n){var t={locale:this.props.locale,online:this.props.database.online,phrase:"start-no-servers"};return a.createElement(y,t)}},renderOAuthButtons:function(){var e=this.props.locale.translate,t=this.props.servers;return t?a.createElement("div",{className:"section buttons"},a.createElement("h2",null,e("start-social-login")),a.createElement(m,null,this.renderEmptyMessage(),a.createElement("p",null,o.map(t,this.renderOAuthButton)))):null},renderOAuthButton:function(e,t){var n=this.props.locale.translate,o=this.props.locale.pick,s=o(e.details.title)||n("server-type-"+e.type),c=r(e.type),l=this.props.database.getOAuthURL(e),u={className:"oauth-button",href:l,onClick:this.handleOAuthButtonClick,"data-type":e.type},d=this.state.oauthErrors[e.type];if(d){var n=this.props.locale.translate,p=n("start-error-"+d.reason);return u.className+=" error",a.createElement("a",i({key:t},u),a.createElement("span",{className:"icon"},a.createElement("i",{className:"fa fa-fw fa-"+c})),a.createElement("span",{className:"error"},p))}return a.createElement("a",i({key:t},u),a.createElement("span",{className:"icon"},a.createElement("i",{className:"fa fa-fw fa-"+c})),a.createElement("span",{className:"label"},s))},renderProjectButtons:function(){var e=this.props.locale.translate,t=w(this.props.projects,this.props.locale);return a.createElement("div",{className:"section buttons"},a.createElement("h2",null,e("start-projects")),a.createElement(m,null,this.renderEmptyMessage(),o.map(t,this.renderProjectButton)))},renderProjectButton:function(e,t){var r,s=(this.props.locale.translate,this.props.locale.pick),c=s(e.details.title)||e.name,l=s(e.details.description),u=o.get(e,"details.resources"),d=o.find(u,{type:"image"});if(d){var p=this.props.theme.getImageURL(d,{width:56,height:56});r=a.createElement("img",{src:p})}else{var h=n(819),f=e.id%5+1;r=a.createElement("div",{className:"default v"+f},a.createElement(h,null))}var m;this.isMember(e)?m=a.createElement("i",{className:"fa fa-user-circle-o badge"}):this.isPendingMember(e)&&(m=a.createElement("i",{className:"fa fa-clock-o badge"}));var g={"data-project-id":e.id,className:"project-button"};return this.hasReadAccess(e)?g.href=this.props.route.find(this.getTargetPage(),{schema:e.name}):g.onClick=this.handleProjectButtonClick,a.createElement("a",i({key:e.id},g),a.createElement("div",{className:"icon"},r),a.createElement("div",{className:"text"},m,a.createElement("div",{className:"title"},c),a.createElement("div",{className:"description"},a.createElement("div",{className:"contents"},l,a.createElement("div",{className:"ellipsis"},a.createElement("i",{className:"fa fa-ellipsis-h"}))))))},renderProjectDialog:function(){if(!this.state.renderingProjectDialog)return null;var e=o.find(this.props.projects,{id:this.state.selectedProjectId});if(!e)return null;var t={show:this.state.showingProjectDialog,currentUser:this.props.currentUser,project:e,member:this.isMember(e),pendingMember:this.isPendingMember(e),readAccess:this.hasReadAccess(e),database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleMembershipRequestConfirm,onClose:this.handleMembershipRequestClose,onProceed:this.handleMembershipRequestProceed};return a.createElement(g,t)},componentDidUpdate:function(e,t){var n=this;if(e.projects!==this.props.projects||e.currentUser!==this.props.currentUser){var r=o.filter(this.props.projects,function(e){return n.hasReadAccess(e)});o.isEmpty(r)||this.props.onAvailableSchemas&&this.props.onAvailableSchemas({type:"availableschemas",target:this,schemas:o.map(r,"name")})}},componentDidMount:function(){this.props.onEntry&&this.props.onEntry({type:"entry",target:this})},transitionOut:function(e){var t=this,n="fast",r=1300,i=e.parameters;!o.some(this.props.projectLinks,{address:i.address,schema:i.schema})&&(n="slow",r=3700),this.setState({transition:"transition-out-"+n},function(){setTimeout(function(){t.props.onExit&&t.props.onExit({type:"exit",target:t})},r)})},openPopUpWindow:function(e){return new s(function(t,n){var r={width:800,height:600,left:window.screenLeft+Math.round((window.outerWidth-800)/2),top:window.screenTop+Math.round((window.outerHeight-600)/2),toolbar:"no",menubar:"no",status:"no"},i=o.map(r,function(e,t){return t+"="+e}),s=window.open(e,"login",i.join(","));if(s){s.location=e;var a=setInterval(function(){s.closed&&(clearInterval(a),t())},50)}else n(new Error("Unable to open popup"))})},handleOAuthButtonClick:function(e){var t=this,n=e.currentTarget.getAttribute("href"),r=e.currentTarget.getAttribute("data-type");return e.preventDefault(),this.openPopUpWindow(n).then(function(){return t.props.database.use({by:t}).checkSession().catch(function(e){var n=o.clone(t.state.oauthErrors);n[r]=e,t.setState({oauthErrors:n})})})},handleProjectButtonClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-project-id"));this.setState({selectedProjectId:t,showingProjectDialog:!0,renderingProjectDialog:!0})},handleMembershipRequestConfirm:function(e){var t=this.state.selectedProjectId,n=(o.find(this.props.projects,{id:t}),this.props.currentUser.requested_project_ids),r={id:this.props.currentUser.id,requested_project_ids:o.union(n,[t])};this.props.route;return this.props.database.use({by:this}).saveOne({schema:"global",table:"user"},r)},handleMembershipRequestClose:function(e){var t=this;this.setState({showingProjectDialog:!1}),setTimeout(function(){t.setState({renderingProjectDialog:!1})},500)},handleMembershipRequestProceed:function(e){this.setState({showingProjectDialog:!1,renderingProjectDialog:!1});var t=this.state.selectedProjectId,n=o.find(this.props.projects,{id:t});this.props.route.push(this.getTargetPage(),{schema:n.name})},renderQRScannerDialogBox:function(){return},renderActivationDialogBox:function(){return},handleScanClick:function(e){},handleManualClick:function(e){this.setState({enteringManually:!0})},handleAddClick:function(e){this.setState({addingServer:!0})},handleCancelScan:function(e){},handleScanResult:function(e){return},handleActivationCancel:function(e){this.setState({enteringManually:!1})},handleActivationConfirm:function(e){this.handleActivationCancel();var t={cors:!0,address:e.address,schema:e.schema,activationCode:e.code};this.props.route.push(b,t)}}),w=u(function(e,t){var n=t.pick;return o.sortBy(e,function(e){return n(e.details.title)||e.name})})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes;e.exports=i.createClass({displayName:"Link",propTypes:{url:o.string,alwaysAsLink:o.bool},getDefaultProps:function(){return{alwaysAsLink:!0}},getInitialState:function(){return{hasFocus:!1}},render:function(){var e=r.omit(this.props,"url","alwaysAsLink");return this.props.url&&(this.props.alwaysAsLink?e.href=this.props.url:(this.state.hasFocus?e.href=this.props.url:e["data-url"]=this.props.url,void 0===e.tabIndex&&(e.tabIndex=0),e.onFocus=this.handleFocus,e.onBlur=this.handleBlur)),i.createElement("a",e,this.props.children)},handleFocus:function(e){this.setState({hasFocus:!0})},handleBlur:function(e){this.setState({hasFocus:!1})}})},function(e,t,n){"use strict";function r(e,t,n){var r=!0;for(var s in n){var a=n[s];if(t.hasOwnProperty(s)){var c=t[s];if(a instanceof Array){if(c instanceof Array){if(0===o.intersection(a,c).length){r=!1;break}}else if(!o.includes(a,c)){r=!1;break}}else if(c!==a){if("object"===(void 0===c?"undefined":i(c))&&"object"===(void 0===a?"undefined":i(a))){if(!o.isEqual(c,a))return!1}else r=!1;break}}else switch(s){case"time_range":if(a){var l=a.substr(1,a.length-2).split(","),u=l[0],d=l[1];u<=t.ptime&&t.ptime<d||(r=!1)}break;case"exclude":o.includes(a,t.id)&&(r=!1);break;case"newer_than":!t.ptime||t.ptime>a||(r=!1);break;case"older_than":!t.ptime||t.ptime<a||(r=!1);break;case"search":r=!1}}return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(5);e.exports={match:r}},function(e,t,n){"use strict";function r(e,t,n,o){var s={},c=l.union(l.keys(e),l.keys(t));return l.each(c,function(c){var u,d=e?e[c]:void 0,p=t?t[c]:void 0,h=n?n[c]:void 0;if(l.isEqual(d,p))u=l.cloneDeep(d);else if(l.isEqual(d,h))u=l.cloneDeep(p);else if(l.isEqual(p,h))u=l.cloneDeep(d);else{var f=o?o[c]:void 0;u=a(d)&&a(p)?r(d,p,h,f):"string"==typeof d||"string"==typeof p?i(d,p,h):"function"==typeof f?f(d,p,h):p}void 0!==u&&(s[c]=u)}),s}function i(e,t,n){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t=""),"string"!=typeof n&&(n="");for(var r=u.diffSentences(e,t),i=o(n,t),a=[],c=0;c<r.length;c++){var l=r[c];if(l.removed){var e=l.value,t="";r[c+1]&&r[c+1].added&&(t=r[c+1].value,c++),a.push({a:e,b:t})}else if(l.added){var e="",t=l.value;a.push({a:e,b:t})}else a.push(l.value)}for(var d=0,p=0,h=[],c=0;c<a.length;c++){var f=a[c];"string"==typeof f?(h.push(f),d+=f.length,p+=f.length):(s(p,f.b.length,i)?h.push(f.a):h.push(f.b),d+=f.a.length,p+=f.b.length)}return h.join("")}function o(e,t){for(var n=[],r=u.diffSentences(e,t),i=0,o=0,s=0;s<r.length;s++){var a=r[s],c=a.value.length;a.removed?o+=c:a.added?i+=c:(n.push({index:i,length:c}),o+=c,i+=c)}return n}function s(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];if(i.index<=e&&e+t<=i.index+i.length)return!0}return!1}function a(e){return"object"===(void 0===e?"undefined":c(e))&&e.constructor===Object}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(5),u=n(10);e.exports={mergeObjects:r,mergeStrings:i}},function(e,t,n){"use strict";function r(e){var t=s(e,6),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],c=t[5],l=n*o-r*i;return[o/l,-r/l,-i/l,n/l,(i*c-o*a)/l,-(n*c-r*a)/l]}function i(e,t){var n=s(e,6),r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],l=n[5],u=s(t,2),d=u[0],p=u[1];return[r*d+o*p+c,i*d+a*p+l]}function o(e,t){var n=[t.left,t.top],r=[t.left+t.width,t.top+t.height];return n=i(e,n),r=i(e,r),{width:Math.abs(r[0]-n[0]),height:Math.abs(r[1]-n[1]),left:Math.min(r[0],n[0]),top:Math.min(r[1],n[1])}}var s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(5),l=n(6),u=n(4),d=u.PropTypes,p=n(50),h=n(148),f=n(113),m=n(373),g=n(33);e.exports=u.createClass({displayName:"ImageView",propTypes:{url:d.string,clippingRect:d.object,onLoad:d.func},getInitialState:function(){return this.components=g({canvas:HTMLCanvasElement}),{}},componentWillMount:function(){this.load(this.props.url)},componentWillReceiveProps:function(e){this.props.url!==e.url&&this.load(e.url),this.clippingRect!==e.clippingRect&&this.image&&this.drawImage(e.clippingRect)},render:function(){var e=this.components.setters,t=c.omit(this.props,"onLoad","url","clippingRect");return u.createElement("canvas",a({ref:e.canvas},t))},componentDidMount:function(){this.image&&this.redrawNeeded&&this.drawImage(this.props.clippingRect)},triggerLoadEvent:function(){this.props.onLoad&&this.props.onLoad({type:"load",target:this})},load:function(e){var t=this;return e?p.fetch(e).then(function(e){var n=f.loadImage(e),r=h.loadUint8Array(p.get(e));return l.join(n,r,function(e,n){var r=m.getOrientation(n)||1;t.image=e,t.orientation=r,r<5?(t.naturalWidth=e.naturalWidth,t.naturalHeight=e.naturalHeight):(t.naturalWidth=e.naturalHeight,t.naturalHeight=e.naturalWidth);var i=t.props.clippingRect;i||(i={left:0,top:0,width:t.naturalWidth,height:t.naturalHeight}),t.drawImage(i),t.triggerLoadEvent()})}):(this.clearCanvas(),l.resolve())},drawImage:function(e){var t=this.image;if(t){var n=this.components.canvas;if(!n)return void(this.redrawNeeded=!0);var i,s=this.orientation,a=t.naturalWidth,c=t.naturalHeight;switch(s){case 1:i=[1,0,0,1,0,0];break;case 2:i=[-1,0,0,1,a,0];break;case 3:i=[-1,0,0,-1,a,c];break;case 4:i=[1,0,0,-1,0,c];break;case 5:i=[0,1,1,0,0,0];break;case 6:i=[0,1,-1,0,c,0];break;case 7:i=[0,-1,-1,0,c,a];break;case 8:i=[0,-1,1,0,0,a]}e||(e={left:0,top:0,width:s<5?a:c,height:s<5?c:a}),this.width=e.width,this.height=e.height;var l=r(i),u=o(l,e),d=o(l,{left:0,top:0,width:e.width,height:e.height});n.width=d.width,n.height=d.height;var p=n.getContext("2d");p.transform.apply(p,i),p.drawImage(t,u.left,u.top,u.width,u.height,d.left,d.top,d.width,d.height)}},clearCanvas:function(){var e=this.components.canvas;e&&(e.width=0,e.height=0),this.width=0,this.height=0,this.orientation=void 0}})},function(e,t,n){"use strict";function r(e){return new s(function(t,n){var r=document.createElement("IMG");r.src=e,r.onload=function(e){t(r)},r.onerror=function(t){n(new Error("Unable to load "+e))}})}function i(e){return new s(function(t,n){var r=document.createElement("VIDEO");r.src=e,r.preload=!0,r.onloadeddata=function(e){t(r)},r.onerror=function(t){n(new Error("Unable to load "+e))}})}function o(e){return new s(function(t,n){var r=document.createElement("AUDIO");r.src=e,r.preload=!0,r.onloadeddata=function(e){t(r)},r.onerror=function(t){n(new Error("Unable to load "+e))}})}var s=n(6);e.exports={loadImage:r,loadVideo:i,loadAudio:o}},function(e,t,n){"use strict";function r(e,t){return c.find(e.external,function(e){return c.every(t,function(t,n){switch(n){case"server_id":return e.server_id===t;case"server":return e.server_id===t.id;case"type":return e.type===t;case"relation":return t instanceof Array?c.every(t,function(t){return e.hasOwnProperty(t)}):e.hasOwnProperty(t);case"related_to":var o=e[t.relation];if(o){var s={server_id:e.server_id};s[t.relation]=o;return!!r(t.object,s)}default:var o=e[n],a=i(t),l=i(o);return!c.isEmpty(c.intersection(a,l))}})})}function i(e){if(e instanceof Object){if(e.ids instanceof Array)return e.ids;if(e.id)return[e.id]}}function o(e,t){return c.assign({type:e.type,server_id:e.id},t)}function s(e,t){return c.assign({},e,t)}function a(e,t){if(e&&e[t]){var n={type:e.type,server_id:e.server_id};return n[t]=e[t],n}}var c=n(5);e.exports={find:r,create:o,extend:s,pick:a}},function(e,t,n){"use strict";function r(e){e=e||"";for(var t,n=[],r=0,i=null,o=1,s=1;t=l.exec(e);){var a=e.substring(r,t.index);if(a)if(i)if(c.trim(a))i=null,s++,n.push(a);else{var u=c.last(i);u.after+=a}else n.push(a);var d=t[1],p=t[2],h=!!c.trim(p),f=t[3],m=t[4],g=t[5],v={label:m,checked:h,answer:p,before:d,between:f,after:g,list:s,key:o};i?i.push(v):(i=[v],n.push(i)),r=t.index+t[0].length,o++}var y=e.substring(r);return y&&n.push(y),n}function i(e){if("object"===(void 0===e?"undefined":a(e)))return c.some(e,i);var t=r(e);return c.some(t,function(e){return e instanceof Array})}function o(e,t,n,i,o){"number"!=typeof t&&(t=Number(t)),"number"!=typeof n&&(n=Number(n));var a=r(e);a=c.flattenDeep(a);var l=c.filter(a,{list:t});return c.each(l,function(t){t.key===n?(t.checked=i,s(t,e)):i&&o&&(t.checked=!1,s(t,e))}),c.reduce(a,function(e,t){return t instanceof Object?e+t.before+"* ["+t.answer+"]"+t.between+t.label+t.after:e+t},"")}function s(e,t){if(e.checked){var n;n=/[\u0x0400-\u0x04ff]/.test(t)?"":/[\u0x0370-\u0x03ff]/.test(t)?"":"x",e.answer=n}else e.answer=" "}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(5);e.exports={extract:r,detect:i,update:o};var l=/^([ \t]*)\*\s+\[([ x])\]([ \t]*)(.*?)([ \t]*?)$/gim},function(e,t,n){"use strict";function r(e,t){if("object"===(void 0===e?"undefined":m(e)))return g.some(e,r);var n=l(t),i=n.extractBlocks(e);return g.some(i,function(e){switch(e.type){case"space":return!1;case"paragraph":case"text_block":var t,r=n.inlineLexer;for(r.start(e.markdown);t=r.captureToken();)switch(t.type){case"url":case"text":case"autolink":case"br":break;default:return!0}break;case"list":return g.every(e.children,function(e){var t=e.children[0];return"text_block"!==t.type||!/^\s*\[/.test(t.markdown)});default:return!0}})}function i(e,t){var n=l(t),r=u(),i=n.parse(e);return r.render(i)}function o(e,t,n,r){var i=b.extract(e),o=c(i,r);return g.map(i,function(e,r){if(e instanceof Array){var i=g.map(e,function(e,i){var s=e.checked,a=o[r][i];if(t){var c=t[e.list];void 0!==c&&(s=e.key==c)}return v.createElement("div",{className:"list-item",key:i},v.createElement("label",null,v.createElement("input",{type:"radio",name:e.list,value:e.key,checked:s,readOnly:!n,onChange:n})," ",a))});return v.createElement("div",{key:r},i)}return o[r]})}function s(e,t,n){var r=b.extract(e),i=c(r,n);return g.map(r,function(e,n){if(e instanceof Array){var r=g.map(e,function(e,r){var o=i[n][r],s=t[e.list],a=g.get(s,"total",0),c=g.get(s,["answers",e.key],0),l=Math.round(a>0?c/a*100:0)+"%",u="color-"+e.key%12;return v.createElement("div",{className:"vote-count",key:r},v.createElement("div",{className:"label"},o),v.createElement("div",{className:"bar"},v.createElement("span",{className:"filled "+u,style:{width:l}}),v.createElement("span",{className:"percent"},l),v.createElement("span",{className:"count"},c+"/"+a)))});return v.createElement("div",{key:n},r)}return i[n]})}function a(e,t,n,r){var i=b.extract(e),o=c(i,r);return g.map(i,function(e,r){if(e instanceof Array){var i=g.map(e,function(e,i){var s=e.checked,a=o[r][i];if(t){var c=t[e.list];if(void 0!==c){var l=c[e.key];void 0!==l&&(s=l)}}return v.createElement("div",{className:"list-item",key:i},v.createElement("label",null,v.createElement("input",{type:"checkbox",name:e.list,value:e.key,checked:s,readOnly:!n,onChange:n})," ",a))});return v.createElement("div",{key:r},i)}return o[r]})}function c(e,t){var n=l(t),r=g.map(e,function(e,t){return e instanceof Array?g.map(e,function(e){return n.extractBlocks(e.label)}):n.extractBlocks(e)});g.each(e,function(e,t){var i=r[t];e instanceof Array?g.each(i,function(e){n.processInline(e)}):n.processInline(i)});var i=u();return g.map(e,function(e,t){var n=r[t];return e instanceof Array?g.map(e,function(e,t){var r=g.first(i.render(n[t]));return r&&r.props&&"p"===r.type&&(r=r.props.children),r}):i.render(n)})}function l(e){var t=new y.BlockLexer,n=new y.InlineLexer({links:t.links,findRefLink:p,onReference:e});return new y.Parser({blockLexer:t,inlineLexer:n})}function u(){return new y.Renderer({renderImage:d})}function d(e,t){var n=e.href,r=e.title,i=e.text;if(/^blob:/.test(n)){var o,s=n.indexOf("?");if(-1!==s){var a=g.split(n.substr(s+1),"&");o=g.transform(a,function(e,t){var n=g.split(t,"="),r=n[0],i=parseInt(n[1]);e[r]=i},{}),n=n.substr(0,s)}return v.createElement(x,{key:t,url:n,clippingRect:o,alt:i,title:r})}return v.createElement("img",{key:t,src:n,alt:i,title:r})}function p(e,t){var n=this.links[e];return n||(this.onReference&&(n=this.onReference({type:"reference",target:this,name:e,forImage:t})),n)}function h(e,t){var n=/^(picture|image|photo|video|audio|website)(-(\d+))?$/.exec(t);if(n){var r=n[1];"picture"!==r&&"photo"!==r||(r="image");var i=g.filter(e,{type:r}),o=parseInt(n[3])||1,s=i[o-1];if(s)return s}return null}function f(e,t){if(e&&t){e+="?"+g.join(g.map(t,function(e,t){return t+"="+e}),"&")}return e}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(5),v=n(4),y=n(162),b=n(115),x=(n(19),n(112));e.exports={detect:r,parse:i,parseSurvey:o,parseSurveyResults:s,parseTaskList:a,createParser:l,createRenderer:u,findReferencedResource:h,attachClipRect:f}},function(e,t,n){"use strict";var r,i,o,s,a=n(63),c=function(e,t){return t};try{Object.defineProperty(c,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===c.length?(r={configurable:!0,writable:!1,enumerable:!1},i=Object.defineProperty,e.exports=function(e,t){return t=a(t),e.length===t?e:(r.value=t,i(e,"length",r))}):(s=n(226),o=function(){var e=[];return function(t){var n,r=0;if(e[t])return e[t];for(n=[];t--;)n.push("a"+(++r).toString(36));return new Function("fn","return function ("+n.join(", ")+") { return fn.apply(this, arguments); };")}}(),e.exports=function(e,t){var n;if(t=a(t),e.length===t)return e;n=o(t)(e);try{s(n,e)}catch(e){}return n})},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(e){return r.call(e)===i}},function(e,t,n){"use strict";e.exports=n(503)()?Object.assign:n(504)},function(e,t,n){"use strict";e.exports=n(502)("forEach")},function(e,t,n){"use strict";var r=n(64),i=Array.prototype.forEach,o=Object.create,s=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&s(Object(e),t)}),t}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===i)||!1}},,,,,,,,,function(e,t,n){function r(){var e=this;return o.resolve().then(function(){return e.begin()}).then(function(){return e.loop()}).catch(function(e){if(e!==d)throw e}).then(function(){return e.return()})}function i(){}var o=n(6),s=null,a=null,c=null,l=null,u="";t.begin=function(e){if(a||c)throw new Error("Cannot call begin() after while() or do()");if(!(e instanceof Function))throw new Error("Argument must be a function");s=e},t.while=function(e){if(c)throw new Error("Cannot call while() consecutively");if(!(e instanceof Function))throw new Error("Argument must be a function");a&&(u="do-while"),c=e},t.do=function(e){if(a)throw new Error("Cannot call do() consecutively");if(!(e instanceof Function))throw new Error("Argument must be a function");c&&(u="while-do"),a=e},t.return=function(e){if(!a||!c)throw new Error("Cannot call return() without calling while() and do() beforehand");if(!(e instanceof Function))throw new Error("Argument must be a function");l=e},t.end=function(){if(!a||!c)throw new Error("Cannot call end() without calling while() and do() beforehand");var e;"while-do"===u?e=function(){var e=this;return o.resolve(e.while()).then(function(t){if(t)return o.resolve(e.do()).then(function(){return e.loop()})})}:"do-while"===u&&(e=function(){var e=this;return o.resolve(e.do()).then(function(){return o.resolve(e.while()).then(function(t){if(t)return e.loop()})})});var t={begin:s||i,do:a,while:c,return:l||i,loop:e};return s=null,a=null,c=null,l=null,u="",r.call(t)};var d=new Error;t.break=function(){throw d}},function(e,t,n){"use strict";e.exports=n(300)},function(e,t,n){"use strict";var r=n(4),i=r.PropTypes,o=n(18),s=n(35),a=n(29);n(724),e.exports=r.createClass({displayName:"ConfirmationDialogBox",propTypes:{show:i.bool,locale:i.instanceOf(o).isRequired,onClose:i.func,onConfirm:i.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return r.createElement(s,e,r.createElement("div",{className:"confirmation-dialog-box"},this.renderMessage(),this.renderButtons()))},renderMessage:function(){return r.createElement("div",{className:"message"},this.props.children)},renderButtons:function(){var e=this.props.locale.translate,t={label:e("confirmation-cancel"),onClick:this.props.onClose},n={label:e("confirmation-confirm"),onClick:this.props.onConfirm,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(a,t),r.createElement(a,n))}})},function(e,t,n){"use strict";function r(e,t){var n=e.versions?e.versions[t]:null;if(!n)return{};var r=e.width,i=e.height,o=n.videoScaling.width,s=n.videoScaling.height,a=Math.min(o/r,s/i);return{width:Math.round(r*a),height:Math.round(i*a)}}function i(e){var t=screen.width,n=screen.height,i=t*n,o=s.map(s.keys(e.versions),function(t){var n=r(e,t),o=n.width*n.height;return{name:t,diff:Math.abs(i-o)}}),a=s.first(s.sortBy(o,"diff"));return a?a.name:null}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(5),a=n(6),c=n(4),l=c.PropTypes,u=n(18),d=n(19),p=n(35),h=n(29);n(726),e.exports=c.createClass({displayName:"MediaDialogBox",propTypes:{show:l.bool,resources:l.arrayOf(l.object).isRequired,selectedIndex:l.number.isRequired,locale:l.instanceOf(u).isRequired,theme:l.instanceOf(d).isRequired,onClose:l.func},getInitialState:function(){return{selectedIndex:this.props.selectedIndex}},getResourceCount:function(){return this.props.resources.length},getSelectedResourceIndex:function(){var e=this.getResourceCount()-1;return s.min([this.state.selectedIndex,e])},selectResource:function(e){var t=this;return new a(function(n,r){var i=t.getResourceCount();e>=0&&e<i?t.setState({selectedIndex:e},function(){n(e)}):n(t.getSelectedResourceIndex())})},componentWillMount:function(){this.props.show&&document.body.addEventListener("keydown",this.handleKeyDown)},componentWillReceiveProps:function(e){if(this.props.show!==e.show)if(e.show)this.setState({selectedIndex:e.selectedIndex}),document.body.addEventListener("keydown",this.handleKeyDown);else{var t=this.refs.video;t&&t.pause(),document.body.removeEventListener("keydown",this.handleKeyDown)}},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return c.createElement(p,e,c.createElement("div",{className:"media-dialog-box"},this.renderView(),c.createElement("div",{className:"controls"},this.renderThumbnails(),this.renderButtons())))},renderView:function(){var e=this.getSelectedResourceIndex(),t=this.props.resources[e];if(t){var n=document.body.parentNode,o=n.clientWidth,a=n.clientHeight;"single-col"===this.props.theme.mode?(o-=10,a-=100):(o-=100,a-=200);var l,u,d=o/a;s.each(this.props.resources,function(e){var t;if("video"===e.type){t=r(e,i(e))}else t=e;l>=t.width||(l=t.width),u>=t.height||(u=t.height)});var p=l/u;d>p?u>a&&(u=a,l=Math.round(u*p)):l>o&&(l=o,u=Math.round(l/p));var h,f={width:l,height:u};switch(t.type){case"image":h=this.renderImage(t,l,u);break;case"video":h=this.renderVideo(t,l,u)}return c.createElement("div",{className:"container",style:f},h)}},renderImage:function(e,t,n){var r,i=this.props.theme,o=e.width,s=e.height;return"gif"===e.format?r=i.getImageURL(e,{clip:null}):(o>t?(s=Math.round(t*(s/o)),o=t):s>n&&(o=Math.round(n*(o/s)),s=n),r=i.getImageURL(e,{width:o,height:s,clip:null})),c.createElement("img",{src:r,width:o,height:s})},renderVideo:function(e){var t=e,n=this.props.theme,o=i(e),s=r(e,o),a={ref:"video",src:n.getVideoURL(t,{version:o}),controls:!0,autoPlay:!0,poster:n.getImageURL(t,{width:s.width,height:s.height,clip:null,quality:60})};return c.createElement("video",a)},renderThumbnails:function(e){var t=this,n=(this.props.locale.translate,this.props.theme,this.getSelectedResourceIndex()),r=s.map(this.props.resources,function(e,r){var i=t.props.theme.getImageURL(e,{width:28,height:28}),s={className:"thumbnail","data-index":r,onClick:t.handleThumbnailClick};return r===n&&(s.className+=" selected"),c.createElement("div",o({key:r},s),c.createElement("img",{src:i}))});return c.createElement("div",{className:"links"},r)},renderButtons:function(){var e=this.props.locale.translate,t={label:e("media-download-original"),emphasized:!1,hidden:"single-col"===this.props.theme.mode,onClick:this.handleDownloadClick},n={label:e("media-close"),emphasized:!0,onClick:this.props.onClose};return c.createElement("div",{className:"buttons"},c.createElement(h,t),c.createElement(h,n))},componentWillUnmount:function(){document.body.removeEventListener("keydown",this.handleKeyDown)},handleThumbnailClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-index"));return this.selectResource(t)},handleDownloadClick:function(e){var t=this.getSelectedResourceIndex(),n=this.props.resources[t];if(n){var r,i=document.createElement("A"),o=this.props.theme;switch(n.type){case"image":r=o.getImageURL(n,{clip:null});break;case"video":r=o.getVideoURL(n)}i.href=r,i.download=n.filename||!0,i.click()}},handleKeyDown:function(e){var t=0;if(39===e.keyCode?t=1:37==e.keyCode&&(t=-1),t){var n=this.getResourceCount(),r=this.getSelectedResourceIndex()+t;r>=n?r=0:r<0&&(r=n-1),this.selectResource(r),e.preventDefault()}}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=(n(30),n(22)),a=n(23),c=n(18),l=n(19),u=n(35),d=n(29),p=n(52),h=n(318);n(734),e.exports=i.createClass({displayName:"UserSelectionDialogBox",propTypes:{show:o.bool,selection:o.arrayOf(o.number).isRequired,disabled:o.arrayOf(o.number),database:o.instanceOf(s).isRequired,route:o.instanceOf(a).isRequired,locale:o.instanceOf(c).isRequired,theme:o.instanceOf(l).isRequired,onSelect:o.func,onCancel:o.func},getInitialState:function(){return{selection:this.props.selection}},componentWillReceiveProps:function(e){this.props.selection!==e.selection&&this.setState({selection:e.selection})},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return i.createElement(u,e,i.createElement("div",{className:"user-selection-dialog-box"},this.renderList(),this.renderButtons()))},renderList:function(){var e={selection:this.state.selection,disabled:this.props.disabled,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleListSelect};return i.createElement(p,null,i.createElement(h,e))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("selection-cancel"),onClick:this.handleCancelClick},n={label:e("selection-ok"),onClick:this.handleOKClick,emphasized:!0};return i.createElement("div",{className:"buttons"},i.createElement(d,t),i.createElement(d,n))},handleListSelect:function(e){var t=e.selection;r.isEqual(t,this.props.selection)&&(t=this.props.selection),this.setState({selection:t})},handleOKClick:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,selection:this.state.selection})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})}})},function(e,t,n){"use strict";e.exports=n(308)},function(e,t,n){"use strict";function r(e,t,n){var r=0,i=0,o=Math.min(e,t);return"center"!==n&&n||(e>o?r=Math.floor((e-o)/2):t>o&&(i=Math.floor((t-o)/2))),{left:r,top:i,width:o,height:o}}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(50),c=n(18),l=n(19),u=n(21),d=n(372);n(737),e.exports=o.createClass({displayName:"ImageEditor",mixins:[u],propTypes:{resource:s.object,locale:s.instanceOf(c).isRequired,theme:s.instanceOf(l).isRequired,previewWidth:s.number,previewHeight:s.number,onChange:s.func},getDefaultProps:function(){return{previewWidth:512,previewHeight:512}},getInitialState:function(){return{fullImageURL:null,previewImageURL:null}},componentWillMount:function(){this.prepareImage(this.props.resource)},componentWillReceiveProps:function(e){this.props.resource!==e.resource&&this.prepareImage(e.resource)},getFullImageURL:function(e){var t=this.props.theme,n=t.getImageFile(e);return n&&a.get(n)?n:t.getImageURL(e,{clip:null})},getPreviewImageURL:function(e){var t=this.props.theme;t.getImageURL(e,{width:this.props.previewWidth,height:this.props.previewHeight,clip:e.clip||r(e.width,e.height)})},prepareImage:function(e){var t=this,n=this.getFullImageURL(e),r=null,i=a.find(n);i?n=i:(r=this.getPreviewImageURL(e),this.state.fullImageURL!==n&&a.fetch(n).then(function(e){t.setState({fullImageURL:e,previewImageURL:null})})),this.state.fullImageURL===n&&this.state.previewImageURL===r||this.setState({fullImageURL:n,previewImageURL:r})},render:function(){return o.createElement("div",{className:"image-editor"},this.renderPlaceholder(),this.renderImageCropper(),this.renderPreview(),this.props.children)},renderPreview:function(){return this.state.previewImageURL?o.createElement("img",{className:"preview",src:this.state.previewImageURL}):null},renderImageCropper:function(){if(!this.state.fullImageURL||this.state.previewImageURL)return null;var e=this.props.resource,t={url:this.state.fullImageURL,clippingRect:e.clip||r(e.width,e.height),onChange:this.handleClipRectChange};return o.createElement(d,t)},renderPlaceholder:function(){if(this.state.fullImageURL||this.state.previewImageURL)return null;var e=this.props.locale.translate;return o.createElement("div",{className:"placeholder"},o.createElement("div",{className:"message"},e("image-editor-upload-in-progress")))},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,resource:e})},handleClipRectChange:function(e){var t=i.clone(this.props.resource);return t.clip=e.rect,this.triggerChangeEvent(t)}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(30),a=n(144),c=n(22),l=n(32),u=n(23),d=n(18),p=n(19),h=n(313),f=n(75),m=n(74);n(749),e.exports=s.createClass({displayName:"BookmarksPage",propTypes:{database:o.instanceOf(c).isRequired,payloads:o.instanceOf(l).isRequired,route:o.instanceOf(u).isRequired,locale:o.instanceOf(d).isRequired,theme:o.instanceOf(p).isRequired},statics:{parseURL:function(e,t,n){return u.match(e,["/:schema/bookmarks/?"],function(e){return{schema:e.schema,story:u.parseId(n,/S(\d+)/i)}})},getURL:function(e){var t,n="/"+e.schema+"/bookmarks/";return e.story&&(t="S"+e.story),{path:n,query:void 0,hash:t}},configureUI:function(e){return{navigation:{route:{parameters:r.pick(e.parameters,"schema")},section:"bookmarks"}}}},renderAsync:function(e,t){var n=this.props.route.parameters,r=this.props.database.use({schema:n.schema,by:this}),o=this.props.route!==t.route?100:1e3,s={bookmarks:null,currentUser:null,project:null,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(g,s),o),r.start().then(function(e){var t={};return t.id=e,r.findOne({schema:"global",table:"user",criteria:t,required:!0})}).then(function(t){s.currentUser=t,e.check()}).then(function(){var e={name:n.schema};return r.findOne({schema:"global",table:"project",criteria:e,required:!0})}).then(function(t){return s.project=t,e.show(i.createElement(g,s))}).then(function(){var e={target_user_id:s.currentUser.id};return r.find({table:"bookmark",criteria:e})}).then(function(e){return s.bookmarks=e,i.createElement(g,s)})}});var g=e.exports.Sync=i.createClass({displayName:"BookmarksPage.Sync",propTypes:{bookmarks:o.arrayOf(o.object),currentUser:o.object,project:o.object,database:o.instanceOf(c).isRequired,route:o.instanceOf(u).isRequired,locale:o.instanceOf(d).isRequired,theme:o.instanceOf(p).isRequired},getAccessLevel:function(){var e=this.props,t=e.project,n=e.currentUser;return a.getUserAccessLevel(t,n)||"read-only"},render:function(){return i.createElement("div",{className:"bookmarks-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){var e=this.props.route.parameters,t={access:this.getAccessLevel(),bookmarks:this.props.bookmarks,currentUser:this.props.currentUser,project:this.props.project,selectedStoryId:e.story,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.handleSelectionClear};return i.createElement(h,t)},renderEmptyMessage:function(){var e=this.props.bookmarks;if(!r.isEmpty(e))return null;if(e){var t={locale:this.props.locale,online:this.props.database.online,phrase:"bookmarks-no-bookmarks"};return i.createElement(m,t)}return i.createElement(f,null)},handleSelectionClear:function(){this.props.route.loosen()}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(30),a=n(7),c=n(22),l=n(23),u=n(18),d=n(19),p=n(314),h=n(75),f=n(74);n(751),e.exports=s.createClass({displayName:"NotificationsPage",propTypes:{database:o.instanceOf(c).isRequired,route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,theme:o.instanceOf(d).isRequired},statics:{parseURL:function(e,t,n){return l.match(e,["/:schema/notifications/:date/?","/:schema/notifications/?"],function(e){return{schema:e.schema,date:l.parseDate(e.date)}})},getURL:function(e){var t="/"+e.schema+"/notifications/";return void 0!=e.date&&(t+=(e.date||"date")+"/"),{path:t,query:void 0,hash:void 0}},configureUI:function(e){var t={parameters:r.pick(e.parameters,"schema")};return{calendar:{route:t,statistics:{type:"daily-notifications",filters:{}}},navigation:{route:t,section:"notifications"}}}},renderAsync:function(e,t){var n=this,r=this.props.route.parameters,o=this.props.database.use({schema:r.schema,by:this}),s=this.props.route!==t.route?100:1e3,c={currentUser:null,notifications:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(m,c),s),o.start().then(function(e){var t={id:e};return o.findOne({schema:"global",table:"user",criteria:t,required:!0})}).then(function(t){return c.currentUser=t,e.show(i.createElement(m,c))}).then(function(){var e={};if(e.target_user_id=c.currentUser.id,r.date){var t=a(r.date),i=t.clone().endOf("day"),s=t.toISOString(),l=i.toISOString(),u="["+s+","+l+"]";e.time_range=u}return r.search?(e.search={lang:n.props.locale.languageCode,text:r.search},e.limit=100):e.limit=500,o.find({table:"notification",criteria:e})}).then(function(e){return c.notifications=e,i.createElement(m,c)})}});var m=e.exports.Sync=i.createClass({displayName:"NotificationsPage.Sync",propTypes:{notifications:o.arrayOf(o.object),currentUser:o.object,database:o.instanceOf(c).isRequired,route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,theme:o.instanceOf(d).isRequired},render:function(){return i.createElement("div",{className:"notifications-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){var e={notifications:this.props.notifications,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.handleSelectionClear};return i.createElement(p,e)},renderEmptyMessage:function(){var e=this.props.notifications;if(!r.isEmpty(e))return null;if(e){var t,n=this.props.route.parameters;t=n.date?"notifications-no-notifications-on-date":"notifications-no-notifications-yet";var o={locale:this.props.locale,online:this.props.database.online,phrase:t};return i.createElement(f,o)}return i.createElement(h,null)},handleSelectionClear:function(){this.props.route.loosen()}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(4),o=i.PropTypes,s=n(33),a=n(213);n(784),e.exports=i.createClass({displayName:"CornerPopUp",propType:{onOpen:o.func,onClose:o.func},getInitialState:function(){return this.components=s({popUpMenu:a}),{open:!1}},close:function(){this.components.popUpMenu.close()},render:function(){var e=this.components.setters,t={onOpen:this.handleOpen,onClose:this.handleClose},n=this.state.open?"left":"down";return i.createElement(a,r({ref:e.popUpMenu,className:"corner-pop-up"},t),i.createElement("button",null,i.createElement("i",{className:"fa fa-chevron-circle-"+n})),i.createElement("menu",null,this.props.children))},handleOpen:function(e){this.setState({open:!0}),this.props.onOpen&&this.props.onOpen({type:open,target:this})},handleClose:function(e){this.setState({open:!1}),this.props.onClose&&this.props.onClose({type:open,target:this})}})},function(e,t,n){"use strict";function r(e){var t="device-placeholder";e.blocked&&(t+=" blocked");var n=e.icon;return i.createElement("div",{className:t},i.createElement("span",{className:"fa-stack fa-lg"},i.createElement("i",{className:"fa fa-"+n+" fa-stack-1x"}),i.createElement("i",{className:"fa fa-ban fa-stack-2x"})))}var i=n(4),o=i.PropTypes;e.exports=r,n(785),r.propTypes={blocked:o.bool,icon:o.oneOf(["camera","video-camera","microphone"]).isRequired}},function(e,t,n){"use strict";function r(e){var t=["new-items-alert",e.show?"show":"hide"];return i.createElement("div",{className:t.join(" "),onClick:e.onClick},i.createElement("i",{className:"fa fa-arrow-up"}),e.children)}var i=(n(5),n(4)),o=i.PropTypes,s=n(8);n(795),e.exports=i.createClass({displayName:"NewItemsAlertProxy",propTypes:{show:o.bool,onClick:o.func},getDefaultProps:function(){return{show:!1}},render:function(){return null},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(e){e.show!==this.props.show?this.props.show?this.show():this.hide():e.children!==this.props.children&&this.props.show&&this.redraw()},componentWillUnmount:function(){this.hide()},show:function(){var e=this;if(this.containerNode)this.containerRemovalTimeout&&(clearTimeout(this.containerRemovalTimeout),this.containerRemovalTimeout=0);else{this.containerNode=document.createElement("DIV");document.getElementById("page-view-port").appendChild(this.containerNode)}var t={show:!1,onClick:this.props.onClick,children:this.props.children};s.render(i.createElement(r,t),this.containerNode),setTimeout(function(){t.show=!0,s.render(i.createElement(r,t),e.containerNode)},10)},redraw:function(){var e={show:!0,onClick:this.props.onClick,children:this.props.children};s.render(i.createElement(r,e),this.containerNode)},hide:function(){var e=this;if(this.containerNode){this.containerRemovalTimeout||(this.containerRemovalTimeout=setTimeout(function(){s.unmountComponentAtNode(e.containerNode),document.getElementById("page-view-port").removeChild(e.containerNode),e.containerNode=null,e.containerRemovalTimeout=0},500));var t={show:!1,children:this.props.children};s.render(i.createElement(r,t),this.containerNode)}}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(33),c=n(18),l=n(150);n(810),e.exports=o.createClass({displayName:"TextField",propTypes:{locale:s.instanceOf(c).isRequired,autofocus:s.bool},getDefaultProps:function(){return{type:"text"}},getInitialState:function(){return this.components=a({input:HTMLInputElement}),{}},render:function(){var e=["text-field"],t="input",n=i.omit(this.props,"children","locale");if("textarea"===this.props.type&&(t=l,n=i.omit(n,"type")),this.props.readOnly){e.push("readonly");var s=this.props.locale.translate;n.placeholder=s("text-field-placeholder-none"),n.spellCheck=!1}return n.value=n.value||"",n.value&&!1===n.spellCheck&&(n.value+="\ufeff"),o.createElement("div",{className:e.join(" ")},o.createElement("label",{htmlFor:this.props.id},this.props.children),o.createElement(t,r({ref:this.components.setters.input},n)))},componentDidMount:function(){this.props.autofocus&&this.components.input.focus()}})},function(e,t,n){"use strict";function r(e,t){if(e&&t&&!t.disabled){if("admin"===t.type||o.includes(e.user_ids,t.id))return e.archived?"read-only":"read-write";if(o.get(e,"settings.access_control.grant_view_access"))return e.archived?"read-only":o.get(e,"settings.access_control.grant_comment_access")?"read-comment":"read-only"}return null}function i(e,t){if(r(e,t))return!0;if("guest"===t.type){if(o.get(e,"settings.membership.allow_guest_request"))return!0}else if(o.get(e,"settings.membership.allow_user_request"))return!0;return!1}var o=n(5);e.exports={default:{},isVisibleToUser:i,getUserAccessLevel:r}},function(e,t,n){"use strict";e.exports=t=["like","comment","task-completion","vote","coauthor","bookmark","mention","note","assignment","issue","push","merge","survey","join-request"],t.admin=["join-request"]},function(e,t,n){"use strict";(function(r){e.exports=t=["push","merge","branch","issue","milestone","merge-request","wiki","member","repo","post","survey","task-list"],t.editable=["post","task-list","survey"],t.trackable=["post"],t.git=["push","merge","branch","issue","milestone","merge-request","wiki","member","repo"],"[object process]"===Object.prototype.toString.call(void 0!==r?r:0)||(t.icons={push:n(831),merge:n(823),branch:n(822),issue:n(292),"issue.opened":n(292),"issue.closed":n(825),"issue.reopened":n(826),milestone:n(829),"merge-request":n(824),wiki:n(821),member:n(197),repo:n(832),post:n(830),survey:n(828),"task-list":n(827)})}).call(t,n(65))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return!!e&&!(e.id<1)}function o(e){return!!e&&!!e.ptime}function s(e){return!!e&&p.includes(f.editable,e.type)}function a(e){return!!e&&p.includes(f.trackable,e.type||"post")}function c(e,t,n){if(!e||!e.published)return!1;var r=e.ptime;return!r||h()<h(r).add(t,n)}function l(e,t,n){if(!e||!e.published)return!1;var r=e.btime||e.ptime;return!r||h()<h(r).add(t,n)}function u(e){return e.uncomitted}var d,p=n(5),h=n(7),f=n(146);e.exports=(d={isSaved:i,isActuallyPublished:o,isEditable:s,isTrackable:a},r(d,"isActuallyPublished",o),r(d,"wasPublishedWithin",c),r(d,"wasBumpedWithin",l),r(d,"hasUncomittedChanges",u),d)},function(e,t,n){"use strict";function r(e){return i(e).then(function(e){return new Uint8Array(e)})}function i(e){return new s(function(t,n){var r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(e){n(new Error("Unable to load blob"))},r.readAsArrayBuffer(e)})}function o(e){return new s(function(t,n){var r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(e){n(new Error("Unable to load text"))},r.readAsText(e)})}var s=n(6);e.exports={loadUint8Array:r,loadArrayBuffer:i,loadText:o}},function(e,t,n){"use strict";function r(e){var t;return"string"==typeof e?(e=o(e),e=s(e),t=e.match(l)):e instanceof Object&&(t=a.flatten(a.filter(a.map(e,function(e){return e=o(e),e=s(e),String(e).match(l)})))),a.uniq(t).sort()}function i(e){return u.test(e)}function o(e){return e.replace(/https?:\/\/\S+/g,"")}function s(e){return e.replace(/\w+@\w+.\w+/g,"")}var a=n(5);e.exports={findTags:r,isTag:i};var c="[@#][a-zA-Z][0-9a-zA-Z]*",l=new RegExp(""+c,"g"),u=new RegExp("^"+c+"$")},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(33);n(815),e.exports=o.createClass({displayName:"AutosizeTextArea",propTypes:{autofocus:s.bool},getDefaultProps:function(){return{autofocus:!1}},getInitialState:function(){return this.components=a({actual:HTMLTextAreaElement,shadow:HTMLTextAreaElement}),{requiredHeight:void 0}},getElement:function(){return this.components.actual},render:function(){var e=this.components.setters,t=i.extend({height:this.state.requiredHeight},this.props.style),n=i.omit(this.props,"style","autofocus");return o.createElement("div",{className:"autosize-text-area"},o.createElement("textarea",{ref:e.shadow,style:t,className:"shadow",value:n.value,readOnly:!0}),o.createElement("textarea",r({ref:e.actual,style:t},n)))},componentDidMount:function(){window.removeEventListener("resize",this.handleDocumentResize),this.updateSize(),this.props.autofocus&&this.components.actual.focus()},componentDidUpdate:function(e,t){e.value!==this.props.value&&this.updateSize()},componentWillUnmount:function(){window.removeEventListener("resize",this.handleDocumentResize)},updateSize:function(){var e=this.components.shadow,t=this.components.actual;if(e&&t){var n=e.offsetHeight,r=e.scrollHeight,i=e.clientHeight,o=t.offsetHeight,s=r+(n-i);if(this.state.height!==s){if(o>s&&o>this.state.requiredHeight)return;this.setState({requiredHeight:s})}}},handleResize:function(e){},handleDocumentResize:function(e){this.updateSize()}})},function(e,t,n){"use strict";function r(e){var t=e.offsetHeight,n=e.getElementsByClassName("collapsible-container");return _.each(n,function(e){if(t-=e.offsetHeight,parseInt(e.style.height)>0){var n=e.children[0];t+=n.offsetHeight}}),t}var i=n(4),o=(i.PropTypes,n(33));n(816),e.exports=i.createClass({displayName:"CollapsibleContainer",propTypes:{open:i.PropTypes.bool},getInitialState:function(){return this.components=o({container:HTMLDivElement,contents:HTMLDivElement}),{contentHeight:void 0,collapsing:!1,expanding:!1}},componentWillReceiveProps:function(e){this.props.open!==e.open&&(e.open?this.setState({collapsing:!1,expanding:!0}):this.setState({collapsing:!0,expanding:!1}))},render:function(){var e=this.components.setters,t={};this.props.open?t.height=this.state.contentHeight:t.height=0;var n="collapsible-container";return this.state.expanding?n+=" expanding":this.state.collapsing&&(n+=" collapsing"),i.createElement("div",{ref:e.container,className:n,style:t},i.createElement("div",{ref:e.contents,className:"collapsible-contents"},this.props.children))},componentDidMount:function(){this.props.open&&(this.updateHeight(),setTimeout(this.updateHeight,10))},componentDidUpdate:function(e,t){this.updateHeight(),setTimeout(this.updateHeight,10)},updateHeight:function(){var e=r(this.components.contents);this.state.contentHeight!==e&&this.setState({contentHeight:e})}})},function(e,t,n){"use strict";var r=n(498),i=n(63),o=n(41),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,c=Math.abs,l=Math.floor;e.exports=function(e){var t,n,u,d;if(!r(e))return s.apply(this,arguments);for(n=i(o(this).length),u=arguments[1],u=isNaN(u)?0:u>=0?l(u):i(this.length)-l(c(u)),t=u;t<n;++t)if(a.call(this,t)&&(d=this[t],r(d)))return t;return-1}},function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";var r=n(64),i={function:!0,object:!0};e.exports=function(e){return r(e)&&i[typeof e]||!1}},function(e,t,n){"use strict";var r=n(38),i=n(120),o=Function.prototype.call;e.exports=function(e,t){var n={},s=arguments[2];return r(t),i(e,function(e,r,i,a){n[r]=o.call(t,s,e,r,i,a)}),n}},function(e,t,n){"use strict";e.exports=n(227)()?Object.setPrototypeOf:n(228)},,function(e,t,n){e.exports=n.p+"a35c7db833cd86e54c0020a2d07dcd2f.svg"},,,,function(e,t,n){function r(e,t){var n=new i({options:u(t,i.defaults)}),r=new a({options:u(t,a.defaults)}),o=n.parse(e);return r.render(o)}var i=n(249),o=n(160),s=n(161),a=n(574),c=n(79),l=c.merge,u=c.pick;t.parse=r,t.defaults=l({},i.defaults,a.defaults),t.BlockLexer=o,t.InlineLexer=s,t.Parser=i,t.Renderer=a},function(e,t,n){"use strict";var r=n(63);e.exports=function(e,t,n){var i;return isNaN(e)?(i=t,i>=0?n&&i?i-1:i:1):!1!==e&&r(e)}},function(e,t,n){"use strict";(function(t,n){var r,i;r=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},i=function(e){var t,n,i=document.createTextNode(""),o=0;return new e(function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(i.data=o=++o%2;n;)e=n.shift(),n.length||(n=null),e()}).observe(i,{characterData:!0}),function(e){if(r(e),t)return void("function"==typeof t?t=[t,e]:t.push(e));t=e,i.data=o=++o%2}},e.exports=function(){if("object"==typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return i(MutationObserver);if("function"==typeof WebKitMutationObserver)return i(WebKitMutationObserver)}return"function"==typeof n?function(e){n(r(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(r(e),0)}:null}()}).call(t,n(65),n(130).setImmediate)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M12 14.002a.998.998 0 0 1-.998.998H1.001A1 1 0 0 1 0 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z"}))}var i=n(4);r.displayName="Person",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){"use strict";(function(t){function n(e){s.length||(o(),a=!0),s[s.length]=e}function r(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>l){for(var t=0,n=s.length-c;t<n;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,a=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,s=[],a=!1,c=0,l=1024,u=void 0!==t?t:self,d=u.MutationObserver||u.WebKitMutationObserver;o="function"==typeof d?function(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(28))},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(18),c=n(19),l=n(21),u=n(35),d=n(29),p=n(143);n(725),e.exports=o.createClass({displayName:"IssueDialogBox",mixins:[l],propTypes:{show:s.bool,allowClearing:s.bool.isRequired,currentUser:s.object,repos:s.arrayOf(s.object),issue:s.object,locale:s.instanceOf(a).isRequired,theme:s.instanceOf(c).isRequired,onConfirm:s.func,onClose:s.func},getInitialState:function(){return{issue:null}},getIssueProperty:function(e){var t=this.state.issue||this.props.issue||{};return i.get(t,e)},setIssueProperty:function(e,t){var n=this.state.issue||this.props.issue||{};n=i.decoupleSet(n,e,t),this.setState({issue:n})},getSelectedRepo:function(){var e=this.getIssueProperty("repoId"),t=this.getAvailableRepos(),n=i.find(this.props.repos,{id:e});return n||(n=i.first(t)),n||null},getAvailableRepos:function(){return i.filter(this.props.repos,function(e){return e.details.issues_enabled})},componentWillReceiveProps:function(e){this.props.show!==e.show&&e.show&&this.setState({issue:null})},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return o.createElement(u,e,o.createElement("div",{className:"issue-dialog-box"},this.renderForm(),o.createElement("div",{className:"controls"},this.renderButtons())))},renderForm:function(){return o.createElement("div",{className:"container"},o.createElement("div",{className:"top"},this.renderTitleInput(),this.renderRepoSelector()),this.renderLabelSelector())},renderTitleInput:function(){var e=this.props.locale.translate,t={id:"title",value:this.getIssueProperty("title"),locale:this.props.locale,autofocus:!0,onChange:this.handleTitleChange};return o.createElement(p,t,e("issue-title"))},renderRepoSelector:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getAvailableRepos();if(n.length<=1)return null;var r=this.getIssueProperty("repoId")||h;n=i.sortBy(n,function(e){return t(e.details.title)||e.name});var s=i.map(n,function(e,n){var r=t(e.details.title)||e.name;return o.createElement("option",{key:n,value:e.id},r)});return o.createElement("div",{className:"select-field"},o.createElement("label",null,e("issue-repo")),o.createElement("select",{value:r,onChange:this.handleRepoChange},s))},renderLabelSelector:function(){var e=this,t=this.getSelectedRepo();if(!t)return null;for(var n=this.getIssueProperty("labels")||[],s=t.details.labels,a=t.details.label_colors,c=i.map(s,function(t,s){var c={className:"tag",style:{backgroundColor:a[s]},"data-label":t,onClick:e.handleTagClick};return i.includes(n,t)&&(c.className+=" selected"),o.createElement("span",r({key:s},c),t)}),l=1;l<c.length;l+=2)c.splice(l,0," ");return o.createElement("div",{className:"tags"},c)},renderButtons:function(){var e=this.props.locale.translate,t=this.getSelectedRepo(),n=this.getIssueProperty("title"),r=!!i.trim(n);this.props.issue&&(r=!!this.state.issue&&!i.isEqual(this.state.issue,this.props.issue));var s={label:e("issue-clear"),emphasized:!1,hidden:!this.props.allowClearing,onClick:this.handleClearClick},a={label:e("issue-cancel"),emphasized:!1,onClick:this.handleCancelClick},c={label:e("issue-ok"),emphasized:!0,disabled:!r||!t,onClick:this.handleOKClick};return o.createElement("div",{className:"buttons"},o.createElement("div",{className:"left"},o.createElement(d,s)),o.createElement("div",{className:"right"},o.createElement(d,a),o.createElement(d,c)))},handleClearClick:function(e){this.props.onConfirm&&this.props.onConfirm({type:"confirm",target:this,issue:null})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleOKClick:function(e){var t=i.clone(this.state.issue),n=this.getSelectedRepo();t.repoId=n.id,t.labels=i.intersection(t.labels,n.details.labels),this.props.onConfirm&&this.props.onConfirm({type:"close",target:this,issue:t})},handleTitleChange:function(e){var t=e.target.value;this.setIssueProperty("title",t)},handleRepoChange:function(e){var t=h=parseInt(e.target.value);this.setIssueProperty("repoId",t)},handleTagClick:function(e){var t=e.target.getAttribute("data-label"),n=this.getIssueProperty("labels")||[];n=i.includes(n,t)?i.difference(n,[t]):i.union(n,[t]),this.setIssueProperty("labels",n)}});var h},function(e,t,n){"use strict";var r=n(5),i=(n(6),n(7),n(4)),o=i.PropTypes,s=(n(113),n(148),n(221),n(216),n(217),n(90),n(50),n(18)),a=n(19),c=n(32),l=n(21),u=n(211),d=n(137),p=n(312),h=n(309);n(290),e.exports=i.createClass({displayName:"MediaEditor",mixins:[l],propTypes:{allowEmbedding:o.bool,resources:o.arrayOf(o.object),resourceIndex:o.number,locale:o.instanceOf(s).isRequired,theme:o.instanceOf(a).isRequired,payloads:o.instanceOf(c).isRequired,onChange:o.func.isRequired,onEmbed:o.func},render:function(){var e=r.get(this.props.resources,this.props.resourceIndex);if(e)return i.createElement("div",{className:"media-editor"},i.createElement("div",{className:"resource"},this.renderResource(e),this.renderNavigation()));var t;return"single-col"!==this.props.theme.mode&&(t=this.props.children),i.createElement("div",{className:"media-editor empty"},t)},renderResource:function(e){var t={resource:e,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleResourceChange};switch(e.type){case"image":case"website":return i.createElement(d,t);case"video":return i.createElement(p,t);case"audio":return i.createElement(h,t)}},renderNavigation:function(){var e=this.props.locale.translate,t=this.props.resourceIndex,n=r.size(this.props.resources);if(0===n)return null;var o={label:e("media-editor-remove"),icon:"remove",onClick:this.handleRemoveClick},s={label:e("media-editor-embed"),icon:"code",hidden:!this.props.allowEmbedding,onClick:this.handleEmbedClick},a={label:e("media-editor-shift"),icon:"chevron-left",hidden:!(n>1),disabled:!(t>0),onClick:this.handleShiftClick},c={index:t,count:n,hidden:!(n>1),onBackwardClick:this.handleBackwardClick,onForwardClick:this.handleForwardClick};return i.createElement("div",{className:"navigation"},i.createElement("div",{className:"left"},i.createElement(u,o),i.createElement(u,s),i.createElement(u,a)),i.createElement("div",{className:"right"},i.createElement(u.Direction,c)))},triggerChangeEvent:function(e,t){return this.props.onChange({type:"change",target:this,resources:e,selection:t})},triggerEmbedEvent:function(e){this.props.onEmbed&&this.props.onEmbed({type:"embed",target:this,resource:e})},handleShiftClick:function(e){var t=this.props.resourceIndex;if(!(t<1)){var n=r.slice(this.props.resources),i=n[t];n.splice(t,1),n.splice(t-1,0,i),this.triggerChangeEvent(n,t-1)}},handleRemoveClick:function(e){var t=this.props.resourceIndex,n=r.slice(this.props.resources);n.splice(t,1);var i=t;t>=n.length&&(i=n.length-1),this.triggerChangeEvent(n,i)},handleEmbedClick:function(e){var t=this.props.resourceIndex,n=this.props.resources[t];this.triggerEmbedEvent(n)},handleBackwardClick:function(e){var t=this.props.resourceIndex,n=this.props.resources;t<=0||this.triggerChangeEvent(n,t-1)},handleForwardClick:function(e){var t=this.props.resourceIndex,n=this.props.resources;t>=r.size(n)-1||this.triggerChangeEvent(n,t+1)},handleResourceChange:function(e){var t=this.props.resourceIndex,n=r.slice(this.props.resources);n[t]=e.resource,this.triggerChangeEvent(n,t)}})},function(e,t,n){"use strict";function r(e,t,n){var r=0,i=0,o=Math.min(e,t);return"center"!==n&&n||(e>o?r=Math.floor((e-o)/2):t>o&&(i=Math.floor((t-o)/2))),{left:r,top:i,width:o,height:o}}function i(e){return new c(function(t,n){e.getAsString(t)})}function o(e){if(e){var t=document.createElement("DIV");t.innerHTML=e.replace(/<.*?>/g,""),website.title=t.innerText}}function s(e){return a.toUpper(l().format("YYYY-MMM-DD-hhA"))+e}var a=n(5),c=n(6),l=n(7),u=n(4),d=u.PropTypes,p=n(113),h=n(148),f=n(221),m=n(216),g=n(217),v=n(90),y=n(50),b=n(18),x=n(19),w=n(32),k=n(21),C=n(107),E=n(132),R=n(136);n(290),e.exports=u.createClass({displayName:"MediaImporter",mixins:[k],propTypes:{resources:d.arrayOf(d.object),locale:d.instanceOf(b).isRequired,theme:d.instanceOf(x).isRequired,payloads:d.instanceOf(w).isRequired,onCaptureStart:d.func,onCaptureEnd:d.func,onChange:d.func.isRequired},getInitialState:function(){return{capturing:null}},capture:function(e){this.setState({capturing:e}),this.props.onCaptureStart&&this.props.onCaptureStart({type:"capturestart",target:this,mediaType:e})},importDataItems:function(e){var t=this,n=a.filter(e,function(e){if("string"===e.kind)return/^text\/(html|uri-list)/.test(e.type)}),s={};return a.each(n,function(e){s[e.type]=i(e)}),c.props(s).then(function(e){var t=e["text/html"],n=e["text/uri-list"];if(n){return/<img\b/i.test(t)?p.loadImage(n).then(function(e){var t=n.replace(/.*\/([^\?#]*).*/,"$1")||void 0;return{type:"image",external_url:n,filename:t,width:e.naturalWidth,height:e.naturalHeight,clip:r(e.naturalWidth,e.naturalHeight)}}):{type:"website",url:n,title:o(t)}}}).then(function(e){if(e)return t.addResources([e])})},render:function(){return u.createElement("div",null,this.renderPhotoDialog(),this.renderAudioDialog(),this.renderVideoDialog())},renderPhotoDialog:function(){var e={show:"image"===this.state.capturing,locale:this.props.locale,onCapture:this.handlePhotoCapture,onCancel:this.handleCaptureCancel};return u.createElement(C,e)},renderVideoDialog:function(){var e={show:"video"===this.state.capturing,payloads:this.props.payloads,locale:this.props.locale,onCapture:this.handleVideoCapture,onCancel:this.handleCaptureCancel};return u.createElement(R,e)},renderAudioDialog:function(){var e={show:"audio"===this.state.capturing,payloads:this.props.payloads,locale:this.props.locale,onCapture:this.handleAudioCapture,onCancel:this.handleCaptureCancel};return u.createElement(E,e)},componentWillUnmount:function(){this.state.capturing&&this.props.onCaptureEnd&&this.props.onCaptureEnd({type:"captureend",target:this,mediaType:this.state.capturing})},triggerChangeEvent:function(e,t){return this.props.onChange({type:"change",target:this,resources:e,selection:t})},addResources:function(e){if(a.isEmpty(e))return c.resolve();var t=this.props.resources||[],n=a.concat(t,e),r=t.length;return this.triggerChangeEvent(n,r)},importFiles:function(e){var t=this;return e=a.slice(e),c.map(e,function(e,t){var n=a.split(e.type,"/"),i=n[0],o=n[1];if("image"===i){var s=y.manage(e);return p.loadImage(s).then(function(t){return{type:"image",format:o,filename:e.name,file:s,width:t.naturalWidth,height:t.naturalHeight,clip:r(t.naturalWidth,t.naturalHeight),imported:!0}})}if("video"===i)return g.process(e).then(function(t){t||(t=e);var n=y.manage(t);return p.loadVideo(n).then(function(i){return m.capture(i).then(function(s){var a=y.manage(s),c=new v;return c.pipe(t),{type:"video",format:o,filename:e.name,file:n,stream:c,poster_file:a,width:i.videoWidth,height:i.videoHeight,clip:r(i.videoWidth,i.videoHeight),duration:Math.round(1e3*i.duration),imported:!0}})})});if("audio"===i){var s=y.manage(e);return p.loadAudio(s).then(function(t){var n=new v;return n.pipe(e),{type:"audio",format:o,filename:e.name,file:s,stream:n,duration:Math.round(1e3*t.duration),imported:!0}})}return"application"===i&&/x-mswinurl|x-desktop/.test(o)?h.loadText(e).then(function(t){var n=f.parse(t);if(n)return{type:"website",url:n.url,title:n.name||a.replace(e.name,/\.\w+$/,"")}}):void 0}).then(function(e){return t.addResources(a.filter(e))})},handlePhotoCapture:function(e){var t=a.clone(e.image);t.type="image",t.filename=s(".jpg"),t.clip=r(t.width,t.height),this.addResources([t]),this.handleCaptureCancel(e)},handleVideoCapture:function(e){var t=a.clone(e.video);t.type="video",t.filename=s("."+t.format),t.clip=r(t.width,t.height),this.addResources([t]),this.handleCaptureCancel(e)},handleAudioCapture:function(e){var t=a.clone(e.audio);t.type="audio",t.filename=s("."+t.format),this.addResources([t]),this.handleCaptureCancel(e)},handleCaptureCancel:function(e){this.setState({capturing:null}),this.props.onCaptureEnd&&this.props.onCaptureEnd({type:"captureend",target:this,mediaType:this.state.capturing})}})},function(e,t,n){"use strict";function r(e){return o.some(e,function(e){if(!e.url&&!e.payload_id)return!0})}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=n(6),a=n(4),c=a.PropTypes,l=n(34),u=n(111),d=n(115),p=n(116),h=n(222),f=n(149),m=n(33),g=n(218),v=n(22),y=n(32),b=n(23),x=n(18),w=n(19),k=n(21),C=n(209),E=n(46),R=n(349),S=n(29),N=n(150),O=n(351),T=n(360),P=n(45),j=n(210),_=n(200),I=n(201),D=n(350),A=n(311),U=n(140),L=n(133);n(740);e.exports=a.createClass({displayName:"StoryEditor",mixins:[k],propTypes:{isStationary:c.bool,selected:c.bool,story:c.object,authors:c.arrayOf(c.object),recommendations:c.arrayOf(c.object),recipients:c.arrayOf(c.object),currentUser:c.object,repos:c.arrayOf(c.object),database:c.instanceOf(v).isRequired,payloads:c.instanceOf(y).isRequired,route:c.instanceOf(b).isRequired,locale:c.instanceOf(x).isRequired,theme:c.instanceOf(w).isRequired},getDefaultProps:function(){return{isStationary:!1}},getInitialState:function(){this.components=m({mediaImporter:I,textArea:N,mainPopUp:U,previewPopUp:U}),this.resourcesReferenced={};var e={options:M,selectedResourceIndex:0,draft:null,confirming:!1,capturing:null,action:null};return this.updateDraft(e,this.props),this.updateOptions(e,this.props),this.updateLeadAuthor(e,this.props),this.updateResourceIndex(e,this.props),e},getClassName:function(){var e="story-editor";return this.props.selected&&(e+=" selected"),e},isCoauthoring:function(){var e=o.get(this.props.story,"user_ids"),t=o.get(this.props.currentUser,"id");return o.indexOf(e,t)>0},componentWillReceiveProps:function(e){var t=o.clone(this.state);this.props.story!==e.story&&this.updateDraft(t,e),this.props.currentUser!==e.currentUser&&this.updateLeadAuthor(t,e),this.props.story===e.story&&this.props.recommendations===e.recommendations&&this.props.locale===e.locale||(this.updateOptions(t,e),this.updateResourceIndex(t,e));var n=o.shallowDiff(t,this.state);o.isEmpty(n)||this.setState(n)},updateDraft:function(e,t){if(t.story){var n=this.props.story||q(this.props.currentUser),r=e.draft,i=t.story;r!==n&&r&&(i=u.mergeObjects(r,i,n)),e.draft=i}else e.draft=q(t.currentUser)},updateLeadAuthor:function(e,t){if(!e.story){var n=o.get(t.currentUser,"id");e.draft.user_ids||(e.draft=o.decouple(e.draft,"user_ids",[]),e.draft.user_ids[0]=n)}},updateOptions:function(e,t){var n=e.options;t.story||(n=M),n=e.options=o.clone(n),n.hidePost=!e.draft.public,n.bookmarkRecipients=o.map(t.recommendations,"target_user_id"),n.issueDetails=g.extract(e.draft,t.repos),n.preview||(n.preview=this.choosePreview(e.draft)),n.localeCode||(n.localeCode=this.chooseLocale(e.draft,t.locale))},updateResourceIndex:function(e,t){var n=o.get(e.draft,"details.resources"),r=o.size(n);e.selectedResourceIndex>=r?e.selectedResourceIndex=r-1:e.selectedResourceIndex<0&&r>0&&(e.selectedResourceIndex=0)},choosePreview:function(e){return"survey"===e.type||"task-list"===e.type?"text":o.get(e,"details.markdown",!1)?"text":""},chooseLocale:function(e,t){var n,r=o.get(e,"details.text");if(o.isEmpty(r))n=t.languageCode;else{var i=o.first(o.keys(r));if(i===t.languageCode)n=t.languageCode;else{var s=o.find(t.directory,{code:i});if(s){n=i+"-"+o.keys(s.countries)}else n=i}}return n},render:function(){switch(this.props.theme.mode){case"single-col":return this.renderSingleColumn();case"double-col":return this.renderDoubleColumn();case"triple-col":return this.renderTripleColumn()}},renderSingleColumn:function(){return a.createElement("div",{className:this.getClassName()},a.createElement("div",{className:"header"},a.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main"))),a.createElement("div",{className:"body"},a.createElement("div",{className:"column-1 padded"},this.renderCoauthoringButton(),this.renderTextArea(),this.renderButtons())),a.createElement("div",{className:"header"},a.createElement("div",{className:"column-2 padded"},this.renderToolbar(),this.renderPopUpMenu("preview"))),a.createElement("div",{className:"body"},a.createElement("div",{className:"column-2"},this.renderPreview())),this.renderMediaImporter(),this.renderConfirmationDialogBox())},renderDoubleColumn:function(){return a.createElement("div",{className:this.getClassName()},a.createElement("div",{className:"header"},a.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main")),a.createElement("div",{className:"column-2 padded"},this.renderToolbar(),this.renderPopUpMenu("preview"))),a.createElement("div",{className:"body"},a.createElement("div",{className:"column-1 padded"},this.renderCoauthoringButton(),this.renderTextArea(),this.renderButtons()),a.createElement("div",{className:"column-2"},this.renderPreview())),this.renderMediaImporter(),this.renderConfirmationDialogBox())},renderTripleColumn:function(){var e=this.props.locale.translate;return a.createElement("div",{className:this.getClassName()},a.createElement("div",{className:"header"},a.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames()),a.createElement("div",{className:"column-2 padded"},this.renderToolbar()),a.createElement("div",{className:"column-3 padded"},a.createElement(P,{icon:"chevron-circle-right",label:e("story-options"),disabled:!0}))),a.createElement("div",{className:"body"},a.createElement("div",{className:"column-1 padded"},this.renderCoauthoringButton(),this.renderTextArea(),this.renderButtons()),a.createElement("div",{className:"column-2"},this.renderPreview()),a.createElement("div",{className:"column-3 padded"},this.renderOptions())),this.renderMediaImporter(),this.renderConfirmationDialogBox())},renderProfileImage:function(){var e={user:o.get(this.props.authors,0),theme:this.props.theme,size:"medium"};return a.createElement(E,e)},renderAuthorNames:function(){var e={authors:this.props.authors,locale:this.props.locale,theme:this.props.theme};return a.createElement(C,e)},renderCoauthoringButton:function(){var e={coauthoring:this.isCoauthoring(),story:this.state.draft,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleCoauthorSelect,onRemove:this.handleCancelClick};return a.createElement(R,e)},renderTextArea:function(){var e=this.components.setters,t=this.state.options.localeCode,n=t.substr(0,2),r=o.get(this.state.draft,["details","text",n],""),s={value:r,lang:t,onChange:this.handleTextChange,onKeyPress:this.handleKeyPress,onPaste:this.handlePaste};return a.createElement(N,i({ref:e.textArea},s))},renderButtons:function(){var e=this.props.locale.translate,t=this.state.draft,n=o.isEmpty(o.get(t,"details.text")),r=o.isEmpty(o.get(t,"details.resources")),i=o.get(t,"published",!1),s={label:e("story-cancel"),onClick:this.handleCancelClick,disabled:n&&r||i},c={label:e("story-post"),onClick:this.handlePublishClick,emphasized:!0,disabled:n&&r||i};return a.createElement("div",{className:"buttons"},a.createElement(S,s),a.createElement(S,c))},renderToolbar:function(){return"text"===this.state.options.preview?this.renderTextToolbar():this.renderMediaToolbar()},renderTextToolbar:function(){var e={story:this.state.draft,locale:this.props.locale,onAction:this.handleAction};return a.createElement(T,e)},renderMediaToolbar:function(){var e={story:this.state.draft,capturing:this.state.capturing,locale:this.props.locale,onAction:this.handleAction};return a.createElement(O,e)},renderPreview:function(){return"text"===this.state.options.preview?this.renderTextPreview():this.renderMediaPreview()},renderTextPreview:function(){var e;switch(this.state.draft.type){case void 0:case"":case"post":e=this.renderRegularPost();break;case"task-list":e=this.renderTaskListText();break;case"survey":e=this.renderSurveyText()}return a.createElement("div",{className:"story-contents"},e)},renderRegularPost:function(){var e=this.props.locale.pick,t="text story",n=this.state.draft,r=e(n.details.text);return n.details.markdown?(r=p.parse(r,this.handleReference),t+=" markdown"):(r=a.createElement("p",null,r),t+=" plain-text"),a.createElement("div",{className:t,onClick:this.handleTextClick},r)},renderTaskListText:function(){var e,t=this.props.locale.pick,n="text task-list",r=this.state.draft,i=t(r.details.text);return r.details.markdown?(e=p.parseTaskList(i,null,this.handleItemChange,this.handleReference),n+=" markdown"):(e=h.parseTaskList(i,null,this.handleItemChange),e=a.createElement("p",null,e),n+=" plain-text"),a.createElement("div",{className:n,onClick:this.handleTextClick},e)},renderSurveyText:function(){var e,t=this.props.locale.pick,n="text survey",r=this.state.draft,i=t(r.details.text);return r.details.markdown?(e=p.parseSurvey(i,null,this.handleItemChange,this.handleReference),n+=" markdown"):(e=h.parseSurvey(i,null,this.handleItemChange),e=a.createElement("p",null,e),n+=" plain-text"),a.createElement("div",{className:n,onClick:this.handleTextClick},e)},renderMediaPreview:function(){var e={allowEmbedding:!0,resources:o.get(this.state.draft,"details.resources"),resourceIndex:this.state.selectedResourceIndex,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleResourcesChange,onEmbed:this.handleResourceEmbed},t={showHints:this.props.isStationary,locale:this.props.locale,theme:this.props.theme};return a.createElement(j,{onDrop:this.handleDrop},a.createElement(_,e,a.createElement(D,t)))},renderMediaImporter:function(){var e={ref:this.components.setters.mediaImporter,resources:o.get(this.state.draft,"details.resources"),locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onCaptureStart:this.handleCaptureStart,onCaptureEnd:this.handleCaptureEnd,onChange:this.handleResourcesChange};return a.createElement(I,e)},renderPopUpMenu:function(e){var t=this.components.setters[e+"PopUp"];return a.createElement(U,{ref:t},this.renderOptions(e))},renderOptions:function(e){var t={section:e,story:this.state.draft,options:this.state.options,currentUser:this.props.currentUser,repos:this.props.repos,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onChange:this.handleOptionsChange,onComplete:this.handleOptionsComplete};return a.createElement(A,t)},renderConfirmationDialogBox:function(){var e,t=this.props.locale.translate,n={show:this.state.confirming,locale:this.props.locale,onClose:this.handleDialogClose};return"delete-post"===this.state.action?(e=t("story-cancel-are-you-sure"),n.onConfirm=this.handleCancelConfirm):"cancel-edit"===this.state.action?(e=t("story-cancel-edit-are-you-sure"),n.onConfirm=this.handleCancelConfirm):(e=t("story-remove-yourself-are-you-sure"),n.onConfirm=this.handleRemoveConfirm),a.createElement(L,n,e)},componentDidUpdate:function(e,t){if(this.repositionCursor){var n=this.repositionCursor.target;n.selectionStart=n.selectionEnd=this.repositionCursor.position,this.repositionCursor=null}},changeDraft:function(e,t){var n=this;return new s(function(r,i){var s=n.state.options;if(!s.preview){var a=n.choosePreview(e);a&&(s=o.decoupleSet(s,"preview",a))}var c={draft:e,options:s};void 0!==t&&(c.selectedResourceIndex=t),n.setState(c,function(){r(e)})})},changeOptions:function(e){var t=this;return new s(function(n,r){t.setState({options:e},function(){n(e)})})},saveDraft:function(e,t,n){var r=this;return this.changeDraft(e,n).then(function(e){var n=t?0:2e3;return r.autosaveStory(e,n),e})},autosaveStory:function(e,t){var n=this;t?(this.cancelAutosave(),this.autosaveTimeout=setTimeout(function(){n.saveStory(e)},t),this.autosaveUnloadHandler=function(){n.saveStory(e)},window.addEventListener("beforeunload",this.autosaveUnloadHandler)):this.saveStory(e)},cancelAutosave:function(){this.autosaveTimeout&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=0),this.autosaveUnloadHandler&&(window.removeEventListener("beforeunload",this.autosaveUnloadHandler),this.autosaveUnloadHandler=null)},saveStory:function(e){var t=this;this.cancelAutosave();var n=this.props.route.parameters,r=(e.details.resources,this.props.payloads);return r.prepare(n.schema,e).then(function(){var i=t.props.database.use({schema:n.schema,by:t});return i.start().then(function(){return i.saveOne({table:"story"},e).then(function(e){return r.dispatch(n.schema,e).return(e)})})})},removeStory:function(e){var t=this.props.route,n=t.parameters.schema;return this.props.database.use({schema:n,by:this}).removeOne({table:"story"},e)},removeSelf:function(){var e=this.props.story,t=o.without(e.user_ids,this.props.currentUser.id),n={id:e.id,user_ids:t},r=this.props.route.parameters,i=this.props.database.use({schema:r.schema,by:this});return i.start().then(function(){return i.saveOne({table:"story"},n)})},saveBookmarks:function(e){if(o.isEmpty(e))return s.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.save({table:"bookmark"},e)})},removeBookmarks:function(e){if(o.isEmpty(e))return s.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.remove({table:"bookmark"},e)})},sendBookmarks:function(e,t){var n=this,r=this.props.recommendations,i=[];o.each(t,function(t){if(!o.some(r,{target_user_id:t})){var s={story_id:e.published_version_id||e.id,user_ids:[n.props.currentUser.id],target_user_id:t};i.push(s)}});var s=[];return o.each(r,function(e){o.includes(t,e.target_user_id)||s.push(e)}),this.saveBookmarks(i).then(function(e){return n.removeBookmarks(s).then(function(t){return o.concat(e,t)})})},publishStory:function(){var e=this,t=o.clone(this.state.draft),n=this.state.options;if(t.type||(t.type="post"),o.isEmpty(t.role_ids)){var r=o.map(this.props.authors,"role_ids");t.role_ids=o.uniq(o.flatten(r))}if(g.attach(t,n.issueDetails,this.props.currentUser,this.props.repos)){var i=o.map(t.details.labels,function(e){return"#"+e});t.tags=o.union(t.tags,i)}return t.public=!n.hidePost,t.published=!0,this.saveDraft(t,!0).then(function(t){return e.sendBookmarks(t,n.bookmarkRecipients).then(function(){if(e.props.isStationary){var t=q(e.props.currentUser);return e.changeDraft(t)}})})},handlePublishClick:function(e){this.publishStory()},handleTextChange:function(e){var t=e.currentTarget.value,n=this.state.options.localeCode,r=n.substr(0,2),i="details.text."+r,s=o.decoupleSet(this.state.draft,i,t);s.details.text=o.pickBy(s.details.text,"length"),o.isEmpty(s.details.text)&&(s.details=o.omit(s.details,"text")),s.type||d.detect(s.details.text)&&(s.type="task-list",void 0===s.details.markdown&&(s.details.markdown=!1)),void 0===s.details.markdown&&p.detect(t)&&(s.details.markdown=!0),s.tags=f.findTags(s.details.text),this.saveDraft(s)},handleKeyPress:function(e){var t=e.target;if(13==e.charCode){var n=this.state.draft.type;if("survey"===n||"task-list"===n){var r=t.value,i=t.selectionStart,s=r.substr(0,i),a=o.lastIndexOf(s,"\n"),c=s.substr(a+1),l=d.extract(c),u=o.get(l,[0,0]);if(u instanceof Object){var p;u.label?p="\n* [ ] ":(t.selectionStart=i-c.length,p="\n"),document.execCommand("insertText",!1,p),e.preventDefault()}}else"single-col"===this.props.theme.mode&&(e.preventDefault(),this.handlePublishClick(e),t.blur())}},handlePaste:function(e){this.components.mediaImporter.importFiles(e.clipboardData.files),this.components.mediaImporter.importDataItems(e.clipboardData.items)},handleCancelClick:function(e){var t;t=this.isCoauthoring()?"remove-self":this.props.isStationary?"delete-post":"cancel-edit",this.setState({confirming:!0,action:t})},handleOptionsChange:function(e){return this.changeOptions(e.options)},handleOptionsComplete:function(e){var t=e.target.props.section;this.components[t+"PopUp"].close()},handleDialogClose:function(e){this.setState({confirming:!1})},handleCancelConfirm:function(e){var t=this;this.setState({confirming:!1});var n=this.state.draft;if(this.props.isStationary){var r=q(this.props.currentUser);this.changeDraft(r).then(function(){return n.id?t.removeStory(n):n})}else this.removeStory(n)},handleReference:function(e){var t=this.state.draft.details.resources,r=p.findReferencedResource(t,e.name);if(r){var i,o=this.props.theme;if(e.forImage){if("audio"===r.type)i=n(158)+"#"+encodeURI(r.url);else if(!(i=o.getImageURL(r,{height:24}))){var s=o.getImageFile(r);i=p.attachClipRect(s,r.clip)}}else i=o.getURL(r);return this.resourcesReferenced[i]=r,{href:i,title:void 0}}},handleTextClick:function(e){var t=e.target;if("IMG"===t.tagName){var n=t.getAttribute("src");if(this.resourcesReferenced[n]){var r=this.state.draft.details.resources,i=o.indexOf(r,e.resource),s=o.decoupleSet(this.state.options,"preview","media");this.setState({selectedResourceIndex:i,options:s})}}},handleItemChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,i=t.checked,s=o.decouple(this.state.draft,"details"),a="survey"===s.type;s.details.text=o.mapValues(s.details.text,function(e){return d.update(e,n,r,i,a)}),this.saveDraft(s)},handleRemoveConfirm:function(e){this.setState({confirming:!1}),this.removeSelf()},handleCoauthorSelect:function(e){var t=o.decoupleSet(this.state.draft,"user_ids",e.selection);this.saveDraft(t,!0)},handleResourcesChange:function(e){var t=this.state.draft.resources,n=e.resources,i=e.selection;if(t!==n){var s=o.decoupleSet(this.state.draft,"details.resources",n),a=r(n);return this.saveDraft(s,a,i)}this.setState({selectedResourceIndex:i})},handleResourceEmbed:function(e){var t=this,n=e.resource,r=o.decouple(this.state.draft,"details"),i=r.details.resources,s=o.filter(i,{type:n.type}),a=o.indexOf(s,n);if(-1!==a){var c=o.clone(this.state.options);c.preview="media",this.changeOptions(c).then(function(){o.set(r,"details.markdown",!0),t.changeDraft(r).then(function(){t.components.textArea.getElement().focus(),setTimeout(function(){var e="!["+n.type+"-"+(a+1)+"]";document.execCommand("insertText",!1,e)},10)})})}},handleDrop:function(e){return this.components.mediaImporter.importFiles(e.files),this.components.mediaImporter.importDataItems(e.items),null},handleCaptureStart:function(e){this.setState({capturing:e.mediaType})},handleCaptureEnd:function(e){this.setState({capturing:null})},handleAction:function(e){switch(e.action){case"markdown-set":var t=o.decouple(this.state.draft,"details");t.details.markdown=e.value,this.saveDraft(t);break;case"story-type-set":var t=o.decouple(this.state.draft,"details");if(t.type=e.value,"task-list"===t.type||"survey"===t.type){var n=this.components.textArea.getElement();n.focus(),setTimeout(function(){var e="* [ ] ",t=n.value,r=n.selectionStart;/[^\n]$/.test(t.substr(0,r))&&(e="\n"+e),document.execCommand("insertText",!1,e)},10)}this.saveDraft(t);break;case"photo-capture":this.components.mediaImporter.capture("image");break;case"video-capture":this.components.mediaImporter.capture("video");break;case"audio-capture":this.components.mediaImporter.capture("audio");break;case"file-import":this.components.mediaImporter.importFiles(e.files)}}});var M={localeCode:"",issueDetails:null,hidePost:!1,bookmarkRecipients:[],preview:""},q=l(function(e){return{user_ids:[e.id],details:{},public:!0,published:!1}})},function(e,t,n){"use strict";function r(e){var t=i.flatten(i.map(e,"user_ids"));return i.uniq(t)}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(30),c=n(34),l=n(22),u=n(32),d=n(23),p=n(18),h=n(19),f=n(21),m=n(92),g=n(207),v=n(202),y=n(142);n(745),e.exports=a.createClass({displayName:"StoryList",propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,acceptNewStory:s.bool,stories:s.arrayOf(s.object),draftStories:s.arrayOf(s.object),pendingStories:s.arrayOf(s.object),currentUser:s.object,project:s.object,selectedStoryId:s.number,selectedReactionId:s.number,database:s.instanceOf(l).isRequired,payloads:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired,theme:s.instanceOf(h).isRequired,onSelectionClear:s.func},getDefaultProps:function(){return{acceptNewStory:!1}},renderAsync:function(e,t){var n=this.props.route.parameters,s=this.props.database.use({schema:n.schema,by:this}),a=x(this.props.currentUser),c=this.props.route!==t.route?100:1e3,l={authors:a,draftAuthors:a,pendingAuthors:a,reactions:null,respondents:null,recommendations:null,recipients:null,repos:null,selectedStoryId:this.props.selectedStoryId,selectedReactionId:this.props.selectedReactionId,access:this.props.access,acceptNewStory:this.props.acceptNewStory,stories:this.props.stories,draftStories:this.props.draftStories,pendingStories:this.props.pendingStories,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,freshRoute:this.props.route!==t.route,onSelectionClear:this.props.onSelectionClear};return e.show(o.createElement(b,l),c),s.start().then(function(e){if(!i.isEmpty(l.stories)){var t={id:r(l.stories)};return s.find({schema:"global",table:"user",criteria:t})}}).then(function(t){if(t)return l.authors=t,e.show(o.createElement(b,l))}).then(function(){var e=l.stories||[];if(l.pendingStories&&(e=i.concat(l.pendingStories,e)),!i.isEmpty(e)){var t={story_id:i.map(i.concat(l.pendingStories,l.stories),"id")};return"guest"===l.currentUser.type&&(t.public=!0),s.find({table:"reaction",criteria:t})}}).then(function(t){if(t)return l.reactions=t,e.show(o.createElement(b,l))}).then(function(){if(!i.isEmpty(l.reactions)){var e={id:i.uniq(i.map(l.reactions,"user_id"))};return s.find({schema:"global",table:"user",criteria:e})}}).then(function(t){if(t)return l.respondents=t,e.show(o.createElement(b,l))}).then(function(){if(l.draftStories){var e=r(l.draftStories),t=i.difference(e,[l.currentUser.id]);if(t.length>0){var n={id:i.union(t,[l.currentUser.id])};return s.find({schema:"global",table:"user",criteria:n})}}}).then(function(t){if(t)return l.draftAuthors=t,e.show(o.createElement(b,l))}).then(function(){if(l.pendingStories){var e=r(l.pendingStories);if(i.difference(e,[l.currentUser.id]).length>0){var t={id:e};return s.find({schema:"global",table:"user",criteria:t})}}}).then(function(t){if(t)return l.pendingAuthors=t,e.show(o.createElement(b,l))}).then(function(){if(l.currentUser){var e={story_id:i.map(l.stories,"id"),user_ids:[l.currentUser.id]};return s.find({table:"bookmark",criteria:e})}}).then(function(e){if(e)return l.recommendations=e,o.createElement(b,l)}).then(function(){if(l.recommendations){var e={id:i.map(l.recommendations,"target_user_id")};return s.find({schema:"global",table:"user",criteria:e})}}).then(function(e){e&&(l.recipients=e)}).then(function(){if(l.project){var e={id:i.get(l.project,"repo_ids",[])};return s.find({schema:"global",table:"repo",criteria:e})}}).then(function(e){return e&&(l.repos=e),o.createElement(b,l)})}});var b=e.exports.Sync=o.createClass({displayName:"StoryList.Sync",mixins:[f],propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,acceptNewStory:s.bool,stories:s.arrayOf(s.object),authors:s.arrayOf(s.object),draftStories:s.arrayOf(s.object),draftAuthors:s.arrayOf(s.object),pendingStories:s.arrayOf(s.object),pendingAuthors:s.arrayOf(s.object),reactions:s.arrayOf(s.object),respondents:s.arrayOf(s.object),recommendations:s.arrayOf(s.object),recipients:s.arrayOf(s.object),currentUser:s.object,project:s.object,repos:s.arrayOf(s.object),selectedStoryId:s.number,selectedReactionId:s.number,freshRoute:s.bool,database:s.instanceOf(l).isRequired,payloads:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired,theme:s.instanceOf(h).isRequired,onSelectionClear:s.func},getInitialState:function(){return{hiddenStoryIds:[],selectedStoryId:null}},componentWillReceiveProps:function(e){if(this.props.stories!==e.stories)if(this.freshList=this.props.freshRoute,this.props.freshRoute)this.setState({hiddenStoryIds:[]});else if(!i.isEmpty(this.state.hiddenStoryIds)){var t=i.filter(this.state.hiddenStoryIds,function(t){return i.some(e.stories,{id:t})});this.setState({hiddenStoryIds:t})}this.props.route!==e.route&&this.setState({selectedStoryId:null})},render:function(){var e=w(this.props.stories,this.props.pendingStories,this.props.draftStories,this.props.currentUser,this.props.acceptNewStory),t=this.state.selectedStoryId||this.props.selectedStoryId,n={items:e,offset:20,behind:4,ahead:8,anchor:t?"story-"+t:void 0,fresh:this.freshList,onIdentity:this.handleStoryIdentity,onRender:this.handleStoryRender,onAnchorChange:this.handleStoryAnchorChange,onBeforeAnchor:this.handleStoryBeforeAnchor};return this.freshList=!1,o.createElement("div",{className:"story-list"},o.createElement(m,n),this.renderNewStoryAlert())},renderNewStoryAlert:function(){var e=this.props.locale.translate,t=i.size(this.state.hiddenStoryIds),n=t>0;t?this.previousHiddenStoryCount=t:t=this.previousHiddenStoryCount||0;var r={show:n,onClick:this.handleNewStoryAlertClick};return o.createElement(y,r,e("alert-$count-new-stories",t))},handleStoryIdentity:function(e){return this.props.acceptNewStory&&0===e.currentIndex?"story-top":"story-"+e.item.id},handleStoryRender:function(e){var t=e.item,n=!1,r=!1;if(t){if("read-write"===this.props.access)if(t.published){var s=i.find(this.props.draftStories,{published_version_id:t.id});s&&(t=s,n=!0)}else n=!0;r=t.id===this.props.selectedStoryId}else n=!0;if(n){var a=E(this.props.draftAuthors,t),c=S(this.props.recommendations,t),l=N(this.props.recipients,c);t||(a=x(this.props.currentUser));var u={selected:r,story:t,authors:a,recommendations:c,recipients:l,repos:this.props.repos,isStationary:0===e.currentIndex,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(v,u)}if(e.needed){var d=C(this.props.reactions,t),a=E(this.props.authors,t),p=R(this.props.respondents,d),c=S(this.props.recommendations,t),l=N(this.props.recipients,c),h={selected:r,access:this.props.access,story:t,reactions:d,authors:a,respondents:p,recommendations:c,recipients:l,selectedReactionId:r?this.props.selectedReactionId:void 0,repos:this.props.repos,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(g,h)}var f=e.previousHeight||e.estimatedHeight||100;return o.createElement("div",{className:"story-view",style:{height:f}})},handleStoryAnchorChange:function(e){var t=i.get(e.item,"id");t&&!i.includes(this.state.hiddenStoryIds,t)||this.setState({hiddenStoryIds:[]}),this.props.selectedStoryId&&t!==this.props.selectedStoryId&&this.props.onSelectionClear&&this.props.onSelectionClear({type:"selectionclear",target:this})},handleStoryBeforeAnchor:function(e){var t=i.map(e.items,"id"),n=i.union(t,this.state.hiddenStoryIds);this.setState({hiddenStoryIds:n})},handleNewStoryAlertClick:function(e){this.setState({hiddenStoryIds:[],selectedStoryId:i.first(this.state.hiddenStoryIds)})}}),x=c(function(e){return[e]}),w=c(function(e,t,n,r,o){if(i.isEmpty(t)||(e=i.slice(e),i.each(t,function(t){t.published_version_id||e.push(t)})),e=i.orderBy(e,[k,"id"],["desc","desc"]),o){var s=i.filter(n,function(e){return!e.published_version_id}),a=function(e){return e.user_ids[0]===r.id};s=i.orderBy(s,[a,"id"],["desc","desc"]);i.find(s,function(e){if(e.user_ids[0]===r.id)return!0})||(s=i.concat(null,s)),e=i.concat(s,e)}return e}),k=function(e){return e.btime||e.ptime},C=c(function(e,t){return t?i.filter(e,{story_id:t.id}):[]}),E=c(function(e,t){if(t){var n=i.keyBy(e,"id");return i.filter(i.map(t.user_ids,function(e){return n[e]}))}return[]}),R=c(function(e,t){var n=i.uniq(i.map(t,"user_id")),r=i.keyBy(e,"id");return i.filter(i.map(n,function(e){return r[e]}))}),S=c(function(e,t){if(t){var n=t.published_version_id||t.id;return i.filter(e,{story_id:n})}return[]}),N=c(function(e,t){return i.filter(e,function(e){return i.some(t,{target_user_id:e.id})})})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(30),a=(n(7),n(34),n(78)),c=n(22),l=n(23),u=n(18),d=n(19),p=n(317),h=n(75),f=n(74);n(752),e.exports=s.createClass({displayName:"PeoplePage",propTypes:{database:o.instanceOf(c).isRequired,route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,theme:o.instanceOf(d).isRequired},statics:{parseURL:function(e,t,n){return l.match(e,["/:schema/people/?"],function(e){return{schema:e.schema,search:t.search,date:l.parseDate(t.date),roles:l.parseIdList(t.roles)}})},getURL:function(e){var t="/"+e.schema+"/people/",n={};return void 0!=e.date&&(n.date=e.date),void 0!=e.roles&&(n.roles=e.roles.join("+")),void 0!=e.search&&(n.search=e.search),{path:t,query:n,hash:void 0}},configureUI:function(e){var t={parameters:r.pick(e.parameters,"schema")},n={type:"daily-activities",filters:{}};return{calendar:{route:t,statistics:n},filter:{route:t},search:{route:t,statistics:n},navigation:{route:t,section:"people"}}}},renderAsync:function(e,t){var n=this,o=this.props.route.parameters,s=this.props.database.use({schema:o.schema,by:this}),c=this.props.route!==t.route?100:1e3,l={project:null,users:null,stories:null,currentUser:null,selectedDate:o.date,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(i.createElement(m,l),c),s.start().then(function(e){var t={id:e};return s.findOne({schema:"global",table:"user",criteria:t,required:!0})}).then(function(t){l.currentUser=t,e.check()}).then(function(){var e={name:o.schema};return s.findOne({schema:"global",table:"project",criteria:e,required:!0})}).then(function(t){return l.project=t,e.show(i.createElement(m,l))}).then(function(){if(o.search||o.date){var e={published:!0,ready:!0,per_user_limit:5};return o.search?e.search={lang:n.props.locale.languageCode,text:o.search}:o.date&&(e.time_range=a.getDayRange(o.date)),r.isEmpty(o.roles)||(e.role_ids=o.roles),s.find({table:"story",criteria:e,remote:!0}).then(function(e){l.stories=e;var t=r.uniq(r.flatten(r.map(e,"user_ids"))),n={id:t,hidden:!1};return s.find({schema:"global",table:"user",criteria:n})})}var e={id:l.project.user_ids,hidden:!1};return r.isEmpty(o.roles)||(e.role_ids=o.roles),s.find({schema:"global",table:"user",criteria:e})}).then(function(e){return l.users=e,i.createElement(m,l)})}});var m=e.exports.Sync=i.createClass({displayName:"PeoplePageSync",propTypes:{users:o.arrayOf(o.object),listings:o.arrayOf(o.object),stories:o.arrayOf(o.object),currentUser:o.object,selectedDate:o.string,database:o.instanceOf(c).isRequired,route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,theme:o.instanceOf(d).isRequired},render:function(){return i.createElement("div",{className:"people-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){if(!this.props.currentUser||!this.props.users)return null;var e={users:this.props.users,stories:this.props.stories,currentUser:this.props.currentUser,selectedDate:this.props.selectedDate,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(p,e)},renderEmptyMessage:function(){var e=this.props.users;if(!r.isEmpty(e))return null;if(e){var t=this.props.route.parameters;t.date?"people-no-stories-on-date":r.isEmpty(t.roles)?t.search?"people-no-stories-found":"people-no-users-yet":"people-no-users-by-role";var n={locale:this.props.locale,online:this.props.database.online,phrase:"people-no-users-yet"};return i.createElement(f,n)}return i.createElement(h,null)}})},function(e,t,n){"use strict";function r(e){return i.first(i.keys(e.versions))||null}var i=n(5),o=n(4),s=o.PropTypes,a=(n(91),n(34)),c=n(33),l=n(50),u=n(18),d=n(19),p=(n(35),n(211)),h=n(134),f=n(112),m=n(88),g=n(21);n(768),e.exports=o.createClass({displayName:"MediaView",mixins:[g],propTypes:{resources:s.arrayOf(s.object).isRequired,locale:s.instanceOf(u).isRequired,theme:s.instanceOf(d).isRequired},getInitialState:function(){return this.components=c({audioPlayer:HTMLAudioElement}),{selectedIndex:0,renderingDialogBox:!1,showingDialogBox:!1,audioURL:null}},getResourceCount:function(){return this.props.resources.length},getSelectedResourceIndex:function(){var e=this.getResourceCount()-1;return Math.min(this.state.selectedIndex,e)},getSelectedResource:function(){var e=this.getSelectedResourceIndex();return-1!==e?this.props.resources[e]:null},selectResource:function(e){var t=this;return new Promise(function(n,r){var i=t.getResourceCount();e>=0&&e<i?t.setState({selectedIndex:e},function(){n(e)}):n(t.getSelectedResourceIndex())})},render:function(){return o.createElement("div",{className:"media-view"},o.createElement("div",{className:"spacer"}),o.createElement("div",{className:"container"},this.renderResource(),this.renderNavigation(),this.renderAudioPlayer(),this.renderDialogBox()))},renderNavigation:function(){var e=this.getResourceCount();if(e<=1)return null;var t=Math.min(e-1,this.state.selectedIndex),n={index:t,count:e,onBackwardClick:this.handleBackwardClick,onForwardClick:this.handleForwardClick};return o.createElement("div",{className:"navigation"},o.createElement("div",{className:"right"},o.createElement(p.Direction,n)))},renderAudioPlayer:function(){if(!this.state.audioURL)return null;var e={ref:this.components.setters.audioPlayer,src:this.state.audioURL,autoPlay:!0,controls:!0,onEnded:this.handleAudioEnded};return o.createElement("audio",e)},renderDialogBox:function(){if(!this.state.renderingDialogBox)return null;var e=v(this.props.resources),t=this.getSelectedResourceIndex(),n=i.indexOf(e,this.props.resources[t]),r={show:this.state.showingDialogBox,resources:e,selectedIndex:n,locale:this.props.locale,theme:this.props.theme,onClose:this.handleDialogClose};return o.createElement(h,r)},renderResource:function(){var e=this.props.resources.length,t=Math.min(e-1,this.state.selectedIndex),n=this.props.resources[t];switch(n.type){case"image":return this.renderImage(n);case"video":return this.renderVideo(n);case"audio":return this.renderAudio(n);case"website":return this.renderWebsite(n)}},renderImage:function(e){return o.createElement("div",{className:"image",onClick:this.handleImageClick},this.renderImageElement(e))},renderVideo:function(e){return o.createElement("div",{className:"video",onClick:this.handleVideoClick},this.renderImageElement(e),o.createElement("div",{className:"overlay hidden"},o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-play-circle-o"})),o.createElement("div",{className:"duration"},m.format(e.duration))))},renderAudio:function(e){return o.createElement("div",{className:"audio",onClick:this.handleAudioClick},o.createElement("div",{className:"overlay"},o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-play-circle"})),o.createElement("div",{className:"duration"},m.format(e.duration))))},renderWebsite:function(e){return o.createElement("div",{className:"website"},o.createElement("a",{href:e.url,target:"_blank"},this.renderImageElement(e),o.createElement("div",{className:"overlay hidden"},o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-external-link"})))))},renderImageElement:function(e){var t,n=e.clip,r=this.props.theme;t=n?Math.round(512*n.height/n.width):Math.round(512*e.height/e.width);var i=r.getImageURL(e,{width:512,height:t});if(i)return o.createElement("img",{src:i,width:512,height:t});var s=r.getImageFile(e);return s&&l.get(s)?o.createElement(f,{url:s,clippingRect:n}):null},pauseAudio:function(){var e=this.components.audioPlayer;e&&e.pause()},handleBackwardClick:function(e){var t=this.getSelectedResourceIndex();return this.selectResource(t-1)},handleForwardClick:function(e){var t=this.getSelectedResourceIndex();return this.selectResource(t+1)},handleImageClick:function(e){this.setState({showingDialogBox:!0,renderingDialogBox:!0})},handleVideoClick:function(e){this.pauseAudio(),this.setState({showingDialogBox:!0,renderingDialogBox:!0})},handleAudioClick:function(e){var t=this.getSelectedResource(),n=r(t),i=this.props.theme.getAudioURL(t,{version:n});this.setState({audioURL:i})},handleAudioEnded:function(e){this.setState({audioURL:null})},handleDialogClose:function(e){var t=this;this.setState({showingDialogBox:!1},function(){setTimeout(function(){t.setState({renderingDialogBox:!1})},1e3)})}});var v=a(function(e){return i.filter(e,function(e){switch(e.type){case"image":case"video":return!0}})})},function(e,t,n){"use strict";function r(e,t){var r=o.clone(t.parameters);switch(e.type){case"like":case"comment":case"issue":case"vote":case"task-completion":case"coauthor":case"note":case"assignment":case"push":case"merge":case"survey":case"issue":case"mention":return r.story=e.story_id,r.reaction=e.reaction_id||void 0,t.find(n(72),r);case"bookmark":return r.story=e.story_id,t.find(n(138),r);case"join_request":return"/admin"}}function i(e){switch(e.type){case"join_request":return"admin"}return""}var o=n(5),s=n(4),a=s.PropTypes,c=n(22),l=n(23),u=n(18),d=n(19),p=n(21),h=n(109),f=n(93),m=n(46);n(769),e.exports=s.createClass({displayName:"NotificationView",mixins:[p],propTypes:{notification:a.object.isRequired,user:a.object,database:a.instanceOf(c).isRequired,route:a.instanceOf(l).isRequired,locale:a.instanceOf(u).isRequired,theme:a.instanceOf(d).isRequired,onClick:a.func},render:function(){var e={className:"notification-view "+this.props.theme.mode,url:this.getNotificationURL(),target:this.getNotificationTarget(),onClick:this.handleClick};return this.props.notification.seen||(e.className+=" unread"),s.createElement(h,e,s.createElement("div",{className:"event"},this.renderProfileImage(),this.renderText()),s.createElement("div",{className:"date"},this.renderTime(),this.renderIcon()))},renderProfileImage:function(){var e={user:this.props.user,theme:this.props.theme,size:"small"};return s.createElement(m,e)},renderText:function(){var e=this.getNotificationText();return s.createElement("span",{className:"text"},e)},renderTime:function(){var e={time:this.props.notification.ctime,locale:this.props.locale};return s.createElement(f,e)},renderIcon:function(){return s.createElement("i",{className:"fa fa-"+this.getNotificationIcon()+" fa-fw"})},getNotificationURL:function(){return r(this.props.notification,this.props.route)},getNotificationTarget:function(){return i(this.props.notification)},getNotificationText:function(){var e=this.props.locale.translate,t=this.props.locale.name,n=this.props.user,r=this.props.notification,i=n?t(n.details.name,n.details.gender):"";switch(r.type){case"like":return e("notification-$name-likes-your-$story",i,r.details.story_type);case"comment":return e("notification-$name-commented-on-your-$story",i,r.details.story_type);case"issue":return e("notification-$name-opened-an-issue",i);case"vote":return e("notification-$name-voted-in-your-survey",i);case"task-completion":return e("notification-$name-completed-task",i);case"coauthor":return e("notification-$name-added-you-as-coauthor",i);case"note":return e("notification-$name-posted-a-note-about-your-$story",i,r.details.story_type);case"assignment":return e("notification-$name-is-assigned-to-your-issue",i);case"push":return e("notification-$name-pushed-code-to-$branch",i,r.details.branch);case"merge":return e("notification-$name-merged-code-to-$branch",i,r.details.branch);case"survey":return e("notification-$name-posted-a-survey",i);case"bookmark":return e("notification-$name-sent-bookmark-to-$story",i,r.details.story_type);case"mention":if(r.details.story_type)return e("notification-$name-mentioned-you-in-$story",i,r.details.story_type);if(r.details.reaction_type)return e("notification-$name-mentioned-you-in-$reaction",i,r.details.reaction_type);break;case"join_request":return e("notification-$name-requested-to-join",i)}},getNotificationIcon:function(){switch(this.props.notification.type){case"like":return"thumbs-up";case"comment":return"comment";case"issue":return"exclamation-circle";case"vote":return"check-square-o";case"task-completion":return"star";case"note":return"sticky-note";case"assignment":return"hand-o-right";case"push":case"merge":case"coauthor":return"handshake-o";case"survey":return"list-url";case"bookmark":return"bookmark";case"mention":return"at";case"join_request":return"user-circle"}},handleClick:function(e){this.props.onClick&&this.props.onClick({type:"click",target:this})}}),e.exports.getNotificationURL=r,e.exports.getNotificationTarget=i},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(34),c=n(33),l=n(147),u=n(218),d=n(114),p=n(22),h=n(32),f=n(23),m=n(18),g=n(19),v=n(21),y=n(46),b=n(209),x=n(359),w=n(358),k=(n(52),n(354)),C=n(315),E=n(45),R=n(341),S=n(342),N=n(140);n(774),e.exports=o.createClass({displayName:"StoryView",mixins:[v],propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,selected:s.bool,story:s.object.isRequired,bookmark:s.object,authors:s.arrayOf(s.object),reactions:s.arrayOf(s.object),respondents:s.arrayOf(s.object),recommendations:s.arrayOf(s.object),recipients:s.arrayOf(s.object),repos:s.arrayOf(s.object),currentUser:s.object.isRequired,selectedReactionId:s.number,database:s.instanceOf(p).isRequired,payloads:s.instanceOf(h).isRequired,route:s.instanceOf(f).isRequired,locale:s.instanceOf(m).isRequired,theme:s.instanceOf(g).isRequired},getInitialState:function(){this.components=c({reactionContainer:HTMLDivElement,reactionList:C,mainPopUp:N});var e={options:T,commentsExpanded:this.shouldExpandComments(this.props),addingComment:i.some(this.props.reactions,{user_id:this.props.currentUserId,published:!1}),isTall:!1};return this.updateOptions(e,this.props),e},getClassName:function(){var e="story-view";return this.props.selected&&(e+=" selected"),e},shouldExpandComments:function(e){if(e.reactions&&e.respondents){var t=i.get(this.props.currentUser,"id");return!!i.includes(e.story.user_ids,t)||(!!i.some(e.reactions,{user_id:t})||!(!e.selectedReactionId||!i.some(e.reactions,{id:e.selectedReactionId})))}},componentWillReceiveProps:function(e){var t=this,n=i.clone(this.state);this.props.story===e.story&&this.props.recommendations===e.recommendations||this.updateOptions(n,e);var r=i.pickBy(n,function(e,n){return t.state[n]!==e});i.isEmpty(r)||this.setState(r)},updateOptions:function(e,t){var n=e.options=i.clone(e.options);n.hideStory=!t.story.public,n.bookmarkRecipients=i.map(t.recommendations,"target_user_id"),n.issueDetails=u.extract(t.story,t.repos),n.keepBookmark=!!t.bookmark||void 0},render:function(){switch(this.props.theme.mode){case"single-col":return this.renderSingleColumn();case"double-col":return this.renderDoubleColumn();case"triple-col":return this.renderTripleColumn()}},renderSingleColumn:function(){return o.createElement("div",{className:this.getClassName()},o.createElement("div",{className:"header"},o.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main"))),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-1 padded"},this.renderProgress(),this.renderEmblem(),this.renderContents())),o.createElement("div",{className:"header"},o.createElement("div",{className:"column-2 padded"},this.renderReactionToolbar())),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-2"},this.renderReactions())))},renderDoubleColumn:function(){return o.createElement("div",{className:this.getClassName()},o.createElement("div",{className:"header"},o.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main")),o.createElement("div",{className:"column-2 padded"},this.renderReactionToolbar())),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-1 padded"},this.renderProgress(),this.renderEmblem(),this.renderContents()),o.createElement("div",{className:"column-2"},this.renderReactions())))},renderTripleColumn:function(){var e=this.props.locale.translate;return o.createElement("div",{className:this.getClassName()},o.createElement("div",{className:"header"},o.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames()),o.createElement("div",{className:"column-2 padded"},this.renderReactionToolbar()),o.createElement("div",{className:"column-3 padded"},o.createElement(E,{icon:"chevron-circle-right",label:e("story-options"),disabled:!0}))),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-1 padded"},this.renderProgress(),this.renderEmblem(),this.renderContents()),o.createElement("div",{className:"column-2"},this.renderReactions()),o.createElement("div",{className:"column-3 padded"},this.renderOptions())))},renderProfileImage:function(){var e=i.get(this.props.authors,0),t={user:e,theme:this.props.theme,size:"medium"};return e&&(t.href=this.props.route.find(n(62),{schema:this.props.route.parameters.schema,user:e.id})),o.createElement(y,t)},renderAuthorNames:function(){var e={authors:this.props.authors,locale:this.props.locale,theme:this.props.theme};return o.createElement(b,e)},renderReactionToolbar:function(){if(!l.isSaved(this.props.story))return null;var e={access:this.props.access,currentUser:this.props.currentUser,reactions:this.props.reactions,respondents:this.props.respondents,addingComment:this.state.addingComment,locale:this.props.locale,theme:this.props.theme,onAction:this.handleAction};return o.createElement(k,e)},renderProgress:function(){var e;if(!1===this.props.story.ready){var t=this.props.route.parameters.schema;e=this.props.payloads.inquire(t,this.props.story),console.log(e)}var n={status:e,story:this.props.story,locale:this.props.locale};return o.createElement(x,n)},renderEmblem:function(){var e={story:this.props.story};return o.createElement(w,e)},renderContents:function(){var e={story:this.props.story,authors:this.props.authors,currentUser:this.props.currentUser,reactions:this.props.reactions,repo:P(this.props.repos,this.props.story),locale:this.props.locale,theme:this.props.theme,onChange:this.handleStoryChange,onReaction:this.handleStoryReaction};return o.createElement(R,e)},renderReactions:function(){if("single-col"===this.props.theme.mode&&!this.state.commentsExpanded)return null;if(!this.state.addingComment&&i.isEmpty(this.props.reactions))return null;var e=this.components.setters,t={access:this.props.access,acceptNewReaction:this.state.addingComment,story:this.props.story,reactions:this.props.reactions,respondents:this.props.respondents,repo:P(this.props.repos,this.props.story),currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,selectedReactionId:this.props.selectedReactionId,onFinish:this.handleCommentFinish},n="scrollable";return this.state.isTall&&"single-col"!==this.props.theme.mode&&(n+=" abs"),o.createElement("div",{ref:e.reactionContainer,className:n},o.createElement(C,r({ref:e.reactionList},t)))},adjustReactionContainer:function(){if("single-col"!==this.props.theme.mode){var e=this.components.reactionContainer;if(e){var t=e.parentNode;if(!O){var n=getComputedStyle(e);O=parseInt(n.maxHeight)}var r=t.offsetHeight>O;this.state.isTall!==r&&this.setState({isTall:r})}}},renderPopUpMenu:function(e){var t=this.components.setters[e+"PopUp"];return o.createElement(N,{ref:t},this.renderOptions(e))},renderOptions:function(e){var t={section:e,access:this.props.access,story:this.props.story,repos:this.props.repos,currentUser:this.props.currentUser,options:this.state.options,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onChange:this.handleOptionsChange,onComplete:this.handleOptionsComplete};return o.createElement(S,t)},componentDidMount:function(){this.adjustReactionContainer()},componentDidUpdate:function(e,t){this.adjustReactionContainer()},autosaveStory:function(e,t){var n=this;this.cancelAutosave(),this.autosaveTimeout=setTimeout(function(){n.saveStory(e)},t),this.autosaveUnloadHandler=function(){n.saveStory(e)},window.addEventListener("beforeunload",this.autosaveUnloadHandler)},cancelAutosave:function(){this.autosaveTimeout&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=0),this.autosaveUnloadHandler&&(window.removeEventListener("beforeunload",this.autosaveUnloadHandler),this.autosaveUnloadHandler=null)},saveStory:function(e){var t=this;this.cancelAutosave();var n=this.props.route.parameters,r=this.props.database.use({schema:n.schema,by:this});return r.start().then(function(){var n=!l.isSaved(e),o=t.state.options.bookmarkRecipients;return r.saveOne({table:"story"},e).then(function(e){return n&&!i.isEmpty(o)?t.sendBookmarks(e,o).then(function(t){return e}):e})})},removeStory:function(e){var t=this.props.route.parameters;return this.props.database.use({schema:t.schema,by:this}).removeOne({table:"story"},e)},saveReaction:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.saveOne({table:"reaction"},e)})},removeReaction:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.removeOne({table:"reaction"},e)})},saveBookmarks:function(e){if(i.isEmpty(e))return Promise.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.save({table:"bookmark"},e)})},removeBookmarks:function(e){if(i.isEmpty(e))return Promise.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.remove({table:"bookmark"},e)})},sendBookmarks:function(e,t){var n=this,r=this.props.recommendations,o=[];i.each(t,function(t){if(!i.some(r,{target_user_id:t})){var s={story_id:e.published_version_id||e.id,user_ids:[n.props.currentUser.id],target_user_id:t};o.push(s)}});var s=[];return i.each(r,function(e){i.includes(t,e.target_user_id)||s.push(e)}),this.saveBookmarks(o).then(function(e){return n.removeBookmarks(s).then(function(t){return i.concat(e,t)})})},setOptions:function(e){var t=this,n=this.state.options;this.setState({options:e},function(){var r=t.props.story;if(e.editStory&&!n.editStory)if(r.id>1){var o=i.omit(r,"id","published","ptime");o.published_version_id=r.id,t.saveStory(o)}else{var s={id:r.id,published:!1};t.saveStory(s)}if(e.removeStory&&!n.removeStory&&t.removeStory(r),e.bumpStory&&!n.bumpStory){var s={id:r.id,bump:!0};t.saveStory(s)}if(e.hideStory!==n.hideStory){var s={id:r.id,public:!e.hideStory};t.saveStory(s)}if(e.keepBookmark!==n.keepBookmark&&t.props.bookmark&&!e.keepBookmark&&t.removeBookmarks([t.props.bookmark]),!i.isEqual(e.issueDetails,n.issueDetails)){var s={id:r.id,details:i.cloneDeep(r.details),external:i.cloneDeep(r.external)};u.attach(s,e.issueDetails,t.props.currentUser,t.props.repos),t.saveStory(s)}i.isEqual(e.bookmarkRecipients,n.bookmarkRecipients)||(l.isSaved(r)?t.sendBookmarks(t.props.story,e.bookmarkRecipients):t.saveStory(r))})},handleStoryChange:function(e){this.autosaveStory(e.story,1e3)},handleStoryReaction:function(e){this.saveReaction(e.reaction)},handleOptionsChange:function(e){this.setOptions(e.options)},handleOptionsComplete:function(e){var t=e.target.props.section;this.components[t+"PopUp"].close()},handleCommentFinish:function(e){var t=this;i.some(this.props.reactions,function(e){if(!e.published&&e.user_id===t.props.currentUser.id)return!0})||this.setState({addingComment:!1})},handleAction:function(e){switch(e.action){case"like-add":var t={type:"like",story_id:this.props.story.id,user_id:this.props.currentUser.id,published:!0,public:!0};this.saveReaction(t);break;case"like-remove":this.removeReaction(e.like);break;case"reaction-add":this.state.addingComment?this.components.reactionList.focus():this.setState({addingComment:!0,commentsExpanded:!0});break;case"reaction-expand":this.setState({commentsExpanded:!0})}}});var O,T={issueDetails:null,hideStory:!1,editStory:!1,removeStory:!1,bumpStory:!1,bookmarkRecipients:[],keepBookmark:void 0},P=a(function(e,t){return i.find(e,function(e){return!!d.find(t,{related_to:{object:e,relation:"project"}})})})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(22),a=n(23),c=n(18),l=n(19),u=n(21),d=n(46),p=n(348),h=n(45),f=n(316),m=n(343),g=n(344),v=n(140);n(777),e.exports=i.createClass({displayName:"UserView",mixins:[u],propTypes:{user:o.object,roles:o.arrayOf(o.object),stories:o.arrayOf(o.object),chartType:o.string,dailyActivities:o.object,currentUser:o.object,selectedDate:o.string,today:o.string,database:o.instanceOf(s).isRequired,route:o.instanceOf(a).isRequired,locale:o.instanceOf(c).isRequired,theme:o.instanceOf(l).isRequired,onChartSelect:o.func},getChartType:function(){var e=this.props.chartType;return e||"single-col"!==this.props.theme.mode&&(e="bar"),e},render:function(){switch(this.props.theme.mode){case"single-col":return this.renderSingleColumn();case"double-col":return this.renderDoubleColumn();case"triple-col":return this.renderTripleColumn()}},renderSingleColumn:function(){return i.createElement("div",{className:"user-view"},i.createElement("div",{className:"header"},i.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderRoles(),this.renderPopUpMenu("main"))),i.createElement("div",{className:"body"},i.createElement("div",{className:"column-1 padded"},this.renderName(),this.renderTag(),this.renderRecentActivities())),i.createElement("div",{className:"header"},i.createElement("div",{className:"column-2 padded"},this.renderChartToolbar())),i.createElement("div",{className:"body"},i.createElement("div",{className:"column-2"},this.renderStatistics())))},renderDoubleColumn:function(){return i.createElement("div",{className:"user-view"},i.createElement("div",{className:"header"},i.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderRoles(),this.renderPopUpMenu("main")),i.createElement("div",{className:"column-2 padded"},this.renderChartToolbar())),i.createElement("div",{className:"body"},i.createElement("div",{className:"column-1 padded"},this.renderName(),this.renderTag(),this.renderRecentActivities()),i.createElement("div",{className:"column-2"},this.renderStatistics())))},renderTripleColumn:function(){var e=this.props.locale.translate;return i.createElement("div",{className:"user-view triple-col"},i.createElement("div",{className:"header"},i.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderRoles()),i.createElement("div",{className:"column-2 padded"},this.renderChartToolbar()),i.createElement("div",{className:"column-3 padded"},i.createElement(h,{icon:"chevron-circle-right",label:e("user-actions"),disabled:!0}))),i.createElement("div",{className:"body"},i.createElement("div",{className:"column-1 padded"},this.renderName(),this.renderTag(),this.renderRecentActivities()),i.createElement("div",{className:"column-2"},this.renderStatistics()),i.createElement("div",{className:"column-3 padded"},this.renderOptions())))},renderProfileImage:function(){var e={user:this.props.user,theme:this.props.theme,size:"large"};return i.createElement(d,e)},renderRoles:function(){var e=this.props.locale.pick,t=r.map(this.props.roles,function(t){return e(t.details.title)||t.name});return i.createElement("span",{className:"roles"},t.join(", ")||"")},renderChartToolbar:function(){var e={chartType:this.getChartType(),locale:this.props.locale,onAction:this.handleAction};return i.createElement(p,e)},renderName:function(){var e=this.props.user,t=this.props.locale.pick,n=e?t(e.details.name):"";return i.createElement("h2",{className:"name"},n)},renderTag:function(){var e=(this.props.locale.translate,this.props.user),t=e?"@"+e.username:"";return i.createElement("h3",{className:"tag"},t)},renderRecentActivities:function(){var e={stories:this.props.stories,user:this.props.user,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(f,e)},renderStatistics:function(){var e={user:this.props.user,story:this.props.story,dailyActivities:this.props.dailyActivities,chartType:this.getChartType(),selectedDate:this.props.selectedDate,today:this.props.today,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(m,e)},renderPopUpMenu:function(e){return i.createElement(v,null,this.renderOptions(e))},renderOptions:function(e){var t={section:e,user:this.props.user,locale:this.props.locale,theme:this.props.theme};return i.createElement(g,t)},handleAction:function(e){switch(e.action){case"chart-type-set":this.props.onChartSelect&&this.props.onChartSelect({type:"chartselect",target:this,chart:e.value,user:this.props.user})}}})},function(e,t,n){"use strict";function r(e){var t,n=e.locale.translate,r=e.locale.pick,a=e.authors,c=o.map(a,function(e){return r(e.details.name)});switch(o.size(a)){case 0:t="";break;case 1:t=s.createElement("span",{key:1,className:"sole author"},c[0]);break;case 2:var l=s.createElement("span",{key:1,className:"lead author"},c[0]);t=n("story-author-$name1-and-$name2",l,s.createElement("span",{key:3,className:"co author"},c[1]));break;default:var l=s.createElement("span",{key:1,className:"lead author"},c[0]),d=o.slice(a,1),e={users:d,label:n("story-author-$count-others",d.length),title:n("story-coauthors"),locale:e.locale,theme:e.theme};t=n("story-author-$name1-and-$name2",l,s.createElement(u,i({key:3},e)))}return s.createElement("span",{className:"author-names"},t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=n(4),a=s.PropTypes,c=n(18),l=n(19),u=n(212);e.exports=r,n(778),r.propTypes={authors:a.arrayOf(a.object),locale:a.instanceOf(c).isRequired,theme:a.instanceOf(l).isRequired}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(4),o=i.PropTypes;n(786),e.exports=i.createClass({displayName:"DropZone",propTypes:{onDrop:o.func},getInitialState:function(){return{active:!1}},render:function(){return i.createElement("div",{className:"drop-zone",onDragEnter:this.handleDragEnter},this.props.children,this.renderOverlay())},renderOverlay:function(){if(!this.state.active)return null;var e={onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop};return i.createElement("div",r({className:"overlay"},e))},handleDragEnter:function(e){this.setState({active:!0})},handleDragLeave:function(e){this.setState({active:!1})},handleDragOver:function(e){e.preventDefault()},handleDrop:function(e){return e.preventDefault(),this.state.active&&this.props.onDrop&&this.props.onDrop({type:"drop",files:e.dataTransfer.files,items:e.dataTransfer.items}),this.setState({active:!1}),null}})},function(e,t,n){"use strict";function r(e){return e.hidden?null:a.createElement("label",{className:o(e),onClick:e.disabled?null:e.onClick},a.createElement("i",{className:s(e)}),a.createElement("span",{className:"label"},e.label))}function i(e){if(e.hidden)return null;var t=e.index+1+" / "+e.count;return a.createElement("div",{className:"media-direction"},a.createElement("label",{className:"backward-button",onClick:e.onBackwardClick},a.createElement("i",{className:"fa fa-caret-left"})),a.createElement("span",{className:"position"},t),a.createElement("label",{className:"forward-button",onClick:e.onForwardClick},a.createElement("i",{className:"fa fa-caret-right"})))}function o(e){var t=["media-button"];return e.className&&t.push(e.className),e.disabled&&t.push("disabled"),t.join(" ")}function s(e){var t=[];return e.icon&&t.push("fa","fa-"+e.icon),t.join(" ")}var a=n(4),c=a.PropTypes;e.exports=r,e.exports.Direction=i,n(791),i.propTypes={index:c.number,count:c.number,hidden:c.bool,onBackwardClick:c.func,onForwardClick:c.func},i.propTypes={label:c.string,icon:c.string,hidden:c.bool,highlighted:c.bool,disabled:c.bool,onChange:c.func}},function(e,t,n){"use strict";function r(e){var t=["user"],n={user:e.user,theme:e.theme,size:"small"},r=e.locale.pick,i=r(e.user.details.name);return s.createElement("div",{className:t.join(" ")},s.createElement(h,n),s.createElement("span",{className:"name"},i))}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=n(4),a=s.PropTypes,c=n(18),l=n(19),u=n(35),d=n(29),p=n(52),h=n(46);n(794),e.exports=s.createClass({displayName:"MultipleUserNames",propTypes:{label:a.string,title:a.string,users:a.arrayOf(a.object).isRequired,popupLimit:a.number,locale:a.instanceOf(c).isRequired,theme:a.instanceOf(l).isRequired},getDefaultProps:function(){return{popupLimit:8}},getInitialState:function(){return{showingPopUp:!1,showingDialogBox:!1,renderingDialogBox:!1}},render:function(){var e="multiple-user-names";this.props.className&&(e+=" "+this.props.className);var t={className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},n={className:"label",onClick:this.handleClick};return s.createElement("span",t,s.createElement("span",n,this.props.label),this.renderPopUp(),this.renderDialogBox())},renderPopUp:function(){return this.state.showingPopUp?s.createElement("div",{className:"popup-container"},s.createElement("div",{className:"popup"},this.renderUserList(this.props.popupLimit))):null},renderDialogBox:function(){if(!this.state.renderingDialogBox)return null;var e={show:this.state.showingDialogBox,onBackgroundClick:this.handleDialogBoxClose},t={label:"OK",emphasized:!0,onClick:this.handleDialogBoxClose};return s.createElement(u,e,s.createElement("div",{className:"multiple-user-names-dialog-box"},s.createElement(p,null,s.createElement("div",{className:"list"},this.renderUserList())),s.createElement("div",{className:"buttons"},s.createElement(d,t))))},renderUserList:function(e){var t=this.props.locale.pick,n=o.sortBy(this.props.users,function(e){return t(e.details.name)});if(n.length>e){var r=this.props.locale.translate,i=o.slice(n,e),a=o.map(i,this.renderUser);return a.push(s.createElement("div",{key:0,className:"more"},r("list-$count-more",n.length-i.length))),a}return o.map(n,this.renderUser)},renderUser:function(e,t){var n={user:e,theme:this.props.theme,locale:this.props.locale};return s.createElement(r,i({key:e.id},n))},handleMouseEnter:function(e){this.setState({showingPopUp:!0})},handleMouseLeave:function(e){this.setState({showingPopUp:!1})},handleClick:function(e){this.setState({showingPopUp:!1,showingDialogBox:!0,renderingDialogBox:!0})},handleDialogBoxClose:function(e){var t=this;this.setState({showingDialogBox:!1},function(){setTimeout(function(){t.setState({renderingDialogBox:!1})},1e3)})}})},function(e,t,n){"use strict";function r(e,t){for(var n=e;n!==document.body.parentNode;n=n.parentNode)if(n===t)return!0;return!1}function i(e,t){for(var n=e.offsetLeft,r=e.offsetTop,i=e.offsetParent;i&&i!==t;i=i.offsetParent)n+=i.offsetLeft-i.scrollLeft,r+=i.offsetTop-i.scrollTop;return{left:n,top:r}}function o(){return document.getElementById("app-container").getElementsByClassName("page-view-port")[0]}var s=n(5),a=n(4),c=a.PropTypes,l=n(8),u=n(35);n(797),e.exports=a.createClass({displayName:"PopUpMenu",propTypes:{disabled:c.bool,popOut:c.bool},getDefaultProps:function(){return{disabled:!1,popOut:!1}},getInitialState:function(){return{open:!1}},getContents:function(e){var t=a.Children.toArray(this.props.children),n=s.find(t,{type:e});if(n)return n.props.children},close:function(){return this.setState({open:!1})},render:function(){var e="pop-up-menu";return this.props.className&&(e+=" "+this.props.className),a.createElement("span",{className:e},this.renderButton(),this.props.popOut?null:this.renderMenu())},renderButton:function(){var e="button";return this.props.disabled||(e+=" active"),a.createElement("span",{className:e,onClick:this.handleButtonClick},this.getContents("button"))},renderMenu:function(){return this.state.open?a.createElement("div",{className:"container"},a.createElement("div",{className:"menu"},this.getContents("menu"))):null},redrawPopOutMenu:function(){var e=l.findDOMNode(this),t=o(),n=i(e,t),r={position:"absolute",left:n.left+e.offsetWidth,top:n.top},s="pop-up-menu";this.props.className&&(s+=" "+this.props.className);var c=a.createElement("div",{className:s,style:r},a.createElement("div",{className:"container"},a.createElement("div",{className:"menu",onClick:this.handleMenuClick},this.getContents("menu"))));l.render(c,this.popOutContainer)},componentDidUpdate:function(e,t){var n=document.getElementById("application");!t.open&&this.state.open?(n.addEventListener("mousedown",this.handleBodyMouseDown),this.props.popOut&&this.addPopOutContainer()):t.open&&!this.state.open&&(n.removeEventListener("mousedown",this.handleBodyMouseDown),this.props.popOut&&this.removePopOutContainer()),this.state.open&&this.props.popOut&&this.redrawPopOutMenu()},componentWillUnmount:function(){document.getElementById("application").removeEventListener("mousedown",this.handleBodyMouseDown),this.removePopOutContainer()},addPopOutContainer:function(){if(!this.popOutContainer){var e=o();this.popOutContainer=document.createElement("DIV"),this.popOutContainer.style.left="0",this.popOutContainer.style.top="0",e.appendChild(this.popOutContainer),this.popOutContainer.style.position="absolute"}},removePopOutContainer:function(){this.popOutContainer&&(this.popOutContainer.parentNode.removeChild(this.popOutContainer),this.popOutContainer=null)},triggerEvent:function(e){e?this.props.onOpen&&this.props.onOpen({type:"open",target:this}):this.props.onClose&&this.props.onClose({type:"close",target:this})},handleButtonClick:function(e){this.props.disabled||(this.triggerEvent(!this.state.open),this.setState({open:!this.state.open}))},handleBodyMouseDown:function(e){if(0===e.button&&!u.active){var t=l.findDOMNode(this),n=r(e.target,t);!n&&this.popOutContainer&&(n=r(e.target,this.popOutContainer)),n||(this.setState({open:!1}),this.triggerEvent(!1))}}})},function(e,t,n){"use strict";var r=n(4),i=r.PropTypes,o=n(13);e.exports=r.createClass({displayName:"QRCode",propTypes:{text:i.string,scale:i.number},getDefaultProps:function(){return{scale:4}},render:function(){return r.createElement("canvas",{ref:"canvas",className:"qr-code"})},componentDidMount:function(){this.redraw()},componentDidUpdate:function(e,t){this.redraw()},redraw:function(){var e=this.refs.canvas,t={scale:this.props.scale};o.toCanvas(e,this.props.text,t,function(e){})}})},function(e,t,n){"use strict";function r(e){e instanceof Object&&(e=e.code),this.code=e,this.message=i[e]}e.exports=r;var i={1:"A required file or directory could not be found at the time an operation was processed",2:"Access to the file was denied",3:"Operation was aborted",4:"The file or directory cannot be read",5:"The URL is malformed",6:"The state of the underlying file system prevents any writing to a file or a directory",7:"The operation cannot be performed on the current state of the interface object",8:"Synax error",9:"The modification requested is not allowed",10:"Not enough remaining storage space or the storage quota was reached",11:"The app looked up an entry, but the entry found is of the wrong type",12:"The file or directory with the same path already exists"};r.prototype=Object.create(Error.prototype)},function(e,t,n){"use strict";function r(e,t){return t||(t=0),new i(function(n,r){function i(t){var n=l*u*3;t.size/n>.02?s(t):((!h||h.size<t.size)&&(h=t),p>10?s(h):(e.currentTime+=1e3,p++))}function o(t){try{d.getContext("2d").drawImage(e,0,0,l,u),d.toBlob(i,"image/jpeg",75)}catch(e){a(e)}}function s(e){c(),n(e)}function a(e){c(),h?n(h):r(e)}function c(){e.removeEventListener("seeked",o),clearTimeout(f)}var l=e.videoWidth,u=e.videoHeight,d=document.createElement("CANVAS");d.width=l,d.height=u;var p=1,h=null;e.addEventListener("seeked",o),e.addEventListener("ended",function(){a(new Error("Unable to obtain an image before video ended"))}),e.currentTime=t;var f=setTimeout(function(){a(new Error("Unable to obtain an image within time limit"))},1e3)})}var i=(n(5),n(6));e.exports={capture:r}},function(e,t,n){"use strict";function r(e){return o(e).then(function(t){var n=d.findIndex(t,{name:"ftyp"}),r=d.findIndex(t,{name:"moov"});if(!(0===n&&r>1))return null;var o=t[n],s=t[r];return a(e,o).then(function(t){return a(e,s).then(function(n){var r=new Uint8Array(n);i(r,8,r.length,o.offset+o.size,s.offset,s.size);var a=e.slice(o.offset+o.size,s.offset),c=e.slice(s.offset+s.size),l=[t,n,a,c];return new Blob(l,{type:e.type})})})}).catch(function(e){return null})}function i(e,t,n,r,o,s){for(;t<n;){var a=c(e,t),d=u(e,t+4);if(a<8)break;switch(d){case"stco":for(var p=c(e,t+12),h=0;h<p;h++){var f=t+16+4*h,m=c(e,f);r<=m&&m<=o&&(m+=s,e[f+0]=m>>24&255,e[f+1]=m>>16&255,e[f+2]=m>>8&255,e[f+3]=m>>0&255)}break;case"co64":for(var p=c(e,t+12),h=0;h<p;h++){var f=t+16+8*h,m=l(e,f);r<=m&&m<=o&&(m+=s,e[f+0]=m>>56&255,e[f+1]=m>>48&255,e[f+2]=m>>40&255,e[f+3]=m>>32&255,e[f+4]=m>>24&255,e[f+5]=m>>16&255,e[f+6]=m>>8&255,e[f+7]=m>>0&255)}break;case"trak":case"mdia":case"minf":case"stbl":i(e,t+8,t+a,r,o,s)}t+=a}}function o(e){var t=[],n=0,r=e.size,i=!1,o=!1;return h.do(function(){return s(e,n).then(function(e){var s=!1;if(i?"moov"===e.name&&(o=!0):"ftyp"===e.name?i=!0:s=!0,n+=e.size,n>r&&(s=!0),s)throw new Error("File does not appear to a QuickTime container");t.push(e)})}),h.while(function(){return!(i&&o)}),h.return(function(){return t}),h.end()}function s(e,t){return new p(function(n,r){var i=e.slice(t,t+16),o=new FileReader;o.readAsArrayBuffer(i),o.onload=function(e){var i=new Uint8Array(e.target.result),o=c(i,0),s=8;1===o&&(o=l(i,8),s=16),o>=s||r(new Error("Invalid atom size"));var a=u(i,4);n({offset:t,size:o,name:a})},o.onerror=function(e){r(new Error("Unable to load data"))}})}function a(e,t){return new p(function(n,r){var i=e.slice(t.offset,t.offset+t.size),o=new FileReader;o.readAsArrayBuffer(i),o.onload=function(e){n(e.target.result)},o.onerror=function(e){r(new Error("Unable to load data"))}})}function c(e,t){return e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function l(e,t){return e[t+0]<<56|e[t+1]<<48|e[t+2]<<40|e[t+3]<<32|e[t+4]<<24|e[t+5]<<16|e[t+6]<<8|e[t+7]}function u(e,t){return String.fromCharCode(e[t+0])+String.fromCharCode(e[t+1])+String.fromCharCode(e[t+2])+String.fromCharCode(e[t+3])}var d=n(5),p=n(6),h=n(131);e.exports={process:r}},function(e,t,n){"use strict";function r(e,t){if(!e)return null;var n=s.find(e,{relation:"issue"});if(!n)return null;var r=o.find(t,function(t){return!!s.find(e,{project:n.project})});return r?{title:e.details.title||"",labels:e.details.labels||[],repoId:r.id}:null}function i(e,t,n,r){try{if(t){var i=o.find(r,{id:t.repoId}),a=s.find(i,{relation:"project"}),c=s.find(n,{server_id:a.server_id}),l=s.find(e,{relation:"issue"});return l&&o.isMatch(l,a)&&(o.pull(e.external,l),l=null),l||(l=s.extend(a,{issue:{id:0}}),e.external||(e.external=[]),e.external.push(l)),l.user={id:c.user.id},e.details.title=t.title,e.details.labels=t.labels,!0}return o.pullAllBy(e.external,function(e){return!(!e.project||!e.issue)}),e.details.hasOwnProperty("title")&&delete e.details.title,e.details.hasOwnProperty("labels")&&delete e.details.labels,!1}catch(e){console.error(e)}}var o=n(5),s=n(114);e.exports={extract:r,attach:i}},function(e,t,n){"use strict";function r(e){return!!e&&!(e.id<1)}function i(e){return!!e&&!!e.ptime}function o(e){return!!e&&c.includes(u.editable,e.type)}function s(e,t,n){if(!e||!e.published)return!1;var r=e.ptime;return!r||l()<l(r).add(t,n)}function a(e){return e.uncomitted}var c=n(5),l=n(7),u=n(374);e.exports={isSaved:r,isActuallyPublished:i,isEditable:o,wasPublishedWithin:s,hasUncomittedChanges:a}},function(e,t,n){"use strict";function r(e,t,n,r){var i="/"+o.replace(e,"://","/"),a=s+i+t;if(!o.isEmpty(n)){a+="?"+o.filter(o.map(n,function(e,t){if(void 0!=e)return t+"="+encodeURIComponent(e)})).join("&")}return r&&(a+="#"+r),a}function i(e){var t=a.exec(e);if(!t)return null;var n,e=t[1],r=t[2],i=o.replace(r.substr(1),"/","://"),s=t[3],c=t[4];if(c){n={};var l=o.split(c.substr(1),"&");o.each(l,function(e){var t=o.split(e,"="),r=t[0],i=decodeURIComponent(t[1]);n[r]=i})}var u=t[6];return{address:i,path:s,query:n,hash:u,url:e}}var o=n(5);e.exports={parse:i,form:r};var s="https://trambar.io",a=new RegExp("^"+s+"((/https?/[^/]*)([^?]*)([^#]*)?(#(.*))?)")},function(e,t,n){"use strict";function r(e){var t={},n=i.split(e,/[\r\n]+/);return i.each(n,function(e){var n=/^(\w+)\s*=\s*(.*)/.exec(e);if(n){var r=i.lowerCase(n[1]),o=i.trim(n[2]);t[r]=o}}),console.log(t),t.url?t:null}var i=n(5);e.exports={parse:r}},function(e,t,n){"use strict";function r(e,t,n){var r=c.extract(e);return s.map(r,function(e,r){return e instanceof Array?s.map(e,function(e,r){var i=e.checked;if(t){var o=t[e.list];void 0!==o&&(i=e.key==o)}return a.createElement("span",null,e.before,a.createElement("label",null,a.createElement("input",{type:"radio",name:e.list,value:e.key,checked:i,readOnly:!n,onChange:n}),e.between,e.label),e.after)}):e})}function i(e,t){var n=c.extract(e);return s.map(n,function(e,n){return e instanceof Array?s.map(e,function(e,n){var r=t[e.list],i=s.get(r,"total",0),o=s.get(r,["answers",e.key],0),c=Math.round(i>0?o/i*100:0)+"%",l="color-"+e.key%12;return a.createElement("span",null,e.before,a.createElement("span",{className:"vote-count"},a.createElement("span",{className:"label"},e.label),a.createElement("span",{className:"bar"},a.createElement("span",{className:"filled "+l,style:{width:c}}),a.createElement("span",{className:"percent"},c),a.createElement("span",{className:"count"},o+"/"+i))),e.after)}):e})}function o(e,t,n){var r=c.extract(e);return s.map(r,function(e,r){return e instanceof Array?s.map(e,function(e,r){var i=e.checked;if(t){var o=t[e.list];if(void 0!==o){var s=o[e.key];void 0!==s&&(i=s)}}return a.createElement("span",null,e.before,a.createElement("label",null,a.createElement("input",{type:"checkbox",name:e.list,value:e.key,checked:i,readOnly:!n,onChange:n}),e.between,e.label),e.after)}):e})}var s=n(5),a=n(4),c=n(115);e.exports={parseSurvey:r,parseSurveyResults:i,parseTaskList:o}},function(e,t,n){"use strict";var r=n(119),i=n(154),o=n(64),s=Error.captureStackTrace;t=e.exports=function(e){var n=new Error(e),a=arguments[1],c=arguments[2];return o(c)||i(a)&&(c=a,a=null),o(c)&&r(n,c),o(a)&&(n.code=a),s&&s(n,t),n}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(94),i=n(119),o=n(41);e.exports=function(e){var t=Object(o(e)),n=arguments[1],s=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?r(n,function(t){(s.ensure||t in e)&&(a[t]=e[t])}):i(a,e),a}},function(e,t,n){"use strict";var r=n(41),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols;e.exports=function(e,t){var n,c=Object(r(t));if(e=Object(r(e)),s(c).forEach(function(r){try{i(e,r,o(t,r))}catch(e){n=e}}),"function"==typeof a&&a(c).forEach(function(r){try{i(e,r,o(t,r))}catch(e){n=e}}),void 0!==n)throw n;return e}},function(e,t,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,n){"use strict";var r,i=n(154),o=n(41),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,c={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(o(e),null===t||i(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var i;return r(t,n),i=s.call(e.nullPolyfill,t),i&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,i&&a(e.nullPolyfill,"__proto__",c),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),n(505)},function(e,t,n){"use strict";e.exports=n(514)()?String.prototype.contains:n(515)},function(e,t,n){"use strict";var r=n(118),i=n(122),o=n(518),s=n(521),a=n(522),c=n(95).iterator;e.exports=function(e){return"function"==typeof a(e)[c]?e[c]():r(e)?new o(e):i(e)?new s(e):new o(e)}},function(e,t,n){"use strict";var r,i=n(489),o=n(119),s=n(38),a=n(41),c=n(55),l=n(487),u=n(95),d=Object.defineProperty,p=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))return new r(e,t);p(this,{__list__:c("w",a(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},p(r.prototype,o({constructor:c(r),_next:c(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:c(function(e){return this.__list__[e]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object Iterator]"})},l({_onAdd:c(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,"__redo__",c("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:c(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:c(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),d(r.prototype,u.iterator,c(function(){return this})),d(r.prototype,u.toStringTag,c("","Iterator"))},,,,function(e,t,n){e.exports=n.p+"b8cf38e314f988b7f61c7ab27df43fc2.png"},function(e,t,n){e.exports=n.p+"e0e2ff0632486f60e9b6109f86eda583.png"},function(e,t,n){e.exports=n.p+"e03f845f146f2247a0aecb2978e5d253.png"},function(e,t,n){e.exports=n.p+"2b3a29cc6c30c32393c237e567ca6cf5.png"},function(e,t,n){e.exports=n.p+"5c44ab6d22ae6c0a10765769f60d720e.png"},function(e,t,n){e.exports=n.p+"e6aea96cc3f2a144a6cf53c838b55e4b.png"},function(e,t,n){e.exports=n.p+"6c1a9a9c48487ce503a4dfbdb9b711a6.png"},function(e,t,n){e.exports=n.p+"337aa694f21523c7e2dc0ada09f20ec2.png"},function(e,t,n){e.exports=n.p+"ee581f2d338f7b9d3e386c79be970831.png"},function(e,t,n){e.exports=n.p+"5a6cd044c3abe571bd76c150bee839ff.png"},function(e,t,n){e.exports=n.p+"d1bdaed46ab1125c0e77d9f92299d78e.png"},function(e,t,n){e.exports=n.p+"91d27ccd154fa929e7458b4afe06f9de.png"},function(e,t,n){e.exports=n.p+"a3fb4fe34192a7a90a8ed4f371bbabf1.png"},function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n},,function(e,t,n){"use strict";var r=n(38);e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:r(e.get)},void 0!==e.set?(t.set=r(e.set),e.delete&&(t.delete=r(e.delete)),e.clear&&(t.clear=r(e.clear)),t):(t.set=t.get,t))}},function(e,t,n){"use strict";var r,i=n(492),o=n(64),s=n(38),a=Array.prototype.slice;r=function(e){return this.map(function(t,n){return t?t(e[n]):e[n]}).concat(a.call(e,this.length))},e.exports=function(e){return e=i(e),e.forEach(function(e){o(e)&&s(e)}),r.bind(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(404);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(418);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))}var i=n(4);r.displayName="IssueOpened",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},,function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./apple-touch-icon-114x114.png":544,"./apple-touch-icon-120x120.png":545,"./apple-touch-icon-144x144.png":546,"./apple-touch-icon-152x152.png":547,"./apple-touch-icon-57x57.png":548,"./apple-touch-icon-60x60.png":549,"./apple-touch-icon-72x72.png":550,"./apple-touch-icon-76x76.png":551,"./favicon-128.png":552,"./favicon-16x16.png":553,"./favicon-196x196.png":554,"./favicon-32x32.png":555,"./favicon-96x96.png":556,"./mstile-144x144.png":557,"./mstile-150x150.png":558,"./mstile-310x150.png":559,"./mstile-310x310.png":560,"./mstile-70x70.png":561};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=294},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./apple-touch-icon-114x114.png":235,"./apple-touch-icon-120x120.png":236,"./apple-touch-icon-144x144.png":237,"./apple-touch-icon-152x152.png":238,"./apple-touch-icon-57x57.png":239,"./apple-touch-icon-60x60.png":240,"./apple-touch-icon-72x72.png":241,"./apple-touch-icon-76x76.png":242,"./favicon-128.png":243,"./favicon-16x16.png":244,"./favicon-196x196.png":245,"./favicon-32x32.png":246,"./favicon-96x96.png":247};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=295},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./apple-touch-icon-114x114.png":235,"./apple-touch-icon-120x120.png":236,"./apple-touch-icon-144x144.png":237,"./apple-touch-icon-152x152.png":238,"./apple-touch-icon-57x57.png":239,"./apple-touch-icon-60x60.png":240,"./apple-touch-icon-72x72.png":241,"./apple-touch-icon-76x76.png":242,"./favicon-128.png":243,"./favicon-16x16.png":244,"./favicon-196x196.png":245,"./favicon-32x32.png":246,"./favicon-96x96.png":247};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=296},function(e,t,n){"use strict";function r(){if(c.length)throw c.shift()}function i(e){var t;t=a.length?a.pop():new o,t.task=e,s(t)}function o(){this.task=null}var s=n(198),a=[],c=[],l=s.makeRequestCallFromTimer(r);e.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(c.push(e),l())}finally{this.task=null,a[a.length]=this}}},function(e,t,n){var r,i,o;!function(n,s,a){i=[],r=a,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,0,function(){"use strict";return function(e,t,n){t=t||"",n=n||512;for(var r=atob(e),i=[],o=0;o<r.length;o+=n){for(var s=r.slice(o,o+n),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s.charCodeAt(c);var l=new Uint8Array(a);i.push(l)}return new Blob(i,{type:t})}})},function(e,t,n){"use strict";var r=n(4),i=r.PropTypes,o=n(162),s=n(18),a=n(19),c=n(35),l=n(29);n(722),e.exports=r.createClass({displayName:"AppComponentDialogBox",propTypes:{show:i.bool,component:i.object.isRequired,locale:i.instanceOf(s).isRequired,theme:i.instanceOf(a).isRequired,onClose:i.func},render:function(){if(!this.props.component)return null;var e={show:this.props.show,onBackgroundClick:this.props.onClose};return r.createElement(c,e,r.createElement("div",{className:"app-component-dialog-box"},r.createElement("div",{className:"contents"},this.renderPicture(),this.renderText()),this.renderButtons()))},renderPicture:function(){var e=this.props.component;if(e.image){var t=this.props.theme.getImageURL(e.image);return r.createElement("div",{className:"picture"},r.createElement("img",{src:t}))}var n=e.icon||{},i=n.class||"fa-cubes",o={color:n.color,backgroundColor:n["background-color"]};return r.createElement("div",{className:"picture"},r.createElement("div",{className:"icon",style:o},r.createElement("i",{className:"fa fa-fw "+i})))},renderText:function(){var e=this.props.locale.pick,t=e(this.props.component.text),n=o.parse(t);return r.createElement("div",{className:"text"},n)},renderButtons:function(){var e={label:"OK",onClick:this.props.onClose};return r.createElement("div",{className:"buttons"},r.createElement(l,e))}})},function(e,t,n){"use strict";var r=n(5),i=n(6),o=n(4),s=o.PropTypes,a=n(18),c=n(32),l=n(90),u=n(21),d=n(35),p=n(29),h=n(141),f=n(88);n(723),e.exports=o.createClass({displayName:"AudioCaptureDialogBox",mixins:[u],propTypes:{show:s.bool,payloads:s.instanceOf(c).isRequired,locale:s.instanceOf(a).isRequired,onCancel:s.func,onCapture:s.func},statics:{isAvailable:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&("function"==typeof MediaRecorder&&"function"==typeof AudioContext)}},getInitialState:function(){return{liveAudioStream:null,liveAudioContext:null,liveAudioProcessor:null,liveAudioSource:null,liveAudioLevel:0,liveAudioError:null,liveAudioRecorder:null,mediaRecorder:null,capturedAudio:null,previewURL:null,startTime:null,duration:0}},componentWillMount:function(){this.props.show&&this.initializeMicrophone()},componentWillReceiveProps:function(e){var t=this;this.props.show!==e.show&&(e.show?(this.clearCapturedAudio(),this.initializeMicrophone()):setTimeout(function(){t.shutdownMicrophone(),t.clearCapturedAudio()},500))},clearCapturedAudio:function(){this.state.capturedAudio&&(URL.revokeObjectURL(this.state.previewURL),this.setState({capturedAudio:null,previewURL:null}))},initializeMicrophone:function(){var e=this;this.createLiveAudioStream().then(function(t){e.setLiveAudioState(null,t)}).catch(function(t){e.setLiveAudioState(t,null)})},shutdownMicrophone:function(){var e=this;this.destroyLiveAudioStream().then(function(){e.setLiveAudioState(null,null)})},setLiveAudioState:function(e,t){var n=this;this.state.liveAudioProcessor&&(this.state.liveAudioSource.disconnect(this.state.liveAudioProcessor),this.state.liveAudioProcessor.disconnect(this.state.liveAudioContext.destination));var r,i,o;if(t){var r=new AudioContext,i=r.createScriptProcessor(4096,1,1),o=r.createMediaStreamSource(t);i.addEventListener("audioprocess",function(e){for(var t=e.inputBuffer.getChannelData(0),r=0,i=t.length,o=0;o<i;o++){var s=t[o];s>r&&(r=s)}var a=Math.round(100*r);a!==n.state.liveAudioLevel&&n.setState({liveAudioLevel:a})}),o.connect(i),i.connect(r.destination)}this.setState({liveAudioStream:t,liveAudioContext:r,liveAudioProcessor:i,liveAudioSource:o,liveAudioError:e}),e&&console.error(e)},setLiveAudioNode:function(e){this.audioNode=e,this.audioNode&&(this.audioNode.srcObject=this.state.liveAudioStream)},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return o.createElement(d,e,o.createElement("div",{className:"audio-capture-dialog-box"},o.createElement("div",{className:"container"},this.renderView()),o.createElement("div",{className:"controls"},this.renderDuration(),this.renderButtons())))},renderView:function(){return this.state.capturedAudio?this.renderCapturedAudio():this.state.liveAudioStream?this.renderLiveAudio():this.renderPlaceholder()},renderPlaceholder:function(){var e={blocked:!!this.state.liveAudioError,icon:"microphone"};return o.createElement(h,e)},renderLiveAudio:function(){var e,t={ref:this.setLiveAudioNode,autoPlay:!0,muted:!0},n=this.state.liveAudioLevel;return e=n<10?"volume-off":n<50?"volume-down":"volume-up",o.createElement("div",null,o.createElement("div",{className:"volume-meter"},o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-"+e})),o.createElement("div",{className:"bar-container"},o.createElement("div",{className:"bar"},o.createElement("div",{className:"fill",style:{width:n+"%"}})))),o.createElement("audio",t))},renderCapturedAudio:function(){var e={src:this.state.previewURL,controls:!0};return o.createElement("audio",e)},renderDuration:function(){if(!this.state.mediaRecorder)return null;var e={duration:this.state.duration,startTime:this.state.startTime};return o.createElement(f,e)},renderButtons:function(){var e=this.props.locale.translate;if(this.state.mediaRecorder){var t="paused"===this.state.mediaRecorder.state,n={label:e("audio-capture-pause"),onClick:this.handlePauseClick,hidden:t},r={label:e("audio-capture-resume"),onClick:this.handleResumeClick,hidden:!t,emphasized:!0},i={label:e("audio-capture-stop"),onClick:this.handleStopClick,emphasized:!t};return o.createElement("div",{className:"buttons"},o.createElement(p,n),o.createElement(p,r),o.createElement(p,i))}if(this.state.capturedAudio){var s={label:e("audio-capture-rerecord"),onClick:this.handleRerecordClick},a={label:e("audio-capture-accept"),onClick:this.handleAcceptClick,emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(p,s),o.createElement(p,a))}var c={label:e("audio-capture-cancel"),onClick:this.handleCancelClick},l={label:e("audio-capture-start"),onClick:this.handleStartClick,disabled:!this.state.liveAudioStream,emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(p,c),o.createElement(p,l))},componentWillUnmount:function(){this.destroyLiveAudioStream()},createLiveAudioStream:function(){var e=this.audioStreamPromise;if(!e){var t={audio:!0};e=navigator.mediaDevices.getUserMedia(t),this.audioStreamPromise=e}return i.resolve(e)},destroyLiveAudioStream:function(){var e=this.audioStreamPromise;return this.audioStreamPromise=null,i.resolve(e).then(function(e){if(e){var t=e.getTracks();r.each(t,function(e){e.stop()})}})},beginRecording:function(){var e=this;return i.try(function(){var t={audioBitsPerSecond:128e3,mimeType:"audio/webm"},n=new MediaRecorder(e.state.liveAudioStream,t);return n.outputStream=new l,n.addEventListener("dataavailable",function(e){this.outputStream.push(e.data)}),n.addEventListener("stop",function(e){this.outputStream.close()}),n.start(3e3),n})},pauseRecording:function(){var e=this;return i.try(function(){var t=e.state.mediaRecorder;t&&t.pause()})},resumeRecording:function(){var e=this;return i.try(function(){var t=e.state.mediaRecorder;t&&t.resume()})},endRecording:function(){var e=this;return i.try(function(){var t=e.state.mediaRecorder;if(t)return t.stop(),{format:r.last(r.split(t.mimeType,"/")),audio_bitrate:t.audioBitsPerSecond,stream:t.outputStream}})},triggerCaptureEvent:function(e){this.props.onCapture&&this.props.onCapture({type:"capture",target:this,audio:e})},handleStartClick:function(e){var t=this;return this.beginRecording().then(function(e){return t.props.payloads.stream(e.outputStream),t.setState({mediaRecorder:e,startTime:new Date,duration:0}),null})},handlePauseClick:function(e){var t=this;return this.pauseRecording().then(function(){var e=new Date,n=e-t.state.startTime,r=t.state.duration+n;t.setState({duration:r,startTime:null})})},handleResumeClick:function(e){var t=this;return this.resumeRecording().then(function(){var e=new Date;t.setState({startTime:e})})},handleStopClick:function(e){var t=this;return this.endRecording().then(function(e){var n=e.stream.toBlob(),r=URL.createObjectURL(n),i=0;if(t.state.startTime){i=new Date-t.state.startTime}e.duration=t.state.duration+i,t.setState({capturedAudio:e,previewURL:r,capturedImage:null,mediaRecorder:null})})},handleRerecordClick:function(e){this.clearCapturedAudio()},handleAcceptClick:function(e){console.log(this.state.capturedAudio),this.triggerCaptureEvent(this.state.capturedAudio)},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=(n(30),n(18)),a=n(19),c=n(35),l=n(29),u=n(52),d=n(151);n(727),e.exports=i.createClass({displayName:"MembershipRequestDialogBox",propTypes:{show:o.bool,currentUser:o.object.isRequired,project:o.object.isRequired,member:o.bool.isRequired,pendingMember:o.bool.isRequired,readAccess:o.bool.isRequired,locale:o.instanceOf(s).isRequired,theme:o.instanceOf(a).isRequired,onConfirm:o.func,onClose:o.func,onProceed:o.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCloseClick},t=["membership-request-dialog-box"];return i.createElement(c,e,i.createElement("div",{className:t.join(" ")},this.renderText(),this.renderButtons()))},renderText:function(){var e,t=this.props.locale.pick,n=this.props.project,o=t(n.details.title)||n.name,s=t(n.details.description),a=r.find(n.details.resources,{type:"image"});if(a){var c=this.props.theme.getImageURL(a,{width:160});e=i.createElement("img",{src:c})}return i.createElement(u,null,i.createElement("div",{className:"title"},o),this.renderMessage(),i.createElement("div",{className:"description"},e,s))},renderMessage:function(){var e,t=this.props.locale.translate,n=this.props.locale.name,r=this.props.currentUser,o=r?n(r.details.name,r.details.gender):null;return this.props.member?e=i.createElement("div",{className:"message accepted"},i.createElement("i",{className:"fa fa-user-circle-o"})," ",t("membership-request-$you-are-now-member",o)):this.props.pendingMember&&(e=i.createElement("div",{className:"message requested"},i.createElement("i",{className:"fa fa-clock-o"})," ",t("membership-request-$you-have-requested-membership",o))),i.createElement(d,{open:!!e},e)},renderButtons:function(){var e=this.props.locale.translate;if(this.props.readAccess){var t={label:e("membership-request-proceed"),onClick:this.handleProceedClick};return i.createElement("div",{className:"buttons"},i.createElement(l,t))}if(this.props.pendingMember){var n={label:e("membership-request-ok"),onClick:this.handleCloseClick};return i.createElement("div",{className:"buttons"},i.createElement(l,n))}var r={label:e("membership-request-cancel"),onClick:this.handleCloseClick},o={label:e("membership-request-join"),onClick:this.handleConfirmClick,emphasized:!0};return i.createElement("div",{className:"buttons"},i.createElement(l,r),i.createElement(l,o))},handleConfirmClick:function(e){this.props.onConfirm&&this.props.onConfirm({type:"confirm",target:this})},handleCloseClick:function(e){this.props.onClose&&this.props.onClose({type:"cancel",target:this})},handleProceedClick:function(e){this.props.onProceed&&this.props.onProceed({type:"proceed",target:this})}})},function(e,t,n){"use strict";function r(e){if(!e)return e;var t=e.match(/.{1,4}/g);return _.toUpper(t.join(" "))}var i=n(4),o=i.PropTypes,s=n(30),a=n(220),c=n(22),l=n(23),u=n(18),d=n(35),p=n(29),h=n(214);n(728),e.exports=s.createClass({displayName:"MobileSetupDialogBox.Sync",propTypes:{show:o.bool,system:o.object,database:o.instanceOf(c).isRequired,route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,onClose:o.func},renderAsync:function(e){var t,n=this.props.database.use({by:this}),r={activationCode:null,devices:null,show:this.props.show,system:this.props.system,route:this.props.route,locale:this.props.locale,onClose:this.props.onClose};return e.show(i.createElement(f,r)),n.start().then(function(e){return t=e,n.beginMobileSession("client")}).then(function(t){r.activationCode=t,e.show(i.createElement(f,r))}).then(function(){var e={user_id:t};return n.find({schema:"global",table:"device",criteria:e})}).then(function(e){return r.devices=e,i.createElement(f,r)})},componentWillUnmount:function(){this.props.database.use({by:this}).releaseMobileSession()}});var f=e.exports.Sync=i.createClass({displayName:"MobileSetupDialogBox.Sync",propTypes:{show:o.bool,activationCode:o.string,devices:o.arrayOf(o.object),route:o.instanceOf(l).isRequired,locale:o.instanceOf(u).isRequired,onClose:o.func},componentWillReceiveProps:function(e){if(this.props.devices!==e.devices){var t=e.activationCode;t&&_.some(e.devices,{session_handle:t})&&this.props.onClose&&this.props.onClose({type:"close",target:this})}},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return i.createElement(d,e,i.createElement("div",{className:"mobile-setup-dialog-box"},this.renderContents(),this.renderButtons()))},renderContents:function(){var e,t=this.props.locale.translate,o=(this.props.number,this.props.route),s=_.get(this.props.system,"settings.address");s||(s=o.parameters.address);var c=o.parameters.schema,l=this.props.activationCode;if(l){var u=n(108),d=u.getURL({activationCode:l,schema:c});e=a.form(s,d.path,d.query)}return i.createElement("div",{className:"contents"},i.createElement(h,{text:e,scale:6}),i.createElement("div",{className:"info"},i.createElement("div",{className:"label"},t("mobile-setup-address")),i.createElement("div",{className:"value"},s),i.createElement("div",{className:"label"},t("mobile-setup-code")),i.createElement("div",{className:"value"},r(l))))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("mobile-setup-close"),onClick:this.props.onClose};return i.createElement("div",{className:"buttons"},i.createElement(p,t))}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(6),s=n(4),a=s.PropTypes,c=n(77),l=n(50),u=n(18),d=n(35),p=n(29),h=n(141);n(729),e.exports=s.createClass({displayName:"PhotoCaptureDialogBox",propTypes:{show:a.bool,locale:a.instanceOf(u).isRequired,onCancel:a.func,onCapture:a.func},statics:{isAvailable:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&("function"==typeof HTMLCanvasElement.prototype.toBlob||"function"==typeof HTMLCanvasElement.prototype.toDataURL)}},getInitialState:function(){return{liveVideoStream:null,liveVideoError:null,capturedImage:null,videoDevices:c.getDevices("videoinput"),selectedDeviceId:null}},componentWillMount:function(){this.props.show&&this.initializeCamera(),c.addEventListener("change",this.handleDeviceChange)},componentWillReceiveProps:function(e){var t=this;this.props.show!==e.show&&(e.show?(this.setState({capturedImage:null}),this.initializeCamera()):setTimeout(function(){t.shutdownCamera(),t.setState({capturedImage:null})},500))},initializeCamera:function(){var e=this;this.createLiveVideoStream().then(function(t){e.setState({liveVideoStream:t,liveVideoError:null})}).catch(function(t){e.setState({liveVideoStream:null,liveVideoError:t})})},shutdownCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.setState({liveVideoStream:null,liveVideoError:null})})},reinitializeCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.initializeCamera()})},setLiveVideoNode:function(e){this.videoNode=e,this.videoNode&&(this.videoNode.srcObject=this.state.liveVideoStream)},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return s.createElement(d,e,s.createElement("div",{className:"photo-capture-dialog-box"},s.createElement("div",{className:"container"},this.renderView()),s.createElement("div",{className:"controls"},this.renderDeviceSelector(),this.renderButtons())))},renderView:function(){return this.state.capturedImage?this.renderCapturedImage():this.state.liveVideoStream?this.renderLiveVideo():this.renderPlaceholder()},renderPlaceholder:function(){var e={blocked:!!this.state.liveVideoError,icon:"camera"};return s.createElement(h,e)},renderLiveVideo:function(){var e={ref:this.setLiveVideoNode,autoPlay:!0,muted:!0};return s.createElement("video",e)},renderCapturedImage:function(){var e={src:this.state.capturedImage.file};return s.createElement("div",{className:"container"},s.createElement("img",e))},renderDeviceSelector:function(){var e=this;if(this.state.videoDevices.length<2)return null;var t=i.map(this.state.videoDevices,function(t,n){var o=t.label;o=i.replace(t.label,/\(\w{4}:\w{4}\)/g,"");var a={value:t.deviceId,selected:t.deviceId===e.state.selectedDeviceId};return s.createElement("option",r({key:n},a),o)});return s.createElement("div",{className:"device-selector"},s.createElement("select",{onChange:this.handleDeviceSelect},t))},renderButtons:function(){var e=this.props.locale.translate;if(this.state.capturedImage){var t={label:e("photo-capture-retake"),onClick:this.handleRetakeClick},n={label:e("photo-capture-accept"),onClick:this.handleAcceptClick,emphasized:!0};return s.createElement("div",{className:"buttons"},s.createElement(p,t),s.createElement(p,n))}var r={label:e("photo-capture-cancel"),onClick:this.handleCancelClick},i={label:e("photo-capture-snap"),onClick:this.handleSnapClick,disabled:!this.state.liveVideoStream,emphasized:!0};return s.createElement("div",{className:"buttons"},s.createElement(p,r),s.createElement(p,i))},componentDidUpdate:function(e,t){this.videoNode&&t.liveVideoStream!==this.state.liveVideoStream&&(this.videoNode.srcObject=this.state.liveVideoStream)},componentWillUnmount:function(){this.destroyLiveVideoStream(),c.removeEventListener("change",this.handleDeviceChange)},createLiveVideoStream:function(){var e=this.videoStreamPromise;if(!e){var t;t=this.state.selectedDeviceId?{video:{mandatory:{sourceId:this.state.selectedDeviceId}}}:{video:!0},e=navigator.mediaDevices.getUserMedia(t),this.videoStreamPromise=e}return o.resolve(e)},destroyLiveVideoStream:function(){var e=this.videoStreamPromise;return this.videoStreamPromise=null,o.resolve(e).then(function(e){if(e){var t=e.getTracks();i.each(t,function(e){e.stop()})}})},captureImage:function(){var e=this;return new o(function(t,r){var i=document.createElement("CANVAS"),o=i.getContext("2d"),s=e.videoNode,a=s.videoWidth,c=s.videoHeight;if(i.width=a,i.height=c,o.drawImage(s,0,0,a,c),"function"==typeof i.toBlob)i.toBlob(function(e){var n=l.manage(e);t({format:"jpeg",file:n,width:a,height:c})},"image/jpeg",90);else{var u=n(298),d=i.toDataURL("image/jpeg"),p=d.replace("data:image/jpeg;base64,",""),h=u(p,"image/jpeg"),f=l.manage(h);t({format:"jpeg",file:f,width:a,height:c})}})},triggerCaptureEvent:function(e){this.props.onCapture&&this.props.onCapture({type:"capture",target:this,image:e})},triggerCancelEvent:function(){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleSnapClick:function(e){var t=this;this.captureImage().then(function(e){t.setState({capturedImage:e})}).catch(function(e){console.error(e)})},handleRetakeClick:function(e){l.remove(this.state.capturedImage.file),this.setState({capturedImage:null})},handleAcceptClick:function(e){this.triggerCaptureEvent(this.state.capturedImage)},handleCancelClick:function(e){this.triggerCancelEvent(),this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleDeviceSelect:function(e){var t=this,n=e.currentTarget.value;this.setState({selectedDeviceId:n},function(){t.reinitializeCamera()})},handleDeviceChange:function(e){var t=this,n=c.getDevices("videoinput"),r=this.state.selectedDeviceId,o=!1;r&&(i.some(n,{deviceId:r})||(r=null,o=!0)),this.setState({videoDevices:n,selectedDeviceId:r},function(){o&&t.reinitializeCamera()})}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(19),c=n(35),l=n(29),u=n(52);n(730),e.exports=i.createClass({displayName:"ProjectDescriptionDialogBox",propTypes:{show:o.bool,project:o.object.isRequired,locale:o.instanceOf(s).isRequired,theme:o.instanceOf(a).isRequired,onClose:o.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCloseClick};return i.createElement(c,e,i.createElement("div",{className:"project-description-dialog-box"},this.renderText(),this.renderButtons()))},renderText:function(){var e,t=this.props.locale.pick,n=this.props.project,o=t(n.details.title)||n.name,s=t(n.details.description),a=r.find(n.details.resources,{type:"image"});if(a){var c=this.props.theme.getImageURL(a,{width:160});e=i.createElement("img",{src:c})}return i.createElement(u,null,i.createElement("div",{className:"title"},o),i.createElement("div",{className:"description"},e,s))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-description-close"),onClick:this.handleCloseClick};return i.createElement("div",{className:"buttons"},i.createElement(l,t))},handleCloseClick:function(e){this.props.onClose&&this.props.onClose({type:"cancel",target:this})}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=(n(30),n(23)),c=n(18),l=n(35),u=n(29),d=n(52),p=n(49);n(731),e.exports=o.createClass({displayName:"ProjectManagementDialogBox",propTypes:{show:s.bool,projectLinks:s.arrayOf(s.object).isRequired,route:s.instanceOf(a).isRequired,locale:s.instanceOf(c).isRequired,onDelete:s.func,onCancel:s.func},getInitialState:function(){return{selection:[]}},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return o.createElement(l,e,o.createElement("div",{className:"project-management-dialog-box"},this.renderList(),this.renderButtons()))},renderList:function(){return o.createElement(d,null,i.map(this.props.projectLinks,this.renderProjectButton))},renderProjectButton:function(e,t){var n=this.props.locale.pick,s=this.props.route.parameters,a=e.address===s.address&&e.schema===s.schema,c={id:e.key,label:n(e.name),iconOn:a?"check-circle":"times-circle",selected:i.includes(this.state.selection,e.key)||a,disabled:a,onClick:this.handleProjectClick};return o.createElement(p,r({key:t},c))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-management-cancel"),onClick:this.handleCancelClick},n={label:e("project-management-remove"),onClick:this.handleRemoveClick,emphasized:!0,disabled:i.isEmpty(this.state.selection)};return o.createElement("div",{className:"buttons"},o.createElement(u,t),o.createElement(u,n))},handleProjectClick:function(e){var t=e.currentTarget.id,n=i.slice(this.state.selection);i.includes(n,t)?i.pull(n,t):n.push(t),this.setState({selection:n})},handleRemoveClick:function(e){this.props.onDelete&&this.props.onDelete({type:"delete",target:this,selection:this.state.selection})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(19),c=n(35),l=n(29),u=n(52);n(732),e.exports=i.createClass({displayName:"SystemDescriptionDialogBox",propTypes:{show:o.bool,system:o.object.isRequired,locale:o.instanceOf(s).isRequired,theme:o.instanceOf(a).isRequired,onClose:o.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCloseClick};return i.createElement(c,e,i.createElement("div",{className:"system-description-dialog-box"},this.renderText(),this.renderButtons()))},renderText:function(){var e=this.props.locale.pick,t=this.props.system,n=e(r.get(t,"details.title")),o=e(r.get(t,"details.description"));return i.createElement(u,null,i.createElement("div",{className:"title"},n),i.createElement("div",{className:"description"},o))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-description-close"),onClick:this.handleCloseClick};return i.createElement("div",{className:"buttons"},i.createElement(l,t))},handleCloseClick:function(e){this.props.onClose&&this.props.onClose({type:"cancel",target:this})}})},function(e,t,n){"use strict";var r=n(4),i=r.PropTypes,o=n(18),s=n(35),a=n(29),c=n(214);n(733),e.exports=r.createClass({displayName:"TelephoneNumberDialogBox",propTypes:{show:i.bool,number:i.string,locale:i.instanceOf(o).isRequired,onClose:i.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return r.createElement(s,e,r.createElement("div",{className:"telephone-number-dialog-box"},this.renderContents(),this.renderButtons()))},renderContents:function(){var e=this.props.number,t="tel:"+e;return r.createElement("div",{className:"contents"},r.createElement(c,{text:t,scale:6}),r.createElement("div",{className:"number"},e))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("telephone-dialog-close"),onClick:this.props.onClose};return r.createElement("div",{className:"buttons"},r.createElement(a,t))}})},function(e,t,n){"use strict";var r=n(5),i=n(6),o=n(4),s=o.PropTypes,a=n(77),c=n(50),l=n(18),u=n(32),d=n(90),p=n(35),h=n(29),f=n(141),m=n(88);n(735),e.exports=o.createClass({displayName:"VideoCaptureDialogBox",propTypes:{show:s.bool,payloads:s.instanceOf(u).isRequired,locale:s.instanceOf(l).isRequired,onCancel:s.func,onCapture:s.func},statics:{isAvailable:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&"function"==typeof MediaRecorder}},getInitialState:function(){return{liveVideoStream:null,liveVideoError:null,mediaRecorder:null,capturedVideo:null,capturedImage:null,previewURL:null,videoDevices:a.getDevices("videoinput"),selectedDeviceId:null,startTime:null,duration:0}},componentWillMount:function(){this.props.show&&this.initializeCamera(),a.addEventListener("change",this.handleDeviceChange)},componentWillReceiveProps:function(e){var t=this;this.props.show!==e.show&&(e.show?(this.clearCapturedVideo(),this.initializeCamera()):setTimeout(function(){t.shutdownCamera(),t.clearCapturedVideo()},500))},clearCapturedVideo:function(){this.state.capturedVideo&&(URL.revokeObjectURL(this.state.previewURL),this.setState({capturedVideo:null,previewURL:null}))},initializeCamera:function(){var e=this;return this.createLiveVideoStream().then(function(t){e.setState({liveVideoStream:t,liveVideoError:null})}).catch(function(t){e.setState({liveVideoStream:null,liveVideoError:t})})},shutdownCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.setState({liveVideoStream:null,liveVideoError:null})})},reinitializeCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.initializeCamera()})},setLiveVideoNode:function(e){this.videoNode=e,this.videoNode&&(this.videoNode.srcObject=this.state.liveVideoStream)},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return o.createElement(p,e,o.createElement("div",{className:"video-capture-dialog-box"},o.createElement("div",{className:"container"},this.renderView()),o.createElement("div",{className:"controls"},this.renderDeviceSelector(),this.renderButtons(),this.renderDuration())))},renderView:function(){return this.state.capturedVideo?this.renderCapturedVideo():this.state.liveVideoStream?this.renderLiveVideo():this.renderPlaceholder()},renderPlaceholder:function(){var e={blocked:!!this.state.liveVideoError,icon:"video-camera"};return o.createElement(f,e)},renderLiveVideo:function(){var e={ref:this.setLiveVideoNode,autoPlay:!0,muted:!0};return o.createElement("video",e)},renderCapturedVideo:function(){var e={src:this.state.previewURL,controls:!0};return o.createElement("div",{className:"container"},o.createElement("video",e))},renderDeviceSelector:function(){if(this.state.mediaRecorder)return null;if(this.state.videoDevices.length<2)return null;var e=r.map(this.state.videoDevices,function(e,t){var n=e.label;return n=r.replace(e.label,/\(\w{4}:\w{4}\)/g,""),o.createElement("option",{key:t,value:e.deviceId},n)}),t={value:this.state.selectedDeviceId||"",onChange:this.handleDeviceSelect};return o.createElement("div",{className:"device-selector"},o.createElement("select",t,e))},renderDuration:function(){if(!this.state.mediaRecorder)return null;var e={duration:this.state.duration,startTime:this.state.startTime};return o.createElement(m,e)},renderButtons:function(){var e=this.props.locale.translate;if(this.state.mediaRecorder){var t="paused"===this.state.mediaRecorder.state,n={label:e("video-capture-pause"),onClick:this.handlePauseClick,hidden:t},r={label:e("video-capture-resume"),onClick:this.handleResumeClick,hidden:!t,emphasized:!0},i={label:e("video-capture-stop"),onClick:this.handleStopClick,emphasized:!t};return o.createElement("div",{className:"buttons"},o.createElement(h,n),o.createElement(h,r),o.createElement(h,i))}if(this.state.capturedVideo){var s={label:e("video-capture-retake"),onClick:this.handleRetakeClick},a={label:e("video-capture-accept"),onClick:this.handleAcceptClick,emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(h,s),o.createElement(h,a))}var c={label:e("video-capture-cancel"),onClick:this.handleCancelClick},l={label:e("video-capture-start"),onClick:this.handleStartClick,disabled:!this.state.liveVideoStream,emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(h,c),o.createElement(h,l))},componentDidUpdate:function(e,t){this.videoNode&&t.liveVideoStream!==this.state.liveVideoStream&&(this.videoNode.srcObject=this.state.liveVideoStream)},componentWillUnmount:function(){this.destroyLiveVideoStream(),this.clearCapturedVideo(),a.removeEventListener("change",this.handleDeviceChange)},createLiveVideoStream:function(){var e=this.videoStreamPromise;if(!e){var t;t=this.state.selectedDeviceId?{video:{mandatory:{sourceId:this.state.selectedDeviceId}},audio:!0}:{video:!0,audio:!0},e=navigator.mediaDevices.getUserMedia(t),this.videoStreamPromise=e}return i.resolve(e)},destroyLiveVideoStream:function(){var e=this.videoStreamPromise;return this.videoStreamPromise=null,i.resolve(e).then(function(e){if(e){var t=e.getTracks();r.each(t,function(e){e.stop()})}})},captureImage:function(){var e=this;return new i(function(t,n){var r=document.createElement("CANVAS"),i=r.getContext("2d"),o=e.videoNode,s=o.videoWidth,a=o.videoHeight;r.width=s,r.height=a,i.drawImage(o,0,0,s,a),r.toBlob(function(e){var n=c.manage(e);t({type:"image/jpeg",file:n,width:s,height:a})},"image/jpeg",90)})},beginRecording:function(){var e=this;return i.try(function(){var t={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:"video/webm"},n=new MediaRecorder(e.state.liveVideoStream,t);return n.outputStream=new d,n.addEventListener("dataavailable",function(e){this.outputStream.push(e.data)}),n.addEventListener("stop",function(e){this.outputStream.close()}),n.start(3e3),n})},pauseRecording:function(){var e=this;return i.try(function(){var t=e.state.mediaRecorder;t&&t.pause()})},resumeRecording:function(){var e=this;return i.try(function(){var t=e.state.mediaRecorder;t&&t.resume()})},endRecording:function(){var e=this;return i.try(function(){var t=e.state.mediaRecorder,n=e.state.capturedImage;if(t)return t.stop(),{width:n.width,height:n.height,poster_file:n.file,format:r.last(r.split(t.mimeType,"/")),audio_bitrate:t.audioBitsPerSecond,video_bitrate:t.videoBitsPerSecond,stream:t.outputStream}})},triggerCaptureEvent:function(e){this.props.onCapture&&this.props.onCapture({type:"capture",target:this,video:e})},handleStartClick:function(e){var t=this;return i.join(this.captureImage(),this.beginRecording(),function(e,n){return t.props.payloads.stream(n.outputStream),t.setState({capturedImage:e,mediaRecorder:n,startTime:new Date,duration:0}),null}).catch(function(e){console.error(e)})},handlePauseClick:function(e){var t=this;return this.pauseRecording().then(function(){var e=new Date,n=e-t.state.startTime,r=t.state.duration+n;t.setState({duration:r,startTime:null})})},handleResumeClick:function(e){var t=this;return this.resumeRecording().then(function(){var e=new Date;t.setState({startTime:e})})},handleStopClick:function(e){var t=this;return this.endRecording().then(function(e){var n=e.stream.toBlob(),r=URL.createObjectURL(n),i=0;if(t.state.startTime){i=new Date-t.state.startTime}e.duration=t.state.duration+i,t.setState({capturedVideo:e,previewURL:r,capturedImage:null,mediaRecorder:null})})},handleRetakeClick:function(e){this.clearCapturedVideo()},handleAcceptClick:function(e){this.triggerCaptureEvent(this.state.capturedVideo)},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleDeviceSelect:function(e){var t=this,n=e.currentTarget.value;this.setState({selectedDeviceId:n},function(){t.reinitializeCamera()})},handleDeviceChange:function(e){var t=this,n=a.getDevices("videoinput"),i=this.state.selectedDeviceId,o=!1;i&&(r.some(n,{deviceId:i})||(i=null,o=!0)),this.setState({videoDevices:n,selectedDeviceId:i},function(){o&&t.reinitializeCamera()})}})},function(e,t,n){"use strict";var r=(n(5),n(6),n(4)),i=r.PropTypes,o=(n(18),n(19)),s=n(21),a=n(88);n(736),e.exports=r.createClass({displayName:"AudioEditor",mixins:[s],propTypes:{resource:i.object,theme:i.instanceOf(o).isRequired,onChange:i.func},render:function(){var e=this.props.resource.duration;return r.createElement("div",{className:"audio-editor"},r.createElement("div",{className:"graphic"},r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-microphone"})),r.createElement("div",{className:"duration"},a.format(e))))}})},function(e,t,n){"use strict";function r(e){return i.some(e,function(e){if(!e.url&&!e.payload_id)return!0})}var i=n(5),o=n(6),s=n(4),a=s.PropTypes,c=n(34),l=n(77),u=n(33),d=n(149),p=n(116),h=n(22),f=n(32),m=n(23),g=n(18),v=n(19),y=n(21),b=n(150),x=n(29),w=(n(45),n(46)),k=(n(210),n(352)),C=n(200),E=n(201);n(738);e.exports=s.createClass({displayName:"CommentEditor",mixins:[y],propTypes:{reaction:a.object,story:a.object.isRequired,currentUser:a.object,database:a.instanceOf(h).isRequired,payloads:a.instanceOf(f).isRequired,route:a.instanceOf(m).isRequired,locale:a.instanceOf(g).isRequired,theme:a.instanceOf(v).isRequired,onFinish:a.func},getInitialState:function(){this.components=u({mediaImporter:E,textArea:b});var e={draft:null,selectedResourceIndex:0,hasCamera:l.hasDevice("videoinput"),hasMicrophone:l.hasDevice("audioinput")};return this.updateDraft(e,this.props),this.updateResourceIndex(e,this.props),e},componentWillReceiveProps:function(e){var t=i.clone(this.state);this.props.reaction!==e.reaction&&(this.updateDraft(t,e),this.updateResourceIndex(t,e));var n=i.shallowDiff(t,this.state);i.isEmpty(n)||this.setState(n)},updateDraft:function(e,t){t.reaction?e.draft=t.reaction:e.draft=R(t.story,t.currentUser)},updateResourceIndex:function(e,t){var n=i.get(e.draft,"details.resources"),r=i.size(n);e.selectedResourceIndex>=r?e.selectedResourceIndex=r-1:e.selectedResourceIndex<0&&r>0&&(e.selectedResourceIndex=0)},render:function(){return s.createElement("div",{className:"reaction-editor"},s.createElement("div",{className:"profile-image-column"},this.renderProfileImage()),s.createElement("div",{className:"editor-column"},s.createElement("div",{className:"controls"},s.createElement("div",{className:"textarea"},this.renderTextArea()),s.createElement("div",{className:"buttons"},this.renderMediaToolbar(),this.renderActionButtons())),s.createElement("div",{className:"media"},this.renderMediaEditor(),this.renderMediaImporter())))},renderProfileImage:function(){var e={user:this.props.currentUser,theme:this.props.theme,size:"small"};return s.createElement(w,e)},renderTextArea:function(){var e=this.props.locale.languageCode,t=i.get(this.state.draft,["details","text",e],""),n={ref:this.components.setters.textArea,value:t,lang:this.props.locale.localeCode,autofocus:!0,onChange:this.handleTextChange,onKeyPress:this.handleKeyPress,onPaste:this.handlePaste};return s.createElement(b,n)},renderMediaToolbar:function(){var e={reaction:this.state.draft,capturing:this.state.capturing,locale:this.props.locale,onAction:this.handleAction};return s.createElement(k,e)},renderActionButtons:function(){var e=this.props.locale.translate,t=i.isEmpty(i.get(this.state.draft,"details.text")),n=i.isEmpty(i.get(this.state.draft,"details.resources")),r=i.get(this.state.draft,"published",!1),o={label:e("story-cancel"),onClick:this.handleCancelClick,disabled:r},a={label:e("story-post"),onClick:this.handlePublishClick,emphasized:!0,disabled:t&&n||r};return s.createElement("div",{className:"action-buttons"},s.createElement(x,o),s.createElement(x,a))},renderMediaEditor:function(){var e=(this.props.locale.translate,{ref:this.components.setters.mediaImporter,resources:i.get(this.state.draft,"details.resources"),resourceIndex:this.state.selectedResourceIndex,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleResourcesChange});return s.createElement(C,e)},renderMediaImporter:function(){var e=(this.props.locale.translate,{ref:this.components.setters.mediaImporter,resources:i.get(this.state.draft,"details.resources"),locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onCaptureStart:this.handleCaptureStart,onCaptureEnd:this.handleCaptureEnd,onChange:this.handleResourcesChange});return s.createElement(E,e)},changeDraft:function(e,t){var n=this;return new o(function(r,i){var o={draft:e};void 0!==t&&(o.selectedResourceIndex=t),n.setState(o,function(){r(e)})})},saveDraft:function(e,t,n){var r=this;return this.changeDraft(e,n).then(function(e){var n=t?0:5e3;return r.autosaveReaction(e,n),e})},autosaveReaction:function(e,t){var n=this;t?(this.cancelAutosave(),this.autosaveTimeout=setTimeout(function(){n.saveReaction(e)},t),this.autosaveUnloadHandler=function(){n.saveReaction(e)},window.addEventListener("beforeunload",this.autosaveUnloadHandler)):this.saveReaction(e)},cancelAutosave:function(){this.autosaveTimeout&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=0),this.autosaveUnloadHandler&&(window.removeEventListener("beforeunload",this.autosaveUnloadHandler),this.autosaveUnloadHandler=null)},saveReaction:function(e){var t=this;this.cancelAutosave();var n=this.props.route.parameters,r=this.props.payloads;return r.prepare(n.schema,e).then(function(){var i=t.props.database.use({schema:n.schema,by:t});return i.start().then(function(){return i.saveOne({table:"reaction"},e).then(function(e){return r.dispatch(n.schema,e).return(e)})})})},removeReaction:function(e){var t=this.props.route,n=t.parameters.schema;return this.props.database.use({schema:n,by:this}).removeOne({table:"reaction"},e)},triggerFinishEvent:function(){this.props.onFinish&&this.props.onFinish({type:"finish",target:this})},handleTextChange:function(e){var t=e.currentTarget.value,n=this.props.locale.languageCode,r="details.text."+n,o=i.decoupleSet(this.state.draft,r,t);return void 0===o.details.markdown&&p.detect(t,this.handleReference)&&(o.details.markdown=!0),o.tags=d.findTags(o.details.text),this.saveDraft(o)},handleKeyPress:function(e){var t=e.target;13==e.charCode&&"single-col"===this.props.theme.mode&&(e.preventDefault(),this.handlePublishClick(e),t.blur())},handlePaste:function(e){this.components.mediaImporter.importFiles(e.clipboardData.files),this.components.mediaImporter.importDataItems(e.clipboardData.items)},handlePublishClick:function(e){var t=this,n=i.clone(this.state.draft);return n.published=!0,this.saveDraft(n,!0).then(function(){t.triggerFinishEvent()})},handleCancelClick:function(e){var t=this;return o.try(function(){t.cancelAutosave();var e=t.props.reaction;return e&&e.id?e.ptime?(e=i.clone(e),e.published=!0,t.saveReaction(e)):t.removeReaction(e):e}).then(function(e){return t.triggerFinishEvent(),e})},handleResourcesChange:function(e){var t=i.get(this.state.draft,"details.resources"),n=e.resources,o=e.selection;if(t!==n){var s=i.decoupleSet(this.state.draft,"details.resources",e.resources),a=r(e.resources);return this.saveDraft(s,a,o)}this.setState({selectedResourceIndex:o})},handleCaptureStart:function(e){this.setState({capturing:e.mediaType})},handleCaptureEnd:function(e){this.setState({capturing:null})},handleReference:function(e){var t=this.state.draft.details.resources,n=p.findReferencedResource(t,e.name);if(n){var r;return r=e.forImage?this.props.theme.getImageURL(n,{height:24}):this.props.theme.getURL(n),{href:r,title:void 0}}},handleAction:function(e){switch(e.action){case"markdown-set":var t=i.decouple(this.state.draft,"details");t.details.markdown=e.value,this.saveDraft(t);break;case"photo-capture":this.components.mediaImporter.capture("image");break;case"video-capture":this.components.mediaImporter.capture("video");break;case"audio-capture":this.components.mediaImporter.capture("audio");break;case"file-import":this.components.mediaImporter.importFiles(e.files)}}});var R=c(function(e,t){return{type:"comment",story_id:e.id,user_id:t?t.id:null,details:{}}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(89),a=n(22),c=n(23),l=n(18),u=n(19),d=(n(45),n(49)),p=n(135),h=n(199);n(739),e.exports=i.createClass({displayName:"StoryEditorOptions",propTypes:{section:o.oneOf(["main","preview","both"]),story:o.object.isRequired,repos:o.arrayOf(o.object),currentUser:o.object,options:o.object.isRequired,database:o.instanceOf(a).isRequired,route:o.instanceOf(c).isRequired,locale:o.instanceOf(l).isRequired,theme:o.instanceOf(u).isRequired,onChange:o.func,onComplete:o.func},getDefaultProps:function(){return{section:"both"}},getInitialState:function(){return{selectingRecipients:!1,renderingRecipientDialogBox:!1,enteringIssueDetails:!1,renderingIssueDialogBox:!1}},render:function(){return"both"===this.props.section?i.createElement("div",{className:"story-editor-options"},this.renderButtons("main"),i.createElement("div",{className:"border"}),this.renderButtons("preview")):i.createElement("div",{className:"story-editor-options"},this.renderButtons(this.props.section))},renderButtons:function(e){var t=this.props.locale.translate,n=this.props.options;if("main"===e){var o=this.props.access,a=this.props.currentUser,c=this.props.story,l=this.props.repos,u=!!a&&r.includes(n.bookmarkRecipients,a.id),p=a?r.without(n.bookmarkRecipients,a.id):[],h={label:t("option-add-bookmark"),selected:u,onClick:this.handleBookmarkClick},f={label:r.isEmpty(p)?t("option-send-bookmarks"):t("option-send-bookmarks-to-$count-users",r.size(p)),hidden:!s.canSendBookmarks(a,c,o),selected:!r.isEmpty(p),onClick:this.handleSendBookmarkClick},m={label:t("option-add-issue"),selected:!!n.issueDetails,hidden:!s.canAddIssue(a,c,l,o),onClick:this.handleAddIssueClick},g={label:t("option-hide-story"),selected:n.hidePost,hidden:!s.canHideStory(a,c,o),onClick:this.handleHidePostClick};return i.createElement("div",{className:e},i.createElement(d,h),i.createElement(d,f),i.createElement(d,m),i.createElement(d,g),this.renderRecipientDialogBox(),this.renderIssueDialogBox())}if("preview"===e){var v={label:t("option-show-media-preview"),selected:"media"===n.preview||!n.preview,onClick:this.handleShowMediaPreviewClick},y={label:t("option-show-text-preview"),selected:"text"===n.preview,onClick:this.handleShowTextPreviewClick};return i.createElement("div",{className:e},i.createElement(d,v),i.createElement(d,y))}},renderRecipientDialogBox:function(){if(!this.state.renderingRecipientDialogBox)return null;var e={show:this.state.selectingRecipients,selection:this.props.options.bookmarkRecipients,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleRecipientsSelect,onCancel:this.handleRecipientsCancel};return i.createElement(p,e)},renderIssueDialogBox:function(){if(!this.state.renderingIssueDialogBox)return null;var e={show:this.state.enteringIssueDetails,allowClearing:!!this.props.options.issueDetails,issue:this.props.options.issueDetails,repos:this.props.repos,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleIssueConfirm,onCancel:this.handleIssueCancel};return i.createElement(h,e)},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,options:e})},triggerCompleteEvent:function(){this.props.onComplete&&this.props.onComplete({type:"complete",target:this})},openSelectionDialogBox:function(e){this.state.selectingRecipients||this.setState({selectingRecipients:!0,renderingRecipientDialogBox:!0})},closeSelectionDialogBox:function(){var e=this;this.state.selectingRecipients&&(this.setState({selectingRecipients:!1}),setTimeout(function(){e.state.selectingRecipients||e.setState({renderingRecipientDialogBox:!1})},500))},openIssueDialogBox:function(e){this.state.enteringIssueDetails||this.setState({enteringIssueDetails:!0,renderingIssueDialogBox:!0})},closeIssueDialogBox:function(){var e=this;this.state.enteringIssueDetails&&(this.setState({enteringIssueDetails:!1}),setTimeout(function(){e.state.enteringIssueDetails||e.setState({renderingIssueDialogBox:!1})},500))},handleBookmarkClick:function(e){var t=r.clone(this.props.options),n=this.props.currentUser.id;r.includes(t.bookmarkRecipients,n)?t.bookmarkRecipients=r.difference(t.bookmarkRecipients,[n]):t.bookmarkRecipients=r.union(t.bookmarkRecipients,[n]),this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleSendBookmarkClick:function(e){this.openSelectionDialogBox(e)},handleAddIssueClick:function(e){this.openIssueDialogBox(e)},handleHidePostClick:function(e){var t=r.clone(this.props.options);t.hidePost=!t.hidePost,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleRecipientsSelect:function(e){var t=r.clone(this.props.options);t.bookmarkRecipients=e.selection,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleRecipientsCancel:function(e){this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleIssueConfirm:function(e){var t=r.clone(this.props.options);t.issueDetails=e.issue,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeIssueDialogBox()},handleIssueCancel:function(e){this.triggerCompleteEvent(),this.closeIssueDialogBox()},handleShowMediaPreviewClick:function(e){var t=r.clone(this.props.options);t.preview="media",this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleShowTextPreviewClick:function(e){var t=r.clone(this.props.options);t.preview="text",this.triggerChangeEvent(t),this.triggerCompleteEvent()}})},function(e,t,n){"use strict";function r(e){var t=e.resource.duration;return i.createElement(o,e,i.createElement("div",{className:"video-duration"},s.format(t)))}var i=n(4),o=(i.PropTypes,n(137)),s=n(88);e.exports=r,n(741),r.propTypes=o.propTypes},function(e,t,n){"use strict";function r(e,t){var n=i.flatten(i.map(e,"user_ids"));return t&&n.push(t.id),i.uniq(n)}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(30),c=n(34),l=(n(111),n(22)),u=n(32),d=n(23),p=n(18),h=n(19),f=n(21),m=n(92),g=n(338),v=n(207),y=n(202),b=n(142);n(742),e.exports=a.createClass({displayName:"BookmarkList",propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,bookmarks:s.arrayOf(s.object),currentUser:s.object,project:s.object,selectedStoryId:s.number,database:s.instanceOf(l).isRequired,payloads:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired,theme:s.instanceOf(h).isRequired,onSelectionClear:s.func},renderAsync:function(e,t){var n=this.props.route.parameters,s=this.props.database.use({schema:n.schema,by:this}),a=w(this.props.currentUser),c=this.props.route!==t.route?100:1e3,l={stories:null,authors:a,draftStories:null,draftAuthors:a,senders:null,reactions:null,respondents:null,recommendations:null,recipients:null,repos:null,selectedStoryId:this.props.selectedStoryId,access:this.props.access,bookmarks:this.props.bookmarks,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.props.onSelectionClear};return e.show(o.createElement(x,l),c),s.start().then(function(e){var t={id:i.map(l.bookmarks,"story_id")};return s.find({table:"story",criteria:t})}).then(function(e){l.stories=e}).then(function(){var e={id:i.uniq(i.flatten(i.map(l.stories,"user_ids")))};return s.find({schema:"global",table:"user",criteria:e})}).then(function(t){return l.authors=t,e.show(o.createElement(x,l))}).then(function(){var e={id:i.flatten(i.map(l.bookmarks,"user_ids"))};return s.find({schema:"global",table:"user",criteria:e})}).then(function(t){return l.senders=t,e.show(o.createElement(x,l))}).then(function(){var e={story_id:i.map(l.stories,"id")};return l.currentUser&&"guest"===l.currentUser.type&&(e.filters.public=!0),s.find({table:"reaction",criteria:e})}).then(function(t){return l.reactions=t,e.show(o.createElement(x,l))}).then(function(){var e={id:i.map(l.reactions,"user_id")};return s.find({schema:"global",table:"user",criteria:e})}).then(function(t){return l.respondents=t,e.show(o.createElement(x,l))}).then(function(){if(l.currentUser){var e={published:!1,user_ids:[l.currentUser.id]};return s.find({table:"story",criteria:e})}}).then(function(t){if(t)return l.draftStories=t,e.show(o.createElement(x,l))}).then(function(){var e=r(l.draftStories,l.currentUser);if(e.length>1){var t={id:e};return s.find({schema:"global",table:"user",criteria:t})}}).then(function(e){e&&(l.draftAuthors=e)}).then(function(){if(l.currentUser){var e={story_id:i.map(l.stories,"id"),user_ids:[l.currentUser.id]};return s.find({table:"bookmark",criteria:e})}}).then(function(t){return l.recommendations=t,e.show(o.createElement(x,l))}).then(function(){if(l.recommendations){var e={id:i.map(l.recommendations,"target_user_id")};return s.find({schema:"global",table:"user",criteria:e})}}).then(function(t){return l.recipients=t,e.show(o.createElement(x,l))}).then(function(){var e={id:i.get(l.project,"repo_ids",[])};return s.find({schema:"global",table:"repo",criteria:e})}).then(function(e){return l.repos=e,o.createElement(x,l)})}});var x=e.exports.Sync=o.createClass({displayName:"BookmarkList.Sync",mixins:[f],propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,bookmarks:s.arrayOf(s.object),senders:s.arrayOf(s.object),stories:s.arrayOf(s.object),authors:s.arrayOf(s.object),draftStories:s.arrayOf(s.object),draftAuthors:s.arrayOf(s.object),reactions:s.arrayOf(s.object),respondents:s.arrayOf(s.object),recommendations:s.arrayOf(s.object),recipients:s.arrayOf(s.object),currentUser:s.object,project:s.object,repos:s.arrayOf(s.object),selectedStoryId:s.number,database:s.instanceOf(l).isRequired,payloads:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired,theme:s.instanceOf(h).isRequired,onSelectionClear:s.func},getInitialState:function(){return{hiddenStoryIds:[],selectedStoryId:null}},componentWillReceiveProps:function(e){if(this.props.stories!==e.stories&&!i.isEmpty(this.state.hiddenStoryIds)){var t=i.filter(this.state.hiddenStoryIds,function(t){return i.some(e.stories,{id:t})});this.setState({hiddenStoryIds:t})}this.props.route!==e.route&&this.setState({selectedStoryId:null})},render:function(){var e=k(this.props.bookmarks),t=this.state.selectedStoryId||this.props.selectedStoryId,n={items:e,behind:4,ahead:8,anchor:t?"story-"+t:void 0,offset:20,onIdentity:this.handleBookmarkIdentity,onRender:this.handleBookmarkRender,onAnchorChange:this.handleBookmarkAnchorChange,onBeforeAnchor:this.handleBookmarkBeforeAnchor};return o.createElement("div",{className:"bookmark-list"},o.createElement(m,n),this.renderNewStoryAlert())},renderNewStoryAlert:function(){var e=this.props.locale.translate,t=i.size(this.state.hiddenStoryIds),n=t>0;t?this.previousHiddenStoryCount=t:t=this.previousHiddenStoryCount||0;var r={show:n,onClick:this.handleNewBookmarkAlertClick};return o.createElement(b,r,e("alert-$count-new-bookmarks",t))},handleBookmarkIdentity:function(e){return"story-"+e.item.story_id},handleBookmarkRender:function(e){var t=e.item,n=C(this.props.stories,t);if(!n)return null;var r=!1;if(n&&"read-write"===this.props.access)if(n.published){var s=i.find(this.props.draftStories,{published_version_id:n.id});s&&(n=s,r=!0)}else r=!0;if(r||e.needed)var a=S(this.props.senders,t),c={bookmark:t,senders:a,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};if(r){var l=R(this.props.draftAuthors,n),u=O(this.props.recommendations,n),d=T(this.props.recipients,u);n||(l=w(this.props.currentUser));var p={story:n,authors:l,recommendations:u,recipients:d,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(g,c,o.createElement(y,p))}if(e.needed){var h=E(this.props.reactions,n),l=R(this.props.authors,n),f=N(this.props.respondents,h),u=O(this.props.recommendations,n),d=T(this.props.recipients,u),m={access:this.props.access,story:n,bookmark:t,reactions:h,authors:l,respondents:f,recommendations:u,recipients:d,repos:this.props.repos,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(g,c,o.createElement(v,m))}var b=e.previousHeight||e.estimatedHeight||100;return o.createElement("div",{className:"bookmark-view",style:{height:b}})},handleBookmarkAnchorChange:function(e){var t=i.get(e.item,"story_id");t&&!i.includes(this.state.hiddenStoryIds,t)||this.setState({hiddenStoryIds:[]}),this.props.selectedStoryId&&t!==this.props.selectedStoryId&&this.props.onSelectionClear&&this.props.onSelectionClear({type:"selectionclear",target:this})},handleBookmarkBeforeAnchor:function(e){var t=i.map(e.items,"story_id"),n=i.union(t,this.state.hiddenStoryIds);this.setState({hiddenStoryIds:n})},handleNewBookmarkAlertClick:function(e){this.setState({hiddenStoryIds:[],selectedStoryId:i.first(this.state.hiddenStoryIds)})}}),w=c(function(e){return[e]}),k=c(function(e){return i.orderBy(e,["id"],["desc"])}),C=c(function(e,t){return t?i.find(e,{id:t.story_id}):null}),E=c(function(e,t){return t?i.filter(e,{story_id:t.id}):[]}),R=c(function(e,t){return t?i.filter(i.map(t.user_ids,function(t){return i.find(e,{id:t})})):[]}),S=R,N=c(function(e,t){var n=i.uniq(i.map(t,"user_id"));return i.filter(i.map(n,function(t){return i.find(e,{id:t})}))}),O=c(function(e,t){if(t){var n=t.published_version_id||t.id;return i.filter(e,{story_id:n})}return[]}),T=c(function(e,t){return i.filter(e,function(e){return i.some(t,{target_user_id:e.id})})})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(30),c=n(34),l=(n(111),n(22)),u=n(23),d=n(18),p=n(19),h=n(21),f=n(92),m=n(206),g=n(142);n(743),e.exports=a.createClass({displayName:"NotificationList",propTypes:{notifications:s.arrayOf(s.object),selectedNotificationId:s.number,database:s.instanceOf(l).isRequired,route:s.instanceOf(u).isRequired,locale:s.instanceOf(d).isRequired,theme:s.instanceOf(p).isRequired,onSelectionClear:s.func},renderAsync:function(e,t){var n=this.props.route.parameters,r=this.props.database.use({schema:n.schema,by:this}),s=this.props.route!==t.route?100:1e3,a={users:null,selectedNotificationId:this.props.selectedNotificationId,notifications:this.props.notifications,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelectionClear:this.props.onSelectionClear};return e.show(o.createElement(v,a),s),r.start().then(function(e){var t={};return t.id=i.uniq(i.map(a.notifications,"user_id")),r.find({schema:"global",table:"user",criteria:t})}).then(function(t){return a.users=t,e.show(o.createElement(v,a))}).then(function(){var e={};return e.id=i.uniq(i.map(a.notifications,"story_id")),r.find({table:"story",criteria:e})}).then(function(e){return a.stories=e,o.createElement(v,a)})}});var v=e.exports.Sync=o.createClass({displayName:"NotificationList.Sync",mixins:[h],propTypes:{notifications:s.arrayOf(s.object),users:s.arrayOf(s.object),selectedNotificationId:s.number,database:s.instanceOf(l).isRequired,route:s.instanceOf(u).isRequired,locale:s.instanceOf(d).isRequired,theme:s.instanceOf(p).isRequired,onSelectionClear:s.func},getInitialState:function(){return{hiddenNotificationIds:[],selectedNotificationId:null}},render:function(){var e=y(this.props.notifications),t=this.state.selectedNotificationId||this.props.selectedNotificationId,n={items:e,behind:20,ahead:40,anchor:t?"notification-"+t:void 0,offset:10,onIdentity:this.handleNotificationIdentity,onRender:this.handleNotificationRender,onAnchorChange:this.handleNotificationAnchorChange,onBeforeAnchor:this.handleNotificationBeforeAnchor};return o.createElement("div",{className:"notification-list"},o.createElement(f,n),this.renderNewNotificationAlert())},renderNewNotificationAlert:function(){var e=this.props.locale.translate,t=i.size(this.state.hiddenNotificationIds),n=t>0;t?this.previousHiddenNotificationCount=t:t=this.previousHiddenNotificationCount||0;var r={show:n,onClick:this.handleNewNotificationAlertClick};return o.createElement(g,r,e("alert-$count-new-notifications",t))},componentDidUpdate:function(e,t){var n=this;e.notifications===this.props.notifications&&t.hiddenNotificationIds===this.state.hiddenNotificationIds||setTimeout(function(){var e=i.filter(n.props.notifications,function(e){if(!e.seen&&!i.includes(n.state.hiddenNotificationIds,e.id))return!0});if(!i.isEmpty(e)){var t=Math.min(10,2*e.length);clearTimeout(n.markAsSeenTimeout),n.markAsSeenTimeout=setTimeout(function(){n.markAsSeen(e)},1e3*t)}},50)},componentWillUnmount:function(){clearTimeout(this.markAsSeenTimeout)},handleNotificationIdentity:function(e){return"notification-"+e.item.id},handleNotificationRender:function(e){if(e.needed){var t=e.item,n=b(this.props.users,t),i={notification:t,user:n,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onClick:this.handleNotificationClick};return o.createElement(m,r({key:t.id},i))}var s=e.previousHeight||e.estimatedHeight||25;return o.createElement("div",{className:"notification-view",style:{height:s}})},markAsSeen:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),r=i.map(e,function(e){return{id:e.id,seen:!0}});return n.save({table:"notification"},r)},handleNotificationClick:function(e){var t=e.target.props.notification;t.seen||this.markAsSeen([t])},handleNotificationAnchorChange:function(e){var t=i.get(e.item,"id");t&&!i.includes(this.state.hiddenNotificationIds,t)||this.setState({hiddenNotificationIds:[]}),this.props.selectedNotificationId&&t!==this.props.selectedNotificationId&&this.props.onSelectionClear&&this.props.onSelectionClear({type:"selectionclear",target:this})},handleNotificationBeforeAnchor:function(e){var t=i.map(e.items,"id"),n=i.union(t,this.state.hiddenNotificationIds);this.setState({hiddenNotificationIds:n})},handleNewNotificationAlertClick:function(e){this.setState({hiddenNotificationIds:[],selectedNotificationId:i.first(this.state.hiddenNotificationIds)})}}),y=c(function(e){return i.orderBy(e,["ctime"],["desc"])}),b=c(function(e,t){return t?i.find(e,{id:t.user_id}):null})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=(n(8),n(34)),c=n(33),l=(n(111),n(22)),u=n(32),d=n(23),p=n(18),h=n(19),f=n(21),m=n(340),g=n(310),v=n(92);n(744),e.exports=o.createClass({displayName:"ReactionList",mixins:[f],propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,acceptNewReaction:s.bool,story:s.object.isRequired,reactions:s.arrayOf(s.object),respondents:s.arrayOf(s.object),repo:s.object,currentUser:s.object,selectedReactionId:s.number,database:s.instanceOf(l).isRequired,payloads:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired,theme:s.instanceOf(h).isRequired,onFinish:s.func,onSelectionClear:s.func},getDefaultProps:function(){return{acceptNewReaction:!1}},getInitialState:function(){return this.components=c({editor:g}),{hiddenReactionIds:[]}},render:function(){var e=this,t=y(this.props.reactions,this.props.currentUser);if(this.props.acceptNewReaction){i.some(this.props.reactions,function(t){if(t.user_id===e.props.currentUser.id&&!t.published)return!0})||(t=i.concat(null,t))}var n=this.props.selectedReactionId,r={items:t,behind:5,ahead:10,anchor:n?"reaction-"+n:void 0,offset:4,inverted:!0,onIdentity:this.handleReactionIdentity,onRender:this.handleReactionRender,onAnchorChange:this.handleReactionAnchorChange,onBeforeAnchor:this.handleReactionBeforeAnchor};return o.createElement("div",{className:"reaction-list"},o.createElement(v,r))},handleReactionIdentity:function(e){return e.item?"reaction-"+e.item.id:"reaction-top"},handleReactionRender:function(e){var t=this.components.setters,n=e.item,i=!1,s=!1,a=!1;if(n?(n.published||n.user_id===this.props.currentUser.id&&(i=!0,n.ptime||(s=!0)),a=n.id===this.props.selectedReactionId):(i=!0,s=!0),i){var c=s?0:n.id,l={selected:a,reaction:n,story:this.props.story,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onFinish:this.props.onFinish};return o.createElement(g,r({ref:t.editor,key:c},l))}var u=b(this.props.respondents,n),l={access:this.props.access,selected:a,reaction:n,respondent:u,story:this.props.story,repo:this.props.repo,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(m,r({key:n.id},l))},handleReactionAnchorChange:function(e){var t=i.get(e.item,"id");t&&!i.includes(this.state.hiddenReactionIds,t)||this.setState({hiddenReactionIds:[]}),this.props.selectedReactionId&&t!==this.props.selectedReactionId&&this.props.onSelectionClear&&this.props.onSelectionClear({type:"selectionclear",target:this})},handleReactionBeforeAnchor:function(e){var t=i.map(e.items,"id"),n=i.union(t,this.state.hiddenReactionIds);this.setState({hiddenReactionIds:n})},focus:function(){var e=this.components.editor;e&&e.focus()}});var y=a(function(e,t){var n=i.orderBy(e,["ptime","id"],["desc","desc"]),r=i.remove(n,{user_id:t,ptime:null});return i.each(r,function(e){n.unshift(e)}),n}),b=a(function(e,t){return t?i.find(e,{id:t.user_id}):null})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(34),a=n(53),c=n(23),l=n(18),u=n(19),d=n(21),p=(n(362),n(46),n(93)),h=n(109);n(746),e.exports=i.createClass({displayName:"UserActivityList",mixins:[d],propTypes:{user:o.object,stories:o.arrayOf(o.object),route:o.instanceOf(c).isRequired,locale:o.instanceOf(l).isRequired,theme:o.instanceOf(u).isRequired},getURL:function(e){var t=this.props.route,i=r.pick(t.parameters,"schema","date","search");return i.user=this.props.user.id,e&&(i.story=e.id),t.find(n(62),i)},render:function(){var e=f(this.props.stories);return i.createElement("div",{className:"user-activity-list"},r.map(e,this.renderActivity),this.renderMoreLink())},renderMoreLink:function(){if(r.isEmpty(this.props.stories))return null;var e=this.props.locale.translate,t=this.getURL();return i.createElement("div",{className:"more"},i.createElement(h,{url:t},e("user-activity-more")))},renderActivity:function(e){var t,n=this.renderText(e),r=this.getURL(e),o=e.btime||e.ptime;return(o>=a.todayISO||o>=a.yesterdayISO)&&(t="recent"),i.createElement("div",{key:e.id,className:"activity"},i.createElement(h,{className:t,url:r},n),i.createElement(p,{time:e.ptime,locale:this.props.locale}))},renderText:function(e){var t=this.props.locale.translate,n=this.props.locale.name,i=this.props.user,o=n(r.get(i,"details.name"),r.get(i,"details.gender"));switch(e.type){case"push":return t("user-activity-$name-pushed-code",o);case"merge":return t("user-activity-$name-merged-code",o);case"branch":return t("user-activity-$name-created-branch",o);case"issue":return t("user-activity-$name-opened-issue",o);case"milestone":return t("user-activity-$name-created-milestone",o);case"merge-request":return t("user-activity-$name-created-merge-request",o);case"wiki":return t("user-activity-$name-edited-wiki-page",o);case"member":case"repo":return t("user-activity-$name-"+e.details.action+"-repo",o);case"post":var s=e.details.resources,a=r.countBy(s,"type");return a.video>0?t("user-activity-$name-posted-$count-video-clips",o,a.video):a.image>0?t("user-activity-$name-posted-$count-pictures",o,a.image):a.audio>0?t("user-activity-$name-posted-$count-audio-clips",o,a.audio):a.website>0?t("user-activity-$name-posted-$count-links",o,a.website):t("user-activity-$name-wrote-post",o);case"survey":return t("user-activity-$name-started-survey",o);case"task-list":return t("user-activity-$name-started-task-list",o);default:return e.type}}});var f=s(function(e){return e=r.orderBy(e,[m],["desc"])}),m=function(e){return e.btime||e.ptime}},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(30),a=n(7),c=n(34),l=n(53),u=n(78),d=n(22),p=n(23),h=n(18),f=n(19),m=n(21),g=n(92),v=n(208);n(747),e.exports=s.createClass({displayName:"UserList",propTypes:{users:o.arrayOf(o.object).isRequired,stories:o.arrayOf(o.object),currentUser:o.object.isRequired,selectedDate:o.string,database:o.instanceOf(d).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(f).isRequired},getInitialState:function(){return{today:l.today}},renderAsync:function(e,t){var n=this,o=this.props.route.parameters,s=this.props.database.use({schema:o.schema,by:this}),c=this.props.route!==t.route?100:1e3,l={roles:null,dailyActivities:null,listings:null,stories:null,users:this.props.users,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,today:this.state.today,selectedDate:this.props.selectedDate,freshRoute:this.props.route!==t.route};return e.show(i.createElement(y,l),c),s.start().then(function(e){var t=r.flatten(r.map(l.users,"role_ids")),n={id:r.uniq(t)};return s.find({schema:"global",table:"role",criteria:n})}).then(function(t){return l.roles=t,e.show(i.createElement(y,l))}).then(function(){var e,t;t=n.props.selectedDate?a(n.props.selectedDate).add(6,"day"):a(n.state.today),e=t.clone().subtract(14,"day");var i=u.getMonthRanges(e,t),o=[];r.each(l.users,function(e){r.each(i,function(t){o.push({user_ids:[e.id],time_range:t})})});var c={type:"daily-activities",filters:o};return s.find({table:"statistics",criteria:c})}).then(function(t){return l.dailyActivities=t,e.show(i.createElement(y,l))}).then(function(){if(n.props.stories)return n.props.stories;var e={type:"news",target_user_id:l.currentUser.id,filters:r.map(l.users,function(e){return{user_ids:[e.id]}})};return s.find({table:"listing",criteria:e}).then(function(e){l.listings=e}).then(function(){var e=r.flatten(r.map(l.listings,function(e){return r.slice(e.story_ids,-5)})),t={id:r.uniq(e)};return s.find({table:"story",criteria:t})})}).then(function(e){return l.stories=e,i.createElement(y,l)})},componentDidMount:function(){l.addEventListener("change",this.handleDateChange)},componentWillUnmount:function(){l.removeEventListener("change",this.handleDateChange)},handleDateChange:function(){this.setState({today:l.today})}});var y=e.exports.Sync=i.createClass({displayName:"UserList.Sync",mixins:[m],propTypes:{users:o.arrayOf(o.object).isRequired,roles:o.arrayOf(o.object),dailyActivities:o.arrayOf(o.object),listings:o.arrayOf(o.object),stories:o.arrayOf(o.object),currentUser:o.object.isRequired,selectedDate:o.string,today:o.string,freshRoute:o.bool,database:o.instanceOf(d).isRequired,route:o.instanceOf(p).isRequired,locale:o.instanceOf(h).isRequired,theme:o.instanceOf(f).isRequired,loading:o.bool},getInitialState:function(){return{chartSelection:{}}},componentWillReceiveProps:function(e){this.props.users!==e.users&&(this.freshList=this.props.freshRoute)},render:function(){var e=b(this.props.users,this.props.locale),t={items:e,behind:4,ahead:8,fresh:this.freshList,onIdentity:this.handleUserIdentity,onRender:this.handleUserRender};return i.createElement("div",{className:"user-list"},i.createElement(g,t))},handleUserIdentity:function(e){return"user-"+e.item.id},handleUserRender:function(e){if(e.needed){var t,n=e.item,r=x(this.props.roles,n),o=w(this.props.dailyActivities,n);if(this.props.listings){var s=k(this.props.listings,n);t=C(this.props.stories,s)}else t=E(this.props.stories,n);var a=this.state.chartSelection[n.id],c={user:n,roles:r,dailyActivities:o,stories:t,chartType:a,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,selectedDate:this.props.selectedDate,today:this.props.today,onChartSelect:this.handleChartSelect};return i.createElement(v,c)}var l=e.previousHeight||e.estimatedHeight||100;return i.createElement("div",{className:"user-view",style:{height:l}})},handleChartSelect:function(e){var t=r.clone(this.state.chartSelection);t[e.user.id]!==e.chart?t[e.user.id]=e.chart:delete t[e.user.id],this.setState({chartSelection:t})}}),b=c(function(e,t){var n=t.pick,i=function(e){return n(e.details.name)};return r.orderBy(e,[i],["asc"])}),x=c(function(e,t){return t?r.filter(r.map(t.role_ids,function(t){return r.find(e,{id:t})})):[]}),w=c(function(e,t){return t?r.find(e,function(e){return e.filters.user_ids[0]===t.id}):null}),k=c(function(e,t){return t?r.find(e,function(e){if(e.filters.user_ids[0]===t.id)return!0}):null}),C=c(function(e,t){if(t){var n=r.keyBy(e,"id");return r.filter(r.map(t.story_ids,function(e){return n[e]}))}return[]}),E=c(function(e,t){return r.filter(e,function(e){return r.includes(e.user_ids,t.id)})})},function(e,t,n){"use strict";function r(e){var t=e.locale.pick,n=["user"];e.selected&&n.push("selected"),e.disabled&&n.push("disabled");var r=t(e.user.details.name),i={className:n.join(" "),"data-user-id":e.user.id,onClick:e.disabled?null:e.onClick},o={user:e.user,theme:e.theme,size:"small"};return s.createElement("div",i,s.createElement(f,o),s.createElement("span",{className:"name"},r),s.createElement("i",{className:"fa fa-check-circle"}))}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=n(4),a=s.PropTypes,c=n(30),l=n(34),u=n(22),d=n(23),p=n(18),h=n(19),f=n(46);n(748),e.exports=c.createClass({displayName:"UserSelectionList",propTypes:{selection:a.arrayOf(a.number),disabled:a.arrayOf(a.number),database:a.instanceOf(u).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired,onSelect:a.func},renderAsync:function(e){var t=this.props.database.use({by:this}),n={users:null,selection:this.props.selection,disabled:this.props.disabled,locale:this.props.locale,theme:this.props.theme,onSelect:this.props.onSelect,loading:!0};return e.show(s.createElement(m,n),1e3),t.start().then(function(e){var n={hidden:!1};return t.find({schema:"global",table:"user",criteria:n})}).then(function(e){return n.users=e,n.loading=!1,s.createElement(m,n)})}});var m=e.exports.Sync=s.createClass({displayName:"UserSelectionList.Sync",propTypes:{users:a.arrayOf(a.object),selection:a.arrayOf(a.number),disabled:a.arrayOf(a.number),locale:a.instanceOf(p).isRequired,theme:a.instanceOf(h).isRequired,onSelect:a.func},render:function(){var e=g(this.props.users,this.props.locale);return s.createElement("div",{className:"user-selection-list"},o.map(e,this.renderUser))},renderUser:function(e){var t={user:e,selected:o.includes(this.props.selection,e.id),disabled:o.includes(this.props.disabled,e.id),locale:this.props.locale,theme:this.props.theme,onClick:this.handleUserClick};return s.createElement(r,i({key:e.id},t))},triggerSelectEvent:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,selection:e})},handleUserClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-user-id")),n=this.props.selection;n=o.includes(n,t)?o.difference(n,[t]):o.union(n,[t]),this.triggerSelectEvent(n)}}),g=l(function(e,t){var n=t.pick,r=function(e){return n(e.details.name)};return o.orderBy(e,[r],["asc"])})},,,,,,,function(e,t,n){"use strict";var r=n(4),i=r.PropTypes,o=n(76),s=n(22),a=n(23),c=n(18),l=n(19);n(750),e.exports=r.createClass({displayName:"ErrorPage",propTypes:{database:i.instanceOf(s).isRequired,route:i.instanceOf(a).isRequired,locale:i.instanceOf(c).isRequired,theme:i.instanceOf(l).isRequired},statics:{parseURL:function(e,t,n){return a.match(e,["/:schema/error/:code","/error/:code"],function(e){return{schema:e.schema,code:parseInt(e.code)}})},getURL:function(e){var t="/error/"+e.code;return e.schema&&(t="/"+e.schema+t),{path:t,query:void 0,hash:void 0}},configureUI:function(e){var t=!!e.parameters.schema;return{navigation:{top:t,bottom:t}}}},render:function(){var e,t=this.props.route.parameters,i=new o(t.code),s=n(820);return e=404===t.code?"The page you're trying to reach doesn't exist. But then again, who does?":"The application is behaving in ways its maker never intended.",r.createElement("div",{className:"error-page"},r.createElement("div",null,r.createElement("div",{className:"graphic"},r.createElement(s,null)),r.createElement("div",{className:"text"},r.createElement("h1",{className:"title"},i.statusCode," ",i.message),r.createElement("p",null,e))))}})},function(e,t,n){"use strict";function r(e){var t;switch(e.type){case"ios":case"osx":t="apple";break;default:t=e.type}return o.createElement("div",{className:"device-icon"},o.createElement("i",{className:"fa fa-tablet background"}),o.createElement("i",{className:"fa fa-"+t+" icon-overlay"}))}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(22),c=n(23),l=n(18),u=n(19),d=n(21),p=n(47),h=(n(29),n(133));n(755),e.exports=o.createClass({displayName:"DevicePanel",mixins:[d],propTypes:{devices:s.arrayOf(s.object),database:s.instanceOf(a).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(l).isRequired,theme:s.instanceOf(u).isRequired},getInitialState:function(){return{renderingDialog:null,showingDialog:!1,selectedDeviceId:null}},render:function(){var e,t=this.props.locale.translate;return e=t(1===i.size(this.props.devices)?"settings-device":"settings-devices"),o.createElement(p,{className:"device"},o.createElement("header",null,o.createElement("i",{className:"fa fa-tablet"})," ",e),o.createElement("body",null,this.renderDevices(),this.renderDialogBox()))},renderDevices:function(){return i.map(this.props.devices,this.renderDevice)},renderDevice:function(e){var t=this.props.locale.translate;return o.createElement("div",{key:e.id,className:"device-option-button selected"},o.createElement("div",{className:"icon"},o.createElement(r,{type:e.type})),o.createElement("div",{className:"text"},o.createElement("span",{className:"name"},e.details.name),o.createElement("div",{"data-device-id":e.id,className:"revoke",onClick:this.handleRevokeClick},o.createElement("i",{className:"fa fa-ban"})," ",o.createElement("span",null,t("mobile-device-revoke")))))},renderDialogBox:function(){if("revoke"!==this.state.renderingDialog)return null;var e=this.props.locale.translate,t={show:this.state.showingDialog,locale:this.props.locale,onClose:this.handleDialogClose,onConfirm:this.handleRevokeConfirm};return o.createElement(h,t,e("mobile-device-revoke-are-you-sure"))},handleRevokeClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-device-id"));this.setState({renderingDialog:"revoke",showingDialog:!0,selectedDeviceId:t})},handleRevokeConfirm:function(e){var t=this,n=i.find(this.props.devices,{id:this.state.selectedDeviceId}),r=this.props.database.use({schema:"global",by:this});r.removeOne({table:"device"},n).then(function(){return r.endMobileSession(n.session_handle)}).finally(function(){t.handleDialogClose()})},handleDialogClose:function(e){var t=this;this.setState({showingDialog:!1},function(){setTimeout(function(){t.setState({renderingDialog:!1})},500)})}})},function(e,t,n){"use strict";var r=(n(5),n(6),n(4)),i=r.PropTypes,o=n(47),s=n(54);n(756),e.exports=r.createClass({displayName:"DiagnosticDataPanel",propTypes:{type:i.string.isRequired,title:i.string.isRequired},getInitialState:function(){return{contents:s.get(this.props.type)}},render:function(){return this.state.contents?r.createElement(o,{className:"diagnostic-data"},r.createElement("header",null,r.createElement("i",{className:"fa fa-gear"})," ",this.props.title),r.createElement("body",null,this.state.contents)):null},componentDidMount:function(){s.addListener(this.handleChange)},componentWillUnmount:function(){s.removeListener(this.handleChange)},handleChange:function(){var e=s.get(this.props.type);this.state.contents!==e&&this.setState({contents:e})}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(23),c=n(18),l=n(21),u=n(47),d=n(29),p=n(49);n(757),e.exports=o.createClass({displayName:"DiagnosticsPanel",mixins:[l],propTypes:{currentUser:s.object,route:s.instanceOf(a).isRequired,locale:s.instanceOf(c).isRequired,onChange:s.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=i.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return o.createElement(u,{className:"diagnostics"},o.createElement("header",null,o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-heartbeat"}),o.createElement("i",{className:"fa fa-search icon-overlay"}))," ",e("settings-diagnostics")),o.createElement("body",null,this.renderOptions()),o.createElement("footer",null,this.renderButtons()))},renderOptions:function(){var e=["show-panel"];return i.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,s=i.snakeCase(e),a=i.get(this.props.currentUser,"settings",{}),c=!!i.get(a,"diagnostics."+s),l={label:n("diagnostics-"+e),selected:c,onClick:this.handleOptionClick,id:s};return o.createElement(p,r({key:t},l))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("diagnostics-show"),onClick:this.handleShowClick};return o.createElement("div",{className:"buttons"},o.createElement(d,t))},handleOptionClick:function(e){var t=e.currentTarget.id,n=i.clone(i.get(this.props.currentUser,"settings",{}));!i.get(n,"diagnostics."+t)?i.set(n,"diagnostics."+t,"merge"!==t||"master"):i.unset(n,"diagnostics."+t),this.setUserProperty("settings",n)},handleShowClick:function(e){var t=this.props.route,r={schema:t.parameters.schema,diagnostics:!0};t.push(n(73),r)}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=(n(30),n(18)),c=n(21),l=n(47),u=n(49);n(758),e.exports=o.createClass({displayName:"LanguagePanel",mixins:[c],propTypes:{locale:s.instanceOf(a).isRequired},render:function(){var e=this.props.locale.translate;return o.createElement(l,{className:"language"},o.createElement("header",null,o.createElement("i",{className:"fa fa-language"})," ",e("settings-language")),o.createElement("body",null,this.renderList()))},renderList:function(){var e=i.filter(this.props.locale.directory,function(e){return!!e.module});return i.map(e,this.renderButton)},renderButton:function(e){var t={label:[e.name,this.renderCountrySelect(e)],selected:e.code===this.props.locale.languageCode,onClick:this.handleLanguageClick,id:e.code};return o.createElement(u,r({key:e.code},t))},renderCountrySelect:function(e){var t=this.props.locale.languageCode,n=this.props.locale.countryCode;n||(n=e.defaultCountry);var r,s=i.map(e.countries,function(e,t){return o.createElement("option",{key:t,value:t},e)});return(e.code!==t||i.size(e.countries)<=1)&&(r={visibility:"hidden"}),o.createElement("select",{key:1,value:n,style:r,onChange:this.handleCountryChange},s)},handleLanguageClick:function(e){var t=e.currentTarget.id;if(t!==this.props.locale.languageCode){var n=i.find(this.props.locale.directory,{code:t}),r=n.code+"-"+n.defaultCountry;this.props.locale.change(r)}},handleCountryChange:function(e){var t=e.currentTarget.value;if(t!==this.props.locale.countryCode){var n=this.props.locale.languageCode,r=n+"-"+t;this.props.locale.change(r)}}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(145),c=n(18),l=n(21),u=n(47),d=n(49);n(759),e.exports=o.createClass({displayName:"WebAlertPanel",mixins:[l],propTypes:{currentUser:s.object,locale:s.instanceOf(c).isRequired,onChange:s.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=i.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return o.createElement(u,{className:"mobile-alert"},o.createElement("header",null,o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-tablet"}),o.createElement("i",{className:"fa fa-exclamation-circle icon-overlay"}))," ",e("settings-mobile-alert")),o.createElement("body",null,this.renderOptions()))},renderOptions:function(){var e=a;return"admin"!==i.get(this.props.currentUser,"type")&&(e=i.without(e,a.admin)),e=i.concat(e,"web-session"),i.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,s=i.snakeCase(e),a=i.get(this.props.currentUser,"settings",{}),c=!!i.get(a,"notification."+s),l=!!i.get(a,"mobile_alert."+s),u={label:n("notification-option-"+e),selected:l&&(c||"web-session"===e),disabled:!(c||"web-session"===e),onClick:this.handleOptionClick,id:s};return o.createElement(d,r({key:t},u))},handleOptionClick:function(e){var t=e.currentTarget.id,n=i.clone(i.get(this.props.currentUser,"settings",{}));!i.get(n,"mobile_alert."+t)?i.set(n,"mobile_alert."+t,!0):i.unset(n,"mobile_alert."+t),this.setUserProperty("settings",n)}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(145),c=n(18),l=n(21),u=n(47),d=n(49);n(760),e.exports=o.createClass({displayName:"NotificationPanel",mixins:[l],propTypes:{currentUser:s.object,locale:s.instanceOf(c).isRequired,onChange:s.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=i.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return o.createElement(u,{className:"notification"},o.createElement("header",null,o.createElement("i",{className:"fa fa-exclamation-circle"})," ",e("settings-notification")),o.createElement("body",null,this.renderOptions()))},renderOptions:function(){var e=a;return"admin"!==i.get(this.props.currentUser,"type")&&(e=i.without(e,a.admin)),i.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,s=i.snakeCase(e),a=i.get(this.props.currentUser,"settings",{}),c=!!i.get(a,"notification."+s),l={label:n("notification-option-"+e),selected:c,onClick:this.handleOptionClick,id:s};return o.createElement(d,r({key:t},l))},handleOptionClick:function(e){var t=e.currentTarget.id,n=i.clone(i.get(this.props.currentUser,"settings",{})),r=!!i.get(n,"notification."+t);r?(i.unset(n,"notification."+t),i.unset(n,"web_alert."+t),i.unset(n,"mobile_alert."+t)):(i.set(n,"notification."+t,"merge"!==t||"master"),i.set(n,"web_alert."+t,!0),i.set(n,"mobile_alert."+t,!0)),console.log(r,n),this.setUserProperty("settings",n)}})},function(e,t,n){"use strict";function r(e){return e.hidden?null:o.createElement("div",{className:"item"},o.createElement("span",{className:"button",onClick:e.onClick},o.createElement("i",{className:"fa fa-fw fa-"+e.icon}),o.createElement("span",{className:"label"},e.label)))}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=n(22),c=n(23),l=n(18),u=n(19),d=n(21),p=n(47),h=n(29),f=n(306),m=n(304),g=n(302),v=n(133),y=n(305);n(761),e.exports=o.createClass({displayName:"ProjectPanel",mixins:[d],propTypes:{system:s.object,currentProject:s.object,projectLinks:s.arrayOf(s.object),database:s.instanceOf(a).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(l).isRequired,theme:s.instanceOf(u).isRequired},getInitialState:function(){return{renderingDialog:null,showingDialog:!1}},render:function(){var e=this.props.locale.translate;return o.createElement(p,{className:"project"},o.createElement("header",null,o.createElement("i",{className:"fa fa-database"})," ",e("settings-projects")),o.createElement("body",null,this.renderProjects(),this.renderDialogBox()),o.createElement("footer",null,this.renderButtons()))},renderProjects:function(){return i.map(this.props.projectLinks,this.renderProject)},renderProject:function(e,t){var n=this.props.locale.translate,i=this.props.locale.pick,s=this.props.route.parameters;if(e.schema===s.schema&&e.address==s.address){var a={icon:"home",label:e.address,onClick:this.handleSystemDescriptionClick},c={icon:"info-circle",label:n("project-management-description"),onClick:this.handleProjectDescriptionClick},l={icon:"qrcode",label:n("project-management-mobile-set-up"),hidden:!1,onClick:this.handleMobileSetupClick},u={icon:"sign-out",label:n("project-management-sign-out"),onClick:this.handleSignOutClick};return o.createElement("div",{key:t,className:"project-option-button selected"},o.createElement("i",{className:"icon fa fa-check-circle"}),o.createElement("div",{className:"text"},o.createElement("span",{className:"name"},i(e.name)),o.createElement("div",{className:"supplemental"},o.createElement(r,a),o.createElement(r,c),o.createElement(r,l),o.createElement(r,u))))}return o.createElement("div",{key:t,"data-key":e.key,className:"project-option-button",onClick:this.handleProjectClick},o.createElement("i",{className:"icon fa fa-circle-o"}),o.createElement("div",{className:"text"},o.createElement("span",{className:"name"},i(e.name))))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-management-add"),onClick:this.handleAddClick},n={label:e("project-management-manage"),onClick:this.handleManageClick,disabled:i.size(this.props.projectLinks)<2};return o.createElement("div",{className:"buttons"},o.createElement(h,n),o.createElement(h,t))},renderDialogBox:function(){return this.props.currentProject?o.createElement("div",null,this.renderSystemDescriptionDialogBox(),this.renderProjectDescriptionDialogBox(),this.renderMobileSetupDialogBox(),this.renderSignOutDialogBox(),this.renderProjectManagementDialogBox()):null},renderSystemDescriptionDialogBox:function(){if("system-description"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,system:this.props.system,locale:this.props.locale,theme:this.props.theme,onClose:this.handleDialogClose};return o.createElement(f,e)},renderProjectDescriptionDialogBox:function(){if("project-description"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,project:this.props.currentProject,locale:this.props.locale,theme:this.props.theme,onClose:this.handleDialogClose};return o.createElement(m,e)},renderMobileSetupDialogBox:function(){if("mobile-setup"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,system:this.props.system,database:this.props.database,route:this.props.route,locale:this.props.locale,onClose:this.handleDialogClose};return o.createElement(g,e)},renderSignOutDialogBox:function(){if("sign-out"!==this.state.renderingDialog)return null;var e=this.props.locale.translate,t={show:this.state.showingDialog,locale:this.props.locale,onClose:this.handleDialogClose,onConfirm:this.handleSignOutConfirm};return o.createElement(v,t,e("project-management-sign-out-are-you-sure"))},renderProjectManagementDialogBox:function(){if("management"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,projectLinks:this.props.projectLinks,route:this.props.route,locale:this.props.locale,onDelete:this.handleProjectDelete,onCancel:this.handleDialogClose};return o.createElement(y,e)},handleProjectClick:function(e){var t=e.currentTarget.getAttribute("data-key"),r=i.find(this.props.projectLinks,{key:t});if(r){var o={address:r.address,schema:r.schema};this.props.route.replace(n(73),o)}},handleAddClick:function(e){this.props.route.push(n(108),{add:!0})},handleManageClick:function(e){this.setState({renderingDialog:"management",showingDialog:!0})},handleSystemDescriptionClick:function(e){this.setState({renderingDialog:"system-description",showingDialog:!0})},handleProjectDescriptionClick:function(e){this.setState({renderingDialog:"project-description",showingDialog:!0})},handleMobileSetupClick:function(e){this.setState({renderingDialog:"mobile-setup",showingDialog:!0})},handleSignOutClick:function(e){this.setState({renderingDialog:"sign-out",showingDialog:!0})},handleDialogClose:function(e){var t=this;this.setState({showingDialog:!1},function(){setTimeout(function(){t.setState({renderingDialog:null})},500)})},handleProjectDelete:function(e){var t=this,n=i.map(e.selection,function(e){return{key:e}});this.props.database.use({by:this}).remove({schema:"local",table:"project_link"},n).then(function(){t.handleDialogClose()})},handleSignOutConfirm:function(e){var t=this,r=this.props.route.parameters,o=this.props.database.use({by:this});o.endSession().then(function(){var e=i.filter(t.props.projectLinks,{address:r.address}),s=i.difference(t.props.projectLinks,e);return o.remove({schema:"local",table:"project_link"},e).then(function(){if(i.isEmpty(s))return t.props.route.replace(n(108));var e=i.last(i.sortBy(s,"atime"));return t.props.route.replace(n(73),{address:e.address,schema:e.schema})})})}})},function(e,t,n){"use strict";function r(e,t){if(/https?:/.test(e)){e=i.trim(e.replace(/\?.*/,""));var n=i.filter(e.split("/"));return n[n.length-1]}return e}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=(n(30),n(18)),c=n(21),l=n(47),u=(n(29),n(143));n(762),e.exports=o.createClass({displayName:"UserPanel",mixins:[c],propTypes:{currentUser:s.object,locale:s.instanceOf(a).isRequired,onChange:s.func},getUserProperty:function(e){return i.get(this.props.currentUser,e)},setUserProperty:function(e,t){if(this.props.currentUser){var n=i.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return o.createElement(l,{className:"user"},o.createElement("header",null,o.createElement("i",{className:"fa fa-handshake-o"})," ",e("settings-social-networks")),o.createElement("body",null,this.renderSkypeNameInput(),this.renderSlackTeamInput(),this.renderSlackIdInput(),this.renderIChatInput(),this.renderTwitterInput(),this.renderGithubURLInput(),this.renderGitlabURLInput(),this.renderLinkedInURLInput(),this.renderStackoverflowURLInput()))},renderSkypeNameInput:function(){var e=this.props.locale.translate,t={id:"skype",value:this.getUserProperty("details.skype_username"),locale:this.props.locale,onChange:this.handleSkypeUsernameChange};return o.createElement(u,t,e("social-network-skype"))},renderSlackTeamInput:function(){var e=this.props.locale.translate,t={id:"slack-team",value:this.getUserProperty("details.slack_team_id"),locale:this.props.locale,onChange:this.handleSlackTeamIDChange};return o.createElement(u,t,e("social-network-slack-team"))},renderSlackIdInput:function(){var e=this.props.locale.translate,t={id:"slack-user",value:this.getUserProperty("details.slack_user_id"),locale:this.props.locale,onChange:this.handleSlackUserIDChange};return o.createElement(u,t,e("social-network-slack"))},renderIChatInput:function(){var e=this.props.locale.translate,t={id:"ichat",value:this.getUserProperty("details.ichat_username"),locale:this.props.locale,onChange:this.handleIchatUsernameChange};return o.createElement(u,t,e("social-network-ichat"))},renderTwitterInput:function(){var e=this.props.locale.translate,t={id:"twitter",value:this.getUserProperty("details.twitter_username"),locale:this.props.locale,onChange:this.handleTwitterUsernameChange};return o.createElement(u,t,e("social-network-twitter"))},renderGithubURLInput:function(){var e=this.props.locale.translate,t={id:"github",value:this.getUserProperty("details.github_url"),locale:this.props.locale,onChange:this.handleGitHubURLChange};return o.createElement(u,t,e("social-network-github"))},renderGitlabURLInput:function(){var e=this.props.locale.translate,t={id:"github",value:this.getUserProperty("details.gitlab_url"),locale:this.props.locale,onChange:this.handleGitlabURLChange};return o.createElement(u,t,e("social-network-gitlab"))},renderLinkedInURLInput:function(){var e=this.props.locale.translate,t={id:"linkedin",value:this.getUserProperty("details.linkedin_url"),locale:this.props.locale,onChange:this.handleLinkedinURLChange};return o.createElement(u,t,e("social-network-linkedin"))},renderStackoverflowURLInput:function(){var e=this.props.locale.translate,t={id:"stackoverflow",value:this.getUserProperty("details.stackoverflow_url"),locale:this.props.locale,onChange:this.handleStackoverflowURLChange};return o.createElement(u,t,e("social-network-stackoverflow"))},handleSkypeUsernameChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.skype_username",t)},handleSlackUserIDChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.slack_user_id",t)},handleSlackTeamIDChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.slack_team_id",t)},handleIchatUsernameChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.ichat_username",t)},handleTwitterUsernameChange:function(e){var t=r(e.target.value);this.setUserProperty("details.twitter_username",t)},handleLinkedinURLChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.linkedin_url",t)},handleGitHubURLChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.github_url",t)},handleGitlabURLChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.gitlab_url",t)},handleStackoverflowURLChange:function(e){var t=i.trim(e.target.value);this.setUserProperty("details.stackoverflow_url",t)}})},function(e,t,n){"use strict";function r(e,t,n){var r=0,i=0,o=Math.min(e,t);return"center"!==n&&n||(e>o?r=Math.floor((e-o)/2):t>o&&(i=Math.floor((t-o)/2))),{left:r,top:i,width:o,height:o}}function i(e){return o.toUpper(s().format("YYYY-MMM-DD-hhA"))+e}var o=n(5),s=(n(6),n(7)),a=n(4),c=a.PropTypes,l=(n(30),n(50)),u=n(113),d=n(18),p=n(19),h=n(21),f=n(47),m=n(29),g=n(137),v=n(107);n(763),e.exports=a.createClass({displayName:"UserImagePanel",mixins:[h],propTypes:{currentUser:c.object,locale:c.instanceOf(d).isRequired,theme:c.instanceOf(p).isRequired,onChange:c.func},getInitialState:function(){return{capturing:!1}},getUserProperty:function(e){return o.get(this.props.currentUser,e)},setUserProperty:function(e,t){if(this.props.currentUser){var n=o.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},setImage:function(e){var t=this.getUserProperty("details.resources"),n=o.slice(t),r=o.findIndex(n,{type:"image"});-1!==r?n[r]=e:n.push(e),this.setUserProperty("details.resources",n)},render:function(){var e=this.props.locale.translate;return a.createElement(f,{className:"user-image"},a.createElement("header",null,a.createElement("i",{className:"fa fa-image"})," ",e("settings-profile-image")),a.createElement("body",null,this.renderProfilePicture(),this.renderDialogBox()),a.createElement("footer",null,this.renderButtons()))},renderProfilePicture:function(){var e,t=this.getUserProperty("details.resources"),r=o.find(t,{type:"image"});if(r){var i={resource:r,locale:this.props.locale,theme:this.props.theme,previewWidth:256,previewHeight:256,onChange:this.handleImageChange};e=a.createElement(g,i)}else{var s=n(197);e=a.createElement("div",{className:"no-image"},a.createElement(s,{className:""}))}return a.createElement("div",{className:"image-container"},e)},renderDialogBox:function(){var e={show:this.state.capturing,locale:this.props.locale,onCapture:this.handlePhotoCapture,onCancel:this.handleCaptureCancel};return a.createElement(v,e)},renderButtons:function(){var e=this.props.locale.translate,t=this.getUserProperty("details.resources"),n=o.some(t,{type:"image"}),r={label:e("user-image-remove"),hidden:!n,onClick:this.handleRemoveClick},i={label:e("user-image-snap"),onClick:this.handleTakeClick},s={label:e("user-image-select"),highlighted:!n,onChange:this.handleFileChange};return a.createElement("div",{className:"buttons"},a.createElement("div",{className:"left"},a.createElement(m,r)),a.createElement("div",{className:"right"},a.createElement(m,i),a.createElement(m.File,s)))},handleRemoveClick:function(e){var t=this.getUserProperty("details.resources"),n=o.findIndex(t,{type:"image"}),r=o.slice(t);r.splice(n,1),this.setUserProperty("details.resources",r)},handleTakeClick:function(e){this.setState({capturing:!0})},handlePhotoCapture:function(e){var t=e.image,n=o.assign({type:"image",clip:r(t.width,t.height),filename:i(".jpg")},t);this.setImage(n),this.setState({capturing:!1})},handleCaptureCancel:function(e){this.setState({capturing:!1})},handleImageChange:function(e){this.setImage(e.resource)},handleFileChange:function(e){var t=this,n=e.target.files[0];if(n){var i=o.last(o.split(n.type,"/")),s=l.manage(n);return u.loadImage(s).then(function(e){var o={type:"image",format:i,filename:n.name,file:s,width:e.naturalWidth,height:e.naturalHeight,clip:r(e.naturalWidth,e.naturalHeight)};return t.setImage(o),null})}}})},function(e,t,n){"use strict";var r=n(5),i=(n(6),n(4)),o=i.PropTypes,s=(n(30),n(18)),a=n(21),c=n(47),l=(n(29),n(143));n(764),e.exports=i.createClass({displayName:"UserInfoPanel",mixins:[a],propTypes:{currentUser:o.object,locale:o.instanceOf(s).isRequired,onChange:o.func},getUserProperty:function(e){return r.get(this.props.currentUser,e)},setUserProperty:function(e,t){if(this.props.currentUser){var n=r.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return i.createElement(c,{className:"user-info"},i.createElement("header",null,i.createElement("i",{className:"fa fa-user-circle"})," ",e("settings-user-information")),i.createElement("body",null,this.renderNameInput(),this.renderEmailInput(),this.renderPhoneInput(),this.renderGenderSelector()))},renderNameInput:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getUserProperty("details.name"),r={id:"name",value:t(n),locale:this.props.locale,onChange:this.handleNameChange};return i.createElement(l,r,e("user-info-name"))},renderEmailInput:function(){var e=this.props.locale.translate,t={id:"email",value:this.getUserProperty("details.email"),locale:this.props.locale,onChange:this.handleEmailChange};return i.createElement(l,t,e("user-info-email"))},renderPhoneInput:function(){var e=this.props.locale.translate,t={id:"email",value:this.getUserProperty("details.phone"),locale:this.props.locale,onChange:this.handlePhoneChange};return i.createElement(l,t,e("user-info-phone"))},renderGenderSelector:function(){var e=this.props.locale.translate,t={id:"gender",value:this.getUserProperty("details.gender")||"",size:3,onChange:this.handleGenderChange};return i.createElement("div",{className:"gender-selector"},i.createElement("label",{htmlFor:"gender"},e("user-info-gender")),i.createElement("select",t,i.createElement("option",{value:"male"},e("user-info-gender-male")),i.createElement("option",{value:"female"},e("user-info-gender-female")),i.createElement("option",{value:""},e("user-info-gender-unspecified"))))},handleNameChange:function(e){var t=e.target.value;this.setUserProperty("details.name",t)},handleEmailChange:function(e){var t=e.target.value;this.setUserProperty("details.email",t)},handlePhoneChange:function(e){var t=e.target.value;this.setUserProperty("details.phone",t)},handleGenderChange:function(e){var t=e.target.value;this.setUserProperty("details.gender",t||void 0)}})},function(e,t,n){"use strict";function r(){var e=navigator.userAgent;for(var t in h){if(h[t].test(e))return t}return"globe"}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=(n(6),n(4)),a=s.PropTypes,c=n(145),l=n(18),u=n(21),d=n(47),p=n(49);n(765),e.exports=s.createClass({displayName:"WebAlertPanel",mixins:[u],propTypes:{currentUser:a.object,locale:a.instanceOf(l).isRequired,onChange:a.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=o.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate,t=r();return s.createElement(d,{className:"web-alert"},s.createElement("header",null,s.createElement("div",{className:"icon"},s.createElement("i",{className:"fa fa-"+t}),s.createElement("i",{className:"fa fa-exclamation-circle icon-overlay"}))," ",e("settings-web-alert")),s.createElement("body",null,this.renderOptions()))},renderOptions:function(){var e=c;return"admin"!==o.get(this.props.currentUser,"type")&&(e=o.without(e,c.admin)),o.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,r=o.snakeCase(e),a=o.get(this.props.currentUser,"settings",{}),c=!!o.get(a,"notification."+r),l=!!o.get(a,"web_alert."+r),u={label:n("notification-option-"+e),selected:l&&c,disabled:!c,onClick:this.handleOptionClick,id:r};return s.createElement(p,i({key:t},u))},handleOptionClick:function(e){var t=e.currentTarget.id,n=o.clone(o.get(this.props.currentUser,"settings",{}));!o.get(n,"web_alert."+t)?o.set(n,"web_alert."+t,!0):o.unset(n,"web_alert."+t),this.setUserProperty("settings",n)}});var h={edge:/(Edge|Internet Explorer)/,chrome:/Chrome/,safari:/Safari/,firefox:/Firefox/}},function(e,t,n){"use strict";var r=(n(5),n(4)),i=r.PropTypes,o=n(162),s=n(19),a=n(18);n(766),e.exports=r.createClass({displayName:"AppComponent",propTypes:{component:i.object.isRequired,theme:i.instanceOf(s),locale:i.instanceOf(a),onSelect:i.func},render:function(){return r.createElement("div",{className:"app-component",onClick:this.handleClick},this.renderPicture(),this.renderText())},renderPicture:function(){var e=this.props.component;if(e.image){var t=this.props.theme.getImageURL(e.image);return r.createElement("div",{className:"picture"},r.createElement("img",{src:t}))}var n=e.icon||{},i=n.class||"fa-cubes",o={color:n.color,backgroundColor:n["background-color"]};return r.createElement("div",{className:"picture"},r.createElement("div",{className:"icon",style:o},r.createElement("i",{className:"fa fa-fw "+i})))},renderText:function(){var e=this.props.locale.pick,t=e(this.props.component.text),n=o.parse(t);return r.createElement("div",{className:"description"},r.createElement("div",{className:"description-contents"},n,r.createElement("div",{className:"ellipsis"},r.createElement("i",{className:"fa fa-ellipsis-h"}))))},handleClick:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,component:this.props.component})}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(22),c=n(23),l=n(18),u=n(19),d=n(212);n(767),e.exports=o.createClass({displayName:"BookmarkView",propTypes:{bookmark:s.object,senders:s.arrayOf(s.object),currentUser:s.object,database:s.instanceOf(a).isRequired,route:s.instanceOf(c).isRequired,locale:s.instanceOf(l).isRequired,theme:s.instanceOf(u).isRequired},render:function(){return o.createElement("div",{className:"bookmark-view"},o.createElement("div",{className:"title"},this.renderSenderNames()),o.createElement("div",{className:"story"},this.props.children))},renderSenderNames:function(){var e,t=this.props.locale.translate,n=this.props.locale.name,s=i.get(this.props.currentUser,"id"),a=i.some(this.props.senders,{id:s}),c=i.filter(this.props.senders,function(e){return e.id!==s});if(a){var l=this.props.currentUser,u=n(l.details.name,l.details.gender);switch(c.length){case 0:e=t("bookmark-$you-bookmarked-it",u);break;case 1:var p=n(c[0].details.name,c[0].details.gender);e=t("bookmark-$you-bookmarked-it-and-$name-recommends-it",u,p);break;default:var h={users:c,label:t("bookmark-$count-users",c.length),title:t("bookmark-recommendations"),locale:this.props.locale,theme:this.props.theme},f=o.createElement(d,r({key:1},h));e=t("bookmark-$you-bookmarked-it-and-$others-recommends-it",u,f,c.length)}}else switch(c.length){case 0:e="";break;case 1:var p=n(c[0].details.name,c[0].details.gender);e=t("bookmark-$name-recommends-this",p);break;case 2:var m=n(c[0].details.name,c[0].details.gender);n(c[1].details.name,c[1].details.gender);e=t("bookmark-$name1-and-$name2-recommend-this",m);break;default:var p=n(c[0].details.name,c[0].details.gender),g=i.slice(c,1),h={users:g,label:t("bookmark-$count-other-users",g.length),title:t("bookmark-recommendations"),locale:this.props.locale,theme:this.props.theme},f=o.createElement(d,r({key:1},h));e=t("bookmark-$name1-and-$others-recommend-this",p,f,c.length-1)}return o.createElement("span",{className:"name"},e)},removeBookmark:function(e){var t=this.props.route.parameters;return this.props.database.use({schema:t.schema,by:this}).removeOne({table:"bookmark"},e)},handleCloseClick:function(e){this.removeBookmark(this.props.bookmark)}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=(n(7),n(89)),a=n(18),c=n(19),l=n(213),u=n(49);n(770),e.exports=i.createClass({displayName:"ReactViewOptions",propTypes:{access:o.oneOf(["read-only","read-comment","read-write"]).isRequired,currentUser:o.object.isRequired,reaction:o.object.isRequired,story:o.object.isRequired,options:o.object.isRequired,locale:o.instanceOf(a),theme:o.instanceOf(c)},getInitialState:function(){return{open:!1}},render:function(){var e=this.props.access,t=this.props.currentUser,n=this.props.story,r=this.props.reaction,o=!1;s.canHideReaction(t,n,r,e)&&(o=!0),s.canEditReaction(t,n,r,e)&&(o=!0),s.canRemoveReaction(t,n,r,e)&&(o=!0);var a={className:"reaction-view-options",disabled:!o,popOut:!0,onOpen:this.handleOpen,onClose:this.handleClose};return i.createElement(l,a,i.createElement("button",null,i.createElement("i",{className:"fa fa-ellipsis-v"})),i.createElement("menu",null,this.renderOptions()))},renderOptions:function(){if(!this.state.open)return null;var e=this.props.locale.translate,t=this.props.options,n=this.props.access,r=this.props.currentUser,o=this.props.story,a=this.props.reaction,c={label:e("option-hide-comment"),hidden:!s.canHideReaction(r,o,a,n),selected:t.hideReaction,onClick:this.handleHideClick},l={label:e("option-edit-comment"),hidden:!s.canEditReaction(r,o,a,n),selected:t.editReaction,onClick:this.handleEditClick},d={label:e("option-remove-comment"),hidden:!s.canRemoveReaction(r,o,a,n),selected:t.removeReaction,onClick:this.handleRemoveClick};return i.createElement("div",{className:"view-options in-menu"},i.createElement(u,c),i.createElement(u,l),i.createElement(u,d))},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,options:e})},handleOpen:function(e){this.setState({open:!0})},handleClose:function(e){this.setState({open:!1})},handleHideClick:function(e){var t=r.clone(this.props.options);t.hideReaction=!t.hideReaction,this.triggerChangeEvent(t)},handleEditClick:function(e){var t=r.clone(this.props.options);t.editReaction=!0,this.triggerChangeEvent(t)},handleRemoveClick:function(e){var t=r.clone(this.props.options);t.removeReaction=!0,this.triggerChangeEvent(t)}})},function(e,t,n){"use strict";function r(e){return i.first(i.keys(e.versions))||null}var i=n(5),o=n(4),s=o.PropTypes,a=n(116),c=n(34),l=n(33),u=n(89),d=n(114),p=n(22),h=n(23),f=n(18),m=n(19),g=n(21),v=n(46),y=n(205),b=n(134),x=n(353),w=(n(93),n(339));n(771),e.exports=o.createClass({displayName:"ReactionView",mixins:[g],propTypes:{access:s.oneOf(["read-only","read-comment","read-write"]).isRequired,selected:s.bool,reaction:s.object.isRequired,respondent:s.object,story:s.object.isRequired,currentUser:s.object.isRequired,repo:s.object,database:s.instanceOf(p).isRequired,route:s.instanceOf(h).isRequired,locale:s.instanceOf(f).isRequired,theme:s.instanceOf(m).isRequired},getInitialState:function(){this.components=l({audioPlayer:HTMLAudioElement});var e={options:k,selectedResourceURL:null,showingReferencedMediaDialog:!1,renderingReferencedMediaDialog:!1};return this.updateOptions(e,this.props),e},getClassName:function(){var e="reaction-view";return this.props.selected&&(e+=" selected"),e},componentWillReceiveProps:function(e){var t=this,n=i.clone(this.state);this.props.reaction!==e.reaction&&this.updateOptions(n,e);var r=i.pickBy(n,function(e,n){return t.state[n]!==e});i.isEmpty(r)||this.setState(r)},updateOptions:function(e,t){(e.options=i.clone(e.options)).hideReaction=!t.reaction.public},render:function(){return o.createElement("div",{className:this.getClassName()},o.createElement("div",{className:"profile-image-column"},this.renderProfileImage()),o.createElement("div",{className:"contents-column"},o.createElement("div",{className:"text"},this.renderOptionButton(),this.renderProgress(),this.renderText(),this.renderReferencedMediaDialog()),this.renderAudioPlayer(),this.renderMedia()))},renderProfileImage:function(){var e={user:this.props.respondent,theme:this.props.theme,size:"small"};return this.props.respondent&&(e.url=this.props.route.find(n(62),{schema:this.props.route.parameters.schema,user:this.props.respondent.id})),o.createElement(v,e)},renderText:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.reaction,r=this.props.currentUser,s=this.props.story,c=this.props.repo,l=t(i.get(this.props.respondent,"details.name"));if(this.resourcesReferenced={},!n.published){var p=n.ptime?"editing":"writing";return o.createElement("span",{className:"in-progress"},e("reaction-$name-is-"+p,l))}switch(n.type){case"like":return o.createElement("span",{className:"like"},e("reaction-$name-likes-this",l));case"comment":var h=i.get(n,"details.text");if(i.get(n,"details.markdown",!1)){var f=a.parse(t(h),this.handleReference);return f[0]&&"p"===f[0].type&&(f[0]=o.createElement("span",{key:0},f[0].props.children)),o.createElement("span",{className:"comment markdown",onClick:this.handleMarkdownClick},l,": ",f)}return o.createElement("span",{className:"comment"},l,": ",t(h));case"vote":return o.createElement("span",{className:"vote"},e("reaction-$name-cast-a-vote",l));case"task-completion":return o.createElement("span",{className:"task-completion"},e("reaction-$name-completed-a-task",l));case"note":var m,g,r=this.props.currentUser,c=this.props.repo;if(u.canAccessRepo(r,c))switch(s.type){case"push":case"merge":var v=d.find(n,{relation:["note","commit"]});if(v){var y=v.note.id,b=v.commit.id;m=c.details.web_url+"/commit/"+b+"#note_"+y,g=v.type}break;case"issue":var v=d.find(n,{relation:["note","issue"]});if(v){var y=v.note.id,x=v.issue.number;m=c.details.web_url+"/issues/"+x+"#note_"+y,g=v.type}break;case"merge-request":var v=d.find(n,{relation:["note","merge_request"]});if(v){var y=v.note.id,w=v.merge_request.number;m=c.details.web_url+"/merge_requests/"+w+"#note_"+y,g=v.type}}return o.createElement("a",{className:"note",href:m,target:g},e("reaction-$name-commented-on-"+s.type,l));case"assignment":if("issue"===s.type||"post"===s.type){var m,g;if(u.canAccessRepo(r,c)){var v=d.find(n,{relation:"issue"});if(v){var x=v.issue.number;m=c.details.web_url+"/issues/"+x,g=v.type}}return o.createElement("a",{className:"issue-assignment",href:m,target:g},e("reaction-$name-is-assigned-to-issue",l))}if("merge-request"===s.type){var m,g;if(u.canAccessRepo(r,c)){var v=d.find(n,{relation:"merge_request"});if(v){var w=v.merge_request.number;m=c.details.web_url+"/merge_requests/"+w,g=v.type}}return o.createElement("a",{className:"issue-assignment",href:m,target:g},e("reaction-$name-is-assigned-to-merge-request",l))}case"tracking":var m,g;if(u.canAccessRepo(r,c)){var v=d.find(n,{relation:"issue"});if(v){var x=v.issue.number;m=c.details.web_url+"/issues/"+x,g=v.type}}return o.createElement("a",{className:"issue-tracking",href:m,target:g},e("reaction-$name-added-story-to-issue-tracker",l))}},renderOptionButton:function(){var e={access:this.props.access,currentUser:this.props.currentUser,reaction:this.props.reaction,story:this.props.story,locale:this.props.locale,theme:this.props.theme,options:this.state.options,onChange:this.handleOptionsChange};return o.createElement(w,e)},renderProgress:function(){var e={reaction:this.props.reaction,locale:this.props.locale};return o.createElement(x,e)},renderAudioPlayer:function(){if(!this.state.audioURL)return null;var e={ref:this.components.setters.audioPlayer,src:this.state.audioURL,autoPlay:!0,controls:!0,onEnded:this.handleAudioEnded};return o.createElement("audio",e)},renderMedia:function(){var e=i.get(this.props.reaction,"details.resources");if(i.isEmpty(this.resourcesReferenced)||(e=i.difference(e,i.values(this.resourcesReferenced))),i.isEmpty(e))return null;var t={locale:this.props.locale,theme:this.props.theme,resources:e};return o.createElement("div",{className:"media"},o.createElement(y,t))},renderReferencedMediaDialog:function(){if(!this.state.renderingReferencedMediaDialog)return null;var e=this.resourcesReferenced[this.state.selectedResourceURL],t=C(this.resourcesReferenced),n=i.indexOf(t,e);if(-1===n)return null;var r={show:this.state.showingReferencedMediaDialog,resources:t,selectedIndex:n,locale:this.props.locale,theme:this.props.theme,onClose:this.handleReferencedMediaDialogClose};return o.createElement(b,r)},saveReaction:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.saveOne({table:"reaction"},e)})},removeReaction:function(e){var t=this.props.route.parameters;return this.props.database.use({schema:t.schema,by:this}).removeOne({table:"reaction"},e)},setOptions:function(e){var t=this,n=this.state.options;this.setState({options:e},function(){if(e.editReaction&&!n.editReaction){var r=i.clone(t.props.reaction);r.published=!1,t.saveReaction(r)}if(e.removeReaction&&!n.removeReaction&&t.removeReaction(t.props.reaction),e.hideReaction!==n.hideReaction){var r=i.clone(t.props.reaction);r.public=!e.hideReaction,t.saveReaction(r)}})},handleReference:function(e){var t=this.props.reaction.details.resources,r=a.findReferencedResource(t,e.name);if(r){var i,o=this.props.theme;if(e.forImage){if("audio"===r.type)i=n(158)+"#"+encodeURI(r.url);else if(!(i=o.getImageURL(r,{height:24}))){var s=o.getImageFile(r);i=a.attachClipRect(s,r.clip)}}else i=o.getURL(r);return this.resourcesReferenced[i]=r,{href:i,title:void 0}}},handleMarkdownClick:function(e){var t=e.target;if("IMG"===t.tagName){var n=t.getAttribute("src"),i=this.resourcesReferenced[n];if(i){if("image"===i.type||"video"===i.type)this.setState({selectedResourceURL:n,renderingReferencedMediaDialog:!0,showingReferencedMediaDialog:!0});else if("website"===i.type)window.open(i.url);else if("audio"===i.type){var o=r(i),s=this.props.theme.getAudioURL(i,{version:o});this.setState({audioURL:s})}}else{var a=t.getBoundingClientRect(),c=t.naturalWidth+50,l=t.naturalHeight+50,u=a.left+window.screenLeft,d=a.top+window.screenTop;window.open(t.src,"_blank","width="+c+",height="+l+",left="+u+",top="+d+"status=no,menubar=no")}}},handleReferencedMediaDialogClose:function(e){var t=this;this.setState({showingReferencedMediaDialog:!1},function(){setTimeout(function(){t.state.showingReferencedMediaDialog||t.setState({renderingReferencedMediaDialog:!1,selectedResourceURL:null})},500)})},handleOptionsChange:function(e){this.setOptions(e.options)},handleAudioEnded:function(e){this.setState({audioURL:null})}});var k={hideReaction:!1,editReaction:!1,removeReaction:!1},C=c(function(e){return i.filter(e,function(e){switch(e.type){case"image":case"video":return!0}})})},function(e,t,n){"use strict";function r(e){if(e=s.trim(e)){return l(e).format("ll")}}function i(e){return s.first(s.keys(e.versions))||null}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(5),a=n(4),c=a.PropTypes,l=n(7),u=n(34),d=n(115),p=n(116),h=n(222),f=n(33),m=n(89),g=n(114),v=n(18),y=n(19),b=n(21),x=n(205),w=n(134),k=n(337),C=n(299),E=n(52),R=n(29);n(772),e.exports=a.createClass({displayName:"StoryContents",mixins:[b],propTypes:{story:c.object.isRequired,authors:c.arrayOf(c.object),currentUser:c.object.isRequired,reactions:c.arrayOf(c.object),repo:c.object,locale:c.instanceOf(v).isRequired,theme:c.instanceOf(y).isRequired,onChange:c.func,onReaction:c.func},getInitialState:function(){this.components=f({audioPlayer:HTMLAudioElement});var e={voteSubmitted:!1,selectedComponent:null,showingComponentDialog:!1,renderingComponentDialog:!1,selectedResourceURL:null,showingReferencedMediaDialog:!1,renderingReferencedMediaDialog:!1,audioURL:null};return this.updateUserAnswers({},e),e},getAuthorName:function(){var e=this.props.locale.name,t=s.first(this.props.authors);return t?e(t.details.name,t.details.gender):""},componentWillReceiveProps:function(e){var t=s.clone(this.state);this.props.story!==e.story&&this.updateUserAnswers(t,e);var n=s.shallowDiff(t,this.state);s.isEmpty(n)||this.setState(n)},updateUserAnswers:function(e,t){if(t.story)if("survey"===t.story.type){var n=t.locale.pick,r=n(t.story.details.text),i=d.extract(r),o=e.userAnswers;s.each(i,function(e,t){s.each(e,function(e,t){e.checked&&(o&&void 0!==o[e.list]||(o=s.decoupleSet(o,[e.list],e.key)))})}),e.userAnswers=o}else"task-list"===t.story.type&&(e.userAnswers=null)},isCurrentUserAuthor:function(){var e=this.props.story.user_ids,t=this.props.currentUser.id;return s.includes(e,t)},hasUserVoted:function(){if(null!==this.props.reactions){return!!N(this.props.reactions,this.props.currentUser)}},render:function(){return a.createElement("div",{className:"story-contents"},this.renderText(),this.renderAudioPlayer(),this.renderMedia(),this.renderReferencedMediaDialog(),this.renderAppComponents(),this.renderButtons())},renderText:function(){switch(this.resourcesReferenced={},this.props.story.type){case"post":return this.renderStoryText();case"task-list":return this.renderTaskListText();case"survey":return this.renderSurveyText();case"repo":return this.renderRepoText();case"member":return this.renderMemberText();case"push":case"merge":case"branch":return this.renderPushText();case"issue":return this.renderIssueText();case"merge-request":return this.renderMergeRequestText();case"milestone":return this.renderMilestoneText();case"wiki":return this.renderWikiText()}},renderStoryText:function(){var e=this.props.locale.pick,t=this.props.story,n=s.trimEnd(e(t.details.text));if(!n)return null;var r;if(t.details.labels&&(r=this.renderTags()),t.details.markdown){var i=p.parse(n,this.handleReference);return a.createElement("div",{className:"text story markdown",onClick:this.handleMarkdownClick},i,r)}return a.createElement("div",{className:"text story plain-text"},a.createElement("p",null,n),r)},renderTaskListText:function(){var e=this.props.locale.pick,t=this.props.story,n=s.trimEnd(e(t.details.text));if(!n)return null;var r=this.state.userAnswers;if(t.details.markdown){var i=p.parseTaskList(n,r,this.handleTaskListItemChange,this.handleReference);return a.createElement("div",{className:"text task-list markdown",onClick:this.handleMarkdownClick},i)}var i=h.parseTaskList(n,r,this.handleTaskListItemChange);return a.createElement("div",{className:"text task-list plain-text"},a.createElement("p",null,i))},renderSurveyText:function(){var e=this.props.locale.pick,t=this.props.story,n=s.trimEnd(e(t.details.text));if(!n)return null;if(this.hasUserVoted()){var r=S(this.props.reactions);if(t.details.markdown){var i=p.parseSurveyResults(n,r,this.handleReference);return a.createElement("div",{className:"text survey markdown",onClick:this.handleMarkdownClick},i)}var i=h.parseSurveyResults(n,r);return a.createElement("div",{className:"text survey plain-text"},a.createElement("p",null,i))}var o=this.state.userAnswers;if(t.details.markdown){var c=p.parseSurvey(n,o,this.handleSurveyItemChange,this.handleReference);return a.createElement("div",{className:"text survey markdown",onClick:this.handleMarkdownClick},c)}var c=h.parseSurvey(n,o,this.handleSurveyItemChange);return a.createElement("div",{className:"text survey plain-text"},a.createElement("p",null,c))},renderRepoText:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.story,r=this.getAuthorName(),i=n.details.action,o=this.props.repo,c=t(s.get(o,"details.title"))||s.get(o,"name"),l=s.get(o,"details.web_url");return a.createElement("div",{className:"text repo"},a.createElement("p",null,a.createElement("a",{href:l,target:"_blank"},e("story-$name-"+i+"-$repo",r,c))))},renderMemberText:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.story,r=this.getAuthorName(),i=n.details.action,o=this.props.repo,c=t(s.get(o,"details.title"))||s.get(o,"name"),l=s.get(o,"details.web_url");return a.createElement("div",{className:"text member"},a.createElement("p",null,a.createElement("a",{href:l,target:"_blank"},e("story-$name-"+i+"-$repo",r,c))))},renderIssueText:function(){var e,t,n=this.props.locale.translate,r=this.props.locale.pick,i=this.props.story,o=this.getAuthorName(),s=i.details.title,c=this.props.repo,l=g.find(this.props.story,{relation:"issue"});if(m.canAccessRepo(this.props.currentUser,c)&&l){var u=l.issue.number;e=c.details.web_url+"/issues/"+u,t=l.type}var d=l?l.issue.number:"";return a.createElement("div",{className:"text issue"},a.createElement("p",null,a.createElement("a",{href:e,target:t},n("story-$name-opened-issue-$number-$title",o,d,r(s)))),this.renderStatus(),this.renderTags())},renderMilestoneText:function(){var e,t=this.props.locale.translate,n=this.props.locale.pick,i=this.props.story,o=this.getAuthorName(),s=this.props.repo,c=i.details.title,l=r(i.details.due_date),u=r(i.details.start_date)||"-";if(m.canAccessRepo(this.props.currentUser,s)){var d=g.find(this.props.story,{relation:"milestone"});d&&(e=s.details.web_url+"/milestones/"+d.milestone.id)}return a.createElement("div",{className:"text milestone"},a.createElement("p",null,a.createElement("a",{href:e,target:"_blank"},t("story-$name-created-$milestone",o,n(c)))),a.createElement("p",{className:"start-date"},a.createElement("span",null,t("story-milestone-start-date"))," ",a.createElement("span",null,u)),a.createElement("p",{className:"due-date"},a.createElement("span",{className:"label"},t("story-milestone-due-date"))," ",a.createElement("span",null,l)))},renderMergeRequestText:function(){var e,t=this.props.locale.translate,n=(this.props.locale.pick,this.props.story),r=this.getAuthorName(),i=this.props.repo,o=s.get(n,"details.source_branch"),c=s.get(n,"details.branch");if(m.canAccessRepo(this.props.currentUser,i)){var l=g.find(this.props.story,{relation:"merge_request"});l&&(e=i.details.web_url+"/merge_requests/"+l.merge_request.id)}return a.createElement("div",{className:"text merge-request"},a.createElement("p",null,a.createElement("a",{href:e,target:"_blank"},t("story-$name-requested-merge-$branch1-into-$branch2",r,o,c))),this.renderStatus(),this.renderTags())},renderWikiText:function(){var e=this.props.locale.translate,t=this.props.story,n=this.getAuthorName(),r=t.details.url,i=s.capitalize(t.details.title),o=t.details.action+"d";return"deleted"===o&&(r=void 0),a.createElement("div",{className:"text wiki"},a.createElement("p",null,a.createElement("a",{href:r,target:"_blank"},e("story-$name-"+o+"-$page",n,i))))},renderPushText:function(){var e,t=this.props.locale.translate,n=this.props.locale.pick,r=this.props.story,i=this.getAuthorName(),o=s.get(this.props.story,"details.files"),c=s.get(this.props.story,"details.lines"),l=(s.get(this.props.story,"details.commit_ids.length"),this.props.repo),u=n(s.get(l,"details.title"))||s.get(l,"name"),d=r.details.branch,p=["added","deleted","modified","renamed"],h=s.transform(p,function(e,n,r){var i=o[n];i>0&&e.push(a.createElement("li",{key:r,className:n},t("story-push-"+n+"-$count-files",i)))},[]),f=["added","deleted"],g=s.transform(f,function(e,n,r){var i=c[n];i>0&&e.push(a.createElement("li",{key:r,className:n},t("story-push-"+n+"-$count-lines",i)))},[]);if(m.canAccessRepo(this.props.currentUser,l))if("push"===r.type||"merge"===r.type){var v=r.details.commit_before,y=r.details.commit_after;e=v?l.details.web_url+"/compare/"+v+"..."+y:l.details.web_url+"/commit/"+y}else"branch"===r.type&&(e=l.details.web_url+"/commits/"+d);var b;if("push"===r.type)b=t("story-$name-pushed-to-$branch-of-$repo",i,d,u);else if("merge"===r.type){var x=r.details.source_branches;b=t("story-$name-merged-$branches-into-$branch-of-$repo",i,x,d,u)}else"branch"===r.type&&(b=t("story-$name-created-$branch-in-$repo",i,d,u));return a.createElement("div",{className:"text push"},a.createElement("p",null,a.createElement("a",{href:e,target:"_blank"},b)),a.createElement("div",null,a.createElement("ul",{className:"files"},h),a.createElement("ul",{className:"lines"},g)))},renderStatus:function(){var e=this.props.locale.translate,t=this.props.story.details.state;return a.createElement("p",{className:"status-"+t},a.createElement("span",null,e("story-issue-current-status"))," ",a.createElement("span",null,e("story-issue-status-"+t)))},renderTags:function(){var e=this.props.story.details.labels;if(s.isEmpty(e))return null;for(var t=this.props.repo,n=s.map(e,function(e,n){var r;if(t){var i=s.indexOf(t.details.labels,e),o=s.get(t.details.label_colors,i);o&&(r={backgroundColor:o})}return a.createElement("span",{key:n,className:"tag",style:r},e)}),r=1;r<n.length;r+=2)n.splice(r,0," ");return a.createElement("p",null,n)},renderButtons:function(){if("survey"!==this.props.story.type)return null;if(!1!==this.hasUserVoted())return null;var e=this.props.locale.translate,t={label:e("story-vote-submit"),emphasized:!s.isEmpty(this.state.userAnswers),disabled:this.state.voteSubmitted||s.isEmpty(this.state.userAnswers),onClick:this.handleVoteSubmitClick};return a.createElement("div",{className:"buttons"},a.createElement(R,t))},renderAudioPlayer:function(){if(!this.state.audioURL)return null;var e={ref:this.components.setters.audioPlayer,src:this.state.audioURL,autoPlay:!0,controls:!0,onEnded:this.handleAudioEnded};return a.createElement("audio",e)},renderMedia:function(){var e=s.get(this.props.story,"details.resources");if(s.isEmpty(this.resourcesReferenced)||(e=s.difference(e,s.values(this.resourcesReferenced))),s.isEmpty(e))return null;var t={locale:this.props.locale,theme:this.props.theme,resources:e};return a.createElement(x,t)},renderReferencedMediaDialog:function(){if(!this.state.renderingReferencedMediaDialog)return null;var e=this.resourcesReferenced[this.state.selectedResourceURL],t=O(this.resourcesReferenced),n=s.indexOf(t,e);if(-1===n)return null;var r={show:this.state.showingReferencedMediaDialog,resources:t,selectedIndex:n,locale:this.props.locale,theme:this.props.theme,onClose:this.handleReferencedMediaDialogClose};return a.createElement(w,r)},renderAppComponents:function(){var e=this.props.locale.translate,t=s.get(this.props.story,"details.components");return s.isEmpty(t)?null:a.createElement("div",{className:"impact"},a.createElement("p",{className:"message"},e("story-push-components-changed")),a.createElement(E,null,s.map(t,this.renderAppComponent)),this.renderAppComponentDialog())},renderAppComponent:function(e,t){var n={component:e,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleComponentSelect};return a.createElement(k,o({key:t},n))},renderAppComponentDialog:function(){if(!this.state.renderingComponentDialog)return null;var e={show:this.state.showingComponentDialog,component:this.state.selectedComponent,locale:this.props.locale,theme:this.props.theme,onClose:this.handleComponentDialogClose};return a.createElement(C,e)},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,story:e})},triggerReactionEvent:function(e){this.props.onReaction&&this.props.onReaction({type:"reaction",target:this,reaction:e})},handleReference:function(e){var t=this.props.story.details.resources,r=p.findReferencedResource(t,e.name);if(r){var i,o=this.props.theme;if(e.forImage){if("audio"===r.type)i=n(158)+"#"+encodeURI(r.url);else if(!(i=o.getImageURL(r,{height:24}))){var s=o.getImageFile(r);i=p.attachClipRect(s,r.clip)}}else i=o.getURL(r);return this.resourcesReferenced[i]=r,{href:i,title:void 0}}},handleMarkdownClick:function(e){var t=e.target;if("IMG"===t.tagName){var n=t.getAttribute("src"),r=this.resourcesReferenced[n];if(r){if("image"===r.type||"video"===r.type)this.setState({selectedResourceURL:n,renderingReferencedMediaDialog:!0,showingReferencedMediaDialog:!0});else if("website"===r.type)window.open(r.url);else if("audio"===r.type){var o=i(r),s=this.props.theme.getAudioURL(r,{version:o});this.setState({audioURL:s})}}else{var a=t.getBoundingClientRect(),c=t.naturalWidth+50,l=t.naturalHeight+50,u=a.left+window.screenLeft,d=a.top+window.screenTop;window.open(t.src,"_blank","width="+c+",height="+l+",left="+u+",top="+d+"status=no,menubar=no")}}},handleTaskListItemChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,i=t.checked;if(!this.isCurrentUserAuthor())return!1;var o=s.decoupleSet(this.state.userAnswers,[n,r],i);this.setState({userAnswers:o});var a=this.props.story,c=s.mapValues(a.details.text,function(e){return d.update(e,n,r,i,!1)});a=s.decoupleSet(a,"details.text",c),this.triggerChangeEvent(a)},handleSurveyItemChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,i=s.decoupleSet(this.state.userAnswers,[n],r);this.setState({userAnswers:i})},handleVoteSubmitClick:function(e){var t=this.props.story,n={type:"vote",story_id:t.id,user_id:this.props.currentUser.id,published:!0,details:{answers:this.state.userAnswers}};this.triggerReactionEvent(n),this.setState({voteSubmitted:!0})},handleComponentSelect:function(e){this.setState({renderingComponentDialog:!0,showingComponentDialog:!0,selectedComponent:e.component})},handleComponentDialogClose:function(e){var t=this;this.setState({showingComponentDialog:!1},function(){setTimeout(function(){t.state.showingComponentDialog||t.setState({renderingComponentDialog:!1,selectedComponent:null})},500)})},handleReferencedMediaDialogClose:function(e){var t=this;this.setState({showingReferencedMediaDialog:!1},function(){setTimeout(function(){t.state.showingReferencedMediaDialog||t.setState({renderingReferencedMediaDialog:!1,selectedResourceURL:null})},500)})},handleAudioEnded:function(e){this.setState({audioURL:null})}});var S=u(function(e){var t={};return s.each(e,function(e){"vote"===e.type&&s.forIn(e.details.answers,function(e,n){var r=[n,"total"],i=s.get(t,r,0)+1;s.set(t,r,i);var o=[n,"answers",e],a=s.get(t,o,0)+1;s.set(t,o,a)})}),t}),N=u(function(e,t){return t?s.find(e,{type:"vote",user_id:t.id}):null}),O=u(function(e){return s.filter(e,function(e){switch(e.type){case"image":case"video":return!0}})})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(89),a=n(22),c=n(23),l=n(18),u=n(19),d=n(49),p=n(135),h=n(199);n(773),e.exports=i.createClass({displayName:"StoryViewOptions",propTypes:{section:o.oneOf(["main","both"]),access:o.oneOf(["read-only","read-comment","read-write"]).isRequired,story:o.object.isRequired,repos:o.arrayOf(o.object),currentUser:o.object.isRequired,options:o.object.isRequired,database:o.instanceOf(a).isRequired,route:o.instanceOf(c).isRequired,locale:o.instanceOf(l).isRequired,theme:o.instanceOf(u).isRequired,onChange:o.func,onComplete:o.func},getDefaultProps:function(){return{section:"both"}},getInitialState:function(){return{selectingRecipients:!1,renderingRecipientDialogBox:!1,enteringIssueDetails:!1,renderingIssueDialogBox:!1}},render:function(){this.props.locale.translate;return i.createElement("div",{className:"story-view-options"},this.renderButtons("main"))},renderButtons:function(e){var t=this.props.locale.translate,n=this.props.options,o=this.props.access,a=this.props.currentUser,c=this.props.story,l=this.props.repos;if("main"===e){var u;if(void 0===n.keepBookmark){var p=!!a&&r.includes(n.bookmarkRecipients,a.id);u={label:t("option-add-bookmark"),selected:p,hidden:!s.canCreateBookmark(a,c,o),onClick:this.handleAddBookmarkClick}}else u={label:t("option-keep-bookmark"),selected:n.keepBookmark,onClick:this.handleKeepBookmarkClick};var h=a?r.without(n.bookmarkRecipients,a.id):[],f={label:r.isEmpty(h)?t("option-send-bookmarks"):t("option-send-bookmarks-to-$count-users",r.size(h)),hidden:!s.canSendBookmarks(a,c,o),selected:!r.isEmpty(h)||this.state.selectingRecipients,onClick:this.handleSendBookmarkClick},m={label:t("option-add-issue"),hidden:!s.canAddIssue(a,c,l,o),selected:!!n.issueDetails||this.state.enteringIssueDetails,onClick:this.handleAddIssueClick},g={label:t("option-hide-story"),hidden:!s.canHideStory(a,c,o),selected:n.hideStory,onClick:this.handleHideClick},v={label:t("option-edit-post"),hidden:!s.canEditStory(a,c,o),selected:n.editStory,onClick:this.handleEditClick},y={label:t("option-remove-story"),hidden:!s.canRemoveStory(a,c,o),selected:n.removeStory,onClick:this.handleRemoveClick},b={label:t("option-bump-story"),hidden:!s.canBumpStory(a,c,o),selected:n.bumpStory,onClick:this.handleBumpClick};return i.createElement("div",{className:e},i.createElement(d,u),i.createElement(d,f),i.createElement(d,m),i.createElement(d,g),i.createElement(d,v),i.createElement(d,y),i.createElement(d,b),this.renderRecipientDialogBox(),this.renderIssueDialogBox())}},renderRecipientDialogBox:function(){if(!this.state.renderingRecipientDialogBox)return null;var e={show:this.state.selectingRecipients,selection:this.props.options.bookmarkRecipients,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleRecipientsSelect,onCancel:this.handleRecipientsCancel};return i.createElement(p,e)},renderIssueDialogBox:function(){if(!this.state.renderingIssueDialogBox)return null;var e={show:this.state.enteringIssueDetails,allowClearing:!1,issue:this.props.options.issueDetails,repos:this.props.repos,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleIssueConfirm,onCancel:this.handleIssueCancel};return i.createElement(h,e)},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,options:e})},triggerCompleteEvent:function(){this.props.onComplete&&this.props.onComplete({type:"complete",target:this})},openSelectionDialogBox:function(e){this.state.selectingRecipients||this.setState({selectingRecipients:!0,renderingRecipientDialogBox:!0})},closeSelectionDialogBox:function(){var e=this;this.state.selectingRecipients&&(this.setState({selectingRecipients:!1}),setTimeout(function(){e.state.selectingRecipients||e.setState({renderingRecipientDialogBox:!1})},500))},openIssueDialogBox:function(e){this.state.enteringIssueDetails||this.setState({enteringIssueDetails:!0,renderingIssueDialogBox:!0})},closeIssueDialogBox:function(){var e=this;this.state.enteringIssueDetails&&(this.setState({enteringIssueDetails:!1}),setTimeout(function(){e.state.enteringIssueDetails||e.setState({renderingIssueDialogBox:!1})},500))},handleAddBookmarkClick:function(e){var t=r.clone(this.props.options),n=this.props.currentUser.id;r.includes(t.bookmarkRecipients,n)?t.bookmarkRecipients=r.difference(t.bookmarkRecipients,[n]):t.bookmarkRecipients=r.union(t.bookmarkRecipients,[n]),this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleKeepBookmarkClick:function(e){var t=r.clone(this.props.options);this.props.currentUser.id;t.keepBookmark=!1,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleSendBookmarkClick:function(e){this.openSelectionDialogBox(e)},handleAddIssueClick:function(e){this.openIssueDialogBox(e)},handleHideClick:function(e){var t=r.clone(this.props.options);t.hideStory=!t.hideStory,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleEditClick:function(e){var t=r.clone(this.props.options);t.editStory=!0,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleRemoveClick:function(e){var t=r.clone(this.props.options);t.removeStory=!0,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleBumpClick:function(e){var t=r.clone(this.props.options);t.bumpStory=!0,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleRecipientsSelect:function(e){var t=r.clone(this.props.options);t.bookmarkRecipients=e.selection,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleRecipientsCancel:function(e){this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleIssueConfirm:function(e){var t=r.clone(this.props.options);t.issueDetails=e.issue,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeIssueDialogBox()},handleIssueCancel:function(e){this.triggerCompleteEvent(),this.closeIssueDialogBox()}})},function(e,t,n){"use strict";function r(e){return s.createElement("div",{className:"item"},s.createElement("svg",{className:"ct-chart-bar",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{className:"ct-series ct-series-"+e.series},s.createElement("line",{className:"ct-bar",x1:0,y1:5,x2:10,y2:5}))),s.createElement("span",{className:"label"},e.label))}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),s=n(4),a=s.PropTypes,c=n(385),l=n(7),u=n(34),d=(n(53),n(146)),p=n(23),h=n(18),f=n(19),m=n(21);n(775),e.exports=s.createClass({displayName:"UserStatistics",mixins:[m],propTypes:{chartType:a.oneOf(["bar","line","pie"]),user:a.object,dailyActivities:a.object,selectedDate:a.string,today:a.string,route:a.instanceOf(p).isRequired,locale:a.instanceOf(h).isRequired,theme:a.instanceOf(f).isRequired},getDates:function(){var e;e=this.props.selectedDate?l(this.props.selectedDate).add(6,"day"):l(this.props.today);for(var t=[],n=0;n<14;n++){var r=e.format("YYYY-MM-DD");t.unshift(r),e.subtract(1,"day")}return t},render:function(){return s.createElement("div",{className:"user-statistics"},this.renderLegend(),this.renderChart())},renderLegend:function(){if(!this.props.chartType)return null;var e=this.props.locale.translate,t=o.get(this.props.dailyActivities,"details",{}),n=this.getDates(),a=g(t,n),c=o.map(a,function(t,n){var o={series:String.fromCharCode("a".charCodeAt(0)+t),label:e("user-statistics-legend-"+n)};return s.createElement(r,i({key:t},o))});return o.isEmpty(c)&&(c=""),s.createElement("div",{className:"legend"},c)},renderChart:function(){switch(this.props.chartType){case"bar":return this.renderBarChart();case"line":return this.renderLineChart();case"pie":return this.renderPieChart();default:return null}},renderBarChart:function(){var e=o.get(this.props.dailyActivities,"details",{}),t=this.getDates(),n=v(e,t),r=y(n,!0),i=b(t,this.props.locale.localeCode),a={type:"bar",data:{labels:i,series:n,meta:1},options:{stackBars:!0,axisY:{labelInterpolationFnc:function(e){return e}},chartPadding:{right:10},high:r,low:0},onDraw:this.handleChartDraw,onClick:this.handleChartClick};return s.createElement(c,a)},renderLineChart:function(){var e=o.get(this.props.dailyActivities,"details",{}),t=this.getDates(),n=v(e,t),r=y(n,!1),i=b(t,this.props.locale.localeCode),a={type:"line",data:{labels:i,series:n},options:{fullWidth:!0,chartPadding:{right:20},showPoint:!1,high:r,low:0},onDraw:this.handleChartDraw};return s.createElement(c,a)},renderPieChart:function(){var e=o.get(this.props.dailyActivities,"details",{}),t=this.getDates(),n=v(e,t),r=o.map(n,o.sum),i={type:"pie",data:{series:r},options:{labelInterpolationFnc:function(e){if(e)return e}}};return s.createElement(c,i)},handleChartDraw:function(e){if("grid"===e.type){var t,n=e.index;if(this.props.selectedDate){if(7===n){var r=l(this.props.selectedDate),i=this.props.locale.localeCode;t=r.locale(i).format("l")}}else if(13===n){var o=this.props.locale.translate;t=o("user-statistics-today")}if(t){var s;if("bar"===this.props.chartType){var a=new c.Svg("line");a.attr({x1:e.x2+e.axis.stepLength,y1:e.y1,x2:e.x2+e.axis.stepLength,y2:e.y2,class:"ct-grid ct-vertical"}),e.group.append(a),s=e.x2+.5*e.axis.stepLength}else s=e.x2;var u=e.y1+12,d=new c.Svg("text");d.text(t),d.attr({x:s,y:u,"text-anchor":"middle",class:"date-label"}),e.group.append(d);var p=new c.Svg("text");p.text(""),p.attr({x:s,y:u+8,"text-anchor":"middle",class:"date-arrow"}),e.group.append(p)}}else if("bar"===e.type){var o=this.props.locale.translate,h=e.value.y,f=e.series.name,m=o("user-statistics-tooltip-$count-"+f,h),r=l(e.meta),i=this.props.locale.localeCode,g=r.locale(i).format("l"),t=m+"\n"+g,v=new c.Svg("title");v.text(t),e.element.append(v),e.element.attr({"data-date":e.meta})}},handleChartClick:function(e){var t=e.target.getAttribute("data-date");if(t){var r=this.props.route,i={schema:r.parameters.schema,user:this.props.user.id,date:t};r.push(n(62),i)}}});var g=u(function(e,t){var n={};o.each(t,function(t){var r=e[t];o.forIn(r,function(e,t){e&&(n[t]=!0)})});var r={};return o.each(d,function(e,t){n[e]&&(r[e]=t)}),r}),v=u(function(e,t){return o.map(d,function(n){var r=!0,i=o.map(t,function(t){var i=o.get(e,[t,n],0),s=t;return i&&(r=!1),{meta:s,value:i}});return r?[]:{name:n,data:i}})}),y=u(function(e,t){var n=0;if(t){var r=[];o.each(e,function(e){o.each(e,function(e,t){r[t]=r[t]?r[t]+e:e})}),o.isEmpty(r)||(n=o.max(r))}else o.each(e,function(e){var t=o.max(e);t>n&&(n=t)});return n<=18?20:n<=45?50:100*Math.ceil(n/100)}),b=u(function(e,t){return o.map(e,function(e){return l(e).locale(t).format("dd")})})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(19),c=n(49),l=n(307);n(776),e.exports=i.createClass({displayName:"UserViewOptions",propTypes:{section:o.oneOf(["main","supplemental","both"]),user:o.object,locale:o.instanceOf(s).isRequired,theme:o.instanceOf(a).isRequired,onChange:o.func},getDefaultProps:function(){return{section:"both"}},getInitialState:function(){return{showingPhoneDialog:!1,renderingPhoneDialog:!1}},render:function(){return i.createElement("div",{className:"view-options"},this.renderButtons("main"),this.renderPhoneDialog())},renderButtons:function(e){var t=this.props.locale.translate,n=r.get(this.props.user,"details",{});if("main"===e){var o={label:t("action-contact-by-phone"),icon:"phone-square",url:"tel:"+n.phone,hidden:!n.phone,onClick:this.handlePhoneClick},s={label:t("action-contact-by-email"),icon:"envelope",url:"mailto:"+n.email,hidden:!n.email},a={label:t("action-contact-by-skype"),icon:"skype",url:"skype:"+n.skype_username,hidden:!n.phone},l={label:t("action-contact-by-slack"),icon:"slack",url:"slack://user?team="+n.slack_team_id+"&id="+n.slack_user_id,hidden:!n.slack_user_id},u={label:t("action-contact-by-ichat"),icon:"apple",url:"ichat:"+n.ichat_username,hidden:!n.ichat_username},d={label:t("action-contact-by-twitter"),icon:"apple",url:"https://twitter.com/"+n.twitter_username,target:"_blank",hidden:!n.twitter_username},p={label:t("action-view-gitlab-page"),icon:"gitlab",url:n.gitlab_url,target:"_blank",hidden:!n.gitlab_url},h={label:t("action-view-github-page"),icon:"github",url:n.github_url,target:"_blank",hidden:!n.linkedin_username},f={label:t("action-view-linkedin-page"),icon:"linkedin",url:n.linkedin_url,target:"_blank",hidden:!n.linkedin_url},m={label:t("action-view-stackoverflow-page"),icon:"stack-overflow",url:n.stackoverflow_url,target:"_blank",hidden:!n.stackoverflow_url};return i.createElement("div",{className:e},i.createElement(c,o),i.createElement(c,s),i.createElement(c,a),i.createElement(c,l),i.createElement(c,u),i.createElement(c,d),i.createElement(c,p),i.createElement(c,h),i.createElement(c,f),i.createElement(c,m))}},renderPhoneDialog:function(){if(!this.state.renderingPhoneDialog)return null;var e={show:this.state.showingPhoneDialog,number:this.props.user.details.phone,locale:this.props.locale,onClose:this.handlePhoneDialogClose};return i.createElement(l,e)},handlePhoneClick:function(e){e.preventDefault(),this.setState({renderingPhoneDialog:!0,showingPhoneDialog:!0})},handlePhoneDialogClose:function(e){var t=this;this.setState({showingPhoneDialog:!1},function(){setTimeout(function(){t.state.showingPhoneDialog||t.setState({renderingPhoneDialog:!1})},500)})}})},function(e,t,n){"use strict";function r(e){var t="button";return e.className&&(t+=" "+e.className),e.active&&(t+=" active"),e.stacking&&(t+=" stacking"),e.stacking?o.createElement(x,{className:t,url:e.url},o.createElement("i",{className:"fa fa-"+e.icon}),e.children," ",o.createElement("span",{className:"label"},e.label)):o.createElement(x,{className:t,url:e.url},o.createElement("i",{className:"fa fa-"+e.icon})," ",o.createElement("span",{className:"label"},e.label),e.children)}var i=n(5),o=n(4),s=o.PropTypes,a=n(30),c=n(33),l=n(76),u=n(22),d=n(23),p=n(18),h=n(19),f=n(72),m=n(204),g=n(139),v=n(138),y=n(73),b=n(21),x=n(109);n(779),e.exports=o.createClass({displayName:"BottomNavigation",mixins:[b],propTypes:{settings:s.object.isRequired,database:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired,theme:s.instanceOf(h).isRequired},getInitialState:function(){return this.components=c({container:HTMLDivElement}),{height:this.isHidden()?0:"auto",stacking:!1}},isHidden:function(e){return e||(e=this.props.settings),!i.get(e,"navigation.bottom",!0)},getPageURL:function(e,t){t||(t=this.props.route);var n=e.configureUI?e.configureUI(t):null,r=i.get(n,"navigation.route.parameters");return r?t.find(e,r):null},componentWillReceiveProps:function(e){var t=this,n=this.isHidden(),r=this.isHidden(e.settings);if(n!==r){var i=this.components.container,o=i.offsetHeight;r?(this.setState({height:o}),setTimeout(function(){t.isHidden()&&t.setState({height:0})},0)):(this.setState({height:o}),setTimeout(function(){t.isHidden()||t.setState({height:"auto"})},1e3))}},render:function(){var e={height:this.state.height};return o.createElement("footer",{className:"bottom-navigation",style:e},this.renderButtons())},renderButtons:function(){var e=this.props.locale.translate,t=this.components.setters,n=(this.props.route,i.get(this.props.settings,"navigation.section")),s={label:e("bottom-nav-news"),icon:"newspaper-o",active:"news"===n,stacking:this.state.stacking,url:this.getPageURL(f),onClick:this.handleButtonClick},a={label:e("bottom-nav-notifications"),icon:"comments",active:"notifications"===n,stacking:this.state.stacking,url:this.getPageURL(g),onClick:this.handleButtonClick},c={label:e("bottom-nav-bookmarks"),icon:"bookmark",active:"bookmarks"===n,stacking:this.state.stacking,url:this.getPageURL(v),onClick:this.handleButtonClick},l={label:e("bottom-nav-people"),icon:"users",active:"people"===n,stacking:this.state.stacking,url:this.getPageURL(m),onClick:this.handleButtonClick},u={label:e("bottom-nav-settings"),icon:"gears",active:"settings"===n,stacking:this.state.stacking,url:this.getPageURL(y),onClick:this.handleButtonClick},d={database:this.props.database,route:this.props.route};return o.createElement("div",{ref:t.container,className:"container"},o.createElement(r,s),o.createElement(r,a,o.createElement(w,d)),o.createElement(r,c),o.createElement(r,l),o.createElement(r,u))},componentDidMount:function(){this.detectStacking(),window.addEventListener("resize",this.handleWindowResize)},componentWillUnmount:function(){window.removeEventListener("resize",this.handleWindowResize)},detectStacking:function(){var e=this.components.container;if(e){var t=e.getElementsByClassName("fa")[1],n=e.getElementsByClassName("label")[1],r=n.offsetTop>=t.offsetTop+t.offsetHeight;this.state.stacking!==r&&this.setState({stacking:r})}},handleWindowResize:function(e){this.detectStacking()}});var w=a.createClass({displayName:"NewNotificationsBadge",propTypes:{stacking:s.bool,database:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired},getInitialState:function(){return{failedSchemas:[]}},renderAsync:function(e){var t=this,n=this.props.route.parameters;if(!n.schema)return null;if(i.includes(this.state.failedSchemas,n.schema))return null;var r=this.props.database.use({schema:n.schema,by:this});return r.start().then(function(e){var t={target_user_id:e,seen:!1,limit:100};return r.find({table:"notification",criteria:t})}).then(function(e){var n=e.length;return t.changeFavIcon(n),n?o.createElement("span",{className:"badge"},o.createElement("span",{className:"number"},n)):null}).catch(l,function(e){var r=i.union(t.state.failedSchemas,[n.schema]);t.setState({failedSchemas:r})})},changeFavIcon:function(e){var t=i.filter(document.head.getElementsByTagName("LINK"),function(e){if("icon"===e.rel||"apple-touch-icon-precomposed"===e.rel)return!0});i.each(t,function(t){var n=t.getAttribute("href");if(e>0){var r=i.find(C,{withoutBadge:n});r&&(t.href=r.withBadge)}else{var r=i.find(C,{withBadge:n});r&&(t.href=r.withoutBadge)}})}}),k=n(295).keys(),C=i.map(k,function(e){var t=e.substring(e.indexOf("/")+1,e.lastIndexOf("."));return{withoutBadge:n(294)("./"+t+".png"),withBadge:n(296)("./"+t+".png")}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(30),c=n(7),l=n(78),u=n(22),d=n(23),p=n(18),h=(n(72),n(139),n(62),n(21)),f=n(347);n(780),e.exports=a.createClass({displayName:"CalendarBar",propTypes:{settings:s.object.isRequired,database:s.instanceOf(u).isRequired,route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired},renderAsync:function(e){var t,n=this,r=this.props.route.parameters,s=this.props.database.use({schema:r.schema,by:this}),a={projectRange:null,dailyActivities:null,route:this.props.route,locale:this.props.locale};return e.show(o.createElement(m,a),1e3),s.start().then(function(e){var n={type:"story-date-range",filters:{}};return t=e,s.findOne({table:"statistics",criteria:n})}).then(function(t){return a.projectRange=t,e.show(o.createElement(m,a))}).then(function(){var e=i.get(a.projectRange,"details.start_time"),t=i.get(a.projectRange,"details.end_time"),r=l.getMonthRanges(e,t),o=l.getTimeZoneOffset(),c=n.props.settings.statistics,u={type:c.type,filters:i.map(r,function(e){return i.extend({time_range:e,tz_offset:o},c.filters)})};return s.find({table:"statistics",criteria:u})}).then(function(e){return a.dailyActivities=e,o.createElement(m,a)})}});var m=e.exports.Sync=o.createClass({displayName:"CalendarBar.Sync",mixins:[h],propTypes:{projectRange:s.object,dailyActivities:s.arrayOf(s.object),route:s.instanceOf(d).isRequired,locale:s.instanceOf(p).isRequired},render:function(){var e=this,t=c().endOf("month"),n=[],s=!1,a=i.get(this.props.projectRange,"details.start_time"),l=i.get(this.props.projectRange,"details.end_time"),u=this.props.route.parameters.date;if(a&&l){var d=c(a).startOf("month"),p=c(l).endOf("month");d.year()!=p.year()&&(s=!0),t>p&&(p=t);for(var h=d.clone();h<=p;h.add(1,"month"))n.push({year:h.year(),month:h.month()+1})}else n.push({year:t.year(),month:t.month()+1});n.reverse();var m=i.map(n,function(t,n){var i={year:t.year,month:t.month,showYear:s,selection:u,locale:e.props.locale,onDateURL:e.handleDateURL};return o.createElement(f,r({key:n},i))});return o.createElement("div",{className:"calendar-bar"},m)},handleDateURL:function(e){var t=e.date;if(i.some(this.props.dailyActivities,function(e){if(e.details[t])return!0})){var n=this.props.route,r=i.omit(n.parameters,"date","roles","search","story");return r.date=t,n.find(n.component,r)}}})},function(e,t,n){"use strict";function r(e,t,n){return e+"-"+i(t)+"-"+i(n)}function i(e){var t=String(e);return 1===t.length&&(t="0"+t),t}var o=n(5),s=n(4),a=s.PropTypes,c=n(7),l=n(53),u=n(18);n(781),e.exports=s.createClass({displayName:"Calendar",propTypes:{year:a.number.isRequired,month:a.number.isRequired,showYear:a.bool,selection:a.string,locale:a.instanceOf(u).isRequired,onDateURL:a.func},getDefaultProps:function(){return{showYear:!1}},render:function(){var e=this,t=this.props.locale.localeCode,n=c.localeData(t),a=this.props.year,u=this.props.month,d=this.props.selection,p=c(r(a,u,1)).locale(t),h=n.firstDayOfWeek(),f=p.daysInMonth(),m=p.day(),g=[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],v=0,y=m-h;y<0&&(y+=7);for(var b=1;b<=f;b++)g[v][y++]=b,y>=7&&(y=0,v++);for(var x=o.slice(n.weekdaysShort()),w=[!0,!1,!1,!1,!1,!1,!0],k=0;k<h;k++)x.push(x.shift()),w.push(w.shift());var C=this.props.showYear?"MMMM YYYY":"MMMM",E=p.format(C),R=o.map(x,function(e,t){var n=[w[t]?"weekend":"workweek"];return s.createElement("th",{className:n.join(" "),key:t},e)}),S=o.map(g,function(t){return o.map(t,function(t,n){var r,o,c,p=[w[n]?"weekend":"workweek"];return t?(o=a+"-"+i(u)+"-"+i(t),r=t,c=e.getDateURL(o)):r="",d&&d===o&&p.push("selected"),o===l.today&&p.push("today"),s.createElement("td",{key:n,className:p.join(" ")},s.createElement("a",{href:c},r))})});return s.createElement("table",{className:"calendar"},s.createElement("thead",null,s.createElement("tr",{className:"title"},s.createElement("th",{colSpan:7},E)),s.createElement("tr",{className:"headings"},R)),s.createElement("tbody",null,s.createElement("tr",{className:"dates"},S[0]),s.createElement("tr",{className:"dates"},S[1]),s.createElement("tr",{className:"dates"},S[2]),s.createElement("tr",{className:"dates"},S[3]),s.createElement("tr",{className:"dates"},S[4]),s.createElement("tr",{className:"dates"},S[5])))},getDateURL:function(e){if(this.props.onDateURL)return this.props.onDateURL({type:"dateurl",target:this,date:e})}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(45);e.exports=i.createClass({displayName:"ChartToolbar",propTypes:{chartType:o.oneOf(["bar","line","pie"]),locale:o.instanceOf(s).isRequired,onAction:o.func},render:function(){var e=this.props.locale.translate,t={label:e("statistics-bar"),icon:"bar-chart",highlighted:"bar"===this.props.chartType,onClick:this.handleBarChartClick},n={label:e("statistics-line"),icon:"line-chart",highlighted:"line"===this.props.chartType,onClick:this.handleLineChartClick},r={label:e("statistics-pie"),icon:"pie-chart",highlighted:"pie"===this.props.chartType,onClick:this.handlePieChartClick};return i.createElement("div",null,i.createElement(a,t),i.createElement(a,n),i.createElement(a,r))},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(r.extend({type:"action",target:this,action:e},t))},handleBarChartClick:function(e){this.triggerActionEvent("chart-type-set",{value:"bar"})},handleLineChartClick:function(e){this.triggerActionEvent("chart-type-set",{value:"line"})},handlePieChartClick:function(e){this.triggerActionEvent("chart-type-set",{value:"pie"})}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=(n(77),n(22)),a=n(23),c=n(18),l=n(19),u=(n(45),n(135));n(783),e.exports=i.createClass({displayName:"CoauthoringButton",propTypes:{coauthoring:o.bool,story:o.object.isRequired,database:o.instanceOf(s).isRequired,route:o.instanceOf(a).isRequired,locale:o.instanceOf(c).isRequired,theme:o.instanceOf(l).isRequired,onSelect:o.func,onRemove:o.func},getInitialState:function(){return{selecting:!1}},render:function(){var e,t,n=this.props.locale.translate;return this.props.coauthoring?(e="minus-square",t=n("story-remove-yourself")):(e="plus-square",t=n(this.props.story.user_ids.length>1?"story-add-remove-coauthor":"story-add-coauthor")),i.createElement("span",{className:"coauthoring-button",onClick:this.handleClick},i.createElement("i",{className:"fa fa-"+e}),i.createElement("span",{className:"label"},t),this.renderDialogBox())},renderDialogBox:function(){var e={show:this.state.selecting,selection:this.props.story.user_ids,disabled:r.slice(this.props.story.user_ids,0,1),database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleSelect,onCancel:this.handleCancel};return i.createElement(u,e)},handleClick:function(e){this.props.coauthoring?this.props.onRemove&&this.props.onRemove({type:"remove",target:this}):this.setState({selecting:!0})},handleCancel:function(e){this.setState({selecting:!1})},handleSelect:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,selection:e.selection}),this.setState({selecting:!1})}})},function(e,t,n){"use strict";function r(e){if("columns-1"===e.theme.mode)return null;var t,n=e.locale.translate;e.showHints&&(t=["story-drop-files-here","story-paste-image-here"]);var r=i.map(t,function(e,t){var r={animationDelay:10*t+"s"};return o.createElement("div",{key:t,className:"message",style:r},n(e))});return o.createElement("div",{className:"media-placeholder"},r)}var i=n(5),o=n(4),s=o.PropTypes,a=n(18),c=n(19);e.exports=r,n(792),r.propTypes={showHints:s.bool,locale:s.instanceOf(a).isRequired,theme:s.instanceOf(c).isRequired}},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(77),a=n(18),c=n(45),l=n(107),u=n(136),d=n(132);n(793),e.exports=i.createClass({displayName:"MediaToolbar",propTypes:{story:o.object.isRequired,capturing:o.oneOf(["image","video","audio"]),locale:o.instanceOf(a).isRequired,onAction:o.func},getInitialState:function(){return{hasCamera:s.hasDevice("videoinput"),hasMicrophone:s.hasDevice("audioinput")}},getResourceCounts:function(){var e={photo:0,video:0,audio:0,file:0},t=r.get(this.props.story,"details.resources");return r.each(t,function(t){if(t.imported)e.file++;else switch(t.type){case"image":e.photo++;break;case"video":e.video++;break;case"audio":e.audio++}}),e},render:function(){var e=this.props.locale.translate,t=this.getResourceCounts(),n=this.state.hasCamera&&l.isAvailable(),r=this.state.hasCamera&&u.isAvailable(),o=this.state.hasMicrophone&&d.isAvailable(),s={label:e("story-photo"),icon:"camera",hidden:!t.photo&&!n,disabled:!n,highlighted:t.photo>0||"image"===this.props.capturing,onClick:this.handlePhotoClick},a={label:e("story-video"),icon:"video-camera",hidden:!t.video&&!r,disabled:!r,highlighted:t.video>0||"video"===this.props.capturing,onClick:this.handleVideoClick},p={label:e("story-audio"),icon:"microphone",hidden:!t.audio&&!o,disabled:!o,highlighted:t.audio>0||"audio"===this.props.capturing,onClick:this.handleAudioClick},h={label:e("story-file"),icon:"file-photo-o",multiple:!0,highlighted:t.file>0,onChange:this.handleFileSelect};return i.createElement("div",{className:"media-toolbar"},i.createElement(c,s),i.createElement(c,a),i.createElement(c,p),i.createElement(c.File,h))},componentDidMount:function(){s.addEventListener("change",this.handleDeviceChange)},componentWillUnmount:function(){s.removeEventListener("change",this.handleDeviceChange)},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(r.extend({type:"action",target:this,action:e},t))},handlePhotoClick:function(e){this.triggerActionEvent("photo-capture")},handleVideoClick:function(e){this.triggerActionEvent("video-capture")},handleAudioClick:function(e){this.triggerActionEvent("audio-capture")},handleFileSelect:function(e){var t=e.target.files;r.isEmpty(t)||this.triggerActionEvent("file-import",{files:t})},handleDeviceChange:function(e){this.setState({hasCamera:s.hasDevice("videoinput"),hasMicrophone:s.hasDevice("audioinput")})}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(77),a=n(18),c=n(45),l=n(107),u=n(136),d=n(132);n(800),e.exports=i.createClass({displayName:"ReactionMediaToolbar",propTypes:{reaction:o.object.isRequired,capturing:o.oneOf(["image","video","audio"]),locale:o.instanceOf(a).isRequired,onAction:o.func},getInitialState:function(){return{hasCamera:s.hasDevice("videoinput"),hasMicrophone:s.hasDevice("audioinput")}},getResourceCounts:function(){var e={photo:0,video:0,audio:0,file:0},t=r.get(this.props.reaction,"details.resources");return r.each(t,function(t){if(t.imported)e.file++;else switch(t.type){case"image":e.photo++;break;case"video":e.video++;break;case"audio":e.audio++}}),e},render:function(){var e=this.props.locale.translate,t=this.getResourceCounts(),n=this.state.hasCamera&&l.isAvailable(),o=this.state.hasCamera&&u.isAvailable(),s=this.state.hasMicrophone&&d.isAvailable(),a={tooltip:e("story-photo"),icon:"camera",hidden:!t.photo&&!n,disabled:!n,highlighted:t.photo>0||"image"===this.props.capturing,onClick:this.handlePhotoClick},p={tooltip:e("story-video"),icon:"video-camera",hidden:!t.video&&!o,disabled:!o,highlighted:t.video>0||"video"===this.props.capturing,onClick:this.handleVideoClick},h={tooltip:e("story-audio"),icon:"microphone",hidden:!t.audio&&!s,disabled:!s,highlighted:t.audio>0||"audio"===this.props.capturing,onClick:this.handleAudioClick},f={tooltip:e("story-file"),icon:"file-photo-o",multiple:!0,highlighted:t.file>0,onChange:this.handleFileSelect},m=r.get(this.state.draft,"details.markdown",!1),g={tooltip:e("story-markdown"),icon:"pencil-square",highlighted:m,onClick:this.handleMarkdownClick};return i.createElement("div",{className:"reaction-media-toolbar"},i.createElement(c,a),i.createElement(c,p),i.createElement(c,h),i.createElement(c.File,f),i.createElement(c,g))},componentDidMount:function(){s.addEventListener("change",this.handleDeviceChange)},componentWillUnmount:function(){s.removeEventListener("change",this.handleDeviceChange)},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(r.extend({type:"action",target:this,action:e},t))},handlePhotoClick:function(e){this.triggerActionEvent("photo-capture")},handleVideoClick:function(e){this.triggerActionEvent("video-capture")},handleAudioClick:function(e){this.triggerActionEvent("audio-capture")},handleFileSelect:function(e){var t=e.target.files;r.isEmpty(t)||this.triggerActionEvent("file-import",{files:t})},handleMarkdownClick:function(e){var t=this.props.reaction,n=!t.details.markdown;this.triggerActionEvent("markdown-set",{value:n})},handleDeviceChange:function(e){this.setState({hasCamera:s.hasDevice("videoinput"),hasMicrophone:s.hasDevice("audioinput")})}})},function(e,t,n){"use strict";function r(e){var t,n=e.locale.translate;if(s.isActuallyPublished(e.reaction)){var r=e.status;t=r?n("reaction-status-"+r.action):i.createElement(c,{time:e.reaction.ptime,locale:e.locale})}else t=n("reaction-status-storage-pending");return i.createElement("span",{className:"reaction-progress"},t)}var i=n(4),o=i.PropTypes,s=n(219),a=n(18),c=n(93);e.exports=r,n(801),r.propTypes={status:o.object,reaction:o.object.isRequired,locale:o.instanceOf(a).isRequired}},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(19),c=n(45);n(802),e.exports=i.createClass({displayName:"ReactionToolbar",propTypes:{access:o.oneOf(["read-only","read-comment","read-write"]),currentUser:o.object,reactions:o.arrayOf(o.object),respondents:o.arrayOf(o.object),addingComment:o.bool,locale:o.instanceOf(s),theme:o.instanceOf(a),onAction:o.func},getCurrentUserLike:function(){return r.find(this.props.reactions,{type:"like",user_id:r.get(this.props.currentUser,"id")})},getCurrentUserComments:function(){var e=r.get(this.props.currentUser,"id");return r.filter(this.props.reactions,function(t){if(t.user_id===e&&("comment"===t.type||"note"===t.type))return!0})},render:function(){var e=this.props.locale.translate,t=this.props.access,n="read-comment"===t||"read-write"===t,o={icon:"thumbs-up",label:e("story-like"),hidden:!n,highlighted:!!this.getCurrentUserLike(),onClick:this.handleLikeClick},s={icon:"comment",label:e("story-comment"),hidden:!n,highlighted:!r.isEmpty(this.getCurrentUserComments())||this.props.addingComment,onClick:this.handleCommentClick},a={className:"show-btn",hidden:!0,label:e("story-$count-user-reacted-to-story",r.size(this.props.respondents)),onClick:this.handleShowClick};return"columns-1"===this.props.theme.mode&&(this.state.commentsExpanded||r.isEmpty(this.props.reactions)||(a.hidden=!1)),i.createElement("div",null,i.createElement(c,o),i.createElement(c,s),i.createElement(c,a))},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(r.extend({type:"action",target:this,action:e},t))},handleLikeClick:function(e){var t=this.getCurrentUserLike();t?this.triggerActionEvent("like-remove",{like:t}):this.triggerActionEvent("like-add")},handleCommentClick:function(e){this.triggerActionEvent("reaction-add")},handleShowClick:function(e){this.triggerActionEvent("reaction-expand")}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4),s=o.PropTypes,a=n(30),c=n(34),l=n(22),u=n(23),d=n(18),p=n(19),h=(n(21),n(356));n(803),e.exports=a.createClass({displayName:"RoleFilterBar",propTypes:{settings:s.object.isRequired,database:s.instanceOf(l).isRequired,route:s.instanceOf(u).isRequired,locale:s.instanceOf(d).isRequired,theme:s.instanceOf(p).isRequired},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),r={roles:null,users:null,project:null,settings:this.props.settings,locale:this.props.locale,route:this.props.route,theme:this.props.theme};return e.show(o.createElement(f,r),1e3),n.start().then(function(e){var r={name:t.schema};return n.findOne({schema:"global",table:"project",criteria:r})}).then(function(e){r.project=e}).then(function(){var e={id:r.project.user_ids};return n.find({schema:"global",table:"user",criteria:e})}).then(function(e){r.users=e}).then(function(){var e=i.flatten(i.map(r.users,"role_ids")),t={id:i.uniq(e)};return n.find({schema:"global",table:"role",criteria:t})}).then(function(e){return r.roles=e,o.createElement(f,r)})}});var f=e.exports.Sync=o.createClass({displayName:"RoleFilterBar.Sync",propTypes:{settings:s.object.isRequired,project:s.object,roles:s.arrayOf(s.object),users:s.arrayOf(s.object),route:s.instanceOf(u).isRequired,locale:s.instanceOf(d).isRequired,theme:s.instanceOf(p).isRequired},render:function(){return o.createElement("div",{className:"role-filter-bar"},this.renderButtons())},renderButtons:function(){var e=this.props.roles;if(i.isEmpty(e)){var t={role:null!==e?null:void 0,locale:this.props.locale,theme:this.props.theme};return o.createElement(h,t)}return i.map(e,this.renderButton)},renderButton:function(e){var t=m(this.props.users,e),n=this.props.route,s=n.parameters.roles,a=i.clone(this.props.settings.route.parameters);i.includes(s,e.id)?a.roles=i.without(s,e.id):a.roles=i.concat(s,e.id);var c=n.find(n.component,a),l={role:e,users:t,url:c,locale:this.props.locale,theme:this.props.theme,selected:i.includes(s,e.id),onRoleClick:this.handleRoleClick};return o.createElement(h,r({key:e.id},l))}}),m=c(function(e,t){return i.filter(e,function(e){return i.includes(e.role_ids,t.id)})})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(19),c=n(46);n(804),e.exports=i.createClass({displayName:"RoleFilterButton",propTypes:{role:o.object,users:o.arrayOf(o.object),selected:o.bool,url:o.string,locale:o.instanceOf(s).isRequired,theme:o.instanceOf(a).isRequired},render:function(){var e="role-filter-button";return this.props.selected&&(e+=" selected"),this.props.role||(e+=" no-roles"),i.createElement("a",{className:e,href:this.props.url},i.createElement("div",{className:"contents"},this.renderImageRow(0,4),this.renderImageRow(0,0),this.renderImageRow(4,4),this.renderTitle()))},renderImageRow:function(e,t){var n=r.filter(this.props.users,function(e){return r.some(e.details.resources,{type:"image"})});return n=r.slice(n,e,t),i.createElement("div",{className:"row"},r.map(n,this.renderProfileImage))},renderProfileImage:function(e,t){return i.createElement(c,{key:t,user:e,size:"medium",theme:this.props.theme})},renderTitle:function(){if(!this.props.role)return this.renderMessage();var e=this.props.locale.pick,t=this.props.role;return i.createElement("div",{className:"band"},i.createElement("div",{className:"title"},e(t.details.title)||t.name,this.renderUserCount()))},renderMessage:function(){if(void 0===this.props.role)return null;var e=this.props.locale.translate;return i.createElement("div",{className:"message"},e("role-filter-no-roles"))},renderUserCount:function(){if(!this.props.users)return null;var e=this.props.users.length;return i.createElement("div",{className:"user-count"},i.createElement("i",{className:"fa fa-male"}),i.createElement("span",{className:"number"},e))}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e=u.replace(e,/\+/g,""),e=u.replace(e,/\s+/g," "),u.split(e).join(" ")}function o(e){return u.map(v.findTags(e),u.toLower)}function s(e){var t;return u.some(e,function(e){if(void 0===t)t=e.offsetTop;else if(e.offsetTop>t)return!0})}function a(e){var t=u.transform(e,function(e,t){u.assign(e,t.details)},{}),n={},r={};u.each(t,function(e,t){u.each(e,function(e,i){var o;if(o=t===m.today?4:t===m.yesterday?2:t>=m.oneWeekAgo?1:t>=m.twoWeeksAgo?.5:.25,/^#/.test(i)){var s=e*o;n[i]=(n[i]||0)+s,r[i]=(r[i]||0)+e}})});var i={},o={};u.each(n,function(e,t){var n=u.toLower(t),r=i[n];r||(r=i[n]=[]),r.push(t),o[n]=(o[n]||0)+e});var s={};u.each(o,function(e,t){var n=i[t];n.length>1&&(n=u.orderBy(n,function(e){return r[e]},"desc"));var o=n[0];s[o]=e});var a=u.transform(s,function(e,t,n){e.push({name:n,score:t})},[]);return u.sortBy(a,"name")}var c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(5),d=n(4),p=d.PropTypes,h=n(30),f=n(33),m=n(53),g=n(78),v=n(149),y=n(22),b=n(23),x=n(18);n(21);n(806),e.exports=h.createClass({displayName:"SearchBar",propTypes:{settings:p.object.isRequired,database:p.instanceOf(y),route:p.instanceOf(b),locale:p.instanceOf(x)},renderAsync:function(e){var t=this,n=this.props.route.parameters,r=this.props.database.use({schema:n.schema,by:this}),i={dailyActivities:null,settings:this.props.settings,route:this.props.route,locale:this.props.locale};return e.show(d.createElement(w,i),1e3),r.start().then(function(e){var n=m.startOfLastMonth,i=m.endOfMonth,o=g.getMonthRanges(n,i),s=g.getTimeZoneOffset(),a=t.props.settings.statistics,c={type:a.type,filters:u.map(o,function(e){return u.extend({time_range:e,tz_offset:s},a.filters)})};return r.find({table:"statistics",criteria:c})}).then(function(e){return i.dailyActivities=e,d.createElement(w,i)})}});var w=e.exports.Sync=d.createClass((c={displayName:"SearchBar.Sync",propTypes:{settings:p.object.isRequired,dailyActivities:p.arrayOf(p.object),route:p.instanceOf(b),locale:p.instanceOf(x)},getInitialState:function(){this.components=f({tags:HTMLDivElement});var e=this.props.route,t=e.query.search||"";return{keywords:t,hashTags:[],selectedHashTags:o(t)}},componentWillReceiveProps:function(e){if(this.props.route!==e.route){var t=e.route,n=this.state.keywords,r=t.query.search||"";u.isEqual(i(n),i(r))||this.setState({keywords:r,selectedHashTags:o(r)})}if(this.props.dailyActivities!==e.dailyActivities){var s=a(e.dailyActivities);this.setState({hashTags:s})}},render:function(){return d.createElement("div",{className:"search-bar"},this.renderTextInput(),this.renderHashTags())},renderTextInput:function(){var e=this.props.locale.translate,t={type:"text",value:this.state.keywords,placeholder:e("search-bar-keywords"),onChange:this.handleTextChange,onKeyDown:this.handleKeyDown};return d.createElement("div",{className:"text-input"},d.createElement("input",t))},renderHashTags:function(){var e=this.components.setters;return d.createElement("div",{ref:e.tags,className:"tags"},u.map(this.state.hashTags,this.renderHashTag))},renderHashTag:function(e,t){var n=this.props.route,r=u.clone(this.props.settings.route.parameters);r.search=e.name;var i=n.find(n.component,r),o={className:"tag",onClick:this.handleHashTagClick,"data-tag":e.name,href:i};return u.includes(this.state.selectedHashTags,u.toLower(e.name))&&(o.className+=" selected"),d.createElement("a",l({key:t},o),e.name)},componentDidMount:function(){window.addEventListener("resize",this.handleWindowResize)},componentDidUpdate:function(){this.hideUnpopularTags()}},r(c,"componentDidMount",function(){window.addEventListener("resize",this.handleWindowResize)}),r(c,"hideUnpopularTags",function(){var e=this.components.tags;if(e){var t={};u.each(e.children,function(e){"none"===e.style.display&&(e.style.display="");var n=e.getAttribute("data-tag");t[n]=e});for(var n=u.sortBy(this.state.hashTags,"score");s(t);){var r=n.shift();if(!r)break;var i=t[r.name];delete t[r.name],i.style.display="none"}}}),r(c,"performSearch",function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var e=this.props.route,t=u.clone(e.parameters);t.search=i(this.state.keywords),e.push(e.component,t)}),r(c,"handleTextChange",function(e){var t=e.target.value,n=o(t);this.setState({keywords:t,selectedHashTags:n}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.performSearch,800)}),r(c,"handleKeyDown",function(e){13===e.keyCode&&this.performSearch()}),r(c,"handleHashTagClick",function(e){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}),r(c,"handleWindowResize",function(e){this.hideUnpopularTags()}),c))},function(e,t,n){"use strict";function r(e){var t=e.story.type,n="story-emblem";if(!i.includes(a.git,t))return null;n+=" git";var r=a.icons[t];if("issue"===t){var s=e.story.details.state;r=a.icons[t+"."+s]}return r?o.createElement("div",{className:n},o.createElement(r,{className:t})):null}var i=n(5),o=n(4),s=o.PropTypes,a=n(146);e.exports=r,n(808),r.propTypes={story:s.object.isRequired}},function(e,t,n){"use strict";function r(e){var t,n=e.locale.translate;if(s.isActuallyPublished(e.story)){var r=e.status;t=r?n("story-status-"+r.action+"-$progress",r.progress):i.createElement(c,{time:e.story.ptime,locale:e.locale})}else t=n("story-status-storage-pending");return i.createElement("span",{className:"story-progress"},t)}var i=n(4),o=i.PropTypes,s=n(147),a=n(18),c=n(93);e.exports=r,n(809),r.propTypes={status:o.object,story:o.object.isRequired,locale:o.instanceOf(a).isRequired}},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(45);n(811),e.exports=i.createClass({displayName:"TextToolbar",propTypes:{story:o.object.isRequired,locale:o.instanceOf(s).isRequired,onAction:o.func},render:function(){var e=this.props.locale.translate,t=this.props.story,n={label:e("story-markdown"),icon:"pencil-square",highlighted:t.details.markdown,onClick:this.handleMarkdownClick},r={label:e("story-task-list"),icon:"list-ol",highlighted:"task-list"===t.type,onClick:this.handleTaskListClick},o={label:e("story-survey"),icon:"list-ul",highlighted:"survey"===t.type,onClick:this.handleSurveyClick};return i.createElement("div",{className:"text-toolbar"},i.createElement(a,n),i.createElement(a,r),i.createElement(a,o))},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(r.extend({type:"action",target:this,action:e},t))},handleMarkdownClick:function(e){var t=this.props.story,n=!t.details.markdown;this.triggerActionEvent("markdown-set",{value:n})},handleTaskListClick:function(e){var t=this.props.story,n="task-list"!==t.type?"task-list":"post";this.triggerActionEvent("story-type-set",{value:n})},handleSurveyClick:function(e){var t=this.props.story,n="survey"!==t.type?"survey":"post";this.triggerActionEvent("story-type-set",{value:n})}})},function(e,t,n){"use strict";function r(e){var t="button",n=e.onClick;return e.className&&(t+=" "+e.className),e.active&&(t+=" active"),e.url||(t+=" disabled",n=null),s.createElement(h,{className:t,href:e.url,onClick:n},s.createElement("i",{className:"fa fa-"+e.icon}))}function i(e){if(e.uploading){var t=e.locale.translate,n=o.fileSize(e.uploading.bytes),r=e.uploading.files,i=t("upload-progress-uploading-$count-files-$size-remaining",r,n);return s.createElement("span",{className:"connection",title:i},s.createElement("i",{className:"fa fa-refresh fa-spin"}),s.createElement("i",{className:"fa fa-arrow-up"}))}return e.searching?s.createElement("span",{className:"connection"},s.createElement("i",{className:"fa fa-refresh fa-spin"})):e.hasConnection?null:s.createElement("span",{className:"connection"},s.createElement("i",{className:"fa fa-wifi"}),s.createElement("i",{className:"fa fa-ban"}))}var o=n(5),s=n(4),a=s.PropTypes,c=n(22),l=n(32),u=n(23),d=n(18),p=n(19),h=n(109),f=n(151),m=n(346),g=n(355),v=n(357);n(812),e.exports=s.createClass({displayName:"TopNavigation",propTypes:{settings:a.object.isRequired,hasConnection:a.bool,searching:a.bool,database:a.instanceOf(c).isRequired,payloads:a.instanceOf(l).isRequired,route:a.instanceOf(u).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(p).isRequired},getInitialState:function(){return{height:o.get(this.props.settings,"navigation.top",!0)?"auto":0}},isHidden:function(e){return e||(e=this.props.settings),!o.get(e,"navigation.top",!0)},getSelectedControl:function(e){e||(e=this.props.route);var t=e.parameters;return void 0!=t.search?"search":void 0!=t.date?"calendar":void 0!=t.roles?"filter":null},getControlURL:function(e){var t=this.getSelectedControl(),n=o.get(this.props.settings,e);if(!n)return null;var r=o.clone(n.route.parameters);if(e!==t)switch(e){case"search":r.search="";break;case"calendar":r.date="";break;case"filter":r.roles=[]}return this.props.route.find(this.props.route.component,r)},componentWillReceiveProps:function(e){var t=this,n=this.isHidden(),r=this.isHidden(e.settings);if(n!==r){var i=this.refs.container,o=i.offsetHeight;r?(this.setState({height:o}),setTimeout(function(){t.isHidden()&&t.setState({height:0})},0)):(this.setState({height:o}),setTimeout(function(){t.isHidden()||t.setState({height:"auto"})},1e3))}},render:function(){var e={height:this.state.height};return s.createElement("header",{className:"top-navigation",style:e},s.createElement("div",{ref:"container",className:"container"},this.renderButtonBar(),this.renderCollapsibleControl()))},renderButtonBar:function(){var e=this.getSelectedControl(),t={icon:"calendar",className:"calendar-btn",url:this.getControlURL("calendar"),active:"calendar"===e,onClick:this.handleButtonClick},n={icon:"filter",className:"filter-btn",url:this.getControlURL("filter"),active:"filter"===e,onClick:this.handleButtonClick},o={icon:"search",className:"search-btn",url:this.getControlURL("search"),active:"search"===e,onClick:this.handleButtonClick},a={locale:this.props.locale,uploading:this.props.payloads.uploading,searching:this.props.searching,hasConnection:this.props.hasConnection};return s.createElement("div",null,s.createElement(r,t),s.createElement(r,n),s.createElement(r,o),s.createElement(i,a))},renderCollapsibleControl:function(){var e=this.getSelectedControl();return s.createElement(f,{open:!!e},this.renderControl())},renderControl:function(){switch(this.getSelectedControl()){case"calendar":return this.renderCalendarBar();case"filter":return this.renderRoleFilterBar();case"search":return this.renderSearchBar()}},renderCalendarBar:function(){var e={settings:this.props.settings.calendar,database:this.props.database,route:this.props.route,locale:this.props.locale};return s.createElement(m,e)},renderRoleFilterBar:function(){var e={settings:this.props.settings.filter,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return s.createElement(g,e)},renderSearchBar:function(){var e={settings:this.props.settings.search,database:this.props.database,route:this.props.route,locale:this.props.locale};return s.createElement(v,e)},handleButtonClick:function(e){}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),o=n(4);o.PropTypes;n(813),e.exports=o.createClass({displayName:"UserSection",propTypes:{},render:function(){var e=["user-section"];return this.props.className&&e.push(this.props.className),o.createElement("div",{className:e.join(" ")},this.renderPart("header"),this.renderPart("subheader"),this.renderPart("body"),this.renderPart("footer"))},renderPart:function(e){var t=o.Children.toArray(this.props.children),n=i.find(t,{type:e});if(!n)return null;var s=o.Children.toArray(n.props.children);return i.isEmpty(s)?null:o.createElement("div",r({className:e},n.props),s)}})},function(e,t,n){"use strict";function r(e,t){return e+"/"+("0000000000"+t).slice(-10)}function i(e,t){return e+"/"+t}var o=n(5),s=n(6),a=n(4),c=a.PropTypes,l=n(110),u=n(21),d=n(54),p=n(59);e.exports=a.createClass({displayName:"IndexedDBCache",mixins:[u],propTypes:{databaseName:c.string.isRequired},statics:{isAvailable:function(){return!!window.indexedDB}},getInitialState:function(){return{database:null,recordCounts:{},writeCount:0,readCount:0,deleteCount:0}},find:function(e){var t=this,n=e.address,i=e.schema,a=e.table,c="local"===i,u=c?"local-data":"remote-data";return this.open().then(function(t){return new s(function(s,d){var p=t.transaction(u,"readonly"),h=c?a:n+"/"+i+"/"+a,f=p.objectStore(u),m=[],g=e.criteria;if(g&&void 0!==g.id&&1===o.size(g)){var v=g.id;if(v instanceof Array)if(o.isEmpty(v))s(m);else{var y=o.max(v),b=o.min(v),x=r(h,y),w=r(h,b),k=IDBKeyRange.bound(w,x),C=f.openCursor(k);C.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,r=n.data;if(o.includes(v,r.id)){var i=o.sortedIndexBy(m,r,"id");m.splice(i,0,r)}t.continue()}else s(m)},C.onerror=function(e){s(m)}}else{var E=r(h,v),C=f.get(E);C.onsuccess=function(e){var t=e.target.result;t&&m.push(t.data),s(m)},C.onerror=function(e){s(m)}}}else{var R=f.index("location"),C=R.openCursor(h);C.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,r=n.data;if(l.match(a,r,g)){var i=o.sortedIndexBy(m,r,"id");m.splice(i,0,r)}t.continue()}else s(m)}}})}).then(function(e){var n=t.state.readCount;return n+=e.length,t.setState({readCount:n}),e})},save:function(e,t){var n=this,a=e.address,c=e.schema,l=e.table,u="local"===c,d=u?"local-data":"remote-data";return this.open().then(function(e){return new s(function(n,s){var p=e.transaction(d,"readwrite"),h=u?l:a+"/"+c+"/"+l,f=p.objectStore(d);p.oncomplete=function(e){n(t)},p.onerror=function(e){s(new Error(e.message))},o.each(t,function(e){var t=u?i(h,e.key):r(h,e.id),n={address:a,location:h,data:e};f.put(n,t)})})}).then(function(e){var t=n.state.writeCount;return t+=e.length,n.setState({writeCount:t}),n.updateRecordCount(d,500),e})},remove:function(e,t){var n=this,a=e.address,c=e.schema,l=e.table,u="local"===c,d=u?"local-data":"remote-data";return this.open().then(function(e){return new s(function(n,s){var p=e.transaction(d,"readwrite"),h=u?l:a+"/"+c+"/"+l,f=p.objectStore(d);p.oncomplete=function(e){n(t)},p.onerror=function(e){s(new Error(e.message))},o.each(t,function(e){var t=u?i(h,e.key):r(h,e.id);f.delete(t)})})}).then(function(e){var t=n.state.deleteCount;return t+=e.length,n.setState({deleteCount:t}),n.updateRecordCount(d,500),e})},clean:function(e){var t=this;return this.open().then(function(t){return new s(function(n,r){var i=t.transaction("remote-data","readwrite"),o=i.objectStore("remote-data");if(void 0!==e.address){var s=o.index("address"),a=s.openCursor(e.address),c=0;a.onsuccess=function(e){var t=e.target.result;t?(c++,t.delete(),t.continue()):n(c)}}else if(void 0!==e.count){var s=o.index("rtime"),a=s.openCursor(),c=0;a.onsuccess=function(t){var r=t.target.result;r?(c++,r.delete(),c<e.count?r.continue():n(c)):n(c)}}else if(void 0!==e.before){var s=o.index("rtime"),a=s.openCursor(),c=0;a.onsuccess=function(t){var r=t.target.result;if(r){r.value.data.rtime<e.before?(c++,r.delete(),r.continue()):n(c)}else n(c)}}})}).then(function(e){if(e>0){var n=t.state.deleteCount;n+=e,t.setState({deleteCount:n}),t.updateRecordCount("remote-data",500)}return e})},open:function(){var e=this;return this.databasePromise||(this.databasePromise=new s(function(t,n){var r=window.indexedDB.open(e.props.databaseName,1);r.onsuccess=function(n){var r=n.target.result;t(r),e.setState({database:r})},r.onerror=function(e){n(new Error(e.message))},r.onupgradeneeded=function(e){var t=e.target.result;t.onerror=function(e){n(new Error(e.message))},t.createObjectStore("local-data").createIndex("location","location",{unique:!1});var r=t.createObjectStore("remote-data");r.createIndex("location","location",{unique:!1}),r.createIndex("address","address",{unique:!1}),r.createIndex("rtime","data.rtime",{unique:!1})}})),this.databasePromise},updateRecordCount:function(e,t){var n=this,r="updateRecordCountTimeouts."+e,i=o.get(this,r);i&&clearTimeout(i),i=setTimeout(function(){n.open().then(function(t){t.transaction(e,"readonly").objectStore(e).count().onsuccess=function(t){var r=o.clone(n.state.recordCounts);r[e]=t.target.result,n.setState({recordCounts:r})}}).catch(function(e){}),o.set(n,r,0)},t||0),o.set(this,r,i)},componentDidMount:function(){this.updateRecordCount("remote-data"),this.updateRecordCount("local-data")},render:function(){var e=this.state.database,t=o.get(this.state.recordCounts,"local-data"),n=o.get(this.state.recordCounts,"remote-data");return a.createElement(d,{type:"indexed-db-cache"},a.createElement(p,{label:"Database details"},a.createElement("div",null,"Name: ",e?e.name:""),a.createElement("div",null,"Version: ",e?e.version:"")),a.createElement(p,{label:"Usage"},a.createElement("div",null,"Local objects: ",t),a.createElement("div",null,"Remote objects: ",n),a.createElement("div",null,"Objects read: ",this.state.readCount),a.createElement("div",null,"Objects written: ",this.state.writeCount),a.createElement("div",null,"Objects deleted: ",this.state.deleteCount)))}})},function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return null}}function i(e,t){var n=a.sortedIndexBy(e,{id:t},"id"),r=e[n];if(r&&r.id===t)return r}function o(e,t){var n=a.sortedIndexBy(e,t,"id"),r=e[n];r&&r.id===t.id?e[n]=t:e.splice(n,0,t)}function s(e,t){var n=a.sortedIndexBy(e,t,"id"),r=e[n];r&&r.id===t.id&&e.splice(n,1)}var a=n(5),c=n(6),l=n(4),u=l.PropTypes,d=n(110);e.exports=l.createClass({displayName:"LocalStorageCache",propTypes:{databaseName:u.string.isRequired},statics:{isAvailable:function(){return!!window.localStorage}},getInitialState:function(){var e=localStorage.getItem(this.props.databaseName);return this.localData=r(e)||{},this.remoteData={},{}},getRows:function(e,t,n){var r="local"===t?this.localData:this.remoteData,i=[e,t,n],o=a.get(r,i);return o||(o=[],a.set(r,i,o)),o},saveRows:function(e,t,n){if("local"===t){var r=JSON.stringify(this.localData);localStorage.setItem(this.props.databaseName,r)}},find:function(e){var t,n=e.server||"",r=e.schema,o=e.table,s=e.criteria,l=this.getRows(n,r,o);if(s&&void 0!==s.id&&1===a.size(s)){var u=s.id;u instanceof Array||(u=[u]),t=a.filter(a.map(u,function(e){return i(l,e)}))}else t=a.filter(l,function(e){return d.match(o,e,s)});return c.resolve(t)},save:function(e,t){var n=e.server||"",r=e.schema,i=e.table,s=this.getRows(n,r,i);return a.each(t,function(e){o(s,a.cloneDeep(e))}),this.saveRows(n,r,i),c.resolve(t)},remove:function(e,t){var n=e.server||"",r=e.schema,i=e.table,o=this.getRows(n,r,i);return a.each(t,function(e){s(o,e)}),this.saveRows(n,r,i),c.resolve(t)},clean:function(e){var t=this.remoteData,n=0;if(void 0!==e.server){var r=e.server,i=a.get(t,r);a.each(i,function(e){a.each(e,function(e){n+=e.length})}),a.set(t,r,void 0)}else if(void 0!==e.count){var o=[];a.each(t,function(e){a.each(e,function(e){a.each(e,function(e){for(var t=0;t<e.length;t++)o.push(e[t])})})}),o.sort(function(e,t){return e.rtime<t.rtime?-1:e.rtime>t.rtime?1:0}),o.splice(e.count),a.each(t,function(e){a.each(e,function(e){a.each(e,function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];-1!==o.indexOf(r)&&(e.splice(t,1),n++)}})})})}else void 0!==e.before&&a.each(t,function(t){a.each(t,function(t){a.each(t,function(t){for(var r=t.length-1;r>=0;r--){t[r].rtime<e.before&&(t.splice(r,1),n++)}})})});return c.resolve(n)},render:function(){return l.createElement("div",null)}})},function(e,t,n){"use strict";function r(e,t,n){var r=[];return k.each(e,function(e,i){var o=t[i],s=k.sortedIndexBy(n,{id:e},"id"),a=n?n[s]:null;a&&a.id===e&&a.gn===o||r.push(e)}),r}function i(e,t,n){var r=[];return k.each(n,function(t){k.includes(e,t.id)||r.push(t.id)}),r}function o(e,t){return k.isEmpty(t)?e:(e=k.slice(e),k.each(t,function(t){var n=k.sortedIndexBy(e,{id:t},"id"),r=e?e[n]:null;r&&r.id===t&&e.splice(n,1)}),e)}function s(e,t){var n=[];return k.each(t,function(t){var r=k.sortedIndexBy(e,{id:t},"id"),i=e[r];i&&i.id===t&&n.push(i)}),n}function a(e,t){return e=k.slice(e),k.each(t,function(t){var n=k.sortedIndexBy(e,t,"id"),r=e[n];r&&r.id===t.id?e[n]=t:e.splice(n,0,t)}),e}function c(){return(new Date).toISOString()}function l(e,t){if(!e)return 1/0;if(!t)return 0;var n="string"==typeof e?new Date(e):e;return("string"==typeof t?new Date(t):t)-n}function u(e){return"local"===e.schema?k.pick(e,"schema","table"):k.pick(e,"address","schema","table")}function d(e){return k.pick(e,"address","schema","table","criteria","minimum","expected","remote","committed")}function p(e,t){t||(t="primary");var n=k.find(j,{address:e,type:t});return n||(n={address:e,type:t},j.push(n)),n}function h(e){return k.filter(j,e)}function f(e){k.pull(j,e)}function m(e,t){return"local"===e.schema||!e.dirty&&!(.001*l(e.finish,new Date)>t)}function g(e){var t=e.minimum;return void 0===t&&(t=b(e)),void 0===t&&(t=1),!(e.results.length<t)}function v(e){var t=b(e);return!(e.results.length<t)}function y(e,t){if("local"===e.schema)return!0;var n=k.map(e.results,"rtime"),r=k.min(n);return!(r<P)&&(!(.001*l(r,new Date)>t)&&(e.finish=r,!0))}function b(e){return"number"==typeof e.expected?e.expected:e.criteria?x(e.criteria,"id")||x(e.criteria,"filters"):void 0}function x(e,t){var n=e[t];if(void 0!=n)return n instanceof Array?n.length:1}function w(){var e=_+1e-9;return _=e,e}var k=n(5),C=n(6),E=n(4),R=E.PropTypes,S=n(7),N=n(91),O=n(76),T=n(110),P=n(367);e.exports=E.createClass({displayName:"RemoteDataSource",propTypes:{refreshInterval:R.number,basePath:R.string,discoveryFlags:R.object,retrievalFlags:R.object,hasConnection:R.bool,inForeground:R.bool,cache:R.object,onChange:R.func,onSearch:R.func,onAuthorization:R.func,onExpiration:R.func,onViolation:R.func,onStupefaction:R.func},getDefaultProps:function(){return{refreshInterval:900,basePath:"",hasConnection:!0,inForeground:!0}},getInitialState:function(){this.searching=!1;var e={recentSearchResults:[],recentStorageResults:[],recentRemovalResults:[],changeQueue:[],activeSearches:[]};return k.assign(this,e),e},updateList:function(e,t){var n=this[e],r=t(n);this[e]=r;var i={};i[e]=r,this.setState(i)},isOnline:function(){return this.props.hasConnection},beginSession:function(e,t){var n=this,r=e.address,i=p(r);if(!i.promise){var o=r+"/session/",s={responseType:"json",contentType:"json"};i.promise=N.fetch("POST",o,{area:t},s).then(function(e){if(k.assign(i,e.session),i.handle)return{system:e.system,servers:e.servers};throw new O(i.error)}).catch(function(e){throw i.promise=null,setTimeout(n.triggerChangeEvent,5e3),e})}return i.promise},checkSession:function(e){var t=this,n=e.address,r=p(n),i=r.handle;if(!i)return C.resolve(!1);var o=n+"/session/",s={responseType:"json"};return N.fetch("GET",o,{handle:i},s).then(function(e){if(k.assign(r,e.session),r.token)return t.triggerAuthorizationEvent(r),!0;if(r.error)throw new O(r.error);return!1}).catch(function(e){throw r.promise=null,t.triggerChangeEvent(),e})},submitPassword:function(e,t,n){var r=this,i=e.address,o=p(i),s=o.handle;if(!s)return C.resolve(!1);var a=i+"/session/htpasswd/",c={handle:s,username:t,password:n},l={responseType:"json",contentType:"json"};return N.fetch("POST",a,c,l).then(function(e){if(k.assign(o,e.session),o.token)return r.triggerAuthorizationEvent(o),null;throw new O(o.error)}).catch(function(e){throw 401!==e.statusCode&&(o.promise=null,r.triggerChangeEvent()),e})},endSession:function(e){var t=this,n=e.address,r=p(n),i=r.handle;return i?C.resolve(r.promise).then(function(){var e=n+"/session/",o={responseType:"json",contentType:"json"};return N.fetch("DELETE",e,{handle:i},o).then(function(){return f(r),t.clearRecentSearches(n),t.clearCachedObjects(n),null})}):C.resolve(!1)},beginMobileSession:function(e,t){var n=e.address,r=p(n,"mobile");if(!r.promise){var i=p(n),o=i.handle,s=n+"/session/",a={responseType:"json",contentType:"json"};r.promise=N.fetch("POST",s,{area:t,handle:o},a).then(function(e){if(k.assign(r,e.session),r.handle)return r.handle;throw O(r.error)}).catch(function(e){throw r.promise=null,e})}return r.promise},acquireMobileSession:function(e,t){var n=this,r=e.address,i=p(r);if(!i.promise){var o=r+"/session/",s={responseType:"json",contentType:"json"};i.promise=N.fetch("GET",o,{handle:t},s).then(function(e){if(i.handle=t,k.assign(i,e.session),i.token)return n.triggerAuthorizationEvent(i),i.user_id;throw new O(i.error)}).catch(function(e){throw i.promise=null,e})}return i.promise},releaseMobileSession:function(e){var t=e.address,n=p(t,"mobile");return n.promise?n.promise.then(function(){f(n)}):C.resolve()},endMobileSession:function(e,t){var n=e.address,r=n+"/session/",i={responseType:"json",contentType:"json"};return N.fetch("DELETE",r,{handle:t},i).then(function(){return null})},getOAuthURL:function(e,t,n){var r=e.address,i=p(r),o=i.handle;if(!o)return"";var s="sid="+t.id+"&handle="+o;return"activation"===n?s+="&activation=1":"test"===n&&(s+="&test=1"),r+"/session/"+t.type+"?"+s},hasAuthorization:function(e){return!!p(e.address).token},restoreSession:function(e){if(S(e.etime)>S()&&e.handle&&e.token){var t=p(e.address);k.assign(t,e)}},start:function(e){return C.resolve().then(function(){if("local"===e.schema)return 0;var t=e.address,n=p(t);if(n.token)return n.user_id;throw new O(401)})},find:function(e){var t=this,n=k.get(e,"by.constructor.displayName"),r=e.required;e=d(e);var i=this.findRecentSearch(e);if(i)n&&(k.includes(i.by,n)||i.by.push(n)),i.promise.isFulfilled()?m(i)||i.updating||this.props.hasConnection&&(i.updating=!0,this.searchRemoteDatabase(i).then(function(e){if(i.updating=!1,e)return t.triggerChangeEvent(),null})):i.promise.isRejected()&&(i.promise=this.searchRemoteDatabase(i).then(function(e){return e?(t.triggerChangeEvent(),null):i.results}));else{i=k.extend({},e,{start:null,finish:null,results:null,promise:null,by:n?[n]:[],dirty:!1,updating:!1});var o=this.searchLocalCache(i).then(function(){return!t.props.hasConnection||!(!v(i)||!y(i,t.props.refreshInterval))}),s=o.then(function(e){return!e&&t.searchRemoteDatabase(i).then(function(e){if(e)return t.triggerChangeEvent(),null})});i.promise=o.then(function(e){return e?i.results:g(i)?i.results:s.then(function(){return i.results})}),this.updateList("recentSearchResults",function(e){var t=k.slice(e);for(t.unshift(i);t.length>256;)t.pop();return t})}return i.promise.then(function(n){if(r&&e.expected&&n.length<e.expected)throw t.triggerStupefactionEvent(e,n),new O(404);return i.committed?i.result:t.applyUncommittedChanges(i)})},save:function(e,t){var n=this,r=c(),i=k.get(e,"by.constructor.displayName");return e=u(e),"local"===e.schema?this.storeLocalObjects(e,t).then(function(t){return n.updateRecentSearchResults(e,t),n.triggerChangeEvent(),t}):this.storeRemoteObjects(e,t).then(function(t){var o=c();return n.updateCachedObjects(e,t),n.updateRecentSearchResults(e,t),n.updateList("recentStorageResults",function(e){var n=k.slice(e);for(n.unshift({start:r,finish:o,duration:l(r,o),results:t,by:i});n.length>32;)n.pop();return n}),t})},remove:function(e,t){var n=this,r=c(),i=k.get(e,"by.constructor.displayName");return e=u(e),"local"===e.schema?this.removeLocalObjects(e,t).then(function(t){return n.removeFromRecentSearchResults(e,t),n.triggerChangeEvent(),t}):(t=k.map(t,function(e){return{id:e.id,deleted:!0}}),this.storeRemoteObjects(e,t).then(function(t){var o=c();return n.removeCachedObjects(e,t),n.removeFromRecentSearchResults(e,t),n.updateList("recentRemovalResults",function(e){var n=k.clone(e);for(n.unshift({start:r,finish:o,duration:l(r,o),results:t,by:i});n.length>32;)n.pop();return n}),t}))},invalidate:function(e,t){var n=this,r=!1;return t?k.forIn(t,function(t,i){var o=k.split(i,"."),s={address:e,schema:o[0],table:o[1]},a=n.getRelevantRecentSearches(s);k.each(a,function(e){var n=!1;b(e)===e.results.length?k.each(t,function(t){var r=k.sortedIndexBy(e.results,{id:t},"id"),i=e.results[r];if(i&&i.id===t)return n=!0,!1}):n=!0,n&&(e.dirty=!0,r=!0)})}):this.updateList("recentSearchResults",function(t){var n=k.slice(t);return k.each(n,function(t){var n=u(t);e&&n.address!==e||(t.dirty=!0,r=!0)}),n}),r&&(this.triggerChangeEvent(),this.props.inForeground&&this.schedulePrefetch(e)),r},clear:function(e,t){this.updateList("recentSearchResults",function(n){return k.filter(n,function(n){return!k.isMatch(n,{address:e,schema:t})})})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerAuthorizationEvent:function(e){this.props.onAuthorization&&this.props.onAuthorization({type:"authorization",target:this,session:e})},triggerExpirationEvent:function(e){this.props.onExpiration&&this.props.onExpiration({type:"expiration",target:this,session:e})},triggerViolationEvent:function(e,t){this.props.onViolation&&this.props.onViolation({type:"violation",target:this,address:e,schema:t})},triggerStupefactionEvent:function(e,t){this.props.onStupefaction&&this.props.onStupefaction({type:"stupefaction",target:this,query:e,results:t})},triggerSearchEvent:function(e){this.props.onSearch&&this.props.onSearch({type:"search",target:this,searching:e})},waitForConnectivity:function(e){return this.props.hasConnection?C.resolve():new C(function(t,n){e.resolve=t,e.reject=n})},findRecentSearch:function(e){var t=k.findIndex(this.recentSearchResults,function(t){var n=d(t);return k.isEqual(e,n)});if(-1!==t){var n=this.recentSearchResults[t];return this.updateList("recentSearchResults",function(e){var r=k.slice(e);return r.splice(t,1),r.unshift(n),r}),n}return null},searchRemoteDatabase:function(e,t){var n=this;if("local"===e.schema)return C.resolve(!1);t||this.updateList("activeSearches",function(t){return k.union(t,[e])});var p=u(e),h=d(e);return e.start=c(),this.discoverRemoteObjects(h).then(function(t){var c=t.ids,l=t.gns,u=r(c,l,e.results),d=i(c,l,e.results);if(!k.isEmpty(d)){var h=s(e.results,d);n.removeCachedObjects(e,h)}if(k.isEmpty(u)){if(k.isEmpty(d))return null;return o(e.results,d)}return n.retrieveRemoteObjects(p,u).then(function(t){var n=t,r=a(e.results,n);return r=o(r,d)})}).then(function(r){r&&(e.results=r,e.promise=C.resolve(r)),e.finish=c(),e.duration=l(e.start,e.finish),e.dirty=!1,t||n.updateList("activeSearches",function(t){return k.without(n.state.activeSearches,e)}),n.updateList("recentSearchResults",function(e){return k.slice(e)});var i=e.finish;return k.each(e.results,function(e){e.rtime=i}),n.updateCachedObjects(p,e.results),!!r})},discoverRemoteObjects:function(e){var t=u(e);return this.performRemoteAction(t,"discovery",e.criteria)},retrieveRemoteObjects:function(e,t){return this.performRemoteAction(e,"retrieval",{ids:t})},storeRemoteObjects:function(e,t){var n=this;try{t=this.mergePreviousChanges(e,t)}catch(e){return C.reject(e)}var r=this.queueChange(e,t);return k.isEmpty(r.deliverables)?C.resolve([]):this.waitForConnectivity(r).then(function(){if(r.canceled)return console.log("canceled"),[];var t=r.deliverables;return r.dispatched=!0,n.performRemoteAction(e,"storage",{objects:t}).then(function(e){return e}).finally(function(){n.removeChange(r)})})},queueChange:function(e,t){var n=k.map(t,function(e){return e.uncommitted||(e=k.clone(e),e.id||(e.id=w()),e.uncomitted=!0),e}),r=k.map(t,function(e){return e.uncomitted&&(e=e.id<1?k.omit(e,"id","uncomitted"):k.omit(e,"uncomitted")),e});r=k.filter(r,function(e){return!(e.deleted&&!e.id)});var i={deliverables:r,placeholders:n,location:e,dispatched:!1,canceled:!1};return this.updateList("changeQueue",function(e){return k.concat(e,i)}),i},mergePreviousChanges:function(e,t){var n=!1;return t=k.slice(t),k.each(this.changeQueue,function(r){k.isEqual(r.location,e)&&k.each(t,function(e,i){var o=k.findIndex(r.placeholders,{id:e.id});if(-1!==o){if(r.dispatched)throw new O(409);t[i]=k.extend(k.clone(r.deliverables[o]),e),r.placeholders.splice(o,1),r.deliverables.splice(o,1),n=!0}})}),n&&this.updateList("changeQueue",function(e){return k.filter(e,function(e){if(0===e.deliverables.length){if(e.canceled=!0,e.resolve){var t=e.resolve;e.resolve=null,e.reject=null,t()}return!1}return!0})}),t},removeChange:function(e){this.updateList("changeQueue",function(t){return k.without(t,e)})},applyUncommittedChanges:function(e){if(k.isEmpty(this.changeQueue))return e.results;var t=k.slice(e.results),n=u(e),r=k.get(this.props.discoveryFlags,"include_deleted");return k.each(this.changeQueue,function(i){k.isEqual(i.location,n)&&k.each(i.placeholders,function(n){var i=k.findIndex(t,{id:n.id});if(-1!==i)if(n.deleted&&!r)t.splice(i,1);else{var o=T.match(e.table,n,e.criteria);o?t[i]=k.extend(k.clone(t[i]),n):t.splice(i,1)}else if(!n.deleted||r){var o=T.match(e.table,n,e.criteria);o&&t.push(n)}})}),t},performRemoteAction:function(e,t,n){var r=this,i=e.address,o=this.props.basePath,s=e.schema,a=e.table;if(!s)return C.reject(new Error("No schema specified"));if(!a)return C.reject(new Error("No table specified"));var c=""+i+o+"/data/"+t+"/"+s+"/"+a+"/",l=p(i);n=k.clone(n)||{},l.token&&(n.token=l.token),"retrieval"===t||"storage"===t?k.assign(n,this.props.retrievalFlags):"discovery"===t&&k.assign(n,this.props.discoveryFlags);var u={contentType:"json",responseType:"json"};return N.fetch("POST",c,n,u).then(function(e){return e}).catch(function(e){throw r.clearRecentSearches(i),r.clearCachedObjects(i),401===e.statusCode?(f(l),r.triggerExpirationEvent(l),r.triggerChangeEvent()):403==e.statusCode&&(r.triggerViolationEvent(i,s),r.triggerChangeEvent()),e})},storeLocalObjects:function(e,t){var n=this.props.cache;return n?n.save(e,t):C.reject(new Error("No local cache"))},removeLocalObjects:function(e,t){var n=this.props.cache;return n?n.remove(e,t):C.reject(new Error("No local cache"))},searchLocalCache:function(e){var t=this.props.cache;if(!t)return C.resolve(!1);d(e);return e.remote||this.cleaningCache?(e.results=[],C.resolve(!0)):t.find(e).then(function(t){return e.results=t,!0}).catch(function(e){return console.error(e),!1})},updateCachedObjects:function(e,t){var n=this.props.cache;return n?n.save(e,t).then(function(e){return!0}).catch(function(e){return console.error(e),!1}):C.resolve(!1)},removeCachedObjects:function(e,t){var n=this.props.cache;return n?n.remove(e,t).then(function(e){return!0}).catch(function(e){return console.error(e),!1}):C.resolve(!1)},clearCachedObjects:function(e){var t=this,n=this.props.cache;return n?(this.cleaningCache=!0,n.clean({address:e}).then(function(){t.cleaningCache=!1,console.log("Cache entries removed")})):C.resolve(0)},updateRecentSearchResults:function(e,t){var n=this.getRelevantRecentSearches(e),r="local"!==e.schema;k.each(n,function(e){var n=!1;k.each(t,function(t){var i;r?i=k.sortedIndexBy(e.results,t,"id"):-1===(i=k.findIndex(e.results,{key:t.key}))&&(i=e.results.length);var o=e.results[i],s=o&&o.id===t.id,a=T.match(e.table,t,e.criteria);a&&(n||(e.results=k.slice(e.results),e.promise=C.resolve(e.results),n=!0),a&&s?e.results[i]=t:a&&!s?e.results.splice(i,0,t):!a&&s&&e.results.splice(i,1))})})},removeFromRecentSearchResults:function(e,t){var n=this.getRelevantRecentSearches(e),r="local"!==e.schema;k.each(n,function(e){var n=!1;k.each(t,function(t){var i;i=r?k.sortedIndexBy(e.results,t,"id"):k.findIndex(e.results,{key:t.key});var o=e.results[i];o&&o.id===t.id&&(n||(e.results=k.slice(e.results),e.promise=C.resolve(e.results),n=!0),e.results.splice(i,1))})})},getRelevantRecentSearches:function(e){return k.filter(this.recentSearchResults,function(t){var n=u(t);if(t.results&&k.isEqual(e,n))return!0})},clearRecentSearches:function(e){this.updateList("recentSearchResults",function(t){return k.filter(t,function(t){return t.address!==e})})},componentWillMount:function(){var e=this;this.sessionCheckTimeout=setInterval(function(){var t=S().add(5,"minute").toISOString(),n=h(function(e){if(e.etime<t)return!0});k.isEmpty(n)||(k.each(n,function(e){e.token||f(e)}),e.triggerChangeEvent())},6e4)},render:function(){return E.createElement("div",null)},componentDidMount:function(){this.triggerChangeEvent()},componentDidUpdate:function(e,t){var n=this;t.changeQueue!==this.state.changeQueue&&this.triggerChangeEvent(),t.activeSearches!==this.state.activeSearches&&(this.searchingTimeout&&clearTimeout(this.searchingTimeout),this.searchingTimeout=setTimeout(function(){var e=!k.isEmpty(n.state.activeSearches);n.searching!==e&&(n.searching=e,n.triggerSearchEvent(e)),n.searchingTimeout=null},50)),!e.hasConnection&&this.props.hasConnection&&k.each(this.changeQueue,function(e){if(e.resolve){var t=e.resolve;e.resolve=null,e.reject=null,t()}})},componentWillUnmount:function(){clearInterval(this.sessionExpirationCheckInterval),this.stopPrefetch()},schedulePrefetch:function(e){var t=this;this.stopPrefetch();var n=this.prefetchTimeout=setTimeout(function(){var r=k.filter(t.recentSearchResults,function(t){if((!e||t.address===e)&&t.dirty)return!0});C.map(r,function(e){return t.prefetchTimeout===n&&(!!e.dirty&&(console.log("Prefetching",d(e)),t.searchRemoteDatabase(e,!0)))},{concurrency:4})},1e3)},stopPrefetch:function(){this.prefetchTimeout&&(clearTimeout(this.prefetchTimeout),this.prefetchTimeout=null)}});var j=[],_=0},function(e,t,n){"use strict";var r=n(5),i=(n(6),n(4)),o=i.PropTypes,s=n(22),a=n(21),c=n(54),l=n(59);e.exports=i.createClass({displayName:"SessionManager",mixins:[a],propTypes:{database:o.instanceOf(s)},getInitialState:function(){return{loaded:[],removed:[],saved:[]}},loadFromCache:function(e){var t=this,n=this.props.database.use({schema:"local",by:this}),i={key:e};return n.findOne({table:"session",criteria:i}).then(function(n){return n?(t.setState({loaded:r.union(t.state.loaded,[e])}),{address:n.key,handle:n.handle,token:n.token,user_id:n.user_id,etime:n.etime}):null})},saveToCache:function(e){var t=this,n=this.props.database.use({schema:"local",by:this}),i={key:e.address,handle:e.handle,token:e.token,user_id:e.user_id,etime:e.etime};return n.saveOne({table:"session"},i).then(function(n){return t.setState({saved:r.union(t.state.loaded,[e.address])}),n})},removeFromCache:function(e){var t=this,n=this.props.database.use({schema:"local",by:this}),i={key:e.address};return n.removeOne({table:"session"},i).then(function(n){t.setState({removed:r.union(t.state.loaded,[e.address])})})},render:function(){return i.createElement(c,{type:"session-manager"},i.createElement(l,{label:"Session Handling"},i.createElement("div",null,"Loaded from cache: ",r.join(this.state.loaded," ")),i.createElement("div",null,"Saved to cache: ",r.join(this.state.saved," ")),i.createElement("div",null,"Removed from cache: ",r.join(this.state.removed," "))))}})},function(e,t,n){"use strict";e.exports=(new Date).toISOString()},function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return null}}var i=n(5),o=n(6),s=n(4),a=s.PropTypes,c=n(110),l=n(21),u=n(54),d=n(59),p=window.openDatabase;window.sqlitePlugin&&(p=window.sqlitePlugin.openDatabase),e.exports=s.createClass({displayName:"SQLiteCache",mixins:[l],propTypes:{databaseName:a.string.isRequired},statics:{isAvailable:function(){return!!p}},getInitialState:function(){return{recordCounts:{},writeCount:0,readCount:0,deleteCount:0}},find:function(e){var t,n,o=this,s=e.address,a=e.schema,l=e.table,u="local"===a?"local_data":"remote_data",d=e.criteria;if("local"===a)t="\n                SELECT json FROM "+u+"\n                WHERE table_name = ?\n            ",n=[l],d&&void 0!==d.key&&1===i.size(d)&&(t+=" AND key = ?",n.push(d.key),d=null),t+=" ORDER BY key";else{if(t="\n                SELECT json FROM "+u+"\n                WHERE address = ?\n                AND schema_name = ?\n                AND table_name = ?\n            ",n=[s,a,l],d&&void 0!==d.id&&1===i.size(d)){var p=d.id;p instanceof Array?(t+=" AND id IN ("+i.fill(i.clone(p),"?").join(",")+")",n.push.apply(n,p)):(t+=" AND id = ?",n.push(p)),d=null}t+=" ORDER BY id"}return this.query(t,n).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=r(e[n].json);i&&(d&&!c.match(l,i,d)||t.push(i))}var s=o.state.readCount;return s+=t.length,o.setState({readCount:s}),t})},save:function(e,t){var n=this,r=e.address,o=e.schema,s=e.table,a=[],c=[],l="local"===o?"local_data":"remote_data";return i.each(t,function(e){var t=JSON.stringify(e);if("local"===o)a.push("\n                    INSERT OR REPLACE INTO "+l+"\n                    (table_name, key, json)\n                    VALUES (?, ?, ?)\n                "),c.push([s,e.key,t]);else{var n=new Date(e.rtime).getTime();a.push("\n                    INSERT OR REPLACE INTO "+l+"\n                    (address, schema_name, table_name, id, json, rtime)\n                    VALUES (?, ?, ?, ?, ?, ?)\n                "),c.push([r,o,s,e.id,t,n])}}),this.execute(a,c).then(function(){var e=n.state.writeCount;return e+=t.length,n.setState({writeCount:e}),n.updateRecordCount(l,500),t})},remove:function(e,t){var n=this,r=e.address,i=e.schema,s=e.table,a="local"===i?"local_data":"remote_data";return o.mapSeries(t,function(e){var t,o;return"local"===i?(t="\n                    DELETE FROM "+a+"\n                    WHERE table_name = ? AND key = ?\n                ",o=[s,e.key]):(t="\n                    DELETE FROM "+a+"\n                    WHERE address = ?\n                    AND schema_name = ?\n                    AND table_name = ?\n                    AND id = ?\n                ",o=[r,i,s,e.id]),n.execute(t,o)}).then(function(e){var t=n.state.deleteCount;return t+=e.length,n.setState({deleteCount:t}),n.updateRecordCount(a,500),e})},clean:function(e){var t,n,r=this;if(void 0!==e.address)t="\n                DELETE FROM remote_data\n                WHERE address = ?\n            ",n=[e.address];else if(void 0!==e.count)t="\n                DELETE FROM remote_data\n                WHERE rowid IN (\n                    SELECT rowid FROM remote_data ORDER BY rtime LIMIT ?\n                )\n            ",n=[e.count];else if(void 0!==e.before){var i=new Date(e.before).getTime();t="\n                DELETE FROM remote_data\n                WHERE rtime < ?\n            ",n=[i]}return this.execute(t,n).then(function(e){if(e>0){var t=r.state.deleteCount;t+=e,r.setState({deleteCount:t}),r.updateRecordCount("remote_data")}})},query:function(e,t){return this.open().then(function(n){return new o(function(r,i){var o=function(e){i(new Error(e.message))};n.transaction(function(n){n.executeSql(e,t,function(e,t){for(var n=[],i=0;i<t.rows.length;i++)n.push(t.rows.item(i));r(n)})},o)})})},execute:function(e,t){return this.open().then(function(n){return new o(function(r,i){var o=function(e){i(new Error(e.message))},s=function(){r(a)},a=0,c=function(e,t){a+=t.rowsAffected};n.transaction(function(n){if(e instanceof Array)for(var r=0;r<e.length;r++)n.executeSql(e[r],t[r],c);else n.executeSql(e,t,c)},o,s)})})},open:function(){var e=this;return this.databasePromise||(this.databasePromise=o.try(function(){var t=p(e.props.databaseName,"","",52428800),n=["\n                        CREATE TABLE IF NOT EXISTS remote_data (\n                            address text,\n                            schema_name text,\n                            table_name text,\n                            id int,\n                            json text,\n                            rtime datetime\n                        )\n                    ","\n                        CREATE UNIQUE INDEX IF NOT EXISTS remote_data_idx_id\n                        ON remote_data (\n                            address,\n                            schema_name,\n                            table_name,\n                            id\n                        )\n                    ","\n                        CREATE INDEX IF NOT EXISTS remote_data_idx_location\n                        ON remote_data (\n                            address,\n                            schema_name,\n                            table_name\n                        )\n                    ","\n                        CREATE INDEX IF NOT EXISTS remote_data_idx_rtime\n                        ON remote_data (\n                            rtime\n                        )\n                    ","\n                        CREATE TABLE IF NOT EXISTS local_data (\n                            table_name text,\n                            key text,\n                            json text\n                        )\n                    ","\n                        CREATE UNIQUE INDEX IF NOT EXISTS local_data_idx_key\n                        ON local_data (\n                            table_name,\n                            key\n                        )\n                    "];return"1.0"!==t.version&&(n.unshift("DROP TABLE IF EXISTS remote_data"),n.unshift("DROP TABLE IF EXISTS local_data")),new o(function(e,r){var o=function(e){r(new Error(e.message))};t.transaction(function(e){i.each(n,function(t){e.executeSql(t)})},o,e)}).return(t)})),this.databasePromise},updateRecordCount:function(e,t){var n=this,r="updateRecordCountTimeouts."+e,o=i.get(this,r);o&&clearTimeout(o),o=setTimeout(function(){var t="SELECT COUNT(*) as count FROM "+e;n.query(t).then(function(t){var r=i.clone(n.state.recordCounts);r[e]=t[0].count,n.setState({recordCounts:r})}).catch(function(e){}),i.set(n,r,0)},t||0),i.set(this,r,o)},componentDidMount:function(){this.updateRecordCount("remote_data"),this.updateRecordCount("local_data")},render:function(){var e=(this.state.database,i.get(this.state.recordCounts,"local_data")),t=i.get(this.state.recordCounts,"remote_data");return s.createElement(u,{type:"sqlite-cache"},s.createElement(d,{label:"Database details"},s.createElement("div",null,"Name: ",this.props.databaseName)),s.createElement(d,{label:"Usage"},s.createElement("div",null,"Local objects: ",e),s.createElement("div",null,"Remote objects: ",t),s.createElement("div",null,"Objects read: ",this.state.readCount),s.createElement("div",null,"Objects written: ",this.state.writeCount),s.createElement("div",null,"Objects deleted: ",this.state.deleteCount)))}})},function(e,t,n){"use strict";var r=n(5),i=(n(6),n(4)),o=i.PropTypes,s=n(22),a=n(18),c=n(21),l=n(54),u=n(59);e.exports=i.createClass({displayName:"SubscriptionManager",mixins:[c],propTypes:{area:o.oneOf(["client","admin"]).isRequired,connection:o.object,schema:o.string,database:o.instanceOf(s),locale:o.instanceOf(a)},getInitialState:function(){return{subscription:null}},componentWillReceiveProps:function(e){this.props.connection&&e.connection&&this.props.connection.address!==e.connection.address&&this.setState({subscription:null})},componentDidUpdate:function(){var e=this;if(this.props.connection&&this.props.database){var t=this.props.database.use({schema:"global",by:this});t.start().then(function(n){var i={user_id:n,schema:e.props.schema,area:e.props.area,locale:e.props.locale.localeCode,method:e.props.connection.method,token:e.props.connection.token,relay:e.props.connection.relay,details:e.props.connection.details};if(!r.isMatch(e.state.subscription,i)){var o=r.get(e.state.subscription,"id");return e.setState({subscription:i}),o&&(i=r.clone(i),i.id=o),t.saveOne({table:"subscription"},i).then(function(t){return e.setState({subscription:t}),null}).catch(function(t){return e.setState({subscription:null}),null})}})}},render:function(){var e=this.state.subscription||{};return i.createElement(l,{type:"subscription-manager"},i.createElement(u,{label:"Current subscription"},i.createElement("div",null,"ID: ",e.id),i.createElement("div",null,"Token: ",e.token),i.createElement("div",null,"Method: ",e.method),i.createElement("div",null,"Schema: ",e.schema),i.createElement("div",null,"Locale: ",e.locale),i.createElement("div",null,"Relay: ",e.relay)))}})},function(e,t,n){"use strict";e.exports=[{name:"etina",code:"cz",script:"latin",countries:{cz:"esko",pl:"Polsko",sk:"Slovensko"},defaultCountry:"cz"},{name:"Dansk",code:"da",script:"latin",countries:{dk:"Danmark",fo:"Frerne",gl:"Grnland",de:"Tyskland"},defaultCountry:"dk"},{name:"Deutsch",code:"de",script:"latin",countries:{at:"sterreich",be:"Belgien",de:"Deutschland",lu:"Luxemburg",ch:"Schweiz"},defaultCountry:"de"},{name:"",code:"el",script:"greek",countries:{gr:"",cy:""},defaultCountry:"gr"},{name:"English",code:"en",script:"latin",countries:{au:"Australia",ca:"Canada",hk:"Hong Kong",ie:"Ireland",sg:"Singapore",gb:"United Kingdom",us:"United States"},defaultCountry:"us",module:function(){return n.e(13).then(n.bind(null,319))}},{name:"Espaol",code:"es",script:"latin",countries:{ar:"Argentina",bo:"Bolivia",cl:"Chile",co:"Colombia",cr:"Costa Rica",cu:"Cuba",es:"Espaa",ec:"Ecuador",sv:"El Salvador",gq:"Guinea Ecuatorial",gt:"Guatemala",hn:"Honduras",mx:"Mxico",ni:"Nicaragua",pa:"Panam",py:"Paraguay",pe:"Per",pr:"Puerto Rico",do:"Repblica Dominicana",uy:"Uruguay",ve:"Venezuela"},defaultCountry:"es"},{name:"Franais",code:"fr",script:"latin",countries:{be:"Belgique",bj:"Bnin",bf:"Burkina Faso",bi:"Burundi",cm:"Cameroun",ca:"Canada",cg:"Congo",ci:"Cte d'Ivoire",dj:"Djibouti",gq:"Guine quatoriale",fr:"France",ga:"Gabon",gn:"Guine",ht:"Hati",lu:"Luxembourg",mg:"Madagascar",ml:"Mali",ne:"Niger",rw:"Rwanda",cf:"Rpublique centrafricaine",cd:"Rpublique dmocratique du Congo",sn:"Sngal",sc:"Seychelles",ch:"Suisse",td:"Tchad",tg:"Togo"},defaultCountry:"fr"},{name:"",code:"ko",script:"hangul",countries:{kr:"",cn:""},defaultCountry:"kr"},{name:"Hrvatski",code:"hr",script:"latin",countries:{ba:"Bosna i Hercegovina",hr:"Hrvatska",rs:"Srbija"},defaultCountry:"hr"},{name:"Italiano",code:"it",script:"latin",countries:{it:"Italia",ch:"Svizzera",hr:"Croazia",si:"Slovenia"},defaultCountry:"it"},{name:"Magyar",code:"hu",script:"latin",countries:{hr:"Magyarorszg",ro:"Romnia"},defaultCountry:"hu"},{name:"Nederlands",code:"nl",script:"latin",countries:{be:"Belgi",nl:"Nederland",sr:"Suriname"},defaultCountry:"nl"},{name:"",code:"jp",script:"hiragana",countries:{jp:""},defaultCountry:"jp"},{name:"Norsk",code:"nb",script:"latin",countries:{no:"Norge"},defaultCountry:"no",module:function(){return n.e(17).then(n.bind(null,321))}},{name:"Polski",code:"pl",script:"latin",countries:{by:"Biaoru",lt:"Litwa",pl:"Polska",ua:"Ukraina"},defaultCountry:"pl",module:function(){return n.e(16).then(n.bind(null,322))}},{name:"Portugus",code:"pt",script:"latin",countries:{ao:"Angola",br:"Brasil",tl:"Timor Leste",gq:"Guin Equatorial",gw:"Guin-Bissau",mz:"Moambique",mo:"Macao",pt:"Portugal"},defaultCountry:"pt"},{name:"",code:"ru",script:"cyrillic",countries:{am:"",by:"",ge:"",lv:"",kz:"",kg:"",lt:"",ru:"",tj:"",ua:"",uz:"",es:""},defaultCountry:"ru",module:function(){return n.e(15).then(n.bind(null,323))}},{name:"Srpski",code:"sr",script:"latin",countries:{rs:"Srbija",hr:"Hrvatska",ba:"Bosna i Hercegovina"},defaultCountry:"sr"},{name:"Suomi",code:"fi",script:"latin",countries:{fi:"Suomi",se:"Ruotsi"},defaultCountry:"fi",module:function(){return n.e(18).then(n.bind(null,320))}},{name:"Slovenina",code:"sk",script:"latin",countries:{cz:"esko",sk:"Slovensko"},defaultCountry:"sk"},{name:"Svenska",code:"sv",script:"latin",countries:{fi:"Finland",se:"Sverige"},defaultCountry:"se"},{name:"Ting Vit",code:"vi",script:"latin",countries:{vn:"Vit Nam"},defaultCountry:"vn"},{name:"Trke",code:"tr",script:"latin",countries:{cy:"Kbrs",tr:"Trkiye"},defaultCountry:"tr"},{name:"",code:"zh",script:"hanzi",countries:{cn:"",hk:"",mo:"",sg:"",tw:""},defaultCountry:"cn",module:function(){return n.e(14).then(n.bind(null,324))}}]},function(e,t,n){"use strict";function r(){function e(e){void 0===n&&e&&e.length>=2&&(n=i.toLower(e))}i.each(navigator.languages,e);var t=["language","browserLanguage","systemLanguage","userLanguage"];i.each(t,function(t){e(navigator[t])});var n;return n}var i=n(5),o=n(4),s=o.PropTypes,a=n(22),c=n(54),l=n(59);e.exports=o.createClass({displayName:"LocaleManager",propTypes:{defaultLanguageCode:s.string,database:s.instanceOf(a),directory:s.arrayOf(s.object).isRequired,onChange:s.func},getDefaultProps:function(){return{defaultLanguageCode:"en"}},getInitialState:function(){return{localeCode:"",localeCodeSaved:"",phraseTable:{},missingPhrases:[]}},getLocaleCode:function(){return this.state.localeCode},getDirectory:function(){return this.props.directory},translate:function(e){var t=this,n=this.state.phraseTable[e];if(null==n)return setTimeout(function(){var n=i.union(t.state.missingPhrases,[e]);t.setState({missingPhrases:n})},10),e;if("function"!=typeof n)return n;try{for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return n.apply(this,o)}catch(t){return console.error(t),"["+e+": "+t.message+"]"}},pick:function(e,t){if("string"==typeof e)return e;var n=this.state.localeCode.substr(0,2);t&&(n=t.substr(0,2));var r="",o="",s=this.props.defaultLanguageCode.substr(0,2),a="";for(var c in e){var l=e[c],u=i.toLower(c);u===n&&(r=l),o||(o=l),u===s&&(a=l)}return r||(a||o)},change:function(e){var t=this;return e=i.toLower(e),e===this.state.localeCode?Promise.resolve(!0):this.load(e).then(function(n){var r;r="function"==typeof n?n(e):n;var i={localeCode:e,phraseTable:r};return t.setState(i,function(){t.triggerChangeEvent()}),!0})},load:function(e){var t=e.substr(0,2),n=i.find(this.props.directory,{code:t});return n&&n.module?Promise.resolve(n.module()):Promise.reject(new Error("No module for language: "+t))},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},componentDidMount:function(){var e=this,t=r()||this.props.defaultLanguageCode;this.change(t).catch(function(t){e.change(e.props.defaultLanguageCode)})},componentDidUpdate:function(e,t){var n=this;if(!e.database&&this.props.database){var o=this.props.database.use({by:this,schema:"local"});o.start().then(function(){var e={key:"language"};return o.findOne({table:"settings",criteria:e})}).then(function(e){var t=i.get(e,"selectedLanguageCode");t&&(n.change(t),n.setState({localeCodeSaved:t}))})}if(t.localeCode!==this.state.localeCode&&this.props.database){var o=this.props.database.use({by:this,schema:"local"});o.start().then(function(){var e={key:"language",selectedLanguageCode:n.state.localeCode};return e.selectedLanguageCode===r()?o.removeOne({table:"settings"},e):o.saveOne({table:"settings"},e)})}},render:function(){var e=r(),t=this.state.missingPhrases;return o.createElement(c,{type:"locale-manager"},o.createElement(l,{label:"Locale code"},o.createElement("div",null,"Current: ",this.state.localeCode),o.createElement("div",null,"Browser: ",e),o.createElement("div",null,"Previously saved: ",this.state.localeCodeSaved)),o.createElement(l,{label:"Missing phrases",hidden:i.isEmpty(t)},i.map(t,function(e,t){return o.createElement("div",{key:t},e)})))}})},function(e,t,n){"use strict";function r(e,t,n){e.left<0?e.left=0:e.left+e.width>t&&(e.left=t-e.width),e.top<0?e.top=0:e.top+e.height>n&&(e.top=n-e.height)}var i=n(5),o=(n(6),n(4)),s=o.PropTypes,a=(n(8),n(12)),c=n(33),l=n(112);n(814),e.exports=o.createClass({displayName:"ImageCropper",propTypes:{url:s.string.isRequired,clippingRect:s.object,aspectRatio:s.number,onChange:s.func,onLoad:s.func},getDefaultProps:function(){return{aspectRatio:1}},getInitialState:function(){return this.components=c({container:HTMLElement,image:l}),{clippingRect:this.props.clippingRect,hasFocus:!1}},componentWillReceiveProps:function(e){this.props.url===e.url&&this.props.clippingRect===e.clippingRect||(this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.props.url!==e.url&&this.triggerChangeEvent(this.state.clippingRect)),this.setState({clippingRect:e.clippingRect}))},render:function(){var e=this.components.setters,t={ref:e.container,className:"image-cropper",tabIndex:0,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onWheel:this.state.hasFocus?this.handleMouseWheel:null,onKeyDown:this.state.hasFocus?this.handleKeyDown:null},n={ref:e.image,url:this.props.url,clippingRect:this.state.clippingRect,onLoad:this.props.onLoad};return o.createElement("div",t,o.createElement(l,n))},activateTouchHandling:function(){var e=this.components.container;if(e&&!this.hammer){this.hammer=new a(e);var t=this.hammer.get("pan").set({direction:a.DIRECTION_ALL,threshold:5});this.hammer.get("pinch").set({enable:!0}).recognizeWith(t),this.hammer.on("panstart",this.handlePanStart),this.hammer.on("panmove",this.handlePanMove),this.hammer.on("panend",this.handlePanEnd),this.hammer.on("pinchstart",this.handlePinchStart),this.hammer.on("pinchmove",this.handlePinchMove),this.hammer.on("pinchend",this.handlePinchEnd)}},deactivateTouchHandling:function(){this.hammer&&(this.hammer.off("panstart",this.handlePanStart),this.hammer.off("panmove",this.handlePanMove),this.hammer.off("panend",this.handlePanEnd),this.hammer.off("pinchstart",this.handlePinchStart),this.hammer.off("pinchmove",this.handlePinchMove),this.hammer.off("pinchend",this.handlePinchEnd),this.hammer.stop(!0),this.hammer.element.style.touchAction="",this.hammer.destroy(),this.hammer=null)},componentDidUpdate:function(e,t){!t.hasFocus&&this.state.hasFocus?this.activateTouchHandling():t.hasFocus&&!this.state.hasFocus&&this.deactivateTouchHandling()},componentWillUnmount:function(){this.dragStart&&this.handleMouseUp(),this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.triggerChangeEvent(this.state.clippingRect)),this.deactivateTouchHandling()},triggerChangeEvent:function(e){i.isEqual(this.props.clippingRect,e)||this.props.onChange&&this.props.onChange({type:"change",target:this,rect:e})},handleFocus:function(e){this.setState({hasFocus:!0})},handleBlur:function(e){this.setState({hasFocus:!1})},handleMouseDown:function(e){if(0===e.button){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var r=n.getBoundingClientRect(),i=this.state.clippingRect;this.dragStart={clippingRect:i,boundingRect:r,pageX:e.pageX,pageY:e.pageY,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}}},handleMouseMove:function(e){if(e.preventDefault(),this.dragStart){var t={x:this.dragStart.pageX-e.pageX,y:this.dragStart.pageY-e.pageY},n=this.dragStart.boundingRect,o=i.clone(this.dragStart.clippingRect),s=t.x*o.width/n.width,a=t.y*o.height/n.height;o.left+=Math.round(s),o.top+=Math.round(a),r(o,this.dragStart.naturalWidth,this.dragStart.naturalHeight),this.setState({clippingRect:o})}},handleMouseUp:function(e){this.dragStart&&(document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.triggerChangeEvent(this.state.clippingRect),this.dragStart=null)},handleMouseWheel:function(e){var t=this;e.preventDefault();var n=this.components.image,o=this.components.container;if(n&&o&&this.state.clippingRect){var s=4;e.shiftKey&&(s=1);var a=o.getBoundingClientRect(),c=i.clone(this.state.clippingRect),l=Math.round(e.deltaY*c.height/a.height/s),u=c.width+l;u>n.naturalWidth&&(u=n.naturalWidth,l=u-c.width);var d=c.height+l;d>n.naturalHeight&&(d=n.naturalHeight,l=d-c.height,u=c.width+l);var p={x:e.pageX-a.left,y:e.pageY-a.top},h=-p.x*l/a.width,f=-p.y*l/a.height;c.left+=Math.round(h),c.top+=Math.round(f),c.width=u,c.height=d,r(c,n.naturalWidth,n.naturalHeight),this.setState({clippingRect:c},function(){t.zoomChangeTimeout&&clearTimeout(t.zoomChangeTimeout),t.zoomChangeTimeout=setTimeout(function(){t.triggerChangeEvent(c),t.zoomChangeTimeout=0},1e3)}),this.dragStart&&(this.dragStart={clippingRect:c,boundingRect:a,pageX:e.pageX,pageY:e.pageY,naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight})}},handlePanStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var r=n.getBoundingClientRect(),i=this.state.clippingRect;this.panStart={clippingRect:i,boundingRect:r,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},this.handlePanMove(e)}}},handlePanMove:function(e){if(this.panStart){var t=this.panStart.boundingRect,n=i.clone(this.panStart.clippingRect),o=-e.deltaX*n.width/t.width,s=-e.deltaY*n.height/t.height;n.left+=Math.round(o),n.top+=Math.round(s),r(n,this.panStart.naturalWidth,this.panStart.naturalHeight),this.setState({clippingRect:n})}},handlePanEnd:function(e){this.panStart&&(this.triggerChangeEvent(this.state.clippingRect),this.panStart=null)},handlePinchStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var r=n.getBoundingClientRect(),o=this.state.clippingRect;this.pinchStart={clippingRect:o,boundingRect:r,pointers:i.map(e.pointers,function(e){return{pageX:e.pageX,pageY:e.pageY}})},this.handlePinchMove(e)}}},handlePinchMove:function(e){if(this.pinchStart){var t=this.components.image,n=i.clone(this.pinchStart.clippingRect),o=this.pinchStart.boundingRect,s=1/e.scale,a=Math.round(n.width*s);a>t.naturalWidth&&(a=t.naturalWidth,s=a/n.width);var c=Math.round(n.height*s);c>t.naturalHeight&&(c=t.naturalHeight,s=c/n.height,a=Math.round(n.width*s));var l={x:this.pinchStart.pointers[0].pageX-o.left,y:this.pinchStart.pointers[0].pageY-o.top},u={x:this.pinchStart.pointers[1].pageX-o.left,y:this.pinchStart.pointers[1].pageY-o.top},d={x:e.pointers[0].pageX-o.left,y:e.pointers[0].pageY-o.top},p={x:e.pointers[1].pageX-o.left,y:e.pointers[1].pageY-o.top},h=(l.x*n.width-d.x*a)/o.width,f=(u.x*n.width-p.x*a)/o.width,m=(l.y*n.height-d.y*c)/o.height,g=(u.y*n.height-p.y*c)/o.height;n.left+=Math.round((h+f)/2),n.top+=Math.round((m+g)/2),n.width=a,n.height=c,r(n,t.naturalWidth,t.naturalHeight),this.setState({clippingRect:n})}},handlePinchEnd:function(e){this.pinchStart&&(this.triggerChangeEvent(this.state.clippingRect),this.pinchStart=null)},handleKeyDown:function(e){if(27===e.keyCode){this.components.container.blur()}}})},function(e,t,n){"use strict";function r(e){var t=u(e,function(e,t,n){if(65472===e||65474===e)return t});if(t>0){var n=(e[t++],o(e[t++],e[t++]));return{width:o(e[t++],e[t++]),height:n}}}function i(e){var t=o,n=a,r=u(e,function(r,i,o){if(65505===r){var a=i,l=i+o;if(69==e[a++]&&120==e[a++]&&105==e[a++]&&102==e[a++]&&0==e[a++]&&0==e[a++]){var u=a;"II"===String.fromCharCode(e[a++])+String.fromCharCode(e[a++])&&(t=s,n=c);if(42!==t(e[a++],e[a++]))return;do{var d=n(e[a++],e[a++],e[a++],e[a++]);if(0===d)break;a=u+d;for(var p=t(e[a++],e[a++]),h=0;h<p;h++){var f=t(e[a++],e[a++]),m=t(e[a++],e[a++]),g=n(e[a++],e[a++],e[a++],e[a++]);if(274===f&&3===m&&1===g)return a;a+=4}}while(a<l)}}});if(r>0){return t(e[r++],e[r++])}}function o(e,t){return e<<8|t}function s(e,t){return t<<8|e}function a(e,t,n,r){return e<<24|t<<16|n<<8|r}function c(e,t,n,r){return r<<24|n<<16|t<<8|e}function l(e){var t=d(e);return-1!==t?p(e,t):null}function u(e,t){var n=e.length,r=0;if(65496==o(e[r++],e[r++]))for(;r<n;){var i=o(e[r++],e[r++]),s=o(e[r++],e[r++]);if(65498==i)break;var a=t(i,r,s);if(void 0!==a&&!1!==a)return a;r+=s-2}return-1}function d(e){return u(e,function(t,n){if(65517==t&&80==e[n++]&&104==e[n++]&&111==e[n++]&&116==e[n++]&&111==e[n++]&&115==e[n++]&&104==e[n++]&&111==e[n++]&&112==e[n++]&&32==e[n++]&&51==e[n++]&&46==e[n++]&&48==e[n++])return n})}function p(e,t){for(var n=e.length,r=null,i=t;i+4<n;)if(56==e[i+0]&&66==e[i+1]&&73==e[i+2]&&77==e[i+3]){i+=4;for(var s=o(e[i++],e[i++]),a=e[i++],c="",l=0;l<a;l++)c+=String.fromCharCode(e[i++]);i++;var u=(o(e[i++],e[i++]),o(e[i++],e[i++]));s>=1999&&s<=2998&&(r||(r={}),r[c]=h(e,i,u)),i+=u}else i++;return r}function h(e,t,n){for(var r=n/26,i=0,s=[],c=[],l=t,u=0;u<r;u++){switch(o(e[l++],e[l++])){case 0:case 3:i=o(e[l++],e[l++]),l+=22;break;case 1:case 2:case 4:case 5:for(var d=0;d<3;d++){var p=a(e[l++],e[l++],e[l++],e[l++]),h=a(e[l++],e[l++],e[l++],e[l++]);p>=2147483648?p=(2147483647-p)/16777216:p/=16777216,h>=2147483648?h=(2147483647-h)/16777216:h/=16777216,c.push({x:h,y:p})}i--,0==i&&(c.push(c.shift()),c.push(c[0]),s.push(c),c=[]);break;default:l+=24}}return s}e.exports={getDimensions:r,getOrientation:i,extractPaths:l}},function(e,t,n){"use strict";e.exports=t=["like","comment","vote","task-completion","note","assignment","tracking"],t.editable=["comment"],t.git=["note","assignment"]},function(e,t,n){"use strict";function r(e,t){var n,r,i=new RegExp("^/(https?)/([^/]*)"),o=i.exec(e.path);o?(r=o[1]+":",n=o[2],e.path=e.path.substr(o[0].length),t.cors=!0):(n=window.location.host,r=window.location.protocol,t.cors=!1),r&&n&&(t.address=r+"//"+n)}function i(e,t){if(t.cors){var n=t.address;if(n){var r=n.indexOf("://"),i=n.substr(0,r),o=n.substr(r+3);e.path="/"+i+"/"+o+e.path}}}e.exports={extract:r,insert:i}},function(e,t,n){"use strict";var r=n(5),i=(n(6),n(4)),o=i.PropTypes,s=n(22),a=n(23),c=n(21),l=n(54),u=n(59);e.exports=i.createClass({displayName:"LinkManager",mixins:[c],propTypes:{database:o.instanceOf(s),route:o.instanceOf(a)},getInitialState:function(){return{found:[],added:[]}},findRecentLocation:function(){var e=this,t=this.props.database.use({by:this}),n={};return t.find({schema:"local",table:"project_link",criteria:n}).then(function(t){var n=r.sortBy(t,"atime"),i=r.last(n);return e.setState({found:r.map(n,"key")}),i})},saveLocation:function(e,t){var n=e+"/"+t;this.setState({added:r.union(r.without(this.state.added,n),[n])});var i=this.props.database.use({by:this}),o={name:t};i.findOne({schema:"global",table:"project",criteria:o}).then(function(r){if(!r)return null;var o=r.details.title,s=(new Date).toISOString(),a={key:n,address:e,schema:t,name:o,atime:s};return i.saveOne({schema:"local",table:"project_link"},a)})},componentDidUpdate:function(e,t){if(e.route!==this.props.route){var n=r.get(e.route,"parameters.address"),i=r.get(e.route,"parameters.schema"),o=r.get(this.props.route,"parameters.address"),s=r.get(this.props.route,"parameters.schema");n===o&&i===s||o&&s&&this.saveLocation(o,s)}},render:function(){return i.createElement(l,{type:"link-manager"},i.createElement(u,{label:"Links"},i.createElement("div",null,"Found in cache: ",r.join(this.state.found," ")),i.createElement("div",null,"Added to cache: ",r.join(this.state.added," "))))}})},function(e,t,n){"use strict";function r(e){var t=e,n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r+1),t=t.substr(0,r));var o={},s=t.indexOf("?");return-1!==s&&(o=i(t.substr(s+1)),t=t.substr(0,s)),{path:t,query:o,hash:n}}function i(e){var t={},n=s.split(e,"&");return s.each(n,function(e){var n=s.split(e,"="),r=decodeURIComponent(n[0]),i=decodeURIComponent(n[1]||"");i=s.replace(i,/\+/g," "),t[r]=i}),t}function o(e){return e.pathname+e.search+e.hash}var s=n(5),a=n(6),c=n(4),l=c.PropTypes,u=n(22);e.exports=c.createClass({displayName:"RouteManager",propTypes:{pages:l.array.isRequired,database:l.instanceOf(u),rewrite:l.func,onChange:l.func,onRedirectionRequest:l.func},getInitialState:function(){return{basePath:this.getBasePath(),url:null,component:null,parameters:null,query:null,hash:""}},getBasePath:function(){var e=document.getElementsByTagName("BASE")[0];if(e){var t=e.getAttribute("href");return s.replace(t,/\/+$/,"")}return""},getURL:function(){return this.state.url},getComponent:function(){return this.state.component},getParameters:function(){return this.state.parameters},getQuery:function(){return this.state.query},getHash:function(){return this.state.hash},goTo:function(e,t){var n=o(e);return this.change(n,t)},find:function(e,t){t=s.clone(t)||{};var n=e.getURL(t),r=this.state.basePath;r&&(n.path=r+n.path),this.props.rewrite&&this.props.rewrite(n,t,"find");var i=n.path;if(!s.isEmpty(n.query)){var o="";s.forIn(n.query,function(e,t){o+=o?"&":"?",o+=t+"="+encodeURIComponent(e).replace(/%20/g,"+")}),i+=o}return n.hash&&(i+="#"+n.hash),i},parse:function(e){var t=this,n=r(e),i={};this.props.rewrite&&this.props.rewrite(n,i,"parse");var o=this.state.basePath;if(o){if(!s.startsWith(n.path,o))return null;n.path=n.path.substr(o.length)}var a,c=0;try{s.each(this.props.pages,function(e){if("function"!=typeof e.parseURL){var r=s.get(e,"displayName","Page");throw new Error(r+" does not implement the static function parseURL()")}var o=e.parseURL(n.path,n.query,n.hash);if(o&&o.match.length>c){var l=s.assign(s.omit(o,"match"),i),u=t.find(e,l);a={url:u,component:e,parameters:l,query:n.query,hash:n.hash},c=o.match.length}})}catch(e){return console.error(e),null}return a},change:function(e,t,n){var r=this;if(this.state.url===e)return a.resolve(!1);var i=this.parse(e);return i?(this.setState(i,function(){n||(n=i.url);var e=window.location.protocol,o=window.location.host,s=e+"//"+o+n;window.location.href!==s&&(t?window.history.replaceState({},"",s):window.history.pushState({},"",s)),r.triggerChangeEvent()}),a.resolve(!0)):this.triggerRedirectionRequest(e,t)},loosen:function(){var e=window.location.href,t=e.indexOf("#");if(-1!==t){var n=e.substr(0,t);window.history.replaceState({},"",n)}},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerRedirectionRequest:function(e,t){var n=this;if(this.props.onRedirectionRequest&&!this.redirecting){var r=this.state.basePath;return r&&s.startsWith(e,r)&&(e=e.substr(r.length),s.startsWith(e,"/")||(e="/"+e)),this.redirecting=!0,a.try(function(){return n.props.onRedirectionRequest({type:"redirection",target:n,url:e,replacing:t})}).finally(function(){n.redirecting=!1})}return a.reject(new Error("Unable to route URL to a page: "+e))},render:function(){return null},componentDidMount:function(){this.componentDidUpdate({},{}),window.addEventListener("popstate",this.handlePopState)},componentDidUpdate:function(e,t){!e.database&&this.props.database&&this.goTo(window.location,!0).catch(function(e){console.error(e)})},componentWillUnmount:function(){window.removeEventListener("popstate",this.handlePopState)},handlePopState:function(e){var t=this,n=o(window.location),r=this.parse(n);r&&this.setState(r,function(){t.triggerChangeEvent()})}})},function(e,t,n){"use strict";function r(e){var t;if("number"==typeof e)return e;if(t=/^(\d+)\s*vw/.exec(e)){var n=parseInt(t[1]);return Math.round(n*document.body.offsetWidth/100)}if(t=/^(\d+)\s*vh/.exec(e)){var n=parseInt(t[1]);return Math.round(n*document.body.offsetHeight/100)}}var i=n(5),o=n(4),s=o.PropTypes,a=n(22);e.exports=o.createClass({displayName:"ThemeManager",propTypes:{modes:s.object,serverAddress:s.string,database:s.instanceOf(a),onChange:s.func},getInitialState:function(){return{mode:this.selectMode(),devicePixelRatio:window.devicePixelRatio,details:null}},getMode:function(){return this.state.mode},getModes:function(){var e=i.sortBy(i.toPairs(this.props.modes),1);i.map(e,0);return i.keys(this.props.modes)},getDetails:function(){return this.state.details},getImageURL:function(e,t){t||(t={});var n;switch(e.type){case"video":case"audio":case"website":n=e.poster_url;break;default:n=e.url}if(n){var o=[],s=e.clip;if(t.hasOwnProperty("clip")&&(s=t.clip),s){var a=i.map([s.left,s.top,s.width,s.height],Math.round);o.push("cr"+a.join("-"))}var c=r(t.width),l=r(t.height);1!==this.state.devicePixelRatio&&(c=Math.round(c*this.state.devicePixelRatio),l=Math.round(l*this.state.devicePixelRatio)),c&&l?o.push("re"+c+"-"+l):!c&&l?o.push("h"+l):!l&&c&&o.push("w"+c),void 0!==t.quality&&o.push("q"+t.quality);var u="";return o.length>0&&(u="/"+o.join("+"),"png"!==e.format&&"gif"!==e.format||(u+=".png")),""+this.props.serverAddress+n+u}},getImageFile:function(e){switch(e.type){case"video":case"audio":case"website":return e.poster_file||null;default:return e.file||null}},getVideoURL:function(e,t){if(!e.url)return null;var n=""+this.props.serverAddress+e.url;if(t&&t.version){var r=e.versions[t.version];n+="."+t.version+"."+r.format}return n},getAudioURL:function(e,t){return this.getVideoURL(e,t)},getURL:function(e,t){switch(e.type){case"image":return this.getImageURL(e,t);case"video":return this.getVideoURL(e,t);case"website":return e.url;case"audio":return this.getAudioURL(e,t)}},selectMode:function(){var e=document.body.parentNode.offsetWidth,t="";for(var n in this.props.modes){e>=this.props.modes[n]&&(t=n)}return t},change:function(e){var t=this;return i.isEqual(this.state.details,e)?Promise.resolve(!0):(this.setState({details:e},function(){t.triggerChangeEvent()}),Promise.resolve(!0))},componentWillMount:function(){window.addEventListener("resize",this.handleWindowResize)},render:function(){return null},componentDidMount:function(){this.change(c)},componentDidUpdate:function(e,t){var n=this;if(!e.database&&this.props.database){var r=this.props.database.use({schema:"local",by:this});r.start().then(function(){return r.findOne({table:"settings",key:"theme"})}).then(function(e){e&&e.theme&&n.change(e.theme)})}},componentWillUnmount:function(){window.removeEventListener("resize",this.handleWindowResize)},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleWindowResize:function(e){var t=this,n={},r=this.selectMode();this.state.mode!==r&&(n.mode=r),this.state.devicePixelRatio!==window.devicePixelRatio&&(n.devicePixelRatio=window.devicePixelRatio),i.isEmpty(n)||this.setState(n,function(){t.triggerChangeEvent()})}});var c={}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}var o=(n(5),n(6),n(4)),s=o.PropTypes,a=n(54),c=n(59);e.exports=o.createClass({displayName:"ConnectivityMonitor",propTypes:{onChange:s.func},getInitialState:function(){var e=i();return{online:navigator.onLine,type:e?e.effectiveType:void 0}},componentWillMount:function(){window.addEventListener("online",this.handleBrowserOnline),window.addEventListener("offline",this.handleBrowserOffline);var e=i();e&&e.addEventListener("typechange",this.handleConnectionTypeChange)},componentDidMount:function(){this.triggerChangeEvent(this.state.online,this.state.type)},componentWillUnmount:function(){window.removeEventListener("online",this.handleBrowserOnline),window.removeEventListener("offline",this.handleBrowserOffline);var e=i();e&&e.removeEventListener("typechange",this.handleConnectionTypeChange)},triggerChangeEvent:function(e,t){this.props.onChange&&this.props.onChange(r({type:"alertclick",target:this,online:e},"type",t))},handleBrowserOffline:function(e){this.setState({online:!1}),this.triggerChangeEvent(!1,this.state.type)},handleBrowserOnline:function(e){this.setState({online:!0}),this.triggerChangeEvent(!0,this.state.type)},handleConnectionTypeChange:function(e){var t=e.target.effectiveType;this.setState({type:t}),this.triggerChangeEvent(this.state.online,t)},render:function(){return o.createElement(a,{type:"connectivity-monitor"},o.createElement(c,{label:"Connection"},o.createElement("div",null,"Online: ",this.state.online?"yes":"no"),o.createElement("div",null,"Type: ",this.state.type)))}})},function(e,t,n){"use strict";function r(e,t,n){var r=t[n];r&&r.size>0&&(e[n]={loaded:0,total:r.size})}var i=n(5),o=n(6),s=n(4),a=s.PropTypes,c=n(7),l=n(91),u=n(90),d=n(50),p=(n(382),n(215),n(131)),h=n(22),f=n(23);e.exports=s.createClass({displayName:"PayloadManager",propTypes:{database:a.instanceOf(h),route:a.instanceOf(f),onChange:a.func},getInitialState:function(){return{payloads:[]}},queue:function(e,t){var n=this,s=this.getAction(t);if(!s)return o.resolve(null);var a=this.props.route.parameters.address,l={};return this.createTask(e,s,l).then(function(o){var s={};r(s,t,"file"),r(s,t,"poster_file"),r(s,t,"stream");var l={payload_id:o.id,action:o.action,token:o.token,start:c(),transferProgress:s,backendProgress:0,address:a,schema:e,promise:null,file:t.file,poster_file:t.poster_file,stream:t.stream,url:t.url,external_url:t.external_url,external_poster_url:t.external_poster_url,filename:t.filename},u=i.concat(n.state.payloads,l);return n.setState({payloads:u},function(){n.triggerChangeEvent()}),l.payload_id})},getAction:function(e){switch(e.type){case"image":if(!e.url){if(e.file)return"image-upload";if(e.external_url)return"image-copy"}break;case"audio":if(!e.url){if(e.stream)return"audio-upload-transcode";if(e.file)return"audio-upload-transcode";if(e.external_url)return"audio-copy-transcode"}break;case"video":if(!e.url){if(e.stream)return"video-upload-transcode";if(e.file)return"video-upload-transcode";if(e.external_url)return"video-copy-transcode"}break;case"website":if(!e.poster_url&&e.url)return"website-poster-generate"}},createTask:function(e,t,n){var r=this.props.database.use({schema:e,by:this});return r.start().then(function(e){var i={action:t,options:n,user_id:e};return r.saveOne({table:"task"},i)})},find:function(e,t){if(!this.props.route)return null;var n=this.props.route.parameters.address;return i.find(this.state.payloads,function(r){if(r.address===n&&r.schema===e)return i.some(t,function(e,t){return r[t]===e})})},send:function(e,t){var n=this.find(e,{payload_id:t});if(n&&!n.promise){var r=this.sendStream(n,"stream")||this.sendBlob(n,"file")||this.sendCordovaFile(n,"file")||this.sendURL(n,"external_url"),i=this.sendBlob(n,"poster_file")||this.sendCordovaFile(n,"poster_file")||this.sendURL(n,"external_poster_url");n.promise=o.all([r,i])}},sendBlob:function(e,t){var n=e[t],r=d.get(n);if(!(r instanceof Blob))return null;var i=e.payload_id,o=e.address,s=this.getDestinationURL(e,t),a=new FormData;a.set("file",r);var c={responseType:"json",attributes:{name:t,payloadId:i},onUploadProgress:this.handleUploadProgress};return l.fetch("POST",s,a,c).then(function(e){var t=e.url||e.poster_url;return t&&d.associate(r,""+o+t),e})},sendCordovaFile:function(e,t){return null},sendStream:function(e,t){var n=this,r=e[t];return r instanceof u?(r.attributes={name:t,payloadId:e.payload_id},r.onProgress=this.handleUploadProgress,this.stream(e.stream).then(function(r){var i=n.getDestinationURL(e,t),o=new FormData;o.set("stream",r);var s={responseType:"json"};return l.fetch("POST",i,o,s)})):null},sendURL:function(e,t){var n=e[t];if(!n)return null;var r=(e.id,this.getDestinationURL(e,t)),i=new FormData;i.set("url",n);var o={responseType:"json"};return l.fetch("POST",r,i,o)},getDestinationURL:function(e,t){var n=e.schema,r=e.address,i=e.payload_id;switch(e.action){case"image-upload":case"image-copy":r+="/media/images/upload/"+n+"/"+i;break;case"video-copy-transcode":case"video-upload-transcode":r+="poster_file"===t||"external_poster_url"===t?"/media/videos/poster/"+n+"/"+i:"/media/videos/upload/"+n+"/"+i;break;case"audio-copy-transcode":case"audio-upload-transcode":r+="poster_file"===t||"external_poster_url"===t?"/media/audios/poster/"+n+"/"+i:"/media/audios/upload/"+n+"/"+i;break;case"website-poster-generate":r+="/media/html/poster/"+n+"/"+i;break;default:return}return r+="?token="+e.token},stream:function(e){var t=this.props.route.parameters;return e.id?o.resolve(e.id):new o(function(n,r){var i=0,s=!1,a=0;p.do(function(){return e.pull().then(function(r){var i=t.address+"/media/stream";e.id&&(i+="/"+e.id);var o=new FormData;r?o.append("file",r):s=!0;var c={responseType:"json",onUploadProgress:function(t){if(r){var n=t.total?Math.round(r.size*(t.loaded/t.total)):0,i=a+n;e.report(i)}}};return l.fetch("POST",i,o,c).then(function(t){e.id||(e.id=t.id,n(e.id)),r&&(e.finalize(r),a+=r.size)})}).catch(function(t){if(++i<1)return o.delay(5e3);throw e.id||r(t),t})}),p.while(function(){return!s}),p.end().catch(function(t){e.abandon(t)})})},updatePayload:function(e,t){var n=this,r=i.slice(this.state.payloads),o=i.findIndex(r,{payload_id:e});if(-1!==o){return t(r[o]=i.cloneDeep(r[o])),this.setState({payloads:r},function(){n.triggerChangeEvent()}),null}},updateProgress:function(){var e=this,t=this.props.database.use({by:this}),n=i.filter(this.state.payloads,function(e){if(e.address===t.context.address&&100!==e.backendProgress)return!0}),r=i.groupBy(n,"schema"),s=i.keys(r),a=!1;return o.each(s,function(e){var o=r[e],s=i.map(o,"payload_id"),c={id:s};return t.find({table:"task",schema:e,criteria:c}).then(function(e){n=i.map(n,function(t){if(i.includes(o,t)){var n=i.find(e,{id:t.payload_id});if(n&&n.completion!==t.backendProgress){var r=i.clone(t);return r.backendProgress=n.completion,a=!0,r}}return t})})}).then(function(){if(a)return e.setState({payloads:n},function(){e.triggerChangeEvent()}),null})},getUploadProgress:function(){var e=0,t=0;return i.each(this.state.payloads,function(n){i.each(n.transferProgress,function(n){n.loaded<n.total&&(e++,t+=Math.max(0,n.total-n.loaded))})}),e>0?{files:e,bytes:t}:null},render:function(){return null},componentDidUpdate:function(e){!e.database&&this.props.database&&this.triggerChangeEvent(),e.database!==this.props.database&&this.updateProgress()},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleUploadProgress:function(e){var t=e.target.attributes,n=t.name,r=t.payloadId;this.updatePayload(r,function(t){t.transferProgress[n]=i.pick(e,"loaded","total")})}})},function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){}}function i(){return new a(function(e,t){Notification.requestPermission(function(n){"granted"===n?e():t(new Error("Unable to gain permission"))})})}function o(e,t){return c.createElement("pre",{key:t},JSON.stringify(e,void 0,4))}var s=n(5),a=n(6),c=n(4),l=c.PropTypes,u=n(14),d=n(131),p=n(18),h=n(54),f=n(59);e.exports=c.createClass({displayName:"WebsocketNotifier",propTypes:{serverAddress:l.string,initialReconnectionDelay:l.number,maximumReconnectionDelay:l.number,defaultProfileImage:l.string,hasConnection:l.bool,locale:l.instanceOf(p),onConnect:l.func,onDisconnect:l.func,onNotify:l.func,onAlertClick:l.func},statics:{isAvailable:function(){return!0}},getDefaultProps:function(){return{initialReconnectionDelay:500,maximumReconnectionDelay:3e4}},getInitialState:function(){return{socket:null,notificationPermitted:!1,serverResponse:null,reconnectionCount:0,recentMessages:[]}},componentWillMount:function(){var e=this;i().then(function(){e.setState({notificationPermitted:!0})}).catch(function(e){}),this.updateConnection(this.props)},componentWillReceiveProps:function(e){this.props.serverAddress!==e.serverAddress&&this.updateConnection(e),!this.props.hasConnection&&e.hasConnection?this.onConnectivity&&this.onConnectivity():this.props.hasConnection&&!e.hasConnection&&this.state.socket&&this.state.socket.close()},updateConnection:function(e){this.disconnect(),e.serverAddress&&this.connect(e.serverAddress)},waitForConnectivity:function(){var e=this;return this.props.hasConnection?a.resolve():(this.connectivityPromise||(this.connectivityPromise=new a(function(t,n){e.onConnectivity=function(){e.connectivityPromise=null,e.onConnectivity=null,t()}})),this.connectivityPromise)},connect:function(e){var t=this,n=this.connectionAttempt;if(n&&n.serverAddress===e)return n.promise;n=this.connectionAttempt={serverAddress:e};var i=!1,o=this.props.initialReconnectionDelay,c=this.props.maximumReconnectionDelay;return d.do(function(){return t.createSocket(e).then(function(o){n===t.connectionAttempt&&(o.onmessage=function(n){if(t.state.socket===o){var i=r(n.data);if(i.changes)t.triggerNotifyEvent(e,i.changes);else if(i.alert)t.showAlert(e,i.alert);else if(i.socket){var a={method:"websocket",relay:null,token:i.socket,address:e,details:{user_agent:navigator.userAgent}};t.setState({serverResponse:i}),t.triggerConnectEvent(a)}var c=s.slice(t.state.recentMessages);c.unshift(i),c.length>10&&c.splice(10),t.setState({recentMessages:c})}},o.onclose=function(){console.log("onclose"),t.state.socket===o?t.setState({socket:null,serverResponse:null},function(){console.log("Reestablishing web-socket connection..."),t.connect(e).then(function(e){if(e){var n=t.state.reconnectionCount+1;t.setState({reconnectionCount:n}),console.log("Connection reestablished")}})}):t.setState({socket:null,serverResponse:null,reconnectionCount:0}),t.props.serverAddress===e&&t.triggerDisconnectEvent()},t.setState({socket:o})),i=!0}).catch(function(t){return o*=2,o>c&&(o=c),console.log("Connection attempt in "+o+"ms: "+e),a.delay(o)})}),d.while(function(){return n===t.connectionAttempt&&!i}),d.return(function(){return t.connectionAttempt=null,i}),n.promise=d.end(),n.promise},disconnect:function(){var e=this.state.socket;e&&this.setState({socket:null,serverResponse:null,reconnectionCount:0},function(){e.close()})},createSocket:function(e){return this.waitForConnectivity().then(function(){return new a(function(t,n){var r=e+"/socket",i=new u(r),o=!1;i.onopen=function(e){o||(o=!0,t(i))},i.onclose=function(){o||n(new Error("Unable to establish a connection"))},i.onerror=function(e){o||(o=!0,n(new Error(e.message)))}})})},triggerNotifyEvent:function(e,t){this.props.onNotify&&this.props.onNotify({type:"notify",target:this,address:e,changes:t})},triggerConnectEvent:function(e){this.props.onConnect&&this.props.onConnect({type:"connect",target:this,connection:e})},triggerDisconnectEvent:function(){this.props.onDisconnect&&this.props.onDisconnect({type:"disconnect",target:this})},triggerAlertClickEvent:function(e,t){this.props.onAlertClick&&this.props.onAlertClick({type:"alertclick",target:this,address:e,alert:t})},showAlert:function(e,t){var n=this;if(this.state.notificationPermitted){var r={};t.profile_image?r.icon=""+e+t.profile_image:r.icon=this.props.defaultProfileImage,t.message?r.body=t.message:t.attached_image&&(r.image=""+e+t.attached_image),r.lang=s.get(this.props.locale,"languageCode");var i=new Notification(t.title,r);i.addEventListener("click",function(){n.triggerAlertClickEvent(e,t),i.close()})}},render:function(){var e=s.get(this.state.serverResponse,"socket");return c.createElement(h,{type:"websocket-notifier"},c.createElement(f,{label:"Connection"},c.createElement("div",null,"ID: ",e),c.createElement("div",null,"Socket: ",this.state.socket?"established":"none"),c.createElement("div",null,"Reconnection count: ",this.state.reconnectionCount),c.createElement("div",null,"Notification: ",this.state.notificationPermitted?"permitted":"denied")),c.createElement(f,{label:"Recent messages"},s.map(this.state.recentMessages,o)))}})},function(e,t,n){"use strict";function r(e,t,n){var r;"/"===e.charAt(0)&&(e="file://"+encodeURI(e));var o=i.lastIndexOf(e,"/");-1!==o&&(r=decodeURI(e.substr(o+1))),this.fullPath=e,this.name=r,this.type=t,this.size=n}var i=n(5),o=n(604),s=n(215);e.exports=r,r.prototype.getFileEntry=function(){var e=this;return this.fileEntry?o.resolve(this.fileEntry):new o(function(t,n){resolveLocalFileSystemURL(e.fullPath,function(n){e.fileEntry=n,t(n)},function(e){n(new s(e))})})},r.prototype.getFile=function(){var e=this;return this.file?o.resolve(this.file):this.getFileEntry().then(function(t){return new o(function(n,r){t.file(function(t){e.file=t,n(t)},function(e){r(new s(e))})})})},r.prototype.obtainSize=function(){var e=this;return this.getFile().then(function(t){e.size=t.size,e.type||(e.type=t.type)})}},function(e,t,n){"use strict";function r(e){a.push(e),1===a.length&&window.addEventListener("keydown",o)}function i(e){s.pull(a,e),0===a.length&&window.removeEventListener("keydown",o)}function o(t){l.push(t.keyCode),l.length>c.length&&l.splice(0,l.length-c.length),s.isEqual(l,c)&&s.each(a,function(t){t({type:"cheat",target:e.exports})})}var s=n(5);e.exports={addListener:r,removeListener:i};var a=[],c=[38,38,40,40,37,39,37,39,66,65],l=[]},function(e,t,n){"use strict";function r(e){switch(void 0===e?"undefined":i(e)){case"number":return 0;case"string":return o.repeat("x",e.length);case"boolean":return!1;case"object":return e instanceof Array?o.map(e,r):o.mapValues(e,r)}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(5),s={};o.mixin({decouple:function(e,t,n){"string"==typeof t?t=o.split(t,"."):t instanceof Array||(t=[t]),n||(n=s);var r=o.clone(e);r instanceof Object||(r={});for(var i=r,a=e,c=0;c<t.length;c++){var l=t[c],u=a?a[l]:void 0,d=o.clone(u);c===t.length-1?d instanceof n.constructor||(d=n):d instanceof Object||(d={}),i[l]=d,i=d,a=u}return r},decoupleSet:function(e,t,n){if("string"==typeof t?t=o.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var r=o.slice(t,0,-1),i=o.decouple(e,r,{});return o.set(i,t,n),i},decoupleUnset:function(e,t){if("string"==typeof t?t=o.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var n=o.slice(t,0,-1),r=o.decouple(e,n,{});return o.unset(r,t),r},decouplePush:function(e,t){for(var n=o.decouple(e,t,[]),r=o.get(n,t),i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];return Array.prototype.push.apply(r,s),n},shallowDiff:function(e,t){return o.pickBy(e,function(e,n){return t[n]!==e})},obscure:function(e,t){var n=o.cloneDeep(e);return o.each(t,function(e){var t=o.get(n,e);o.set(n,e,r(t))}),n},strictParseInt:function(e){var t=o.parseInt(e);if(t.toString()!==e)throw new Error("Not an integer: "+e);return t},fileSize:function(e){if(e<1024)return e+"B";var t=e/1024;if(t<1024)return o.round(t)+"KB";var n=t/1024;if(n<1024)return o.round(n,1)+"MB";var r=n/1024;return o.round(r,2)+"GB"}})},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=(n(8),n(9)),a=n(33);n(782),e.exports=i.createClass({displayName:"Chartist",propTypes:{type:o.oneOf(["line","bar","pie"]).isRequired,data:o.object.isRequired,className:o.string,options:o.object,responsiveOptions:o.array,style:o.object,onDraw:o.func,onClick:o.func},getInitialState:function(){return this.components=a({container:HTMLDivElement}),{}},componentWillReceiveProps:function(e){this.props.onDraw!==e.onDraw&&(this.chartist?this.chartist.off("draw",this.props.onDraw):this.chartist.on("draw",e.onDraw))},render:function(){var e=["ct-chart"];this.props.className&&e.push(this.props.className);var t={ref:this.components.setters.container,className:e.join(" "),style:this.props.style,onClick:this.props.onClick};return i.createElement("div",t)},componentDidUpdate:function(e,t){e.type!==this.props.type?(this.destroyChart(),this.createChart()):e.data===this.props.data&&e.options===this.props.options&&e.responsiveOptions===this.props.responsiveOptions||this.updateChart()},componentDidMount:function(){this.createChart()},createChart:function(){var e=s[r.upperFirst(this.props.type)],t=this.components.container;this.chartist=new e(t,this.props.data,this.props.options,this.props.responsiveOptions),this.props.onDraw&&this.chartist.on("draw",this.props.onDraw)},updateChart:function(){this.chartist.update(this.props.data,this.props.options,this.props.responsiveOptions)},destroyChart:function(){this.chartist&&this.chartist.detach();var e=this.components.container;if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}),e.exports.Interpolation=s.Interpolation,e.exports.Svg=s.Svg},function(e,t,n){"use strict";var r=n(5),i=n(4),o=i.PropTypes,s=n(18),a=n(32);n(818),e.exports=i.createClass({displayName:"UploadProgress",propTypes:{payloads:o.instanceOf(a).isRequired,locale:o.instanceOf(s).isRequired},render:function(){var e=this.props.locale.translate,t=this.props.payloads.uploading;if(!t)return null;var n=r.fileSize(t.bytes),o=t.files;return i.createElement("div",{className:"upload-progress"},e("upload-progress-uploading-$count-files-$size-remaining",o,n))}})},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"* {\n  box-sizing: border-box;\n  font-family: sans-serif; }\n  *:focus {\n    outline-color: #fca326; }\n\nbody {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  margin: 0; }\n\n.application {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  height: 100%;\n  width: 100%; }\n\n.page-view-port {\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  background-color: #4d3936; }\n  .page-view-port .scroll-box {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    z-index: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    -webkit-overflow-scrolling: touch; }\n    .page-view-port .scroll-box::-webkit-scrollbar-track {\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: transparent; }\n    .page-view-port .scroll-box::-webkit-scrollbar {\n      width: 14px;\n      background-color: transparent; }\n    .page-view-port .scroll-box::-webkit-scrollbar-thumb {\n      border-radius: 2px;\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: rgba(0, 0, 0, 0.2); }\n  .page-view-port .contents {\n    width: 100%;\n    max-width: 125em;\n    padding: 0.5em 0.5em 0.5em 0.5em; }\n    .page-view-port .contents.double-col, .page-view-port .contents.triple-col {\n      padding: 1em 1em 1em 1em; }\n\nSELECT {\n  -webkit-appearance: none;\n  border-radius: 0;\n  background-color: #eeeeee;\n  border: 1px solid #444444; }\n  SELECT OPTION {\n    padding: 2px 2px 2px 4px; }\n\nTEXTAREA,\nINPUT[type=text],\nINPUT[type=url],\nINPUT[type=email],\ninput[type=password],\nINPUT[type=number] {\n  -webkit-appearance: none;\n  border-radius: 0;\n  background-color: #eeeeee;\n  border: 1px solid #444444;\n  padding: 2px 2px 2px 4px;\n  font-size: 1em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".app-component-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  width: 80%;\n  max-width: 40em;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #999999;\n  margin: auto;\n  padding: 0.5em 0.5em 0.5em 0.5em; }\n  .app-component-dialog-box .contents {\n    flex: 1 1 auto;\n    overflow: auto;\n    padding: 0.5em 0.5em 0.25em 0.5em;\n    margin-bottom: 0.25em; }\n    .app-component-dialog-box .contents .picture {\n      float: left;\n      margin-right: 1em;\n      margin-bottom: 0.5em; }\n      .app-component-dialog-box .contents .picture .icon {\n        display: inline-block;\n        color: #000000;\n        background-color: #fca326;\n        height: 8em;\n        width: 8em;\n        padding-top: 2em;\n        text-align: center; }\n        .app-component-dialog-box .contents .picture .icon .fa {\n          font-size: 4em; }\n      .app-component-dialog-box .contents .picture IMG {\n        width: auto;\n        height: 8em; }\n    .app-component-dialog-box .contents .text H1:first-child,\n    .app-component-dialog-box .contents .text H2:first-child,\n    .app-component-dialog-box .contents .text H3:first-child,\n    .app-component-dialog-box .contents .text H4:first-child,\n    .app-component-dialog-box .contents .text H5:first-child,\n    .app-component-dialog-box .contents .text H6:first-child,\n    .app-component-dialog-box .contents .text P:first-child {\n      margin-top: 0.1em; }\n    .app-component-dialog-box .contents::-webkit-scrollbar-track {\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: transparent; }\n    .app-component-dialog-box .contents::-webkit-scrollbar {\n      width: 10px;\n      background-color: transparent; }\n    .app-component-dialog-box .contents::-webkit-scrollbar-thumb {\n      border-radius: 2px;\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: rgba(0, 0, 0, 0.1); }\n  .app-component-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .single-col .app-component-dialog-box {\n    width: 100%;\n    max-width: none; }\n    .single-col .app-component-dialog-box .picture .icon {\n      width: 4em;\n      height: 4em;\n      padding-top: 1em; }\n      .single-col .app-component-dialog-box .picture .icon .fa {\n        font-size: 2em; }\n    .single-col .app-component-dialog-box .picture IMG {\n      height: 4em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".audio-capture-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 24em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .audio-capture-dialog-box .container {\n    flex: 1 1 auto;\n    overflow: hidden;\n    padding-bottom: 0.2em;\n    width: 100%; }\n    .audio-capture-dialog-box .container .volume-meter {\n      display: flex;\n      flex-direction: row;\n      align-items: center; }\n      .audio-capture-dialog-box .container .volume-meter .icon {\n        flex: 0 1 auto;\n        font-size: 2em;\n        width: 0.75em;\n        line-height: 100%;\n        margin: 0em 0.2em 0em 0.2em; }\n      .audio-capture-dialog-box .container .volume-meter .bar-container {\n        flex: 1 1 auto;\n        margin: 0.2em 0 0.2em 0.2em; }\n        .audio-capture-dialog-box .container .volume-meter .bar-container .bar {\n          padding: 2px 2px 2px 2px;\n          border: 1px solid #666666; }\n          .audio-capture-dialog-box .container .volume-meter .bar-container .bar .fill {\n            height: 1em;\n            background-color: #666666; }\n    .audio-capture-dialog-box .container .device-placeholder {\n      padding-left: 0;\n      padding-right: 0; }\n  .audio-capture-dialog-box .controls {\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    border-top: 1px solid #666666; }\n    .audio-capture-dialog-box .controls .buttons {\n      float: right; }\n    .audio-capture-dialog-box .controls .duration-indiactor {\n      margin-top: 0.65em;\n      float: left; }\n  .single-col .audio-capture-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".confirmation-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  max-width: 40em;\n  width: 80%;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .confirmation-dialog-box .message {\n    font-size: 1.5em;\n    font-weight: bold;\n    padding: 0.5em 0.5em 0.3em 0.5em; }\n  .confirmation-dialog-box .buttons {\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-basis: auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right; }\n  .single-col .confirmation-dialog-box {\n    width: 100%;\n    max-width: none; }\n    .single-col .confirmation-dialog-box .message {\n      font-size: 1.25em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".issue-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em;\n  width: 100%;\n  max-width: 40em; }\n  .issue-dialog-box .container {\n    flex: 1 1 auto;\n    padding: 0.35em 0 0.2em 0.2em; }\n    .issue-dialog-box .container .top {\n      display: flex;\n      flex-direction: row;\n      width: 100%; }\n      .issue-dialog-box .container .top .text-field {\n        flex: 1 1 auto; }\n      .issue-dialog-box .container .top .select-field {\n        flex: 0 0 auto;\n        margin-top: 0.35em;\n        margin-bottom: 0.35em;\n        margin-left: 0.5em; }\n        .issue-dialog-box .container .top .select-field label {\n          display: block;\n          font-size: 0.9em; }\n        .issue-dialog-box .container .top .select-field select {\n          background-color: #ffffff;\n          display: block;\n          width: 100%;\n          margin-top: 3px;\n          font-size: 1em;\n          padding: 2px 2px 1px 2px; }\n    .issue-dialog-box .container .tags {\n      line-height: 1.75em;\n      margin-bottom: 0.1em; }\n      .issue-dialog-box .container .tags .tag {\n        font-size: 0.9em;\n        color: #ffffff;\n        background-color: #444444;\n        padding: 0.2em 0.4em 0.2em 0.4em;\n        margin-top: 0.25em;\n        margin-bottom: 0.25em;\n        border-radius: 0.25em;\n        opacity: 0.25;\n        cursor: pointer; }\n        .issue-dialog-box .container .tags .tag.selected {\n          opacity: 1; }\n  .issue-dialog-box .buttons {\n    flex: 0 0 auto;\n    border-top: 1px solid #666666;\n    padding: 0.5em 0 0.2em 0.2em; }\n    .issue-dialog-box .buttons .left {\n      float: left; }\n    .issue-dialog-box .buttons .right {\n      float: right; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.media-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 100%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .media-dialog-box .container {\n    flex: 1 1 auto;\n    display: flex;\n    overflow: hidden;\n    padding-bottom: 0.2em;\n    align-items: center;\n    justify-content: center; }\n    .media-dialog-box .container IMG {\n      width: 100%;\n      height: auto;\n      display: block; }\n    .media-dialog-box .container VIDEO {\n      max-width: 100%;\n      max-height: 100%;\n      display: block; }\n  .media-dialog-box .controls {\n    display: block;\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0;\n    border-top: 1px solid #666666; }\n    .media-dialog-box .controls .links {\n      float: left; }\n    .media-dialog-box .controls .buttons {\n      float: right; }\n    .media-dialog-box .controls:after {\n      content: "";\n      display: table;\n      clear: both; }\n  .media-dialog-box .thumbnail {\n    float: left;\n    margin-right: 0.2em;\n    width: 2em;\n    cursor: pointer;\n    border: 2px solid #333333; }\n    .media-dialog-box .thumbnail:hover, .media-dialog-box .thumbnail.selected {\n      border: 2px solid #e24329; }\n    .media-dialog-box .thumbnail IMG {\n      display: block;\n      width: 100%; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".membership-request-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 40em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .membership-request-dialog-box .scrollable {\n    flex: 1 1 auto;\n    flex-basis: auto; }\n  .membership-request-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .membership-request-dialog-box .title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin-bottom: 0.3em; }\n  .membership-request-dialog-box .description {\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    white-space: pre-line; }\n    .membership-request-dialog-box .description img {\n      float: right;\n      width: 10em;\n      margin-left: 0.5em;\n      margin-bottom: 0.3em; }\n  .membership-request-dialog-box .collapsible-container {\n    transition-duration: 1s; }\n  .membership-request-dialog-box .message {\n    font-size: 0.9em;\n    padding: 0.35em 0.35em 0.35em 0.35em;\n    color: #000000; }\n    .membership-request-dialog-box .message.accepted {\n      background-color: #66cc66; }\n    .membership-request-dialog-box .message.requested {\n      background-color: #dddd66; }\n  .single-col .membership-request-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".mobile-setup-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .mobile-setup-dialog-box .contents {\n    flex: 1 1 auto;\n    padding-bottom: 0.5em; }\n    .mobile-setup-dialog-box .contents .qr-code {\n      float: left;\n      width: 198px;\n      height: 198px;\n      cursor: none;\n      margin-right: 1em; }\n    .mobile-setup-dialog-box .contents .info {\n      float: left;\n      overflow: hidden;\n      padding: 0.5em 0.5em 0 0; }\n      .mobile-setup-dialog-box .contents .info .label {\n        white-space: nowrap;\n        font-size: 0.9em;\n        color: #cccccc; }\n      .mobile-setup-dialog-box .contents .info .value {\n        white-space: nowrap;\n        font-size: 1.5em;\n        color: #eeeeee;\n        margin-top: 0.25em;\n        margin-bottom: 0.5em; }\n  .mobile-setup-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    border-top: 1px solid #666666;\n    text-align: right; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.photo-capture-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .photo-capture-dialog-box .container {\n    flex: 1 1 auto;\n    overflow: hidden;\n    padding-bottom: 0.2em; }\n    .photo-capture-dialog-box .container VIDEO, .photo-capture-dialog-box .container IMG {\n      max-width: 100%;\n      max-height: 100%;\n      display: block; }\n  .photo-capture-dialog-box .controls {\n    display: block;\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    border-top: 1px solid #666666; }\n    .photo-capture-dialog-box .controls .device-selector {\n      float: left; }\n      .photo-capture-dialog-box .controls .device-selector SELECT {\n        color: #666666;\n        background-color: #4d3936;\n        border: 0;\n        padding: 0.3em; }\n        .photo-capture-dialog-box .controls .device-selector SELECT:hover, .photo-capture-dialog-box .controls .device-selector SELECT:focus {\n          color: #eeeeee;\n          background-color: #806666; }\n    .photo-capture-dialog-box .controls .buttons {\n      float: right; }\n    .photo-capture-dialog-box .controls:after {\n      content: "";\n      display: table;\n      clear: both; }\n  .single-col .photo-capture-dialog-box {\n    width: 100%;\n    max-width: none; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".project-description-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 40em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .project-description-dialog-box .scrollable {\n    flex: 1 1 auto;\n    flex-basis: auto; }\n  .project-description-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .project-description-dialog-box .title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin-bottom: 0.3em; }\n  .project-description-dialog-box .description {\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    white-space: pre-line; }\n    .project-description-dialog-box .description img {\n      float: right;\n      width: 10em;\n      margin-left: 0.5em;\n      margin-bottom: 0.3em; }\n  .single-col .project-description-dialog-box {\n    width: 100%;\n    max-width: none; }\n    .single-col .project-description-dialog-box .description img {\n      width: 5em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".project-management-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 100%;\n  min-width: 20em;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .project-management-dialog-box .scrollable {\n    flex: 1 1 auto;\n    font-size: 1.4em;\n    padding: 0.25em 0.25em 0.25em 0.25em; }\n  .project-management-dialog-box .option-button.selected, .project-management-dialog-box .option-button:hover {\n    color: #ee3333; }\n  .project-management-dialog-box .option-button.disabled {\n    color: #eeeeee;\n    opacity: 0.1; }\n  .project-management-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .single-col .project-management-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".system-description-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 40em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .system-description-dialog-box .scrollable {\n    flex: 1 1 auto;\n    flex-basis: auto; }\n  .system-description-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .system-description-dialog-box .title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin-bottom: 0.3em; }\n  .system-description-dialog-box .description {\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    white-space: pre-line; }\n  .single-col .system-description-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".telephone-number-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .telephone-number-dialog-box .contents {\n    padding-bottom: 0.5em; }\n    .telephone-number-dialog-box .contents .qr-code {\n      float: left;\n      width: 198px;\n      height: 198px; }\n    .telephone-number-dialog-box .contents .number {\n      overflow: hidden;\n      padding: 0.5em 0.25em 0.25em 0.5em;\n      font-size: 3em; }\n  .telephone-number-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    border-top: 1px solid #666666;\n    text-align: right; }\n  .single-col .telephone-number-dialog-box {\n    width: 100%; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".user-selection-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 100%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .user-selection-dialog-box .scrollable {\n    flex: 1 1 auto; }\n  .user-selection-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .single-col .user-selection-dialog-box {\n    width: 100%; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.video-capture-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .video-capture-dialog-box .container {\n    flex: 1 1 auto;\n    overflow: hidden;\n    padding-bottom: 0.2em; }\n    .video-capture-dialog-box .container VIDEO {\n      max-width: 100%;\n      max-height: 100%;\n      display: block; }\n  .video-capture-dialog-box .controls {\n    display: block;\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    border-top: 1px solid #666666; }\n    .video-capture-dialog-box .controls .device-selector {\n      float: left;\n      margin-right: 2em; }\n      .video-capture-dialog-box .controls .device-selector SELECT {\n        color: #666666;\n        background-color: #4d3936;\n        border: 0;\n        padding: 0.3em; }\n        .video-capture-dialog-box .controls .device-selector SELECT:hover, .video-capture-dialog-box .controls .device-selector SELECT:focus {\n          color: #eeeeee;\n          background-color: #806666; }\n    .video-capture-dialog-box .controls .buttons {\n      float: right; }\n    .video-capture-dialog-box .controls .duration-indiactor {\n      float: left;\n      margin-top: 0.65em; }\n    .video-capture-dialog-box .controls:after {\n      content: "";\n      display: table;\n      clear: both; }\n  .single-col .video-capture-dialog-box {\n    width: 100%;\n    max-width: none; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".audio-editor {\n  position: relative;\n  width: 100%;\n  padding-top: 50%;\n  padding-bottom: 50%; }\n  .audio-editor .graphic {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center; }\n    .audio-editor .graphic .icon {\n      font-size: 8em; }\n    .audio-editor .graphic .duration {\n      font-size: 2em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".image-editor {\n  position: relative;\n  width: 100%;\n  padding-top: 50%;\n  padding-bottom: 50%; }\n  .image-editor .image-cropper, .image-editor .preview, .image-editor .placeholder {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%; }\n  .image-editor .preview {\n    cursor: wait;\n    filter: saturate(0%); }\n  .image-editor .placeholder {\n    display: flex;\n    bottom: 0;\n    align-items: center;\n    justify-content: center; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".media-editor {\n  position: relative;\n  width: 100%;\n  max-width: 600px; }\n  .media-editor .resource {\n    position: relative;\n    padding: 0.25em 0.25em 0.25em 0.25em; }\n  .media-editor .navigation {\n    position: absolute;\n    left: 0.25em;\n    right: 0.25em;\n    bottom: 0.25em;\n    background-color: rgba(0, 0, 0, 0.75);\n    opacity: 1;\n    transition: opacity .5s; }\n    .media-editor .navigation .left {\n      float: left; }\n    .media-editor .navigation .right {\n      float: right; }\n    .media-editor .navigation.hidden {\n      opacity: 0; }\n  .media-editor.empty {\n    position: static;\n    max-width: none; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.reaction-editor {\n  display: flex;\n  flex-direction: row;\n  padding: 0.1em 0.1em 0.1em 0.1em; }\n  .reaction-editor .profile-image-column {\n    flex: 0 0 auto; }\n    .reaction-editor .profile-image-column .profile-image {\n      margin: 0 0.4em 0 0.2em; }\n  .reaction-editor .editor-column {\n    flex: 1 1 auto; }\n    .reaction-editor .editor-column .media {\n      max-width: 300px;\n      padding: 0em 1em 0.25em 1em; }\n    .reaction-editor .editor-column .controls .buttons {\n      display: block; }\n      .reaction-editor .editor-column .controls .buttons .action-buttons {\n        float: right; }\n      .reaction-editor .editor-column .controls .buttons:after {\n        content: "";\n        display: table;\n        clear: both; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".story-editor-options .border {\n  margin-top: 0.5em;\n  padding-top: 0.5em;\n  border-top: 1px dotted #404040; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".story-editor {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%; }\n  .story-editor .header {\n    background-color: #211a1a; }\n    .story-editor .header .column-1 > .profile-image {\n      position: relative;\n      height: 0.8em;\n      vertical-align: top;\n      margin-top: 0.1em;\n      margin-right: 0.5em;\n      overflow: visible; }\n      .story-editor .header .column-1 > .profile-image IMG, .story-editor .header .column-1 > .profile-image .placeholder {\n        position: absolute;\n        top: 0;\n        left: 0; }\n  .story-editor .body .autosize-text-area {\n    margin-top: 0.7em;\n    margin-bottom: 0.1em;\n    margin-left: -1px;\n    margin-right: -1px; }\n    .story-editor .body .autosize-text-area TEXTAREA {\n      font-size: 1em;\n      min-height: 5em;\n      max-height: 50vh; }\n  .story-editor .body .story-contents {\n    margin-top: 0.25em;\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .story-editor .body .buttons {\n    text-align: right; }\n  .story-editor .padded {\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .single-col .story-editor {\n    margin-bottom: 0.5em; }\n    .single-col .story-editor .body .autosize-text-area TEXTAREA {\n      min-height: 1.2em; }\n  .double-col .story-editor,\n  .triple-col .story-editor {\n    display: table;\n    margin-bottom: 1em; }\n    .double-col .story-editor .column-1,\n    .double-col .story-editor .column-2,\n    .double-col .story-editor .column-3,\n    .triple-col .story-editor .column-1,\n    .triple-col .story-editor .column-2,\n    .triple-col .story-editor .column-3 {\n      display: table-cell;\n      vertical-align: top; }\n    .double-col .story-editor .header,\n    .triple-col .story-editor .header {\n      display: table-row; }\n    .double-col .story-editor .body,\n    .triple-col .story-editor .body {\n      display: table-row; }\n      .double-col .story-editor .body .autosize-text-area,\n      .triple-col .story-editor .body .autosize-text-area {\n        min-height: 3em; }\n      .double-col .story-editor .body .column-2,\n      .triple-col .story-editor .body .column-2 {\n        position: relative; }\n  .double-col .story-editor .column-1,\n  .double-col .story-editor .column-2 {\n    width: 50%; }\n  .triple-col .story-editor .column-1,\n  .triple-col .story-editor .column-2 {\n    width: 40%; }\n  .triple-col .story-editor .column-3 {\n    width: 20%; }\n  .story-editor.selected {\n    animation: flash normal 5s 1 ease-in-out; }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".image-editor .video-duration {\n  position: absolute;\n  top: 0.5em;\n  right: 0.5em;\n  opacity: 0.5;\n  pointer-events: none;\n  color: #ffffff; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".reaction-list {\n  padding-top: 2px;\n  padding-right: 0.25em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".user-activity-list {\n  margin-top: 0.5em; }\n  .user-activity-list .activity {\n    margin-bottom: 0.15em; }\n    .user-activity-list .activity .time {\n      float: right;\n      color: #666666;\n      font-size: 0.9em; }\n      .user-activity-list .activity .time.today, .user-activity-list .activity .time.yesterday {\n        color: #cccccc; }\n  .user-activity-list A {\n    color: #999999;\n    cursor: pointer; }\n    .user-activity-list A:link, .user-activity-list A:visited {\n      color: #999999;\n      text-decoration: none; }\n    .user-activity-list A.recent {\n      color: #cccccc; }\n    .user-activity-list A:hover {\n      color: #eeeeee; }\n  .user-activity-list .more {\n    margin-top: 0.5em;\n    text-align: right; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".user-selection-list {\n  min-width: 14em;\n  padding-bottom: 0.1em; }\n  .user-selection-list .user {\n    position: relative;\n    cursor: pointer;\n    padding: 0.2em 0.2em 0.2em 0.2em;\n    filter: grayscale(50%); }\n    .user-selection-list .user .name {\n      margin-left: 0.2em;\n      margin-right: 2em;\n      vertical-align: middle; }\n    .user-selection-list .user .fa {\n      position: absolute;\n      right: 0.3em;\n      top: 0;\n      bottom: 0;\n      margin: auto;\n      height: 1em;\n      font-size: 1.2em;\n      color: #e24329;\n      opacity: 0;\n      transition: opacity 0.5s;\n      vertical-align: middle; }\n    .user-selection-list .user:hover {\n      color: #cccccc;\n      filter: none; }\n    .user-selection-list .user.selected {\n      background-color: #211a1a;\n      color: #eeeeee;\n      filter: none; }\n      .user-selection-list .user.selected .fa {\n        opacity: 1; }\n    .user-selection-list .user.disabled {\n      cursor: default; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".error-page {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 20vh;\n  color: #ffffff; }\n  .error-page .text {\n    max-width: 25em;\n    line-height: 135%;\n    margin-left: 1em;\n    margin-right: 1em; }\n    .error-page .text h1 {\n      text-align: center; }\n  .error-page .graphic {\n    margin-left: 3em;\n    margin-right: 1em; }\n    .error-page .graphic svg {\n      width: 100%;\n      max-width: 20em; }\n      .error-page .graphic svg polygon {\n        fill: #ffffff; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-page .panels {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  margin: auto; }\n  .single-col .settings-page .panels {\n    padding: 0.5em 0.5em 0.5em 0.5em; }\n  .double-col .settings-page .panels,\n  .triple-col .settings-page .panels {\n    padding: 1em 1em 1em 1em;\n    column-fill: balance;\n    column-width: 25em;\n    column-gap: 1em;\n    max-width: 110em; }\n  .settings-page .panels.diagnostics {\n    height: 100%; }\n    .double-col .settings-page .panels.diagnostics,\n    .triple-col .settings-page .panels.diagnostics {\n      column-fill: auto; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".start-page {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0; }\n  .start-page .oauth-button {\n    display: table;\n    border: 1px solid #cccccc;\n    width: 100%;\n    max-width: 20em;\n    margin-top: 0.5em; }\n    .start-page .oauth-button .icon {\n      width: 2em;\n      display: table-cell;\n      font-size: 2em;\n      padding: 0.26em 0 0.24em 0.25em;\n      text-align: center;\n      vertical-align: middle; }\n    .start-page .oauth-button .label {\n      display: table-cell;\n      font-size: 1.25em;\n      padding-right: 2.5em;\n      text-align: center;\n      vertical-align: middle; }\n    .start-page .oauth-button .error {\n      display: table-cell;\n      padding-left: 1.25em;\n      padding-right: 1.5em;\n      vertical-align: middle; }\n    .start-page .oauth-button:link, .start-page .oauth-button:visited {\n      text-decoration: none;\n      color: #cccccc; }\n    .start-page .oauth-button.error {\n      border-color: #ee3333;\n      color: #ee3333; }\n    .start-page .oauth-button:hover {\n      background-color: #fca326;\n      color: #000000; }\n    .single-col .start-page .oauth-button {\n      max-width: none; }\n  .start-page .project-button {\n    display: block;\n    border: 1px solid #cccccc;\n    max-width: 34em;\n    cursor: pointer;\n    margin-bottom: 0.5em;\n    vertical-align: middle;\n    height: calc(3.5em + 2px); }\n    .start-page .project-button .icon {\n      float: left; }\n      .start-page .project-button .icon IMG {\n        width: 3.5em;\n        height: 3.5em; }\n      .start-page .project-button .icon .default {\n        text-align: center;\n        width: 3.5em;\n        height: 3.5em; }\n        .start-page .project-button .icon .default.v1 {\n          background-color: #ff9900; }\n        .start-page .project-button .icon .default.v2 {\n          background-color: #00cc33; }\n        .start-page .project-button .icon .default.v3 {\n          background-color: #3399ff; }\n        .start-page .project-button .icon .default.v4 {\n          background-color: #ff6666; }\n        .start-page .project-button .icon .default.v5 {\n          background-color: #cc66ff; }\n        .start-page .project-button .icon .default svg {\n          margin-top: 0.5em;\n          height: 2.25em; }\n    .start-page .project-button .text {\n      overflow: hidden; }\n      .start-page .project-button .text .title {\n        font-size: 1em;\n        margin: 0.25em 0.25em 0 0.35em;\n        font-weight: bold;\n        font-variant: small-caps; }\n      .start-page .project-button .text .description {\n        font-size: 0.8em;\n        margin: 0.1em 0.25em 0 0.40em;\n        white-space: pre-line;\n        overflow: hidden;\n        height: calc(2em + 5px); }\n        .start-page .project-button .text .description .contents {\n          width: calc(100% - 1.2em);\n          position: relative;\n          display: block;\n          max-height: 3em; }\n          .start-page .project-button .text .description .contents .ellipsis {\n            position: absolute;\n            right: -1em;\n            top: calc(4.45em - 100%);\n            text-align: left;\n            vertical-align: bottom; }\n      .start-page .project-button .text .badge {\n        color: #606060;\n        margin-top: 0.2em;\n        margin-right: 0.2em;\n        float: right; }\n    .start-page .project-button:link, .start-page .project-button:visited {\n      text-decoration: none;\n      color: #cccccc; }\n    .start-page .project-button:hover {\n      background-color: #fca326;\n      color: #000000; }\n    .single-col .start-page .project-button {\n      max-width: none; }\n  .start-page.browser {\n    display: flex;\n    background-color: #4d3936;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-attachment: fixed;\n    background-size: cover;\n    background-blend-mode: soft-light; }\n    .start-page.browser .bar {\n      display: flex;\n      align-self: center;\n      flex-direction: column;\n      flex: 1 0 auto;\n      background-color: rgba(77, 57, 54, 0.97);\n      width: 100%;\n      min-height: 25vh;\n      position: relative;\n      color: #cccccc;\n      overflow: hidden; }\n      .start-page.browser .bar .content-area {\n        align-self: center;\n        text-align: center;\n        flex: 1 1 auto;\n        width: 90%;\n        max-width: 80em;\n        padding-bottom: 1.4em;\n        z-index: 1; }\n        .start-page.browser .bar .content-area .section {\n          display: inline-block;\n          text-align: left;\n          width: 48%;\n          min-width: 30em;\n          vertical-align: top;\n          padding-left: 1em;\n          padding-right: 1em; }\n          .start-page.browser .bar .content-area .section .scrollable {\n            margin-top: 1em;\n            padding-right: 0.25em;\n            max-height: 60vh; }\n            .single-col .start-page.browser .bar .content-area .section .scrollable {\n              max-height: 30vh; }\n          .start-page.browser .bar .content-area .section.description .scrollable {\n            white-space: pre-line; }\n          .single-col .start-page.browser .bar .content-area .section {\n            min-width: auto;\n            width: 100%; }\n        .single-col .start-page.browser .bar .content-area {\n          width: 100%;\n          max-width: none; }\n      .start-page.browser .bar .welcome {\n        position: absolute;\n        left: 0px;\n        right: 0px;\n        top: 0px;\n        bottom: 0px;\n        text-align: center;\n        margin: auto;\n        height: 1em;\n        z-index: 0;\n        opacity: 0; }\n    .start-page.browser.transition-out-fast {\n      transition: opacity 0.7s linear 0.55s;\n      opacity: 0; }\n      .start-page.browser.transition-out-fast .bar {\n        transition: min-height 0.7s;\n        min-height: 100vh; }\n        .start-page.browser.transition-out-fast .bar .content-area {\n          opacity: 0; }\n    .start-page.browser.transition-out-slow {\n      transition: opacity 0.7s linear 3s;\n      opacity: 0; }\n      .start-page.browser.transition-out-slow .bar {\n        transition: min-height 0.7s, background-color 0.5s;\n        min-height: 100vh;\n        background-color: #4d3936; }\n        .start-page.browser.transition-out-slow .bar .content-area {\n          opacity: 0; }\n        .start-page.browser.transition-out-slow .bar .welcome {\n          animation-name: fade-in-out;\n          animation-duration: 2.5s;\n          animation-delay: 1s;\n          opacity: 0; }\n\n@keyframes fade-in-out {\n  0% {\n    opacity: 0; }\n  35% {\n    opacity: 1; }\n  75% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n  .start-page.cordova {\n    padding: 0em 0.5em 0em 0.5em;\n    background-color: #211a1a;\n    color: #cccccc; }\n    .start-page.cordova .welcome {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center; }\n    .start-page.cordova .activation-instructions {\n      margin-bottom: 1em;\n      line-height: 125%; }\n      .start-page.cordova .activation-instructions .ui {\n        display: inline-block;\n        color: #eeeeee;\n        font-weight: bold;\n        padding-left: 0.1em;\n        padding-right: 0.1em;\n        white-space: nowrap; }\n    .start-page.cordova .activation-buttons .left {\n      float: left; }\n    .start-page.cordova .activation-buttons .right {\n      float: right; }\n    .start-page.cordova .projects {\n      margin-bottom: 2em; }\n    .start-page.cordova.transition-out-fast {\n      transition: opacity 0.7s linear 0.55s, background-color 0.7s ease-in;\n      opacity: 0;\n      background-color: #4d3936; }\n    .start-page.cordova.transition-out-slow {\n      transition: opacity 0.7s linear 3s, background-color 1s ease-in;\n      opacity: 0;\n      background-color: #4d3936; }\n      .start-page.cordova.transition-out-slow .welcome {\n        animation-name: fade-in-out;\n        animation-duration: 3s;\n        animation-delay: 0.5s;\n        opacity: 0; }\n\n@keyframes fade-in-out {\n  0% {\n    opacity: 0; }\n  35% {\n    opacity: 1; }\n  75% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n  .start-page .loading-animation {\n    height: 3.5em; }\n  .start-page .empty-message {\n    height: 3.5em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel.device .body {\n  padding-left: 0.5em; }\n\n.settings-panel.device .device-option-button {\n  display: table;\n  width: 100%;\n  color: #eeeeee;\n  margin-top: 0.35em;\n  margin-bottom: 0.35em; }\n  .settings-panel.device .device-option-button .icon {\n    display: table-cell;\n    text-align: left;\n    width: 1em;\n    padding-right: 0.4em; }\n  .settings-panel.device .device-option-button .text {\n    display: table-cell;\n    vertical-align: top; }\n    .settings-panel.device .device-option-button .text .name {\n      font-size: 1.3em; }\n    .settings-panel.device .device-option-button .text .revoke {\n      padding-top: 0.1em;\n      display: block;\n      float: right;\n      color: #666666;\n      cursor: pointer; }\n      .settings-panel.device .device-option-button .text .revoke:hover {\n        color: #eeeeee; }\n\n.settings-panel.device .device-icon {\n  position: relative;\n  font-size: 1.8em;\n  text-align: center; }\n  .settings-panel.device .device-icon .fa.background {\n    display: block;\n    color: #eeeeee; }\n  .settings-panel.device .device-icon .fa.icon-overlay {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0.5em;\n    font-size: 0.4em;\n    height: 1em;\n    width: 1em;\n    text-align: center;\n    margin: auto; }\n    .settings-panel.device .device-icon .fa.icon-overlay.fa-android {\n      color: #97c03d; }\n    .settings-panel.device .device-icon .fa.icon-overlay.fa-windows {\n      color: #0caee9;\n      font-size: 0.35em; }\n    .settings-panel.device .device-icon .fa.icon-overlay.fa-apple {\n      color: #ffffff;\n      bottom: 0.4em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel.diagnostic-data .diagnostics-section .title {\n  font-weight: bold;\n  padding: 0.25em 0.25em 0.25em 0;\n  cursor: pointer; }\n\n.settings-panel.diagnostic-data .diagnostics-section .collapsible-contents {\n  padding: 0.25em 0.25em 0.25em 0.25em;\n  max-height: 50vh;\n  overflow: auto; }\n\n.settings-panel.diagnostic-data .diagnostics-section .collapsible-container {\n  border: 1px solid transparent;\n  transition: height .25s, border-color 0.2s; }\n\n.settings-panel.diagnostic-data .diagnostics-section PRE {\n  border-bottom: 1px dotted #cccccc;\n  padding-bottom: 0.5em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em; }\n  .settings-panel.diagnostic-data .diagnostics-section PRE:last-child {\n    border-bottom: 0; }\n\n.settings-panel.diagnostic-data .diagnostics-section.open {\n  color: #eeeeee; }\n  .settings-panel.diagnostic-data .diagnostics-section.open .collapsible-container {\n    border-color: #eeeeee; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel.language .option-button {\n  margin-top: 0.35em;\n  margin-bottom: 0.35em; }\n  .settings-panel.language .option-button SELECT {\n    color: #666666;\n    background-color: #4d3936;\n    border: 0;\n    padding: 2px 2px 2px 4px;\n    margin-left: 0.5em;\n    margin-top: -3px;\n    margin-bottom: -3px; }\n    .settings-panel.language .option-button SELECT:hover, .settings-panel.language .option-button SELECT:focus {\n      color: #eeeeee;\n      background-color: #806666; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel.project .body {\n  padding-left: 0.5em;\n  min-height: 9.4em; }\n\n.settings-panel.project .project-option-button {\n  display: table;\n  width: 100%;\n  color: #666666;\n  margin-top: 0.35em;\n  margin-bottom: 0.35em;\n  cursor: pointer; }\n  .settings-panel.project .project-option-button.selected, .settings-panel.project .project-option-button:hover {\n    color: #eeeeee; }\n  .settings-panel.project .project-option-button.selected {\n    cursor: default; }\n  .settings-panel.project .project-option-button .icon {\n    display: table-cell;\n    width: 1em;\n    padding-right: 0.25em;\n    font-size: 1.4em; }\n  .settings-panel.project .project-option-button .text {\n    display: table-cell; }\n    .settings-panel.project .project-option-button .text .name {\n      font-size: 1.4em; }\n    .settings-panel.project .project-option-button .text .supplemental {\n      margin-top: 0.5em;\n      margin-bottom: 0.15em; }\n      .settings-panel.project .project-option-button .text .supplemental .item {\n        margin-bottom: 0.35em; }\n        .settings-panel.project .project-option-button .text .supplemental .item .button {\n          color: #999999;\n          cursor: pointer; }\n          .settings-panel.project .project-option-button .text .supplemental .item .button:hover {\n            color: #eeeeee; }\n          .settings-panel.project .project-option-button .text .supplemental .item .button .fa {\n            margin-right: 0.15em; }\n          .settings-panel.project .project-option-button .text .supplemental .item .button .label {\n            font-size: 0.9em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel.user-image .no-image {\n  position: relative;\n  background-color: #999999;\n  width: 100%;\n  padding-top: 50%;\n  padding-bottom: 50%; }\n  .settings-panel.user-image .no-image svg {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    height: 80%;\n    margin: auto; }\n\n.settings-panel.user-image .image-container {\n  max-width: 500px;\n  margin: auto; }\n\n.settings-panel.user-image .buttons {\n  overflow: hidden;\n  padding-bottom: 0.15em; }\n  .settings-panel.user-image .buttons .left {\n    float: left; }\n    .settings-panel.user-image .buttons .left .push-button {\n      margin-left: 0; }\n  .settings-panel.user-image .buttons .right {\n    float: right; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel.user-info .gender-selector {\n  margin-bottom: 0.35em; }\n  .settings-panel.user-info .gender-selector LABEL {\n    display: block;\n    font-size: 0.9em; }\n  .settings-panel.user-info .gender-selector SELECT {\n    width: 100%;\n    overflow-y: auto;\n    margin-top: 3px;\n    font-size: 1em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".app-component {\n  display: flex;\n  flex-direction: row;\n  border: 1px solid #211a1a;\n  margin-top: 0.3em;\n  margin-right: 0.1em;\n  background-color: #cccccc;\n  cursor: pointer; }\n  .app-component:first-child {\n    margin-top: 0; }\n  .app-component .picture {\n    flex: 0 0 auto; }\n    .app-component .picture .icon {\n      display: inline-block;\n      color: #000000;\n      background-color: #fca326;\n      height: 4em;\n      width: 4em;\n      padding-top: 1em;\n      text-align: center; }\n      .app-component .picture .icon .fa {\n        font-size: 2em; }\n    .app-component .picture IMG {\n      display: block;\n      width: auto;\n      height: 4em; }\n  .app-component .description {\n    flex: 1 1 auto;\n    color: #333333;\n    font-size: 1em;\n    margin: 0.25em 0.25em 0 0.40em;\n    overflow: hidden;\n    height: calc(3em + 9px); }\n    .app-component .description .description-contents {\n      width: calc(100% - 1em);\n      position: relative;\n      display: block;\n      max-height: 4em; }\n      .app-component .description .description-contents .ellipsis {\n        position: absolute;\n        right: -1em;\n        top: calc(6.9em - 100%);\n        text-align: left;\n        vertical-align: bottom; }\n      .app-component .description .description-contents H1, .app-component .description .description-contents H2, .app-component .description .description-contents H3, .app-component .description .description-contents H4, .app-component .description .description-contents H5 {\n        font-size: 1em;\n        margin-top: 0;\n        margin-bottom: 0.2em; }\n      .app-component .description .description-contents P {\n        margin-top: 0; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".bookmark-view {\n  border: 2px solid #111;\n  background-color: #111; }\n  .bookmark-view .title {\n    color: #eeeeee; }\n    .bookmark-view .title .name {\n      display: inline-block;\n      padding: 0.2em 0.1em 0.4em 0.4em;\n      font-size: 0.9em; }\n  .bookmark-view .story {\n    clear: both; }\n    .bookmark-view .story .story-view {\n      margin: 0;\n      border: 0; }\n  .single-col .bookmark-view {\n    margin-bottom: 0.5em; }\n  .double-col .bookmark-view,\n  .triple-col .bookmark-view {\n    margin-bottom: 1em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".media-view {\n  position: relative;\n  margin-top: 1em; }\n  .media-view .spacer {\n    padding-top: 100%; }\n  .media-view .container {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0; }\n    .media-view .container IMG, .media-view .container CANVAS {\n      display: block;\n      width: 100%;\n      height: auto;\n      top: 0;\n      left: 0; }\n    .media-view .container .image, .media-view .container .video, .media-view .container .audio, .media-view .container .website {\n      cursor: pointer; }\n    .media-view .container .overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      z-index: 0; }\n      .media-view .container .overlay .icon {\n        font-size: 10em; }\n      .media-view .container .overlay .duration {\n        font-size: 2em; }\n      .media-view .container .overlay.hidden {\n        opacity: 0; }\n        .media-view .container .overlay.hidden:hover {\n          opacity: 0.6; }\n    .media-view .container .website A {\n      display: block; }\n      .media-view .container .website A:link, .media-view .container .website A:visited {\n        color: #000000; }\n    .media-view .container .video .overlay {\n      color: #111111; }\n    .media-view .container .audio {\n      padding-top: 50%;\n      padding-bottom: 50%;\n      background-color: #111111; }\n      .media-view .container .audio .overlay {\n        color: #eeeeee; }\n    .media-view .container .navigation {\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      background-color: rgba(0, 0, 0, 0.5); }\n      .media-view .container .navigation .left {\n        float: left; }\n      .media-view .container .navigation .right {\n        float: right; }\n    .media-view .container audio {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.notification-view {\n  display: block;\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  margin-bottom: 0.5em;\n  padding: 0.4em 0.4em 0.3em 0.4em;\n  color: #666666;\n  cursor: pointer; }\n  .notification-view .event {\n    float: left; }\n    .notification-view .event .profile-image {\n      margin: 0 0.4em 0 0; }\n    .notification-view .event .text {\n      vertical-align: middle; }\n  .notification-view .date {\n    float: right;\n    margin: 0.1em 0 0 2em;\n    color: #666666; }\n    .notification-view .date .time {\n      vertical-align: middle; }\n    .notification-view .date .fa {\n      margin-left: 0.4em; }\n  .notification-view.unread {\n    color: #eeeeee; }\n    .notification-view.unread .date {\n      color: #eeeeee; }\n  .notification-view:after {\n    content: "";\n    display: table;\n    clear: both; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".reaction-view-options .button {\n  color: #666666;\n  padding-left: 0.5em;\n  padding-right: 0.25em;\n  opacity: 0.2; }\n  .reaction-view-options .button.active {\n    opacity: 1; }\n    .reaction-view-options .button.active:hover {\n      color: #eeeeee; }\n\n.reaction-view-options .container {\n  right: 0.5em;\n  top: 1.25em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".reaction-view {\n  display: flex;\n  flex-direction: row;\n  color: #cccccc;\n  padding: 1px 0 1px 0;\n  border: 1px solid transparent; }\n  .reaction-view A:link, .reaction-view A:visited {\n    color: #cccccc; }\n    .reaction-view A:link A:hover, .reaction-view A:visited A:hover {\n      color: #eeeeee; }\n  .reaction-view .profile-image-column {\n    flex: 0 0 auto; }\n    .reaction-view .profile-image-column .profile-image {\n      margin: 0 0.4em 0 0.2em; }\n  .reaction-view .contents-column {\n    flex: 1 1 auto; }\n    .reaction-view .contents-column .text {\n      padding: 0.25em 0.25em 0 0; }\n      .reaction-view .contents-column .text .comment.markdown IMG, .reaction-view .contents-column .text .comment.markdown CANVAS {\n        height: 1.5em;\n        vertical-align: middle;\n        cursor: pointer; }\n      .reaction-view .contents-column .text .note:link, .reaction-view .contents-column .text .note:visited, .reaction-view .contents-column .text .issue-assignment:link, .reaction-view .contents-column .text .issue-assignment:visited, .reaction-view .contents-column .text .issue-tracking:link, .reaction-view .contents-column .text .issue-tracking:visited {\n        color: #cccccc;\n        text-decoration: none;\n        cursor: pointer; }\n        .reaction-view .contents-column .text .note:link:hover, .reaction-view .contents-column .text .note:visited:hover, .reaction-view .contents-column .text .issue-assignment:link:hover, .reaction-view .contents-column .text .issue-assignment:visited:hover, .reaction-view .contents-column .text .issue-tracking:link:hover, .reaction-view .contents-column .text .issue-tracking:visited:hover {\n          color: #ffffff; }\n      .reaction-view .contents-column .text .in-progress {\n        color: #666666; }\n    .reaction-view .contents-column .reaction-view-options {\n      float: right; }\n    .reaction-view .contents-column .media {\n      padding: 0.5em 1em 0.5em 1em;\n      max-width: 300px; }\n    .reaction-view .contents-column audio {\n      margin-top: 0.25em;\n      width: 100%; }\n  .reaction-view.selected {\n    animation: flash normal 5s 1 ease-in-out;\n    animation-delay: 1.5s; }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".story-contents {\n  margin-top: 1em;\n  margin-bottom: 0.25em; }\n  .story-contents .text {\n    color: #cccccc; }\n    .story-contents .text A:link, .story-contents .text A:visited {\n      text-decoration: none;\n      color: #cccccc; }\n      .story-contents .text A:link:hover, .story-contents .text A:visited:hover {\n        color: #ffffff; }\n    .story-contents .text P:first-child {\n      margin-top: 0; }\n    .story-contents .text P:last-child {\n      margin-bottom: 0; }\n    .story-contents .text .status-opened, .story-contents .text .status-reopened {\n      color: #99ff66; }\n    .story-contents .text .status-closed {\n      color: #ff3333; }\n    .story-contents .text .tag {\n      font-size: 0.9em;\n      color: #ffffff;\n      background-color: #444444;\n      padding: 0.2em 0.4em 0.2em 0.4em;\n      border-radius: 0.25em; }\n    .story-contents .text.plain-text {\n      white-space: pre-wrap; }\n      .story-contents .text.plain-text .list-item.vote-count {\n        width: 100%; }\n    .story-contents .text.markdown IMG, .story-contents .text.markdown CANVAS {\n      vertical-align: top;\n      height: 1.5em;\n      cursor: pointer;\n      vertical-align: middle; }\n    .story-contents .text.survey .list-item, .story-contents .text.survey .vote-count, .story-contents .text.task-list .list-item, .story-contents .text.task-list .vote-count {\n      margin-bottom: 0.2em; }\n      .story-contents .text.survey .list-item H1, .story-contents .text.survey .list-item H2, .story-contents .text.survey .list-item H3, .story-contents .text.survey .list-item H4, .story-contents .text.survey .list-item H5, .story-contents .text.survey .list-item H6, .story-contents .text.survey .vote-count H1, .story-contents .text.survey .vote-count H2, .story-contents .text.survey .vote-count H3, .story-contents .text.survey .vote-count H4, .story-contents .text.survey .vote-count H5, .story-contents .text.survey .vote-count H6, .story-contents .text.task-list .list-item H1, .story-contents .text.task-list .list-item H2, .story-contents .text.task-list .list-item H3, .story-contents .text.task-list .list-item H4, .story-contents .text.task-list .list-item H5, .story-contents .text.task-list .list-item H6, .story-contents .text.task-list .vote-count H1, .story-contents .text.task-list .vote-count H2, .story-contents .text.task-list .vote-count H3, .story-contents .text.task-list .vote-count H4, .story-contents .text.task-list .vote-count H5, .story-contents .text.task-list .vote-count H6 {\n        display: inline-block;\n        margin-top: 0;\n        margin-bottom: 0; }\n      .story-contents .text.survey .list-item:last-child, .story-contents .text.survey .vote-count:last-child, .story-contents .text.task-list .list-item:last-child, .story-contents .text.task-list .vote-count:last-child {\n        margin-bottom: 0; }\n    .story-contents .text.survey .vote-count .label {\n      display: block;\n      margin-bottom: 0.1em; }\n    .story-contents .text.survey .vote-count .bar {\n      display: block;\n      position: relative;\n      border: 1px solid #aaaaaa;\n      font-size: 0.8em;\n      height: 1.5em;\n      margin-bottom: 0.4em; }\n      .story-contents .text.survey .vote-count .bar .percent {\n        position: absolute;\n        display: block;\n        left: 0.2em;\n        top: 0.1em;\n        color: #333333; }\n      .story-contents .text.survey .vote-count .bar .count {\n        position: absolute;\n        display: block;\n        right: 0.2em;\n        top: 0.1em;\n        color: #cccccc; }\n      .story-contents .text.survey .vote-count .bar .filled {\n        display: block;\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0; }\n        .story-contents .text.survey .vote-count .bar .filled.color-1 {\n          background-color: #ffff99; }\n        .story-contents .text.survey .vote-count .bar .filled.color-2 {\n          background-color: #ff00cc; }\n        .story-contents .text.survey .vote-count .bar .filled.color-3 {\n          background-color: #6666ff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-4 {\n          background-color: #33ff99; }\n        .story-contents .text.survey .vote-count .bar .filled.color-5 {\n          background-color: #ff6600; }\n        .story-contents .text.survey .vote-count .bar .filled.color-6 {\n          background-color: #ff33ff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-7 {\n          background-color: #00ccff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-8 {\n          background-color: #99ff66; }\n        .story-contents .text.survey .vote-count .bar .filled.color-9 {\n          background-color: #ff3333; }\n        .story-contents .text.survey .vote-count .bar .filled.color-10 {\n          background-color: #9900ff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-11 {\n          background-color: #66ffff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-12 {\n          background-color: #ccff00; }\n    .story-contents .text.milestone .start-date {\n      color: #99ff66; }\n    .story-contents .text.milestone .due-date {\n      color: #ff3333; }\n    .story-contents .text.push .files, .story-contents .text.push .lines {\n      display: inline-block;\n      list-style-type: none;\n      vertical-align: top;\n      margin: 0;\n      padding: 0; }\n      .story-contents .text.push .files .added, .story-contents .text.push .lines .added {\n        color: #99ee66; }\n      .story-contents .text.push .files .deleted, .story-contents .text.push .lines .deleted {\n        color: #ee3333; }\n      .story-contents .text.push .files .modified, .story-contents .text.push .lines .modified {\n        color: #66aaff; }\n      .story-contents .text.push .files .renamed, .story-contents .text.push .lines .renamed {\n        color: #eeee66; }\n    .story-contents .text.push .files {\n      margin-right: 2em; }\n  .story-contents .impact .message {\n    color: #cccccc; }\n  .story-contents .impact .scrollable {\n    margin: -0.5em 0 0.3em 0;\n    max-height: 15em; }\n  .story-contents .buttons {\n    text-align: right; }\n  .story-contents audio {\n    margin-top: 0.25em;\n    width: 100%; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".story-view {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%; }\n  .story-view .header {\n    background-color: #211a1a; }\n    .story-view .header .column-1 > .profile-image {\n      position: relative;\n      height: 0.8em;\n      vertical-align: top;\n      margin-top: 0.1em;\n      margin-right: 0.5em;\n      overflow: visible; }\n      .story-view .header .column-1 > .profile-image IMG, .story-view .header .column-1 > .profile-image svg {\n        position: absolute;\n        top: 0;\n        left: 0; }\n  .story-view .body .column-1 .media-view {\n    max-width: 500px; }\n  .story-view .body .column-2 {\n    position: relative; }\n    .story-view .body .column-2 .scrollable {\n      max-height: 24em; }\n      .story-view .body .column-2 .scrollable.abs {\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        max-height: none; }\n  .story-view .padded {\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .single-col .story-view {\n    margin-bottom: 0.5em; }\n  .double-col .story-view,\n  .triple-col .story-view {\n    display: table;\n    margin-bottom: 1em; }\n    .double-col .story-view .header,\n    .triple-col .story-view .header {\n      display: table-row; }\n    .double-col .story-view .body,\n    .triple-col .story-view .body {\n      display: table-row; }\n    .double-col .story-view .column-1,\n    .double-col .story-view .column-2,\n    .double-col .story-view .column-3,\n    .triple-col .story-view .column-1,\n    .triple-col .story-view .column-2,\n    .triple-col .story-view .column-3 {\n      display: table-cell;\n      vertical-align: top; }\n  .double-col .story-view .column-1,\n  .double-col .story-view .column-2 {\n    width: 50%; }\n  .triple-col .story-view .column-1,\n  .triple-col .story-view .column-2 {\n    width: 40%; }\n  .triple-col .story-view .column-3 {\n    width: 20%; }\n  .story-view.selected {\n    animation: flash normal 5s 1 ease-in-out; }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".user-statistics .legend {\n  text-align: right;\n  font-size: 0.8em;\n  color: #999999;\n  padding: 0.5em 0.5em 0 0; }\n  .user-statistics .legend .item {\n    display: inline-block;\n    white-space: nowrap;\n    margin-left: 0.6em; }\n    .user-statistics .legend .item .ct-chart-bar {\n      width: 0.8em;\n      height: 0.8em;\n      vertical-align: middle;\n      margin-right: 0.3em; }\n    .user-statistics .legend .item .label {\n      vertical-align: middle; }\n\n.user-statistics .ct-chart {\n  height: 12.8em; }\n  .user-statistics .ct-chart .ct-label {\n    color: #999999; }\n  .user-statistics .ct-chart .ct-grids line {\n    stroke: #444444; }\n  .user-statistics .ct-chart .ct-bar {\n    cursor: pointer; }\n  .user-statistics .ct-chart .date-label {\n    font-family: sans-serif;\n    font-size: 12px;\n    fill: #eeeeee; }\n  .user-statistics .ct-chart .date-arrow {\n    font-family: FontAwesome;\n    font-size: 12px;\n    fill: #eeeeee; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".user-view {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%; }\n  .user-view .header {\n    background-color: #211a1a; }\n    .user-view .header .profile-image {\n      position: relative;\n      height: 0.8em;\n      vertical-align: top;\n      margin-top: 0.1em;\n      margin-right: 0.5em;\n      overflow: visible; }\n      .user-view .header .profile-image IMG, .user-view .header .profile-image svg {\n        position: absolute;\n        top: 0;\n        left: 0; }\n    .user-view .header .roles {\n      color: #eeeeee; }\n  .user-view .body .name {\n    font-size: 1.5em;\n    margin-left: 4.35em;\n    margin-top: 0.4em;\n    margin-bottom: 0.2em;\n    color: #eeeeee; }\n  .user-view .body .tag {\n    font-size: 1.1em;\n    margin-left: 5.9em;\n    margin-top: 0.2em;\n    margin-bottom: 0.4em;\n    color: #666666;\n    display: inline-block; }\n  .user-view .padded {\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .single-col .user-view {\n    margin-bottom: 0.5em; }\n    .single-col .user-view .column-2:empty {\n      display: none; }\n  .double-col .user-view,\n  .triple-col .user-view {\n    display: table;\n    margin-bottom: 1em; }\n    .double-col .user-view .header,\n    .triple-col .user-view .header {\n      display: table-row; }\n    .double-col .user-view .body,\n    .triple-col .user-view .body {\n      display: table-row; }\n    .double-col .user-view .column-1,\n    .double-col .user-view .column-2,\n    .double-col .user-view .column-3,\n    .triple-col .user-view .column-1,\n    .triple-col .user-view .column-2,\n    .triple-col .user-view .column-3 {\n      display: table-cell;\n      vertical-align: top; }\n  .double-col .user-view .column-1 {\n    width: 50%; }\n  .double-col .user-view .column-2 {\n    width: 50%; }\n  .triple-col .user-view .column-1 {\n    width: 40%; }\n  .triple-col .user-view .column-2 {\n    width: 40%; }\n  .triple-col .user-view .column-3 {\n    width: 20%; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".author-names {\n  color: #eeeeee; }\n  .author-names .author {\n    display: inline-block;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    vertical-align: bottom; }\n    .author-names .author.sole {\n      max-width: calc(100% - 5em); }\n    .author-names .author.lead {\n      max-width: calc(60% - 4em); }\n    .author-names .author.co {\n      max-width: calc(40% - 4em); }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".bottom-navigation {\n  flex: 0 0 auto;\n  display: flex;\n  align-items: flex-start;\n  transition: height 0.7s;\n  z-index: 2; }\n  .bottom-navigation .container {\n    display: flex;\n    flex-direction: row;\n    background-color: #262626;\n    border-top: 1px solid #323232;\n    padding-left: 4px;\n    padding-right: 4px;\n    width: 100%; }\n  .bottom-navigation .button {\n    display: block;\n    flex: 1 1 auto;\n    text-align: center;\n    padding: 8px 0 8px 0;\n    cursor: pointer;\n    color: #888888; }\n    .bottom-navigation .button:link, .bottom-navigation .button:visited {\n      color: #888888;\n      text-decoration: none; }\n    .bottom-navigation .button:hover, .bottom-navigation .button:hover .label {\n      color: #eeeeee; }\n    .bottom-navigation .button.active, .bottom-navigation .button.active .label {\n      color: #ffffff; }\n    .bottom-navigation .button .fa {\n      font-size: 1.4em; }\n    .bottom-navigation .button .label {\n      font-size: 0.8em;\n      vertical-align: 0.2em;\n      color: #666666; }\n    .bottom-navigation .button .badge {\n      position: relative; }\n      .bottom-navigation .button .badge .number {\n        position: absolute;\n        color: #111111;\n        background-color: #fca326;\n        font-size: 0.6em;\n        border-radius: 2em;\n        padding: 0.10em 0.5em 0.2em 0.5em;\n        left: 0.25em;\n        top: -0.5em; }\n    .bottom-navigation .button.stacking {\n      padding: 4px 0 0 0; }\n      .bottom-navigation .button.stacking .badge .number {\n        left: 0.5em;\n        top: -0.7em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".calendar-bar {\n  padding: 4px 4px 4px 4px;\n  overflow-x: auto;\n  white-space: nowrap;\n  width: 100%;\n  direction: rtl;\n  /* the following only works on Chrome */\n  /*\n    display: flex;\n    flex-direction: row-reverse;\n\n    .calendar {\n        flex: 0 0 auto;\n    }\n*/ }\n  .calendar-bar::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.3);\n    background-color: transparent; }\n  .calendar-bar::-webkit-scrollbar {\n    height: 8px;\n    background-color: transparent; }\n  .calendar-bar::-webkit-scrollbar-thumb {\n    -webkit-box-shadow: inset 0 0 3px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1); }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".calendar {\n  display: inline-block;\n  border-collapse: collapse;\n  border-spacing: 0;\n  direction: ltr;\n  margin-left: 0.2em;\n  margin-right: 0.2em; }\n  .calendar .title TH {\n    font-size: 0.8em;\n    font-weight: bold;\n    color: #999999;\n    border: 1px solid #444444;\n    padding: 0.25em 0.1em 0.2em 0.1em; }\n  .calendar .headings TH {\n    font-size: 0.6em;\n    font-weight: normal;\n    color: #999999;\n    border: 1px solid #444444;\n    padding: 0.2em 0 0.2em 0; }\n  .calendar .headings TH.weekend {\n    background-color: #333333; }\n  .calendar .dates TD {\n    width: 1.6em;\n    height: 1.4em;\n    font-size: 0.8em;\n    color: #666666;\n    text-align: center;\n    border: 1px solid #444444;\n    cursor: default; }\n    .calendar .dates TD A:link, .calendar .dates TD A:visited {\n      text-decoration: none;\n      color: #cccccc; }\n  .calendar .dates TD.weekend {\n    background-color: #333333; }\n  .calendar .dates TD.today {\n    color: #ffffff;\n    background-color: #000000; }\n    .calendar .dates TD.today A:link, .calendar .dates TD.today A:visited {\n      color: #ffffff; }\n  .calendar .dates TD.selected {\n    color: #000000;\n    background-color: #eeeeee; }\n    .calendar .dates TD.selected A:link, .calendar .dates TD.selected A:visited {\n      color: #000000; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.ct-label {\n  fill: rgba(0, 0, 0, 0.4);\n  color: rgba(0, 0, 0, 0.4);\n  font-size: 0.75rem;\n  line-height: 1; }\n\n.ct-chart-line .ct-label,\n.ct-chart-bar .ct-label {\n  display: block;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex; }\n\n.ct-chart-pie .ct-label,\n.ct-chart-donut .ct-label {\n  dominant-baseline: central; }\n\n.ct-label.ct-horizontal.ct-start {\n  -webkit-box-align: flex-end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: flex-end;\n  align-items: flex-end;\n  -webkit-box-pack: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-pack: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-label.ct-horizontal.ct-end {\n  -webkit-box-align: flex-start;\n  -webkit-align-items: flex-start;\n  -ms-flex-align: flex-start;\n  align-items: flex-start;\n  -webkit-box-pack: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-pack: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-label.ct-vertical.ct-start {\n  -webkit-box-align: flex-end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: flex-end;\n  align-items: flex-end;\n  -webkit-box-pack: flex-end;\n  -webkit-justify-content: flex-end;\n  -ms-flex-pack: flex-end;\n  justify-content: flex-end;\n  text-align: right;\n  text-anchor: end; }\n\n.ct-label.ct-vertical.ct-end {\n  -webkit-box-align: flex-end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: flex-end;\n  align-items: flex-end;\n  -webkit-box-pack: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-pack: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-chart-bar .ct-label.ct-horizontal.ct-start {\n  -webkit-box-align: flex-end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: flex-end;\n  align-items: flex-end;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n  text-anchor: start; }\n\n.ct-chart-bar .ct-label.ct-horizontal.ct-end {\n  -webkit-box-align: flex-start;\n  -webkit-align-items: flex-start;\n  -ms-flex-align: flex-start;\n  align-items: flex-start;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n  text-anchor: start; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-start {\n  -webkit-box-align: flex-end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: flex-end;\n  align-items: flex-end;\n  -webkit-box-pack: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-pack: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-end {\n  -webkit-box-align: flex-start;\n  -webkit-align-items: flex-start;\n  -ms-flex-align: flex-start;\n  align-items: flex-start;\n  -webkit-box-pack: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-pack: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-start {\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: flex-end;\n  -webkit-justify-content: flex-end;\n  -ms-flex-pack: flex-end;\n  justify-content: flex-end;\n  text-align: right;\n  text-anchor: end; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-end {\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-pack: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: end; }\n\n.ct-grid {\n  stroke: rgba(0, 0, 0, 0.2);\n  stroke-width: 1px;\n  stroke-dasharray: 2px; }\n\n.ct-grid-background {\n  fill: none; }\n\n.ct-point {\n  stroke-width: 10px;\n  stroke-linecap: round; }\n\n.ct-line {\n  fill: none;\n  stroke-width: 4px; }\n\n.ct-area {\n  stroke: none;\n  fill-opacity: 0.1; }\n\n.ct-bar {\n  fill: none;\n  stroke-width: 10px; }\n\n.ct-slice-donut {\n  fill: none;\n  stroke-width: 60px; }\n\n.ct-series-a .ct-point, .ct-series-a .ct-line, .ct-series-a .ct-bar, .ct-series-a .ct-slice-donut {\n  stroke: #e6e68a; }\n\n.ct-series-a .ct-slice-pie, .ct-series-a .ct-slice-donut-solid, .ct-series-a .ct-area {\n  fill: #e6e68a; }\n\n.ct-series-b .ct-point, .ct-series-b .ct-line, .ct-series-b .ct-bar, .ct-series-b .ct-slice-donut {\n  stroke: #db00af; }\n\n.ct-series-b .ct-slice-pie, .ct-series-b .ct-slice-donut-solid, .ct-series-b .ct-area {\n  fill: #db00af; }\n\n.ct-series-c .ct-point, .ct-series-c .ct-line, .ct-series-c .ct-bar, .ct-series-c .ct-slice-donut {\n  stroke: #5858db; }\n\n.ct-series-c .ct-slice-pie, .ct-series-c .ct-slice-donut-solid, .ct-series-c .ct-area {\n  fill: #5858db; }\n\n.ct-series-d .ct-point, .ct-series-d .ct-line, .ct-series-d .ct-bar, .ct-series-d .ct-slice-donut {\n  stroke: #2cdb84; }\n\n.ct-series-d .ct-slice-pie, .ct-series-d .ct-slice-donut-solid, .ct-series-d .ct-area {\n  fill: #2cdb84; }\n\n.ct-series-e .ct-point, .ct-series-e .ct-line, .ct-series-e .ct-bar, .ct-series-e .ct-slice-donut {\n  stroke: #db5800; }\n\n.ct-series-e .ct-slice-pie, .ct-series-e .ct-slice-donut-solid, .ct-series-e .ct-area {\n  fill: #db5800; }\n\n.ct-series-f .ct-point, .ct-series-f .ct-line, .ct-series-f .ct-bar, .ct-series-f .ct-slice-donut {\n  stroke: #db2cdb; }\n\n.ct-series-f .ct-slice-pie, .ct-series-f .ct-slice-donut-solid, .ct-series-f .ct-area {\n  fill: #db2cdb; }\n\n.ct-series-g .ct-point, .ct-series-g .ct-line, .ct-series-g .ct-bar, .ct-series-g .ct-slice-donut {\n  stroke: #00afdb; }\n\n.ct-series-g .ct-slice-pie, .ct-series-g .ct-slice-donut-solid, .ct-series-g .ct-area {\n  fill: #00afdb; }\n\n.ct-series-h .ct-point, .ct-series-h .ct-line, .ct-series-h .ct-bar, .ct-series-h .ct-slice-donut {\n  stroke: #84db58; }\n\n.ct-series-h .ct-slice-pie, .ct-series-h .ct-slice-donut-solid, .ct-series-h .ct-area {\n  fill: #84db58; }\n\n.ct-series-i .ct-point, .ct-series-i .ct-line, .ct-series-i .ct-bar, .ct-series-i .ct-slice-donut {\n  stroke: #db2c2c; }\n\n.ct-series-i .ct-slice-pie, .ct-series-i .ct-slice-donut-solid, .ct-series-i .ct-area {\n  fill: #db2c2c; }\n\n.ct-series-j .ct-point, .ct-series-j .ct-line, .ct-series-j .ct-bar, .ct-series-j .ct-slice-donut {\n  stroke: #8400db; }\n\n.ct-series-j .ct-slice-pie, .ct-series-j .ct-slice-donut-solid, .ct-series-j .ct-area {\n  fill: #8400db; }\n\n.ct-series-k .ct-point, .ct-series-k .ct-line, .ct-series-k .ct-bar, .ct-series-k .ct-slice-donut {\n  stroke: #58dbdb; }\n\n.ct-series-k .ct-slice-pie, .ct-series-k .ct-slice-donut-solid, .ct-series-k .ct-area {\n  fill: #58dbdb; }\n\n.ct-series-l .ct-point, .ct-series-l .ct-line, .ct-series-l .ct-bar, .ct-series-l .ct-slice-donut {\n  stroke: #afdb00; }\n\n.ct-series-l .ct-slice-pie, .ct-series-l .ct-slice-donut-solid, .ct-series-l .ct-area {\n  fill: #afdb00; }\n\n.ct-square {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-square:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 100%; }\n  .ct-square:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-square > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-second {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-second:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 93.75%; }\n  .ct-minor-second:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-second > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-second {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-second:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 88.88889%; }\n  .ct-major-second:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-second > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-third {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-third:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 83.33333%; }\n  .ct-minor-third:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-third > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-third {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-third:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 80%; }\n  .ct-major-third:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-third > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-perfect-fourth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-perfect-fourth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 75%; }\n  .ct-perfect-fourth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-perfect-fourth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-perfect-fifth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-perfect-fifth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 66.66667%; }\n  .ct-perfect-fifth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-perfect-fifth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-sixth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-sixth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 62.5%; }\n  .ct-minor-sixth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-sixth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-golden-section {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-golden-section:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 61.8047%; }\n  .ct-golden-section:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-golden-section > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-sixth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-sixth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 60%; }\n  .ct-major-sixth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-sixth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-seventh {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-seventh:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 56.25%; }\n  .ct-minor-seventh:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-seventh > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-seventh {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-seventh:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 53.33333%; }\n  .ct-major-seventh:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-seventh > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-octave {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-octave:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 50%; }\n  .ct-octave:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-octave > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-tenth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-tenth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 40%; }\n  .ct-major-tenth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-tenth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-eleventh {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-eleventh:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 37.5%; }\n  .ct-major-eleventh:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-eleventh > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-twelfth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-twelfth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 33.33333%; }\n  .ct-major-twelfth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-twelfth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-double-octave {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-double-octave:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 25%; }\n  .ct-double-octave:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-double-octave > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".coauthoring-button {\n  font-size: 0.9em;\n  color: #666666;\n  cursor: pointer;\n  margin-left: 4em; }\n  .coauthoring-button .label {\n    margin-left: 0.2em; }\n  .coauthoring-button:hover {\n    color: #eeeeee; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".corner-pop-up {\n  float: right; }\n  .corner-pop-up .button {\n    color: #eeeeee; }\n    .corner-pop-up .button:hover {\n      color: #666666; }\n  .corner-pop-up .container {\n    right: 0.3em;\n    top: 1.5em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".device-placeholder {\n  font-size: 8em;\n  padding-left: 0.5em;\n  padding-right: 0.5em;\n  color: #111111; }\n  .device-placeholder .fa-ban {\n    color: #ee3333;\n    opacity: 0;\n    transition: opacity 1s; }\n  .device-placeholder.blocked .fa-ban {\n    opacity: 1; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".drop-zone .overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  border: 3px solid #fca326; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".duration-indiactor .icon {\n  color: #eeeeee; }\n  .duration-indiactor .icon.blinking {\n    color: #cc2222;\n    opacity: 1;\n    animation: blinking 0.5s linear infinite; }\n\n@keyframes blinking {\n  50% {\n    opacity: 0; } }\n\n.duration-indiactor .duration {\n  margin-left: 0.5em;\n  color: #eeeeee; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".empty-message {\n  position: relative;\n  height: 25vh;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center; }\n  .empty-message .text {\n    font-weight: bold;\n    flex: 0 1 auto;\n    position: absolute;\n    color: #ffffff;\n    opacity: 0.2;\n    animation-name: fade-in;\n    animation-duration: 2s;\n    animation-iteration-count: 1; }\n\n@keyframes fade-in {\n  0% {\n    opacity: 0; }\n  \n  100% {\n    opacity: 0.2; } }\n    .double-col .empty-message .text,\n    .triple-col .empty-message .text {\n      font-size: 1.5em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.header-button {\n  display: inline-block;\n  color: #666666;\n  margin-right: 0.5em;\n  cursor: pointer; }\n  .header-button:hover {\n    color: #eeeeee; }\n  .header-button.disabled {\n    cursor: default; }\n    .header-button.disabled:hover {\n      color: #666666; }\n  .header-button.highlighted {\n    color: #e24329; }\n  .header-button .label {\n    font-size: 0.9em;\n    margin-left: 0.3em; }\n  .header-button INPUT[type="file"] {\n    position: absolute;\n    z-index: -50000;\n    width: 1px;\n    height: 1px;\n    top: -1000px; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".loading-animation {\n  position: relative;\n  height: 25vh; }\n  .loading-animation .dot {\n    position: absolute;\n    background-color: #ffffff;\n    top: 50%;\n    width: 5px;\n    height: 5px;\n    left: -5%;\n    opacity: 0;\n    animation-name: in-and-out;\n    animation-duration: 8s;\n    animation-iteration-count: infinite; }\n\n@keyframes in-and-out {\n  0% {\n    left: -5%;\n    opacity: 0.1; }\n  \n  5% {\n    left: 50%;\n    opacity: 0.2; }\n  \n  48% {\n    left: 50%;\n    opacity: 0.2; }\n  \n  53% {\n    left: 105%;\n    opacity: 0.1; }\n  54% {\n    left: 105%;\n    opacity: 0.0; }\n  100% {\n    left: -5%;\n    opacity: 0.0; } }\n    .loading-animation .dot.first {\n      margin-left: 24px;\n      animation-delay: 1s; }\n    .loading-animation .dot.second {\n      margin-left: 8px;\n      animation-delay: 2s; }\n    .loading-animation .dot.third {\n      margin-left: -8px;\n      animation-delay: 3s; }\n    .loading-animation .dot.fourth {\n      margin-left: -24px;\n      animation-delay: 4s; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".media-button {\n  display: inline-block;\n  color: #666666;\n  padding: 0.45em 0.1em 0.3em 0.5em;\n  margin-left: 0.2em;\n  margin-right: 0.1em;\n  cursor: pointer; }\n  .media-button:hover {\n    color: #eeeeee; }\n  .media-button.disabled {\n    cursor: default; }\n    .media-button.disabled:hover {\n      color: #666666; }\n  .media-button .label {\n    font-size: 0.9em;\n    margin-left: 0.3em; }\n\n.media-direction {\n  padding: 0.2em 0.3em 0.1em 0.3em; }\n  .media-direction .backward-button, .media-direction .forward-button {\n    display: inline-block;\n    font-size: 1.2em;\n    color: #666666;\n    padding: 0.1em 0.5em 0.1em 0.5em;\n    cursor: pointer;\n    vertical-align: middle; }\n  .media-direction .position {\n    display: inline-block;\n    font-size: 0.9em;\n    vertical-align: middle;\n    color: #cccccc; }\n  .media-direction:hover .backward-button, .media-direction:hover .forward-button {\n    color: #eeeeee; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".media-placeholder {\n  position: absolute;\n  left: 1em;\n  top: 1em;\n  right: 1em;\n  bottom: 1em;\n  border: 2px dashed rgba(127, 127, 127, 0.15); }\n  .media-placeholder .message {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    color: #666666;\n    margin: auto;\n    user-select: none;\n    cursor: default;\n    opacity: 0;\n    animation: fadeInAndOut 30s normal forwards; }\n\n@keyframes fadeInAndOut {\n  0% {\n    opacity: 0; }\n  15% {\n    opacity: 1; }\n  30% {\n    opacity: 0; }\n  100% {\n    opacity: 0; } }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".media-toolbar {\n  display: inline-block; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".multiple-user-names {\n  position: relative; }\n  .multiple-user-names .label {\n    cursor: pointer; }\n  .multiple-user-names .popup-container {\n    position: absolute;\n    left: 0.5em;\n    top: 1.5em;\n    width: 100vw;\n    z-index: 500; }\n    .multiple-user-names .popup-container .popup {\n      display: inline-block;\n      border: 1px solid black;\n      padding: 0.3em 0.3em 0.1em 0.3em;\n      background-color: #fff;\n      box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.5); }\n      .multiple-user-names .popup-container .popup .user {\n        display: block;\n        margin-bottom: 0.2em; }\n        .multiple-user-names .popup-container .popup .user .name {\n          color: #333;\n          margin-left: 0.2em;\n          vertical-align: middle; }\n      .multiple-user-names .popup-container .popup .more {\n        color: #bbb;\n        font-size: 0.8em;\n        text-align: right;\n        border-top: 1px solid #eee; }\n\n.multiple-user-names-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 100%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .multiple-user-names-dialog-box .scrollable {\n    flex: 1 1 auto; }\n    .multiple-user-names-dialog-box .scrollable .list {\n      min-width: 14em;\n      padding-bottom: 0.1em; }\n      .multiple-user-names-dialog-box .scrollable .list .user {\n        margin-bottom: 0.2em; }\n        .multiple-user-names-dialog-box .scrollable .list .user .profile-image {\n          float: none;\n          margin: 0; }\n        .multiple-user-names-dialog-box .scrollable .list .user .name {\n          margin-left: 0.2em;\n          vertical-align: middle; }\n  .multiple-user-names-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".new-items-alert {\n  position: absolute;\n  transition: opacity 0.5s;\n  opacity: 1;\n  right: 3em;\n  top: 2em;\n  padding: 0.75em 0.75em 0.75em 0.75em;\n  color: #111111;\n  background-color: #fca326;\n  cursor: pointer; }\n  .new-items-alert.hide {\n    opacity: 0; }\n  .new-items-alert .fa {\n    margin-right: 0.5em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".option-button {\n  display: table;\n  width: 100%;\n  color: #666666;\n  margin-bottom: 0.35em;\n  cursor: pointer; }\n  .option-button:link, .option-button:visited {\n    text-decoration: none; }\n  .option-button .fa {\n    display: table-cell;\n    width: 1em;\n    padding-right: 0.25em; }\n  .option-button.selected, .option-button:hover {\n    color: #eeeeee; }\n  .option-button.disabled {\n    color: #666666;\n    opacity: 0.25;\n    cursor: default; }\n  .option-button .label {\n    display: table-cell; }\n  .option-button:last-child {\n    margin-bottom: 0; }\n\n.pop-up-menu .option-button.selected, .pop-up-menu .option-button:hover {\n  color: #000000; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".pop-up-menu {\n  position: relative; }\n  .pop-up-menu .button.active {\n    cursor: pointer; }\n  .pop-up-menu .container {\n    position: absolute;\n    width: 80vw;\n    right: 0;\n    top: 1em;\n    z-index: 1000;\n    text-align: right; }\n    .pop-up-menu .container .menu {\n      display: inline-block;\n      border: 1px solid black;\n      padding: 0.5em 0.5em 0.5em 0.5em;\n      background-color: #eeeeee;\n      box-shadow: 3px 3px 3px 0px rgba(0, 0, 0, 0.75);\n      text-align: left;\n      max-width: 20em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".profile-image {\n  display: inline-block;\n  vertical-align: middle;\n  overflow: hidden; }\n  .profile-image IMG, .profile-image CANVAS, .profile-image .placeholder {\n    width: 100%; }\n  .profile-image .placeholder {\n    position: relative;\n    padding-top: 50%;\n    padding-bottom: 50%;\n    background-color: #999999;\n    overflow: hidden; }\n    .profile-image .placeholder svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      height: 100%;\n      margin: auto; }\n  .profile-image.small {\n    width: 1.5em;\n    height: 1.5em; }\n  .profile-image.medium {\n    width: 3em;\n    height: 3em; }\n  .profile-image.large {\n    width: 6em;\n    height: 6em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,'.push-button {\n  min-width: 5em;\n  margin-left: 0.4em;\n  margin-bottom: 0.1em;\n  padding: 0.4em 1em 0.4em 1em;\n  color: #666666;\n  font-size: 0.9em;\n  background-color: #4d3936;\n  border: 2px solid #4d3936; }\n  .push-button:not(:disabled).emphasized, .push-button:not(:disabled):hover, .push-button:not(:disabled):active {\n    color: #eeeeee;\n    background-color: #806666;\n    border: 2px solid #806666; }\n  .push-button:not(:disabled):active {\n    border: 2px inset #333333; }\n  .push-button:first-child {\n    margin-left: 0; }\n  .push-button INPUT[type="file"] {\n    position: absolute;\n    z-index: -50000;\n    width: 1px;\n    height: 1px;\n    top: -1000px; }\n',""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".reaction-media-toolbar {\n  display: inline-block;\n  padding-top: 0.30em;\n  float: left; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".reaction-progress {\n  color: #666666;\n  font-size: 0.9em;\n  float: right; }\n  .reaction-progress .time.today {\n    color: #aaaaaa; }\n  .reaction-progress .time.yesterday {\n    color: #999999; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".role-filter-bar {\n  padding: 4px 4px 4px 4px;\n  overflow-x: auto;\n  white-space: nowrap; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".role-filter-button {\n  display: inline-block;\n  margin-right: 0.5em;\n  vertical-align: top;\n  cursor: pointer; }\n  .role-filter-button .contents {\n    position: relative;\n    border: 1px solid #444444;\n    margin: 1px;\n    overflow: hidden; }\n    .role-filter-button .contents .row {\n      width: 12em;\n      height: 3em; }\n      .role-filter-button .contents .row .profile-image {\n        display: inline-block; }\n    .role-filter-button .contents .band {\n      position: absolute;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      left: 0;\n      right: 0;\n      top: 3em;\n      background-color: #1a1a1a;\n      color: #eeeeee;\n      padding: 0.25em 0.25em 0.25em 0.25em;\n      min-height: 3em; }\n      .role-filter-button .contents .band .title {\n        width: 100%;\n        text-align: center;\n        line-height: 1.25em; }\n        .role-filter-button .contents .band .title .user-count {\n          float: right;\n          line-height: 0.5em;\n          padding-top: 0.2em; }\n          .role-filter-button .contents .band .title .user-count .number {\n            font-size: 0.6em;\n            vertical-align: -2px;\n            margin-left: 2px; }\n  .role-filter-button.selected .contents {\n    border: 2px solid #eeeeee;\n    margin: 0; }\n  .role-filter-button.selected .band {\n    background-color: #eeeeee;\n    color: #000000; }\n  .role-filter-button.no-roles {\n    cursor: default; }\n    .role-filter-button.no-roles .message {\n      color: #444444;\n      position: absolute;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      justify-content: center;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".scrollable {\n  overflow-y: auto;\n  overflow-x: hidden; }\n  .scrollable::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    background-color: transparent; }\n  .scrollable::-webkit-scrollbar {\n    width: 10px;\n    background-color: transparent; }\n  .scrollable::-webkit-scrollbar-thumb {\n    border-radius: 2px;\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    background-color: rgba(0, 0, 0, 0.1); }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".search-bar .text-input {\n  padding: 0.1em 0.25em 0.25em 0.25em; }\n  .search-bar .text-input input[type=text] {\n    font-size: 1em;\n    width: 100%;\n    color: #eeeeee;\n    background-color: #333333;\n    border: 0;\n    padding: 3px 3px 3px 3px; }\n    .search-bar .text-input input[type=text]::placeholder {\n      color: #666666;\n      text-align: center; }\n  .single-col .search-bar .text-input {\n    padding-bottom: 0.1em; }\n  .double-col .search-bar .text-input,\n  .triple-col .search-bar .text-input {\n    float: right;\n    width: 40em; }\n\n.search-bar .tags {\n  overflow: hidden;\n  padding: 0.25em 0.25em 0.25em 0.25em;\n  text-align: right;\n  height: 2em; }\n  .search-bar .tags .tag {\n    display: inline-block;\n    margin: 0.25em 0.25em 0.25em 0.25em;\n    color: #666666; }\n    .search-bar .tags .tag:link, .search-bar .tags .tag:visited {\n      text-decoration: none; }\n    .search-bar .tags .tag:hover {\n      color: #999999; }\n    .search-bar .tags .tag.selected {\n      border-bottom: 1px solid #444444; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".settings-panel {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%;\n  break-inside: avoid-column;\n  page-break-inside: avoid; }\n  .settings-panel .header {\n    font-size: 1.2em;\n    color: #eeeeee;\n    background-color: #211a1a;\n    padding: 0.5em 0.5em 0.4em 0.5em; }\n    .settings-panel .header .fa {\n      margin-right: 0.2em; }\n    .settings-panel .header .icon {\n      display: inline-block;\n      position: relative;\n      margin-right: 0.2em; }\n      .settings-panel .header .icon .fa {\n        margin-right: 0; }\n        .settings-panel .header .icon .fa.icon-overlay {\n          position: absolute;\n          display: block;\n          font-size: 0.75em;\n          color: #bbbbbb;\n          height: 1em;\n          width: 1em;\n          bottom: -0.2em;\n          right: -0.65em; }\n  .settings-panel .body {\n    color: #cccccc;\n    padding: 0.35em 0.35em 0.35em 0.35em;\n    clear: both; }\n    .settings-panel .body .option-button {\n      margin: 0.35em 0 0.35em 0.25em; }\n  .settings-panel .footer {\n    padding: 0.15em 0.35em 0.25em 0.35em;\n    text-align: right;\n    clear: both; }\n  .single-col .settings-panel {\n    margin-bottom: 0.5em; }\n  .double-col .settings-panel,\n  .triple-col .settings-panel {\n    margin-bottom: 1em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".story-emblem {\n  float: right; }\n  .story-emblem svg {\n    fill: #211a1a;\n    margin-right: 0.25em;\n    margin-top: 0.2em;\n    height: 3em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".story-progress {\n  color: #666666;\n  font-size: 0.9em;\n  margin-left: 3.75em; }\n  .story-progress .time.today {\n    color: #aaaaaa; }\n  .story-progress .time.yesterday {\n    color: #999999; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".text-field {\n  margin-top: 0.35em;\n  margin-bottom: 0.35em; }\n  .text-field label {\n    display: block;\n    font-size: 0.9em; }\n  .text-field input[type=text],\n  .text-field input[type=password],\n  .text-field input[type=url],\n  .text-field input[type=email],\n  .text-field textarea {\n    display: block;\n    width: 100%;\n    margin-top: 3px;\n    font-size: 1em; }\n  .text-field textarea {\n    resize: none; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".text-toolbar {\n  display: inline-block; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".top-navigation {\n  flex: 0 0 auto;\n  display: flex;\n  align-items: flex-end;\n  transition: height 0.7s;\n  z-index: 2; }\n  .top-navigation .container {\n    background-color: #262626;\n    border-bottom: 1px solid #171717;\n    padding-left: 4px;\n    padding-right: 4px;\n    width: 100%; }\n    .top-navigation .container .collapsible-container {\n      clear: both; }\n  .top-navigation .button {\n    display: block;\n    font-size: 1.4em;\n    width: 1.8em;\n    text-align: center;\n    padding: 6px 6px 6px 6px;\n    cursor: pointer;\n    color: #888888; }\n    .top-navigation .button:hover {\n      color: #cccccc; }\n    .top-navigation .button.active {\n      color: #eeeeee; }\n    .top-navigation .button.disabled {\n      color: #333333;\n      cursor: not-allowed; }\n    .top-navigation .button.calendar-btn, .top-navigation .button.filter-btn {\n      float: left; }\n    .top-navigation .button.search-btn {\n      float: right; }\n  .top-navigation .connection {\n    display: block;\n    position: relative;\n    float: right;\n    font-size: 1.4em;\n    width: 1.8em;\n    text-align: center;\n    padding: 6px 6px 6px 6px;\n    color: #333333; }\n    .top-navigation .connection .fa-ban {\n      font-size: 0.55em;\n      position: absolute;\n      right: 0.5em;\n      bottom: 0.65em;\n      height: 1em;\n      color: #993333; }\n    .top-navigation .connection .fa-arrow-up, .top-navigation .connection .fa-caret-up {\n      font-size: 0.5em;\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0.165em;\n      margin: auto;\n      height: 1em; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".user-section .header {\n  background-color: #211a1a;\n  padding: 0.5em 0.5em 0.4em 0.5em; }\n\n.user-section .subheader {\n  padding: 0.25em 0.5em 0.1em 0.5em; }\n\n.user-section .body {\n  color: #cccccc;\n  padding: 0.2em 0.2em 0.2em 0.2em;\n  clear: body; }\n\n.user-section .footer {\n  padding: 0.0em 0.5em 0.4em 0.5em;\n  clear: both; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".image-cropper {\n  overflow: hidden; }\n  .image-cropper CANVAS {\n    width: 100%;\n    display: block; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".autosize-text-area {\n  position: relative; }\n  .autosize-text-area TEXTAREA {\n    width: 100%;\n    resize: vertical; }\n  .autosize-text-area .shadow {\n    position: absolute;\n    top: 0;\n    left: 0;\n    min-height: 1em !important;\n    max-height: 1em !important;\n    visibility: hidden; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".collapsible-container {\n  transition: height .25s;\n  overflow: hidden; }\n  .collapsible-container .collapsible-contents {\n    overflow: hidden; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n  z-index: 5000; }\n  .overlay .background {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: #000;\n    transition: opacity 0.5s; }\n  .overlay .foreground {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 90%;\n    transition: opacity 0.25s, top 0.25s; }\n  .overlay.show .background {\n    opacity: 0.75; }\n  .overlay.show .foreground {\n    opacity: 1; }\n  .overlay.hide .background {\n    opacity: 0; }\n  .overlay.hide .foreground {\n    top: -30px;\n    opacity: 0; }\n",""])},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".upload-progress {\n  position: fixed;\n  right: 1em;\n  bottom: 3em;\n  font-size: 1.2em;\n  font-weight: bold;\n  color: #eeeeee;\n  background-color: #aa0000;\n  padding: 0.5em 0.5em 0.5em 0.5em; }\n",""])},function(e,t,n){"use strict";var r,i=n(225),o=n(121),s=n(38),a=n(155),c=n(38),l=n(41),u=Function.prototype.bind,d=Object.defineProperty,p=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,o=l(t)&&c(t.value);return r=i(t),delete r.writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&p.call(this,e)?o:(t.value=u.call(o,n.resolveContext?n.resolveContext(this):this),d(this,e,t),this[e])},r},e.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&s(t.resolveContext),a(e,function(e,n){return r(n,e,t)})}},,function(e,t,n){"use strict";var r=n(41);e.exports=function(){return r(this).length=0,this}},function(e,t,n){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,n){"use strict";var r=n(95).iterator,i=n(118),o=n(494),s=n(63),a=n(38),c=n(41),l=n(64),u=n(122),d=Array.isArray,p=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;e.exports=function(e){var t,n,m,g,v,y,b,x,w,k,C=arguments[1],E=arguments[2];if(e=Object(c(e)),l(C)&&a(C),this&&this!==Array&&o(this))t=this;else{if(!C){if(i(e))return 1!==(v=e.length)?Array.apply(null,e):(g=new Array(1),g[0]=e[0],g);if(d(e)){for(g=new Array(v=e.length),n=0;n<v;++n)g[n]=e[n];return g}}g=[]}if(!d(e))if(void 0!==(w=e[r])){for(b=a(w).call(e),t&&(g=new t),x=b.next(),n=0;!x.done;)k=C?p.call(C,E,x.value,n):x.value,t?(h.value=k,f(g,n,h)):g[n]=k,x=b.next(),++n;v=n}else if(u(e)){for(v=e.length,t&&(g=new t),n=0,m=0;n<v;++n)k=e[n],n+1<v&&(y=k.charCodeAt(0))>=55296&&y<=56319&&(k+=e[++n]),k=C?p.call(C,E,k,m):k,t?(h.value=k,f(g,m,h)):g[m]=k,++m;v=m}if(void 0===v)for(v=s(e.length),t&&(g=new t(v)),n=0;n<v;++n)k=C?p.call(C,E,e[n],n):e[n],t?(h.value=k,f(g,n,h)):g[n]=k;return t&&(h.value=null,g.length=v),g}},function(e,t,n){"use strict";var r=n(94),i=Array.isArray;e.exports=function(e){return i(e)?e:r(e)}},function(e,t,n){"use strict";var r=n(38),i=n(94),o=n(117),s=Function.prototype.apply;e.exports=function(){var e=r(this),t=i(arguments);return o(function(){return s.call(e,this,t.concat(i(arguments)))},e.length-t.length)}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(n(224));e.exports=function(e){return"function"==typeof e&&r.call(e)===i}},function(e,t,n){"use strict";e.exports=n(496)()?Math.sign:n(497)},function(e,t,n){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e,t,n){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,n){"use strict";e.exports=n(499)()?Number.isNaN:n(500)},function(e,t,n){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},function(e,t,n){"use strict";e.exports=function(e){return e!==e}},function(e,t,n){"use strict";var r=n(495),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?r(e)*o(i(e)):e)}},function(e,t,n){"use strict";var r=n(38),i=n(41),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,l){var u,d=arguments[2],p=arguments[3];return n=Object(i(n)),r(l),u=a(n),p&&u.sort("function"==typeof p?o.call(p,n):void 0),"function"!=typeof e&&(e=u[e]),s.call(e,u,function(e,r){return c.call(n,e)?s.call(l,d,n[e],e,n,r):t})}}},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(506),i=n(41),o=Math.max;e.exports=function(e,t){var n,s,a,c=o(arguments.length,2);for(e=Object(i(e)),a=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},s=1;s<c;++s)t=arguments[s],r(t).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";var r,i=Object.create;n(227)()||(r=n(228)),e.exports=function(){var e,t,n;return r?1!==r.level?i:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return i(null===t?e:t,n)}):i}()},function(e,t,n){"use strict";e.exports=n(507)()?Object.keys:n(508)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(64),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e,t,n){"use strict";var r=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return r.call(arguments,function(e){t[e]=!0}),t}},function(e,t,n){"use strict";var r=n(154);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},function(e,t,n){"use strict";var r=n(41),i=n(512);e.exports=function(e){return i(r(e))}},function(e,t,n){"use strict";var r=n(153);e.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},function(e,t,n){"use strict";var r=n(153);e.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){return"<non-stringifiable value>"}}},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";var r=Object.create(null),i=Math.random;e.exports=function(){var e;do{e=i().toString(36).slice(2)}while(r[e]);return e}},function(e,t,n){"use strict";var r=n(513),i=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=r(e);return t.length>100&&(t=t.slice(0,99)+""),t=t.replace(i,function(e){return JSON.stringify(e).slice(1,-1)})}},function(e,t,n){"use strict";var r,i=n(156),o=n(229),s=n(55),a=n(231),c=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))return new r(e,t);a.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",c(this,"__kind__",s("",t))},i&&i(r,a),r.prototype=Object.create(a.prototype,{constructor:s(r),_resolve:s(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}),toString:s(function(){return"[object Array Iterator]"})})},function(e,t,n){"use strict";var r=n(118),i=n(38),o=n(122),s=n(230),a=Array.isArray,c=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var n,u,d,p,h,f,m,g,v=arguments[2];if(a(e)||r(e)?n="array":o(e)?n="string":e=s(e),i(t),d=function(){p=!0},"array"===n)return void l.call(e,function(e){if(c.call(t,v,e,d),p)return!0});if("string"!==n)for(u=e.next();!u.done;){if(c.call(t,v,u.value,d),p)return;u=e.next()}else for(f=e.length,h=0;h<f&&(m=e[h],h+1<f&&(g=m.charCodeAt(0))>=55296&&g<=56319&&(m+=e[++h]),c.call(t,v,m,d),!p);++h);}},function(e,t,n){"use strict";var r=n(118),i=n(122),o=n(95).iterator,s=Array.isArray;e.exports=function(e){return null!=e&&(!!s(e)||(!!i(e)||(!!r(e)||"function"==typeof e[o])))}},function(e,t,n){"use strict";var r,i=n(156),o=n(55),s=n(231),a=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))return new r(e);e=String(e),s.call(this,e),a(this,"__length__",o("",e.length))},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:o(r),_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)}),toString:o(function(){return"[object String Iterator]"})})},function(e,t,n){"use strict";var r=n(520);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,n){"use strict";var r={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,n){"use strict";var r,i,o,s,a=n(55),c=n(526),l=Object.create,u=Object.defineProperties,d=Object.defineProperty,p=Object.prototype,h=l(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),s=!0}catch(e){}}var f=function(){var e=l(null);return function(t){for(var n,r,i=0;e[t+(i||"")];)++i;return t+=i||"",e[t]=!0,n="@@"+t,d(p,n,a.gs(null,function(e){r||(r=!0,d(this,n,a(e)),r=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return s?r(t):(n=l(o.prototype),t=void 0===t?"":String(t),u(n,{__description__:a("",t),__name__:a("",f(t))}))},u(i,{for:a(function(e){return h[e]?h[e]:h[e]=i(String(e))}),keyFor:a(function(e){var t;c(e);for(t in h)if(h[t]===e)return t}),hasInstance:a("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:a("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:a("",r&&r.iterator||i("iterator")),match:a("",r&&r.match||i("match")),replace:a("",r&&r.replace||i("replace")),search:a("",r&&r.search||i("search")),species:a("",r&&r.species||i("species")),split:a("",r&&r.split||i("split")),toPrimitive:a("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:a("",r&&r.toStringTag||i("toStringTag")),unscopables:a("",r&&r.unscopables||i("unscopables"))}),u(o.prototype,{constructor:a(i),toString:a("",function(){return this.__name__})}),u(i.prototype,{toString:a(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:a(function(){return c(this)})}),d(i.prototype,i.toPrimitive,a("",function(){var e=c(this);return"symbol"==typeof e?e:e.toString()})),d(i.prototype,i.toStringTag,a("c","Symbol")),d(o.prototype,i.toStringTag,a("c",i.prototype[i.toStringTag])),d(o.prototype,i.toPrimitive,a("c",i.prototype[i.toPrimitive]))},function(e,t,n){"use strict";var r=n(524);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,n){"use strict";e.exports=n(528)()?WeakMap:n(530)},function(e,t,n){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&("function"==typeof e.set&&(e.set({},1)===e&&("function"==typeof e.delete&&("function"==typeof e.has&&"one"===e.get(t)))))}},function(e,t,n){"use strict";e.exports=function(){return"function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)}()},function(e,t,n){"use strict";var r,i=n(156),o=n(510),s=n(41),a=n(516),c=n(55),l=n(230),u=n(519),d=n(95).toStringTag,p=n(529),h=Array.isArray,f=Object.defineProperty,m=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=p&&i&&WeakMap!==r?i(new WeakMap,g(this)):this,null!=t&&(h(t)||(t=l(t))),f(e,"__weakMapData__",c("c","$weakMap$"+a())),t?(u(t,function(t){s(t),e.set(t[0],t[1])}),e):e},p&&(i&&i(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:c(r)})),Object.defineProperties(r.prototype,{delete:c(function(e){return!!m.call(o(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:c(function(e){if(m.call(o(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:c(function(e){return m.call(o(e),this.__weakMapData__)}),set:c(function(e,t){return f(o(e),this.__weakMapData__,c("c",t)),this}),toString:c(function(){return"[object WeakMap]"})}),f(r.prototype,d,c("c","WeakMap"))},function(e,t,n){"use strict";var r,i,o,s,a,c,l,u=n(55),d=n(38),p=Function.prototype.apply,h=Function.prototype.call,f=Object.create,m=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return d(t),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=f(null),m(this,"__ee__",y),y.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return d(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(d(t),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},s=function(e){var t,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)p.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];p.call(i,this,o)}},a={on:r,once:i,off:o,emit:s},c={on:u(r),once:u(i),off:u(o),emit:u(s)},l=g({},c),e.exports=t=function(e){return null==e?f(l):g(Object(e),c)},t.methods=a},,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"ee141d1b002541c24fa79391f52200db.png"},function(e,t,n){e.exports=n.p+"716d5f1dc6c95c82cfac16c394db733b.png"},function(e,t,n){e.exports=n.p+"72bb4a181bab6923b6bc3421016cb573.png"},function(e,t,n){e.exports=n.p+"7fbc441dc116c285bf2bb3be1d2f3616.png"},function(e,t,n){e.exports=n.p+"6abad3de23e8db566c4cafd3a8ee7f24.png"},function(e,t,n){e.exports=n.p+"11164feb11ebf5b10f4fb8a015d166e9.png"},function(e,t,n){e.exports=n.p+"1d631316668fba6a8f6c7d4f4411587f.png"},function(e,t,n){e.exports=n.p+"6939925abcb6fcfbcc49465dee1032c5.png"},function(e,t,n){e.exports=n.p+"4ae70e06469cf691b724146e8c0728b3.png"},function(e,t,n){e.exports=n.p+"1f68ea20b77e7d8717c22708ea6968c1.png"},function(e,t,n){e.exports=n.p+"563cc3494172864075b55660bdffc75a.png"},function(e,t,n){e.exports=n.p+"ce7a0e79e69f7f86d3a0c9a310372aa4.png"},function(e,t,n){e.exports=n.p+"ee78976e8358ad86d606d2de1e220931.png"},function(e,t,n){e.exports=n.p+"72bb4a181bab6923b6bc3421016cb573.png"},function(e,t,n){e.exports=n.p+"7af9ee3a80ed151b77494dea1e8b9a89.png"},function(e,t,n){e.exports=n.p+"dbe43e1b6a21cb4ee792d70b7d813114.png"},function(e,t,n){e.exports=n.p+"e72f85d8622d3ab0c93af4e0dc3b3ae3.png"},function(e,t,n){e.exports=n.p+"4ae70e06469cf691b724146e8c0728b3.png"},function(e,t,n){e.exports=n.p+"be613ad3c1fb13a04edca971d584e375.png"},,,,,,,,,function(e,t,n){"use strict";var r=n(63),i=Object.create,o=Object.prototype.hasOwnProperty;e.exports=function(e){var t,n=0,s=1,a=i(null),c=i(null),l=0;return e=r(e),{hit:function(r){var i=c[r],u=++l;if(a[u]=r,c[r]=u,!i){if(++n<=e)return;return r=a[s],t(r),r}if(delete a[i],s===i)for(;!o.call(a,++s);)continue},delete:t=function(e){var t=c[e];if(t&&(delete a[t],delete c[e],--n,s===t)){if(!n)return l=0,void(s=1);for(;!o.call(a,++s);)continue}},clear:function(){n=0,s=1,a=i(null),c=i(null),l=0}}}},,,function(e,t,n){function r(){for(var e=0;e<arguments.length;e++)for(var t=arguments[e],n=Object.keys(t),i=0;i<n.length;i++){var o=n[i];this[o]=t[o]}this.options||(this.options=r.defaults)}var i=n(4);r.defaults={sanitize:!1,langPrefix:"lang-",headerPrefix:""},r.prototype.render=function(e){return this.renderTokens(e)},r.prototype.renderChildren=function(e){return e.children?this.renderTokens(e.children):null},r.prototype.renderTokens=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.renderToken(e[r],r);if(i instanceof Array)for(var o=0,s=i;o<s.length;o++)n.push(s[o]);else i&&n.push(i)}return n},r.prototype.renderToken=function(e,t){switch(e.type){case"code":return this.renderCode(e,t);case"blockquote":return this.renderBlockquote(e,t);case"html":return this.renderHtml(e,t);case"heading":return this.renderHeading(e,t);case"hr":return this.renderHorizontalLine(e,t);case"list":return this.renderList(e,t);case"list_item":return this.renderListItem(e,t);case"loose_item":return this.renderLooseItem(e,t);case"paragraph":return this.renderParagraph(e,t);case"table":return this.renderTable(e,t);case"table_header":return this.renderTableHeader(e,t);case"table_row":return this.renderTableRow(e,t);case"table_header_cell":return this.renderTableHeaderCell(e,t);case"table_row_cell":return this.renderTableRowCell(e,t);case"strong":return this.renderStrong(e,t);case"em":return this.renderEmphasized(e,t);case"codespan":return this.renderCodeSpan(e,t);case"del":return this.renderDeleted(e,t);case"br":return this.renderLineBreak(e,t);case"link":return this.renderLink(e,t);case"autolink":return this.renderAutolink(e,t);case"url":return this.renderUrl(e,t);case"image":return this.renderImage(e,t);case"text":return this.renderText(e,t);case"text_block":return this.renderTextBlock(e,t);case"html_block":return this.renderHtmlBlock(e,t);case"space":return this.renderSpace(e,t);case"def":return this.renderRefDefinition(e,t);default:throw new Error("Unrecognized token: "+e.type)}},r.prototype.renderCode=function(e,t){var n,r=e.text,o=e.lang;return o&&(n=this.options.langPrefix+o),i.createElement("pre",{key:t},i.createElement("code",{className:n},r,"\n"))},r.prototype.renderBlockquote=function(e,t){return i.createElement("blockquote",{key:t},this.renderChildren(e))},r.prototype.renderHtml=function(e,t){return null},r.prototype.renderHeading=function(e,t){var n=this.options.headerPrefix+e.name;return i.createElement("h"+e.depth,{id:n,key:t},this.renderChildren(e))},r.prototype.renderHorizontalLine=function(e,t){return i.createElement("hr",{key:t})},r.prototype.renderList=function(e,t){return e.ordered?i.createElement("ol",{key:t},this.renderChildren(e)):i.createElement("ul",{key:t},this.renderChildren(e))},r.prototype.renderLooseItem=r.prototype.renderListItem=function(e,t){return i.createElement("li",{key:t},this.renderChildren(e))},r.prototype.renderParagraph=function(e,t){return i.createElement("p",{key:t},this.renderChildren(e))},r.prototype.renderTable=function(e,t){var n=e.children,r=i.createElement("thead",null,this.renderTableHeader(n[0])),o=i.createElement("tbody",null,this.renderTokens(n.slice(1)));return i.createElement("table",{key:t},r,o)},r.prototype.renderTableHeader=r.prototype.renderTableRow=function(e,t){return i.createElement("tr",{key:t},this.renderChildren(e))},r.prototype.renderTableHeaderCell=function(e,t){return i.createElement("th",{key:t,style:{textALign:e.align}},this.renderChildren(e))},r.prototype.renderTableRowCell=function(e,t){return i.createElement("td",{key:t,style:{textALign:e.align}},this.renderChildren(e))},r.prototype.renderStrong=function(e,t){return i.createElement("strong",{key:t},this.renderChildren(e))},r.prototype.renderEmphasized=function(e,t){return i.createElement("em",{key:t},this.renderChildren(e))},r.prototype.renderCodeSpan=function(e,t){var n=e.text;return i.createElement("code",{key:t},n)},r.prototype.renderLineBreak=function(e,t){return i.createElement("br",{key:t})},r.prototype.renderDeleted=function(e,t){return i.createElement("del",{key:t},this.renderChildren(e))},r.prototype.renderUrl=r.prototype.renderAutolink=function(e,t){if(!this.sanitizeUrl(e.href))return"";var n=e.href,r=e.text;return i.createElement("a",{key:t,href:n},r)},r.prototype.renderLink=function(e,t){if(!this.sanitizeUrl(e.href))return null;var n=e.href,r=e.title;return i.createElement("a",{key:t,href:n,title:r},this.renderChildren(e))},r.prototype.sanitizeUrl=function(e){if(this.options.sanitize){try{var t=decodeURIComponent(e).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return!1}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return!1}return!0},r.prototype.renderImage=function(e,t){var n=e.href,r=e.title,o=e.text;return i.createElement("img",{key:t,src:n,alt:o,title:r})},r.prototype.renderText=function(e,t){return e.text},r.prototype.renderHtmlBlock=r.prototype.renderTextBlock=function(e,t){return e.paragraph?this.renderParagraph(e,t):this.renderChildren(e)},r.prototype.renderRefDefinition=r.prototype.renderSpace=function(e,t){return null},e.exports=r},function(e,t,n){"use strict";var r=n(94),i=n(155),o=n(226),s=n(117),a=n(164),c=Array.prototype.slice,l=Function.prototype.apply,u=Object.create;n(60).async=function(e,t){var n,d,p,h=u(null),f=u(null),m=t.memoized,g=t.original;t.memoized=s(function(e){var t=arguments,r=t[t.length-1];return"function"==typeof r&&(n=r,t=c.call(t,0,-1)),m.apply(d=this,p=t)},m);try{o(t.memoized,m)}catch(e){}t.on("get",function(e){var r,i,o;if(n){if(h[e])return"function"==typeof h[e]?h[e]=[h[e],n]:h[e].push(n),void(n=null);r=n,i=d,o=p,n=d=p=null,a(function(){var s;hasOwnProperty.call(f,e)?(s=f[e],t.emit("getasync",e,o,i),l.call(r,s.context,s.args)):(n=r,d=i,p=o,m.apply(i,o))})}}),t.original=function(){var e,i,o,s;return n?(e=r(arguments),i=function e(n){var i,o,c=e.id;return null==c?void a(l.bind(e,this,arguments)):(delete e.id,i=h[c],delete h[c],i?(o=r(arguments),t.has(c)&&(n?t.delete(c):(f[c]={context:this,args:o},t.emit("setasync",c,"function"==typeof i?1:i.length))),"function"==typeof i?s=l.call(i,this,o):i.forEach(function(e){s=l.call(e,this,o)},this),s):void 0)},o=n,n=d=p=null,e.push(i),s=l.call(g,this,e),i.cb=o,n=i,s):l.call(g,this,arguments)},t.on("set",function(e){if(!n)return void t.delete(e);h[e]?"function"==typeof h[e]?h[e]=[h[e],n.cb]:h[e].push(n.cb):h[e]=n.cb,delete n.cb,n.id=e,n=null}),t.on("delete",function(e){var n;hasOwnProperty.call(h,e)||f[e]&&(n=f[e],delete f[e],t.emit("deleteasync",e,c.call(n.args,1)))}),t.on("clear",function(){var e=f;f=u(null),t.emit("clearasync",i(e,function(e){return c.call(e.args,1)}))})}},function(e,t,n){"use strict";var r=n(38),i=n(120),o=n(60),s=Function.prototype.apply;o.dispose=function(e,t,n){var a;if(r(e),n.async&&o.async||n.promise&&o.promise)return t.on("deleteasync",a=function(t,n){s.call(e,null,n)}),void t.on("clearasync",function(e){i(e,function(e,t){a(t,e)})});t.on("delete",a=function(t,n){e(n)}),t.on("clear",function(e){i(e,function(e,t){a(t,e)})})}},function(e,t,n){"use strict";var r=n(94),i=n(120),o=n(164),s=n(248),a=n(834),c=n(60),l=Function.prototype,u=Math.max,d=Math.min,p=Object.create;c.maxAge=function(e,t,n){var h,f,m,g;(e=a(e))&&(h=p(null),f=n.async&&c.async||n.promise&&c.promise?"async":"",t.on("set"+f,function(n){h[n]=setTimeout(function(){t.delete(n)},e),g&&(g[n]&&"nextTick"!==g[n]&&clearTimeout(g[n]),g[n]=setTimeout(function(){delete g[n]},m))}),t.on("delete"+f,function(e){clearTimeout(h[e]),delete h[e],g&&("nextTick"!==g[e]&&clearTimeout(g[e]),delete g[e])}),n.preFetch&&(m=!0===n.preFetch||isNaN(n.preFetch)?.333:u(d(Number(n.preFetch),1),0))&&(g={},m=(1-m)*e,t.on("get"+f,function(e,i,a){g[e]||(g[e]="nextTick",o(function(){var o;"nextTick"===g[e]&&(delete g[e],t.delete(e),n.async&&(i=r(i),i.push(l)),o=t.memoized.apply(a,i),n.promise&&s(o)&&("function"==typeof o.done?o.done(l,l):o.then(l,l)))}))})),t.on("clear"+f,function(){i(h,function(e){clearTimeout(e)}),h={},g&&(i(g,function(e){"nextTick"!==e&&clearTimeout(e)}),g={})}))}},function(e,t,n){"use strict";var r=n(63),i=n(571),o=n(60);o.max=function(e,t,n){var s,a,c;(e=r(e))&&(a=i(e),s=n.async&&o.async||n.promise&&o.promise?"async":"",t.on("set"+s,c=function(e){void 0!==(e=a.hit(e))&&t.delete(e)}),t.on("get"+s,c),t.on("delete"+s,a.delete),t.on("clear"+s,a.clear))}},function(e,t,n){"use strict";var r=n(155),i=n(509),o=n(511),s=n(517),a=n(248),c=n(164),l=Object.create,u=i("then","then:finally","done","done:finally");n(60).promise=function(e,t){var n=l(null),i=l(null),d=l(null);if(!0===e)e=null;else if(e=o(e),!u[e])throw new TypeError("'"+s(e)+"' is not valid promise mode");t.on("set",function(r,o,s){var l=!1;if(!a(s))return i[r]=s,void t.emit("setasync",r,1);n[r]=1,d[r]=s;var u=function(e){var o=n[r];if(l)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");o&&(delete n[r],i[r]=e,t.emit("setasync",r,o))},p=function(){l=!0,n[r]&&(delete n[r],delete d[r],t.delete(r))},h=e;if(h||(h="then"),"then"===h)s.then(function(e){c(u.bind(this,e))},function(){c(p)});else if("done"===h){if("function"!=typeof s.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");s.done(u,p)}else if("done:finally"===h){if("function"!=typeof s.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof s.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");s.done(u),s.finally(p)}}),t.on("get",function(e,r,i){var o;if(n[e])return void++n[e];o=d[e];var s=function(){t.emit("getasync",e,r,i)};a(o)?"function"==typeof o.done?o.done(s):o.then(function(){c(s)}):s()}),t.on("delete",function(e){if(delete d[e],n[e])return void delete n[e];if(hasOwnProperty.call(i,e)){var r=i[e];delete i[e],t.emit("deleteasync",e,[r])}}),t.on("clear",function(){var e=i;i=l(null),n=l(null),d=l(null),t.emit("clearasync",r(e,function(e){return[e]}))})}},function(e,t,n){"use strict";var r=n(55),i=n(60),o=Object.create,s=Object.defineProperties;i.refCounter=function(e,t,n){var a,c;a=o(null),c=n.async&&i.async||n.promise&&i.promise?"async":"",t.on("set"+c,function(e,t){a[e]=t||1}),t.on("get"+c,function(e){++a[e]}),t.on("delete"+c,function(e){delete a[e]}),t.on("clear"+c,function(){a={}}),s(t.memoized,{deleteRef:r(function(){var e=t.get(arguments);return null===e?null:a[e]?!--a[e]&&(t.delete(e),!0):null}),getRefCount:r(function(){var e=t.get(arguments);return null===e?0:a[e]?a[e]:0})})}},function(e,t,n){"use strict";var r=n(121),i=n(163),o=n(589);e.exports=function(e){var t,s=r(arguments[1]);return s.normalizer||0!==(t=s.length=i(s.length,e.length,s.async))&&(s.primitive?!1===t?s.normalizer=n(588):t>1&&(s.normalizer=n(586)(t)):s.normalizer=!1===t?n(587)():1===t?n(584)():n(585)(t)),s.async&&n(575),s.promise&&n(579),s.dispose&&n(576),s.maxAge&&n(577),s.max&&n(578),s.refCounter&&n(580),o(e,s)}},function(e,t,n){"use strict";var r=n(223),i=n(117),o=n(55),s=n(531).methods,a=n(251),c=n(250),l=Function.prototype.apply,u=Function.prototype.call,d=Object.create,p=Object.defineProperties,h=s.on,f=s.emit;e.exports=function(e,t,n){var s,m,g,v,y,b,x,w,k,C,E,R,S,N,O,T=d(null);return m=!1!==t?t:isNaN(e.length)?1:e.length,n.normalizer&&(C=c(n.normalizer),g=C.get,v=C.set,y=C.delete,b=C.clear),null!=n.resolvers&&(O=a(n.resolvers)),N=g?i(function(t){var n,i,o=arguments;if(O&&(o=O(o)),null!==(n=g(o))&&hasOwnProperty.call(T,n))return E&&s.emit("get",n,o,this),T[n];if(i=1===o.length?u.call(e,this,o[0]):l.call(e,this,o),null===n){if(null!==(n=g(o)))throw r("Circular invocation","CIRCULAR_INVOCATION");n=v(o)}else if(hasOwnProperty.call(T,n))throw r("Circular invocation","CIRCULAR_INVOCATION");return T[n]=i,R&&s.emit("set",n,null,i),i},m):0===t?function(){var t;if(hasOwnProperty.call(T,"data"))return E&&s.emit("get","data",arguments,this),T.data;if(t=arguments.length?l.call(e,this,arguments):u.call(e,this),hasOwnProperty.call(T,"data"))throw r("Circular invocation","CIRCULAR_INVOCATION");return T.data=t,R&&s.emit("set","data",null,t),t}:function(t){var n,i,o=arguments;if(O&&(o=O(arguments)),i=String(o[0]),hasOwnProperty.call(T,i))return E&&s.emit("get",i,o,this),T[i];if(n=1===o.length?u.call(e,this,o[0]):l.call(e,this,o),hasOwnProperty.call(T,i))throw r("Circular invocation","CIRCULAR_INVOCATION");return T[i]=n,R&&s.emit("set",i,null,n),n},s={original:e,memoized:N,profileName:n.profileName,get:function(e){return O&&(e=O(e)),g?g(e):String(e[0])},has:function(e){return hasOwnProperty.call(T,e)},delete:function(e){var t;hasOwnProperty.call(T,e)&&(y&&y(e),t=T[e],delete T[e],S&&s.emit("delete",e,t))},clear:function(){var e=T;b&&b(),T=d(null),s.emit("clear",e)},on:function(e,t){return"get"===e?E=!0:"set"===e?R=!0:"delete"===e&&(S=!0),h.call(this,e,t)},emit:f,updateEnv:function(){e=s.original}},x=g?i(function(e){var t,n=arguments;O&&(n=O(n)),null!==(t=g(n))&&s.delete(t)},m):0===t?function(){return s.delete("data")}:function(e){return O&&(e=O(arguments)[0]),s.delete(e)},w=i(function(){var e,n=arguments;return 0===t?T.data:(O&&(n=O(n)),e=g?g(n):String(n[0]),T[e])}),k=i(function(){var e,n=arguments;return 0===t?s.has("data"):(O&&(n=O(n)),null!==(e=g?g(n):String(n[0]))&&s.has(e))}),p(N,{__memoized__:o(!0),delete:o(x),clear:o(s.clear),_get:o(w),_has:o(k)}),s}},function(e,t,n){"use strict";var r=n(223),i=n(117),o=n(493),s=n(225),a=n(121),c=n(38),l=n(55),u=n(527),d=n(163),p=n(60),h=n(251),f=n(250),m=Array.prototype.slice,g=Object.defineProperties;e.exports=function(e){return function(t){var n,v,y,b,x,w=a(arguments[1]);return c(t),hasOwnProperty.call(t,"__memoized__")&&!w.force?t:(v=d(w.length,t.length,w.async&&p.async),w.length=v?v-1:0,n=new u,w.resolvers&&(b=h(w.resolvers)),w.normalizer&&(x=f(w.normalizer)),1!==v||x||w.async||w.dispose||w.maxAge||w.max||w.refCounter?(y=g(i(function(r){var i,a=arguments;return b&&(a=b(a),r=a[0]),i=n.get(r),i||(x&&(w=s(w),w.normalizer=s(x),w.normalizer.get=o.call(w.normalizer.get,r),w.normalizer.set=o.call(w.normalizer.set,r),w.normalizer.delete&&(w.normalizer.delete=o.call(w.normalizer.delete,r))),n.set(r,i=e(o.call(t,r),w))),i.apply(this,m.call(a,1))},v),{__memoized__:l(!0),delete:l(i(function(e){var t,r=arguments;b&&(r=b(r),e=r[0]),(t=n.get(e))&&t.delete.apply(this,m.call(r,1))},v))}),w.refCounter?(g(y,{deleteRef:l(i(function(e){var t,r=arguments;return b&&(r=b(r),e=r[0]),t=n.get(e),t?t.deleteRef.apply(this,m.call(r,1)):null},v)),getRefCount:l(i(function(e){var t,r=arguments;return b&&(r=b(r),e=r[0]),t=n.get(e),t?t.getRefCount.apply(this,m.call(r,1)):0},v))}),y):y):g(function(e){var i,o=arguments;if(b&&(o=b(o)),e=o[0],n.has(e))return n.get(e);if(i=t.apply(this,o),n.has(e))throw r("Circular invocation","CIRCULAR_INVOCATION");return n.set(e,i),i},{__memoized__:l(!0),delete:l(function(e){return b&&(e=b(arguments)[0]),n.delete(e)})}))}}},function(e,t,n){"use strict";var r=n(152);e.exports=function(){var e=0,t=[],n=[];return{get:function(e){var i=r.call(t,e[0]);return-1===i?null:n[i]},set:function(r){return t.push(r[0]),n.push(++e),e},delete:function(e){var i=r.call(n,e);-1!==i&&(t.splice(i,1),n.splice(i,1))},clear:function(){t=[],n=[]}}}},function(e,t,n){"use strict";var r=n(152),i=Object.create;e.exports=function(e){var t=0,n=[[],[]],o=i(null);return{get:function(t){for(var i,o=0,s=n;o<e-1;){if(-1===(i=r.call(s[0],t[o])))return null;s=s[1][i],++o}return i=r.call(s[0],t[o]),-1===i?null:s[1][i]||null},set:function(i){for(var s,a=0,c=n;a<e-1;)s=r.call(c[0],i[a]),-1===s&&(s=c[0].push(i[a])-1,c[1].push([[],[]])),c=c[1][s],++a;return s=r.call(c[0],i[a]),-1===s&&(s=c[0].push(i[a])-1),c[1][s]=++t,o[t]=i,t},delete:function(t){for(var i,s=0,a=n,c=[],l=o[t];s<e-1;){if(-1===(i=r.call(a[0],l[s])))return;c.push(a,i),a=a[1][i],++s}if(-1!==(i=r.call(a[0],l[s]))){for(t=a[1][i],a[0].splice(i,1),a[1].splice(i,1);!a[0].length&&c.length;)i=c.pop(),a=c.pop(),a[0].splice(i,1),a[1].splice(i,1);delete o[t]}},clear:function(){n=[[],[]],o=i(null)}}}},function(e,t,n){"use strict";e.exports=function(e){return e?function(t){for(var n=String(t[0]),r=0,i=e;--i;)n+=""+t[++r];return n}:function(){return""}}},function(e,t,n){"use strict";var r=n(152),i=Object.create;e.exports=function(){var e=0,t=[],n=i(null);return{get:function(e){var n,i=0,o=t,s=e.length;if(0===s)return o[s]||null;if(o=o[s]){for(;i<s-1;){if(-1===(n=r.call(o[0],e[i])))return null;o=o[1][n],++i}return n=r.call(o[0],e[i]),-1===n?null:o[1][n]||null}return null},set:function(i){var o,s=0,a=t,c=i.length;if(0===c)a[c]=++e;else{for(a[c]||(a[c]=[[],[]]),a=a[c];s<c-1;)o=r.call(a[0],i[s]),-1===o&&(o=a[0].push(i[s])-1,a[1].push([[],[]])),a=a[1][o],++s;o=r.call(a[0],i[s]),-1===o&&(o=a[0].push(i[s])-1),a[1][o]=++e}return n[e]=i,e},delete:function(e){var i,o=0,s=t,a=n[e],c=a.length,l=[];if(0===c)delete s[c];else if(s=s[c]){for(;o<c-1;){if(-1===(i=r.call(s[0],a[o])))return;l.push(s,i),s=s[1][i],++o}if(-1===(i=r.call(s[0],a[o])))return;for(e=s[1][i],s[0].splice(i,1),s[1].splice(i,1);!s[0].length&&l.length;)i=l.pop(),s=l.pop(),s[0].splice(i,1),s[1].splice(i,1)}delete n[e]},clear:function(){t=[],n=i(null)}}}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r=e.length;if(!r)return"";for(t=String(e[n=0]);--r;)t+=""+e[++n];return t}},function(e,t,n){"use strict";var r=n(38),i=n(120),o=n(60),s=n(582),a=n(163);e.exports=function e(t){var n,c,l;if(r(t),n=Object(arguments[1]),n.async&&n.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!n.force?t:(c=a(n.length,t.length,n.async&&o.async),l=s(t,c,n),i(o,function(e,t){n[t]&&e(n[t],l,n)}),e.__profiler__&&e.__profiler__(l),l.updateEnv(),l.memoized)}},function(e,t,n){"use strict";e.exports=n(583)(n(581))},,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(608)},function(e,t,n){"use strict";var r=n(80);e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._65=1,t._55=e,t}var i=n(80);e.exports=i;var o=r(!0),s=r(!1),a=r(null),c=r(void 0),l=r(0),u=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return a;if(void 0===e)return c;if(!0===e)return o;if(!1===e)return s;if(0===e)return l;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._65;)a=a._55;return 1===a._65?r(s,a._55):(2===a._65&&n(a._55),void a.then(function(e){r(s,e)},n))}var c=a.then;if("function"==typeof c){return void new i(c.bind(a)).then(function(e){r(s,e)},n)}}t[s]=a,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";var r=n(80);e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){"use strict";e.exports=n(80),n(605),n(607),n(606),n(609),n(610)},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=n(80),s=n(297);e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null===n||void 0===n)return new o(function(t,n){n(e)});s(function(){n.call(r,e)})}}},o.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){s(function(){e.call(t,null,n)})},function(n){s(function(){e.call(t,n)})})}},function(e,t,n){"use strict";var r=n(80);e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},r.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},r.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(e,t,n){var r=n(387);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(388);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(389);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(390);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(391);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(392);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(393);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(394);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(395);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(396);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(397);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(398);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(399);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(400);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(401);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(402);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(403);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(405);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(406);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(407);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(408);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(409);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(410);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(411);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(412);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(413);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(414);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(415);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(416);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(417);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(419);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(420);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(421);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(422);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(423);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(424);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(425);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(426);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(427);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(428);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(429);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(430);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(431);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(432);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(433);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(434);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(435);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(436);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(437);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(438);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(439);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(440);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(441);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(442);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(443);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(444);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(445);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(446);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(447);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(448);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(449);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(450);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(451);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(452);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(453);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(454);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(455);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(456);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(457);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(458);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(459);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(460);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(461);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(462);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(463);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(464);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(465);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(466);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(467);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(468);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(469);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(470);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(471);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(472);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(473);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(474);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(475);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(476);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(477);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(478);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(479);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(480);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(481);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(482);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(483);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(484);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(485);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(486);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(17)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){function r(e){return i.createElement("svg",e,[i.createElement("defs",{className:"ClipPathGroup",key:0},i.createElement("clipPath",{clipPathUnits:"userSpaceOnUse"},i.createElement("rect",{x:"1000",y:"1000",width:"5080",height:"6299"}))),i.createElement("defs",{className:"TextShapeIndex",key:1}),i.createElement("defs",{className:"EmbeddedBulletChars",key:2},[i.createElement("path",{d:"M0.3-0.6L0.6-0.3 0.3 0 0-0.3 0.3-0.6Z",key:0}),i.createElement("path",{d:"M0-0.6L0.6-0.6 0.6 0 0 0 0-0.6Z",key:1}),i.createElement("path",{d:"M0.1 0L0.3-0.4 0.1-0.7 0.7-0.4 0.1 0ZM1358 739L309 1346 659 739 1358 739Z",key:2}),i.createElement("path",{d:"M1-0.4L0.6 0 0.4 0 0.6-0.3 0.1-0.3 0.1-0.5 0.6-0.5 0.4-0.7 0.6-0.7 1-0.4Z",key:3}),i.createElement("path",{d:"M0 0C0 0 0 0 0 0L0.2-0.3C0.1-0.4 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5L0.2-0.5 0.2-0.4 0.4-0.5 0.4-0.5 0.4-0.5C0.4-0.5 0.4-0.5 0.5-0.5 0.4-0.5 0.4-0.4 0.4-0.4 0.4-0.4 0.3-0.3 0.3-0.3L0.4-0.1C0.4-0.1 0.4-0.1 0.3-0.1L0.4-0.1C0.4 0 0.3 0 0.3 0 0.3 0 0.3-0.1 0.2-0.2L0.1 0C0.1 0.1 0.1 0.1 0 0.1 0 0.1 0 0.1 0 0 0 0 0 0 0 0 0 0 0 0 0 0Z",key:4}),i.createElement("path",{d:"M0.1 0C0.1 0 0.1 0 0-0.1 0-0.1 0-0.2 0-0.2 0-0.3 0-0.3 0-0.3 0.1-0.4 0.1-0.4 0.1-0.4 0.1-0.4 0.2-0.4 0.2-0.3L0.2-0.2C0.2-0.2 0.2-0.2 0.2-0.2L0.6-0.5C0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.5 0.6-0.5L0.6-0.5C0.6-0.5 0.6-0.4 0.6-0.4L0.2 0C0.2 0 0.2 0 0.1 0Z",key:5}),i.createElement("path",{d:"M0.4 0C0.3 0 0.2 0 0.2-0.1 0.1-0.1 0.1-0.2 0.1-0.3 0.1-0.4 0.1-0.4 0.2-0.5 0.2-0.6 0.3-0.6 0.4-0.6 0.5-0.6 0.6-0.6 0.6-0.5 0.7-0.4 0.7-0.4 0.7-0.3 0.7-0.2 0.7-0.1 0.6-0.1 0.6 0 0.5 0 0.4 0Z",key:6}),i.createElement("path",{d:"M0.2-0.2C0.1-0.2 0.1-0.2 0.1-0.3 0-0.3 0-0.3 0-0.4 0-0.4 0-0.4 0.1-0.4 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.3 0.3-0.3 0.3-0.3 0.2-0.2 0.2-0.2 0.2-0.2Z",key:7}),i.createElement("path",{d:"M0-0.2L0.6-0.2 0.6-0.3 0-0.3 0-0.2Z",key:8})]),i.createElement("defs",{className:"TextEmbeddedBitmaps",key:3}),i.createElement("g",{className:"SlideGroup",key:4},i.createElement("g",{className:"Slide",clipPath:"url(#presentation_clip_path)"},i.createElement("g",{className:"Page"},i.createElement("g",{className:"com.sun.star.drawing.ClosedBezierShape"},[i.createElement("rect",{className:"BoundingBox",x:"1000",y:"1000",width:"5082",height:"6301",fill:"none",key:0}),i.createElement("path",{d:"M1655 2259L5444 2259 6080 2890 6080 3520 5233 3520 5233 3099 1847 3099 1847 3918 1847 4758 1847 5619 1847 6459 5233 6459 5233 5619 4809 5619 4809 4989 6080 4989 6080 6669 5444 7299 1635 7299 1000 6669 1000 2890 1655 2259ZM3116 6459L3116 4569 3963 4569 3963 6459 3116 6459ZM3540 3520C3780 3520 3963 3701 3963 3939 3963 4178 3780 4360 3540 4360 3300 4360 3116 4178 3116 3939 3116 3701 3300 3520 3540 3520ZM3116 3520L3116 3520ZM3964 4361L3964 4361ZM3328 2259L3328 1419 2693 1419 2693 1000 4387 1000 4387 1419 3752 1419 3752 2259 3328 2259Z",fill:"rgb(0,0,0)",key:1})]))))])}var i=n(4);r.displayName="TrambarLogo",r.defaultProps={viewBox:"1000 1000 5080 6299",preserveAspectRatio:"xMidYMid",style:{strokeLinejoin:"round",strokeWidth:"30"}},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,[i.createElement("polygon",{points:"280,653 373,679 255,840",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:0}),i.createElement("polygon",{points:"102,634 298,439 373,430 297,540 447,585 387,674 281,646 285,575",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:1}),i.createElement("polygon",{points:"312,528 386,425 431,428",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:2}),i.createElement("polygon",{points:"332,520 485,397 513,414 496,435",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:3}),i.createElement("polygon",{points:"316,534 492,443 467,467 521,509 515,543 565,587 560,592 498,549",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:4}),i.createElement("polygon",{points:"318,542 496,557 555,595 548,605",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:5}),i.createElement("polygon",{points:"550,611 574,592 599,618",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:6}),i.createElement("polygon",{points:"476,466 543,399 521,500",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:7}),i.createElement("polygon",{points:"525,524 555,392 600,427",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:8}),i.createElement("polygon",{points:"522,542 605,435 597,604",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:9}),i.createElement("polygon",{points:"613,444 743,521 685,543 775,833 554,617 605,625",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:10}),i.createElement("polygon",{points:"565,318 620,318 655,457 613,434",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:11}),i.createElement("polygon",{points:"629,310 695,204 751,184 733,267 740,508 661,462",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:12}),i.createElement("polygon",{points:"757,183 869,81 776,196",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:13}),i.createElement("polygon",{points:"743,273 755,194 848,270 853,338",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:14})])}var i=n(4);r.displayName="Unicorn",r.defaultProps={version:"1.1",viewBox:"0 0 1000 1000"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}))}var i=n(4);r.displayName="FileText",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var i=n(4);r.displayName="GitBranch",r.defaultProps={viewBox:"0 0 10 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M10 7c-.73 0-1.38.41-1.73 1.02V8C7.22 7.98 6 7.64 5.14 6.98c-.75-.58-1.5-1.61-1.89-2.44A1.993 1.993 0 0 0 2 .99C.89.99 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2a1.993 1.993 0 0 0 1-3.72V7.67c.67.7 1.44 1.27 2.3 1.69.86.42 2.03.63 2.97.64v-.02c.36.61 1 1.02 1.73 1.02 1.11 0 2-.89 2-2 0-1.11-.89-2-2-2zm-6.8 6c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm8 6c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var i=n(4);r.displayName="GitMerge",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var i=n(4);r.displayName="GitPullRequest",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M7 10h2v2H7v-2zm2-6H7v5h2V4zm1.5 1.5l-1 1L12 9l4-4.5-1-1L12 7l-1.5-1.5zM8 13.7A5.71 5.71 0 0 1 2.3 8c0-3.14 2.56-5.7 5.7-5.7 1.83 0 3.45.88 4.5 2.2l.92-.92A6.947 6.947 0 0 0 8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7l-1.52 1.52c-.66 2.41-2.86 4.19-5.48 4.19v-.01z"}))}var i=n(4);r.displayName="IssueClosed",r.defaultProps={viewBox:"0 0 16 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M8 9H6V4h2v5zm-2 3h2v-2H6v2zm6.33-2H10l1.5 1.5c-1.05 1.33-2.67 2.2-4.5 2.2A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7 2.19 0 4.13-1.02 5.41-2.59L14 14v-4h-1.67zM1.67 6H4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7 0 .34-.03.67-.09 1h1.31c.05-.33.08-.66.08-1 0-3.86-3.14-7-7-7-2.19 0-4.13 1.02-5.41 2.59L0 2v4h1.67z"}))}var i=n(4);r.displayName="IssueReopened",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M12 13c0 .59 0 1-.59 1H4.59C4 14 4 13.59 4 13c0-.59 0-1 .59-1h6.81c.59 0 .59.41.59 1H12zM4.59 4h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zm6.81 3H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1zM2 1h-.72c-.3.19-.58.25-1.03.34V2H1v2.14H.16V5H3v-.86H2V1zm.25 8.13c-.17 0-.45.03-.66.06.53-.56 1.14-1.25 1.14-1.89C2.71 6.52 2.17 6 1.37 6c-.59 0-.97.2-1.38.64l.58.58c.19-.19.38-.38.64-.38.28 0 .48.16.48.52 0 .53-.77 1.2-1.7 2.06V10h3l-.09-.88h-.66l.01.01zm-.08 3.78v-.03c.44-.19.64-.47.64-.86 0-.7-.56-1.11-1.44-1.11-.48 0-.89.19-1.28.52l.55.64c.25-.2.44-.31.69-.31.27 0 .42.13.42.36 0 .27-.2.44-.86.44v.75c.83 0 .98.17.98.47 0 .25-.23.38-.58.38-.28 0-.56-.14-.81-.38l-.48.66c.3.36.77.56 1.41.56.83 0 1.53-.41 1.53-1.16 0-.5-.31-.81-.77-.94v.01z"}))}var i=n(4);r.displayName="ListOrdered",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M2 13c0 .59 0 1-.59 1H.59C0 14 0 13.59 0 13c0-.59 0-1 .59-1h.81c.59 0 .59.41.59 1H2zm2.59-9h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zM1.41 7H.59C0 7 0 7.41 0 8c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0-5H.59C0 2 0 2.41 0 3c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm10 5H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0 5H4.59C4 12 4 12.41 4 13c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01z"}))}var i=n(4);r.displayName="ListUnordered",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M8 2H6V0h2v2zm4 5H2c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h10l2 2-2 2zM8 4H6v2h2V4zM6 16h2V8H6v8z"}))}var i=n(4);r.displayName="Milestone",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M3 10h4V9H3v1zm0-2h6V7H3v1zm0-2h8V5H3v1zm10 6H1V3h12v9zM1 2c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1H1z"}))}var i=n(4);r.displayName="Note",r.defaultProps={viewBox:"0 0 14 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M4 3H3V2h1v1zM3 5h1V4H3v1zm4 0L4 9h2v7h2V9h2L7 5zm4-5H1C.45 0 0 .45 0 1v12c0 .55.45 1 1 1h4v-1H1v-2h4v-1H2V1h9.02L11 10H9v1h2v2H9v1h2c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"}))}var i=n(4);r.displayName="RepoPush",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}))}var i=n(4);r.displayName="Repo",r.defaultProps={viewBox:"0 0 12 16"},e.exports=r,r.default=r},function(e,t,n){"use strict";e.exports=2147483647},function(e,t,n){"use strict";var r=n(63),i=n(833);e.exports=function(e){if((e=r(e))>i)throw new TypeError(e+" exceeds maximum possible timeout");return e}}]);